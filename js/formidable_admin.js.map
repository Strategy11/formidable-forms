{"version":3,"file":"formidable_admin.js","mappings":";;;;;;;;;;;;;;;;AAAsC;AACE;;AAExC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,YAAY,aAAa,oBAAoB,MAAM;AACnD;AACe;AACf,aAAa,2DAAO;;AAEpB;AACA,SAAS,4DAAQ;AACjB;AACA;;;;;;;;;;;;;;;;AC5BA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,UAAU;AACrB;AACA,YAAY,GAAG;AACf;AACe;AACf;AACA;;AAEA,cAAc,oBAAoB;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;AC7GsC;;AAEtC;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,YAAY,UAAU;AACtB;AACe;AACf,gBAAgB,2DAAO;;AAEvB;AACA,sBAAsB,OAAO;AAC7B;AACA;;;;;;;;;;;;;;;;ACjBA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,YAAY,UAAU;AACtB;AACe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;AC3HA;AACA;AACA;AACuD;AACF;AACrD;AACA;AACA;AACA;AACA;AACA,WAAW,sBAAsB;AACjC,WAAW,sBAAsB;AACjC,WAAW,sBAAsB;AACjC,WAAW,sBAAsB;AACjC;;AAEA;AACA;AACA;AACA,YAAY,sBAAsB;AAClC,YAAY,sBAAsB;AAClC;AACA,YAAY,SAAS;AACrB;;AAEA;AACA;AACA;AACA;;AAEA,SAAS,gEAAgB;AACzB;AACA;;AAEA,SAAS,iEAAiB;AAC1B;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;;;AAGN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,QAAQ;;AAEzB;;AAEA,gCAAgC,OAAO;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA,kBAAkB;AAClB;;;AAGA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iEAAe,aAAa,EAAC;AAC7B;;;;;;;;;;;;;;;ACtGA;AACA;AACA;AACA;AACA;AACA,YA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DAAiD,mFAAmF,OAAO;;AAEtgB;AACA;AACA;AAC4B;AAC5B;AACA,aAAa,oBAAoB;AACjC;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;;AAEA;AACA;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,iCAAiC;AAC9C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,8CAA8C;AAC3D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,8CAA8C;AAC3D;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc,YAAY;;AAE1B,cAAc,YAAY;;AAE1B;AACA,aAAa,sDAAsD;AACnE;AACA;AACA;;AAEA;AACA,aAAa,6BAA6B;AAC1C;AACA;;AAEA;AACA,aAAa,2CAA2C;AACxD;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,4DAA4D;AACzE;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,6EAA6E;AAC1F;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,8FAA8F;AAC3G;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,eAAe;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,gEAAgE;AAC7E;AACA;AACA;;AAEA,cAAc,kCAAkC;;AAEhD;AACA;AACA;AACA;AACA,cAAc,eAAe;AAC7B,cAAc,eAAe;AAC7B;AACA,cAAc,iBAAiB;AAC/B;AACA,cAAc,WAAW;AACzB,cAAc,IAAI;AAClB,cAAc,IAAI;AAClB,cAAc,IAAI;AAClB;AACA,cAAc,KAAK;AACnB;AACA,cAAc,OAAO;AACrB,cAAc,gBAAgB;AAC9B;;AAEA;AACA;AACA;AACA,WAAW,YAAY;AACvB,WAAW,YAAY;AACvB,WAAW,OAAO;AAClB,YAAY,4BAA4B;AACxC;;AAEO;AACP;AACA;AACA;AACA,YAAY;AACZ;AACA,mBAAmB,8CAAM,GAAG;AAC5B;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,aAAa,m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cAAc,QAAQ;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc,4BAA4B;AAC1C,cAAc,4BAA4B;AAC1C,cAAc,4BAA4B;AAC1C;AACA,cAAc,4BAA4B;AAC1C;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc,UAAU;AACxB;;AAEA;AACA;AACA;AACA;AACA,cAAc,UAAU;AACxB;AACA,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B;AACA,YAAY,4BAA4B;AACxC;AACA;AACA;;AAEA,YAAY,4BAA4B;AACxC;;AAEA,YAAY,4BAA4B;AACxC;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,eAAe,SAAS;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA,2BAA2B,eAAe;AAC1C,qBAAqB,iBAAiB;AACtC,cAAc,iBAAiB;AAC/B,IAAI;AACJ;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,MAAM,KAA+B,GAAG,EAMtC;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;;ACtKA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,EAAE;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,gCAAgC,oBAAoB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA,uBAAuB;AACvB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ,IAA8B;AACtC,QAAQ,eAAkB;AAC1B,QAAQ,gBAAmB;AAC3B;AACA;AACA;AACA;;AAEA,YAAY,IAA6C;AACzD,YAAY,mCAAO;AACnB;AACA;AACA;AACA;AACA,aAAa;AAAA,kGAAC;AACd;AACA;AACA;AACA,CAAC,IAAI;;;;;;;;;;;;;;;;;ACtO0C;;AAE/C;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA,cAAc,UAAU;AACxB,cAAc,UAAU;AACxB;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA,cAAc,mBAAmB;AACjC,cAAc,mBAAmB;AACjC,cAAc,mBAAmB;AACjC;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc,gGAAgG;AAC9G;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc,qCAAqC;AACnD;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,gBAAgB;AACrD;AACA;AACA,WAAW,QAAQ;AACnB;AACA,YAAY,QAAQ;AACpB;AACA;AACA;;AAEA,qBAAqB;;AAErB,cAAc,kBAAkB;AAChC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,kBAAkB;AAC7B,WAAW,kBAAkB;AAC7B;AACe;AACf;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA,YAAY,QAAQ;AACpB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,gEAAW;AACnB;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB,WAAW,aAAa;AACxB;AACA,WAAW,aAAa;AACxB;AACA,YAAY,QAAQ;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACpNA;AACA;AACA,gCAAgC,OAAO;AACvC;AACA;;;;;;;;;;;;;;;;;ACJqD;AACrD;AACA,+BAA+B,gEAAgB;A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","sources":["webpack://formidable/./node_modules/@tannin/compile/index.js","webpack://formidable/./node_modules/@tannin/evaluate/index.js","webpack://formidable/./node_modules/@tannin/plural-forms/index.js","webpack://formidable/./node_modules/@tannin/postfix/index.js","webpack://formidable/./node_modules/@wordpress/hooks/build-module/createAddHook.js","webpack://formidable/./node_modules/@wordpress/hooks/build-module/createCurrentHook.js","webpack://formidable/./node_modules/@wordpress/hooks/build-module/createDidHook.js","webpack://formidable/./node_modules/@wordpress/hooks/build-module/createDoingHook.js","webpack://formidable/./node_modules/@wordpress/hooks/build-module/createHasHook.js","webpack://formidable/./node_modules/@wordpress/hooks/build-module/createHooks.js","webpack://formidable/./node_modules/@wordpress/hooks/build-module/createRemoveHook.js","webpack://formidable/./node_modules/@wordpress/hooks/build-module/createRunHook.js","webpack://formidable/./node_modules/@wordpress/hooks/build-module/index.js","webpack://formidable/./node_modules/@wordpress/hooks/build-module/validateHookName.js","webpack://formidable/./node_modules/@wordpress/hooks/build-module/validateNamespace.js","webpack://formidable/./node_modules/@wordpress/i18n/build-module/create-i18n.js","webpack://formidable/./node_modules/@wordpress/i18n/build-module/default-i18n.js","webpack://formidable/./node_modules/@wordpress/i18n/build-module/index.js","webpack://formidable/./node_modules/@wordpress/i18n/build-module/sprintf.js","webpack://formidable/./js/src/admin/addon-state.js","webpack://formidable/./js/src/admin/upgrade-popup.js","webpack://formidable/./node_modules/memize/index.js","webpack://formidable/./node_modules/sprintf-js/src/sprintf.js","webpack://formidable/./node_modules/tannin/index.js","webpack://formidable/./node_modules/@wordpress/hooks/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://formidable/./node_modules/@wordpress/hooks/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://formidable/./node_modules/@wordpress/hooks/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://formidable/./node_modules/@wordpress/hooks/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://formidable/./node_modules/@wordpress/hooks/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://formidable/./node_modules/@wordpress/hooks/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack://formidable/./node_modules/@wordpress/hooks/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://formidable/./node_modules/@wordpress/i18n/node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://formidable/./node_modules/@wordpress/i18n/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://formidable/./node_modules/@wordpress/i18n/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://formidable/./node_modules/@wordpress/i18n/node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://formidable/webpack/bootstrap","webpack://formidable/webpack/runtime/compat get default export","webpack://formidable/webpack/runtime/define property getters","webpack://formidable/webpack/runtime/hasOwnProperty shorthand","webpack://formidable/webpack/runtime/make namespace object","webpack://formidable/./js/src/admin/admin.js"],"sourcesContent":["import postfix from '@tannin/postfix';\nimport evaluate from '@tannin/evaluate';\n\n/**\n * Given a C expression, returns a function which can be called to evaluate its\n * result.\n *\n * @example\n *\n * ```js\n * import compile from '@tannin/compile';\n *\n * const evaluate = compile( 'n > 1' );\n *\n * evaluate( { n: 2 } );\n * //  true\n * ```\n *\n * @param {string} expression C expression.\n *\n * @return {(variables?:{[variable:string]:*})=>*} Compiled evaluator.\n */\nexport default function compile( expression ) {\n\tvar terms = postfix( expression );\n\n\treturn function( variables ) {\n\t\treturn evaluate( terms, variables );\n\t};\n}\n","/**\n * Operator callback functions.\n *\n * @type {Object}\n */\nvar OPERATORS = {\n\t'!': function( a ) {\n\t\treturn ! a;\n\t},\n\t'*': function( a, b ) {\n\t\treturn a * b;\n\t},\n\t'/': function( a, b ) {\n\t\treturn a / b;\n\t},\n\t'%': function( a, b ) {\n\t\treturn a % b;\n\t},\n\t'+': function( a, b ) {\n\t\treturn a + b;\n\t},\n\t'-': function( a, b ) {\n\t\treturn a - b;\n\t},\n\t'<': function( a, b ) {\n\t\treturn a < b;\n\t},\n\t'<=': function( a, b ) {\n\t\treturn a <= b;\n\t},\n\t'>': function( a, b ) {\n\t\treturn a > b;\n\t},\n\t'>=': function( a, b ) {\n\t\treturn a >= b;\n\t},\n\t'==': function( a, b ) {\n\t\treturn a === b;\n\t},\n\t'!=': function( a, b ) {\n\t\treturn a !== b;\n\t},\n\t'&&': function( a, b ) {\n\t\treturn a && b;\n\t},\n\t'||': function( a, b ) {\n\t\treturn a || b;\n\t},\n\t'?:': function( a, b, c ) {\n\t\tif ( a ) {\n\t\t\tthrow b;\n\t\t}\n\n\t\treturn c;\n\t},\n};\n\n/**\n * Given an array of postfix terms and operand variables, returns the result of\n * the postfix evaluation.\n *\n * @example\n *\n * ```js\n * import evaluate from '@tannin/evaluate';\n *\n * // 3 + 4 * 5 / 6  '3 4 5 * 6 / +'\n * const terms = [ '3', '4', '5', '*', '6', '/', '+' ];\n *\n * evaluate( terms, {} );\n * //  6.333333333333334\n * ```\n *\n * @param {string[]} postfix   Postfix terms.\n * @param {Object}   variables Operand variables.\n *\n * @return {*} Result of evaluation.\n */\nexport default function evaluate( postfix, variables ) {\n\tvar stack = [],\n\t\ti, j, args, getOperatorResult, term, value;\n\n\tfor ( i = 0; i < postfix.length; i++ ) {\n\t\tterm = postfix[ i ];\n\n\t\tgetOperatorResult = OPERATORS[ term ];\n\t\tif ( getOperatorResult ) {\n\t\t\t// Pop from stack by number of function arguments.\n\t\t\tj = getOperatorResult.length;\n\t\t\targs = Array( j );\n\t\t\twhile ( j-- ) {\n\t\t\t\targs[ j ] = stack.pop();\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tvalue = getOperatorResult.apply( null, args );\n\t\t\t} catch ( earlyReturn ) {\n\t\t\t\treturn earlyReturn;\n\t\t\t}\n\t\t} else if ( variables.hasOwnProperty( term ) ) {\n\t\t\tvalue = variables[ term ];\n\t\t} else {\n\t\t\tvalue = +term;\n\t\t}\n\n\t\tstack.push( value );\n\t}\n\n\treturn stack[ 0 ];\n}\n","import compile from '@tannin/compile';\n\n/**\n * Given a C expression, returns a function which, when called with a value,\n * evaluates the result with the value assumed to be the \"n\" variable of the\n * expression. The result will be coerced to its numeric equivalent.\n *\n * @param {string} expression C expression.\n *\n * @return {Function} Evaluator function.\n */\nexport default function pluralForms( expression ) {\n\tvar evaluate = compile( expression );\n\n\treturn function( n ) {\n\t\treturn +evaluate( { n: n } );\n\t};\n}\n","var PRECEDENCE, OPENERS, TERMINATORS, PATTERN;\n\n/**\n * Operator precedence mapping.\n *\n * @type {Object}\n */\nPRECEDENCE = {\n\t'(': 9,\n\t'!': 8,\n\t'*': 7,\n\t'/': 7,\n\t'%': 7,\n\t'+': 6,\n\t'-': 6,\n\t'<': 5,\n\t'<=': 5,\n\t'>': 5,\n\t'>=': 5,\n\t'==': 4,\n\t'!=': 4,\n\t'&&': 3,\n\t'||': 2,\n\t'?': 1,\n\t'?:': 1,\n};\n\n/**\n * Characters which signal pair opening, to be terminated by terminators.\n *\n * @type {string[]}\n */\nOPENERS = [ '(', '?' ];\n\n/**\n * Characters which signal pair termination, the value an array with the\n * opener as its first member. The second member is an optional operator\n * replacement to push to the stack.\n *\n * @type {string[]}\n */\nTERMINATORS = {\n\t')': [ '(' ],\n\t':': [ '?', '?:' ],\n};\n\n/**\n * Pattern matching operators and openers.\n *\n * @type {RegExp}\n */\nPATTERN = /<=|>=|==|!=|&&|\\|\\||\\?:|\\(|!|\\*|\\/|%|\\+|-|<|>|\\?|\\)|:/;\n\n/**\n * Given a C expression, returns the equivalent postfix (Reverse Polish)\n * notation terms as an array.\n *\n * If a postfix string is desired, simply `.join( ' ' )` the result.\n *\n * @example\n *\n * ```js\n * import postfix from '@tannin/postfix';\n *\n * postfix( 'n > 1' );\n * //  [ 'n', '1', '>' ]\n * ```\n *\n * @param {string} expression C expression.\n *\n * @return {string[]} Postfix terms.\n */\nexport default function postfix( expression ) {\n\tvar terms = [],\n\t\tstack = [],\n\t\tmatch, operator, term, element;\n\n\twhile ( ( match = expression.match( PATTERN ) ) ) {\n\t\toperator = match[ 0 ];\n\n\t\t// Term is the string preceding the operator match. It may contain\n\t\t// whitespace, and may be empty (if operator is at beginning).\n\t\tterm = expression.substr( 0, match.index ).trim();\n\t\tif ( term ) {\n\t\t\tterms.push( term );\n\t\t}\n\n\t\twhile ( ( element = stack.pop() ) ) {\n\t\t\tif ( TERMINATORS[ operator ] ) {\n\t\t\t\tif ( TERMINATORS[ operator ][ 0 ] === element ) {\n\t\t\t\t\t// Substitution works here under assumption that because\n\t\t\t\t\t// the assigned operator will no longer be a terminator, it\n\t\t\t\t\t// will be pushed to the stack during the condition below.\n\t\t\t\t\toperator = TERMINATORS[ operator ][ 1 ] || operator;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if ( OPENERS.indexOf( element ) >= 0 || PRECEDENCE[ element ] < PRECEDENCE[ operator ] ) {\n\t\t\t\t// Push to stack if either an opener or when pop reveals an\n\t\t\t\t// element of lower precedence.\n\t\t\t\tstack.push( element );\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// For each popped from stack, push to terms.\n\t\t\tterms.push( element );\n\t\t}\n\n\t\tif ( ! TERMINATORS[ operator ] ) {\n\t\t\tstack.push( operator );\n\t\t}\n\n\t\t// Slice matched fragment from expression to continue match.\n\t\texpression = expression.substr( match.index + operator.length );\n\t}\n\n\t// Push remainder of operand, if exists, to terms.\n\texpression = expression.trim();\n\tif ( expression ) {\n\t\tterms.push( expression );\n\t}\n\n\t// Pop remaining items from stack into terms.\n\treturn terms.concat( stack.reverse() );\n}\n","/**\n * Internal dependencies\n */\nimport validateNamespace from './validateNamespace.js';\nimport validateHookName from './validateHookName.js';\n/**\n * @callback AddHook\n *\n * Adds the hook to the appropriate hooks container.\n *\n * @param {string}               hookName  Name of hook to add\n * @param {string}               namespace The unique namespace identifying the callback in the form `vendor/plugin/function`.\n * @param {import('.').Callback} callback  Function to call when the hook is run\n * @param {number}               [priority=10]  Priority of this hook\n */\n\n/**\n * Returns a function which, when invoked, will add a hook.\n *\n * @param  {import('.').Hooks}    hooks Hooks instance.\n * @param  {import('.').StoreKey} storeKey\n *\n * @return {AddHook} Function that adds a new hook.\n */\n\nfunction createAddHook(hooks, storeKey) {\n  return function addHook(hookName, namespace, callback) {\n    var priority = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 10;\n    var hooksStore = hooks[storeKey];\n\n    if (!validateHookName(hookName)) {\n      return;\n    }\n\n    if (!validateNamespace(namespace)) {\n      return;\n    }\n\n    if ('function' !== typeof callback) {\n      // eslint-disable-next-line no-console\n      console.error('The hook callback must be a function.');\n      return;\n    } // Validate numeric priority\n\n\n    if ('number' !== typeof priority) {\n      // eslint-disable-next-line no-console\n      console.error('If specified, the hook priority must be a number.');\n      return;\n    }\n\n    var handler = {\n      callback: callback,\n      priority: priority,\n      namespace: namespace\n    };\n\n    if (hooksStore[hookName]) {\n      // Find the correct insert index of the new hook.\n      var handlers = hooksStore[hookName].handlers;\n      /** @type {number} */\n\n      var i;\n\n      for (i = handlers.length; i > 0; i--) {\n        if (priority >= handlers[i - 1].priority) {\n          break;\n        }\n      }\n\n      if (i === handlers.length) {\n        // If append, operate via direct assignment.\n        handlers[i] = handler;\n      } else {\n        // Otherwise, insert before index via splice.\n        handlers.splice(i, 0, handler);\n      } // We may also be currently executing this hook.  If the callback\n      // we're adding would come after the current callback, there's no\n      // problem; otherwise we need to increase the execution index of\n      // any other runs by 1 to account for the added element.\n\n\n      hooksStore.__current.forEach(function (hookInfo) {\n        if (hookInfo.name === hookName && hookInfo.currentIndex >= i) {\n          hookInfo.currentIndex++;\n        }\n      });\n    } else {\n      // This is the first hook of its type.\n      hooksStore[hookName] = {\n        handlers: [handler],\n        runs: 0\n      };\n    }\n\n    if (hookName !== 'hookAdded') {\n      hooks.doAction('hookAdded', hookName, namespace, callback, priority);\n    }\n  };\n}\n\nexport default createAddHook;\n//# sourceMappingURL=createAddHook.js.map","/**\n * Returns a function which, when invoked, will return the name of the\n * currently running hook, or `null` if no hook of the given type is currently\n * running.\n *\n * @param  {import('.').Hooks}    hooks Hooks instance.\n * @param  {import('.').StoreKey} storeKey\n *\n * @return {() => string | null} Function that returns the current hook name or null.\n */\nfunction createCurrentHook(hooks, storeKey) {\n  return function currentHook() {\n    var _hooksStore$__current, _hooksStore$__current2;\n\n    var hooksStore = hooks[storeKey];\n    return (_hooksStore$__current = (_hooksStore$__current2 = hooksStore.__current[hooksStore.__current.length - 1]) === null || _hooksStore$__current2 === void 0 ? void 0 : _hooksStore$__current2.name) !== null && _hooksStore$__current !== void 0 ? _hooksStore$__current : null;\n  };\n}\n\nexport default createCurrentHook;\n//# sourceMappingURL=createCurrentHook.js.map","/**\n * Internal dependencies\n */\nimport validateHookName from './validateHookName.js';\n/**\n * @callback DidHook\n *\n * Returns the number of times an action has been fired.\n *\n * @param  {string} hookName The hook name to check.\n *\n * @return {number | undefined} The number of times the hook has run.\n */\n\n/**\n * Returns a function which, when invoked, will return the number of times a\n * hook has been called.\n *\n * @param  {import('.').Hooks}    hooks Hooks instance.\n * @param  {import('.').StoreKey} storeKey\n *\n * @return {DidHook} Function that returns a hook's call count.\n */\n\nfunction createDidHook(hooks, storeKey) {\n  return function didHook(hookName) {\n    var hooksStore = hooks[storeKey];\n\n    if (!validateHookName(hookName)) {\n      return;\n    }\n\n    return hooksStore[hookName] && hooksStore[hookName].runs ? hooksStore[hookName].runs : 0;\n  };\n}\n\nexport default createDidHook;\n//# sourceMappingURL=createDidHook.js.map","/**\n * @callback DoingHook\n * Returns whether a hook is currently being executed.\n *\n * @param  {string} [hookName] The name of the hook to check for.  If\n *                             omitted, will check for any hook being executed.\n *\n * @return {boolean} Whether the hook is being executed.\n */\n\n/**\n * Returns a function which, when invoked, will return whether a hook is\n * currently being executed.\n *\n * @param  {import('.').Hooks}    hooks Hooks instance.\n * @param  {import('.').StoreKey} storeKey\n *\n * @return {DoingHook} Function that returns whether a hook is currently\n *                     being executed.\n */\nfunction createDoingHook(hooks, storeKey) {\n  return function doingHook(hookName) {\n    var hooksStore = hooks[storeKey]; // If the hookName was not passed, check for any current hook.\n\n    if ('undefined' === typeof hookName) {\n      return 'undefined' !== typeof hooksStore.__current[0];\n    } // Return the __current hook.\n\n\n    return hooksStore.__current[0] ? hookName === hooksStore.__current[0].name : false;\n  };\n}\n\nexport default createDoingHook;\n//# sourceMappingURL=createDoingHook.js.map","/**\n * @callback HasHook\n *\n * Returns whether any handlers are attached for the given hookName and optional namespace.\n *\n * @param {string} hookName    The name of the hook to check for.\n * @param {string} [namespace] Optional. The unique namespace identifying the callback\n *                             in the form `vendor/plugin/function`.\n *\n * @return {boolean} Whether there are handlers that are attached to the given hook.\n */\n\n/**\n * Returns a function which, when invoked, will return whether any handlers are\n * attached to a particular hook.\n *\n * @param  {import('.').Hooks}    hooks Hooks instance.\n * @param  {import('.').StoreKey} storeKey\n *\n * @return {HasHook} Function that returns whether any handlers are\n *                   attached to a particular hook and optional namespace.\n */\nfunction createHasHook(hooks, storeKey) {\n  return function hasHook(hookName, namespace) {\n    var hooksStore = hooks[storeKey]; // Use the namespace if provided.\n\n    if ('undefined' !== typeof namespace) {\n      return hookName in hooksStore && hooksStore[hookName].handlers.some(function (hook) {\n        return hook.namespace === namespace;\n      });\n    }\n\n    return hookName in hooksStore;\n  };\n}\n\nexport default createHasHook;\n//# sourceMappingURL=createHasHook.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\n\n/**\n * Internal dependencies\n */\nimport createAddHook from './createAddHook';\nimport createRemoveHook from './createRemoveHook';\nimport createHasHook from './createHasHook';\nimport createRunHook from './createRunHook';\nimport createCurrentHook from './createCurrentHook';\nimport createDoingHook from './createDoingHook';\nimport createDidHook from './createDidHook';\n/**\n * Internal class for constructing hooks. Use `createHooks()` function\n *\n * Note, it is necessary to expose this class to make its type public.\n *\n * @private\n */\n\nexport var _Hooks = function _Hooks() {\n  _classCallCheck(this, _Hooks);\n\n  /** @type {import('.').Store} actions */\n  this.actions = Object.create(null);\n  this.actions.__current = [];\n  /** @type {import('.').Store} filters */\n\n  this.filters = Object.create(null);\n  this.filters.__current = [];\n  this.addAction = createAddHook(this, 'actions');\n  this.addFilter = createAddHook(this, 'filters');\n  this.removeAction = createRemoveHook(this, 'actions');\n  this.removeFilter = createRemoveHook(this, 'filters');\n  this.hasAction = createHasHook(this, 'actions');\n  this.hasFilter = createHasHook(this, 'filters');\n  this.removeAllActions = createRemoveHook(this, 'actions', true);\n  this.removeAllFilters = createRemoveHook(this, 'filters', true);\n  this.doAction = createRunHook(this, 'actions');\n  this.applyFilters = createRunHook(this, 'filters', true);\n  this.currentAction = createCurrentHook(this, 'actions');\n  this.currentFilter = createCurrentHook(this, 'filters');\n  this.doingAction = createDoingHook(this, 'actions');\n  this.doingFilter = createDoingHook(this, 'filters');\n  this.didAction = createDidHook(this, 'actions');\n  this.didFilter = createDidHook(this, 'filters');\n};\n/** @typedef {_Hooks} Hooks */\n\n/**\n * Returns an instance of the hooks object.\n *\n * @return {Hooks} A Hooks instance.\n */\n\nfunction createHooks() {\n  return new _Hooks();\n}\n\nexport default createHooks;\n//# sourceMappingURL=createHooks.js.map","/**\n * Internal dependencies\n */\nimport validateNamespace from './validateNamespace.js';\nimport validateHookName from './validateHookName.js';\n/**\n * @callback RemoveHook\n * Removes the specified callback (or all callbacks) from the hook with a given hookName\n * and namespace.\n *\n * @param {string} hookName  The name of the hook to modify.\n * @param {string} namespace The unique namespace identifying the callback in the\n *                           form `vendor/plugin/function`.\n *\n * @return {number | undefined} The number of callbacks removed.\n */\n\n/**\n * Returns a function which, when invoked, will remove a specified hook or all\n * hooks by the given name.\n *\n * @param  {import('.').Hooks}    hooks Hooks instance.\n * @param  {import('.').StoreKey} storeKey\n * @param  {boolean}              [removeAll=false] Whether to remove all callbacks for a hookName,\n *                                                  without regard to namespace. Used to create\n *                                                  `removeAll*` functions.\n *\n * @return {RemoveHook} Function that removes hooks.\n */\n\nfunction createRemoveHook(hooks, storeKey) {\n  var removeAll = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  return function removeHook(hookName, namespace) {\n    var hooksStore = hooks[storeKey];\n\n    if (!validateHookName(hookName)) {\n      return;\n    }\n\n    if (!removeAll && !validateNamespace(namespace)) {\n      return;\n    } // Bail if no hooks exist by this name\n\n\n    if (!hooksStore[hookName]) {\n      return 0;\n    }\n\n    var handlersRemoved = 0;\n\n    if (removeAll) {\n      handlersRemoved = hooksStore[hookName].handlers.length;\n      hooksStore[hookName] = {\n        runs: hooksStore[hookName].runs,\n        handlers: []\n      };\n    } else {\n      // Try to find the specified callback to remove.\n      var handlers = hooksStore[hookName].handlers;\n\n      var _loop = function _loop(i) {\n        if (handlers[i].namespace === namespace) {\n          handlers.splice(i, 1);\n          handlersRemoved++; // This callback may also be part of a hook that is\n          // currently executing.  If the callback we're removing\n          // comes after the current callback, there's no problem;\n          // otherwise we need to decrease the execution index of any\n          // other runs by 1 to account for the removed element.\n\n          hooksStore.__current.forEach(function (hookInfo) {\n            if (hookInfo.name === hookName && hookInfo.currentIndex >= i) {\n              hookInfo.currentIndex--;\n            }\n          });\n        }\n      };\n\n      for (var i = handlers.length - 1; i >= 0; i--) {\n        _loop(i);\n      }\n    }\n\n    if (hookName !== 'hookRemoved') {\n      hooks.doAction('hookRemoved', hookName, namespace);\n    }\n\n    return handlersRemoved;\n  };\n}\n\nexport default createRemoveHook;\n//# sourceMappingURL=createRemoveHook.js.map","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\n/**\n * Returns a function which, when invoked, will execute all callbacks\n * registered to a hook of the specified type, optionally returning the final\n * value of the call chain.\n *\n * @param  {import('.').Hooks}    hooks Hooks instance.\n * @param  {import('.').StoreKey} storeKey\n * @param  {boolean}              [returnFirstArg=false] Whether each hook callback is expected to\n *                                                       return its first argument.\n *\n * @return {(hookName:string, ...args: unknown[]) => unknown} Function that runs hook callbacks.\n */\nfunction createRunHook(hooks, storeKey) {\n  var returnFirstArg = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  return function runHooks(hookName) {\n    var hooksStore = hooks[storeKey];\n\n    if (!hooksStore[hookName]) {\n      hooksStore[hookName] = {\n        handlers: [],\n        runs: 0\n      };\n    }\n\n    hooksStore[hookName].runs++;\n    var handlers = hooksStore[hookName].handlers; // The following code is stripped from production builds.\n\n    if ('production' !== process.env.NODE_ENV) {\n      // Handle any 'all' hooks registered.\n      if ('hookAdded' !== hookName && hooksStore.all) {\n        handlers.push.apply(handlers, _toConsumableArray(hooksStore.all.handlers));\n      }\n    }\n\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (!handlers || !handlers.length) {\n      return returnFirstArg ? args[0] : undefined;\n    }\n\n    var hookInfo = {\n      name: hookName,\n      currentIndex: 0\n    };\n\n    hooksStore.__current.push(hookInfo);\n\n    while (hookInfo.currentIndex < handlers.length) {\n      var handler = handlers[hookInfo.currentIndex];\n      var result = handler.callback.apply(null, args);\n\n      if (returnFirstArg) {\n        args[0] = result;\n      }\n\n      hookInfo.currentIndex++;\n    }\n\n    hooksStore.__current.pop();\n\n    if (returnFirstArg) {\n      return args[0];\n    }\n  };\n}\n\nexport default createRunHook;\n//# sourceMappingURL=createRunHook.js.map","/**\n * Internal dependencies\n */\nimport createHooks from './createHooks';\n/** @typedef {(...args: any[])=>any} Callback */\n\n/**\n * @typedef Handler\n * @property {Callback} callback  The callback\n * @property {string}   namespace The namespace\n * @property {number}   priority  The namespace\n */\n\n/**\n * @typedef Hook\n * @property {Handler[]} handlers Array of handlers\n * @property {number}    runs     Run counter\n */\n\n/**\n * @typedef Current\n * @property {string} name         Hook name\n * @property {number} currentIndex The index\n */\n\n/**\n * @typedef {Record<string, Hook> & {__current: Current[]}} Store\n */\n\n/**\n * @typedef {'actions' | 'filters'} StoreKey\n */\n\n/**\n * @typedef {import('./createHooks').Hooks} Hooks\n */\n\nexport var defaultHooks = createHooks();\nvar addAction = defaultHooks.addAction,\n    addFilter = defaultHooks.addFilter,\n    removeAction = defaultHooks.removeAction,\n    removeFilter = defaultHooks.removeFilter,\n    hasAction = defaultHooks.hasAction,\n    hasFilter = defaultHooks.hasFilter,\n    removeAllActions = defaultHooks.removeAllActions,\n    removeAllFilters = defaultHooks.removeAllFilters,\n    doAction = defaultHooks.doAction,\n    applyFilters = defaultHooks.applyFilters,\n    currentAction = defaultHooks.currentAction,\n    currentFilter = defaultHooks.currentFilter,\n    doingAction = defaultHooks.doingAction,\n    doingFilter = defaultHooks.doingFilter,\n    didAction = defaultHooks.didAction,\n    didFilter = defaultHooks.didFilter,\n    actions = defaultHooks.actions,\n    filters = defaultHooks.filters;\nexport { createHooks, addAction, addFilter, removeAction, removeFilter, hasAction, hasFilter, removeAllActions, removeAllFilters, doAction, applyFilters, currentAction, currentFilter, doingAction, doingFilter, didAction, didFilter, actions, filters };\n//# sourceMappingURL=index.js.map","/**\n * Validate a hookName string.\n *\n * @param  {string} hookName The hook name to validate. Should be a non empty string containing\n *                           only numbers, letters, dashes, periods and underscores. Also,\n *                           the hook name cannot begin with `__`.\n *\n * @return {boolean}            Whether the hook name is valid.\n */\nfunction validateHookName(hookName) {\n  if ('string' !== typeof hookName || '' === hookName) {\n    // eslint-disable-next-line no-console\n    console.error('The hook name must be a non-empty string.');\n    return false;\n  }\n\n  if (/^__/.test(hookName)) {\n    // eslint-disable-next-line no-console\n    console.error('The hook name cannot begin with `__`.');\n    return false;\n  }\n\n  if (!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(hookName)) {\n    // eslint-disable-next-line no-console\n    console.error('The hook name can only contain numbers, letters, dashes, periods and underscores.');\n    return false;\n  }\n\n  return true;\n}\n\nexport default validateHookName;\n//# sourceMappingURL=validateHookName.js.map","/**\n * Validate a namespace string.\n *\n * @param  {string} namespace The namespace to validate - should take the form\n *                            `vendor/plugin/function`.\n *\n * @return {boolean}             Whether the namespace is valid.\n */\nfunction validateNamespace(namespace) {\n  if ('string' !== typeof namespace || '' === namespace) {\n    // eslint-disable-next-line no-console\n    console.error('The namespace must be a non-empty string.');\n    return false;\n  }\n\n  if (!/^[a-zA-Z][a-zA-Z0-9_.\\-\\/]*$/.test(namespace)) {\n    // eslint-disable-next-line no-console\n    console.error('The namespace can only contain numbers, letters, dashes, periods, underscores and slashes.');\n    return false;\n  }\n\n  return true;\n}\n\nexport default validateNamespace;\n//# sourceMappingURL=validateNamespace.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/**\n * External dependencies\n */\nimport Tannin from 'tannin';\n/**\n * @typedef {Record<string,any>} LocaleData\n */\n\n/**\n * Default locale data to use for Tannin domain when not otherwise provided.\n * Assumes an English plural forms expression.\n *\n * @type {LocaleData}\n */\n\nvar DEFAULT_LOCALE_DATA = {\n  '': {\n    /** @param {number} n */\n    plural_forms: function plural_forms(n) {\n      return n === 1 ? 0 : 1;\n    }\n  }\n};\n/*\n * Regular expression that matches i18n hooks like `i18n.gettext`, `i18n.ngettext`,\n * `i18n.gettext_domain` or `i18n.ngettext_with_context` or `i18n.has_translation`.\n */\n\nvar I18N_HOOK_REGEXP = /^i18n\\.(n?gettext|has_translation)(_|$)/;\n/**\n * @typedef {(domain?: string) => LocaleData} GetLocaleData\n *\n * Returns locale data by domain in a\n * Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n */\n\n/**\n * @typedef {(data?: LocaleData, domain?: string) => void} SetLocaleData\n *\n * Merges locale data into the Tannin instance by domain. Accepts data in a\n * Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n */\n\n/**\n * @typedef {(data?: LocaleData, domain?: string) => void} ResetLocaleData\n *\n * Resets all current Tannin instance locale data and sets the specified\n * locale data for the domain. Accepts data in a Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n */\n\n/** @typedef {() => void} SubscribeCallback */\n\n/** @typedef {() => void} UnsubscribeCallback */\n\n/**\n * @typedef {(callback: SubscribeCallback) => UnsubscribeCallback} Subscribe\n *\n * Subscribes to changes of locale data\n */\n\n/**\n * @typedef {(domain?: string) => string} GetFilterDomain\n * Retrieve the domain to use when calling domain-specific filters.\n */\n\n/**\n * @typedef {(text: string, domain?: string) => string} __\n *\n * Retrieve the translation of text.\n *\n * @see https://developer.wordpress.org/reference/functions/__/\n */\n\n/**\n * @typedef {(text: string, context: string, domain?: string) => string} _x\n *\n * Retrieve translated string with gettext context.\n *\n * @see https://developer.wordpress.org/reference/functions/_x/\n */\n\n/**\n * @typedef {(single: string, plural: string, number: number, domain?: string) => string} _n\n *\n * Translates and retrieves the singular or plural form based on the supplied\n * number.\n *\n * @see https://developer.wordpress.org/reference/functions/_n/\n */\n\n/**\n * @typedef {(single: string, plural: string, number: number, context: string, domain?: string) => string} _nx\n *\n * Translates and retrieves the singular or plural form based on the supplied\n * number, with gettext context.\n *\n * @see https://developer.wordpress.org/reference/functions/_nx/\n */\n\n/**\n * @typedef {() => boolean} IsRtl\n *\n * Check if current locale is RTL.\n *\n * **RTL (Right To Left)** is a locale property indicating that text is written from right to left.\n * For example, the `he` locale (for Hebrew) specifies right-to-left. Arabic (ar) is another common\n * language written RTL. The opposite of RTL, LTR (Left To Right) is used in other languages,\n * including English (`en`, `en-US`, `en-GB`, etc.), Spanish (`es`), and French (`fr`).\n */\n\n/**\n * @typedef {(single: string, context?: string, domain?: string) => boolean} HasTranslation\n *\n * Check if there is a translation for a given string in singular form.\n */\n\n/** @typedef {import('@wordpress/hooks').Hooks} Hooks */\n\n/**\n * An i18n instance\n *\n * @typedef I18n\n * @property {GetLocaleData} getLocaleData     Returns locale data by domain in a Jed-formatted JSON object shape.\n * @property {SetLocaleData} setLocaleData     Merges locale data into the Tannin instance by domain. Accepts data in a\n *                                             Jed-formatted JSON object shape.\n * @property {ResetLocaleData} resetLocaleData Resets all current Tannin instance locale data and sets the specified\n *                                             locale data for the domain. Accepts data in a Jed-formatted JSON object shape.\n * @property {Subscribe} subscribe             Subscribes to changes of Tannin locale data.\n * @property {__} __                           Retrieve the translation of text.\n * @property {_x} _x                           Retrieve translated string with gettext context.\n * @property {_n} _n                           Translates and retrieves the singular or plural form based on the supplied\n *                                             number.\n * @property {_nx} _nx                         Translates and retrieves the singular or plural form based on the supplied\n *                                             number, with gettext context.\n * @property {IsRtl} isRTL                     Check if current locale is RTL.\n * @property {HasTranslation} hasTranslation   Check if there is a translation for a given string.\n */\n\n/**\n * Create an i18n instance\n *\n * @param {LocaleData} [initialData]    Locale data configuration.\n * @param {string}     [initialDomain]  Domain for which configuration applies.\n * @param {Hooks} [hooks]     Hooks implementation.\n * @return {I18n}                       I18n instance\n */\n\nexport var createI18n = function createI18n(initialData, initialDomain, hooks) {\n  /**\n   * The underlying instance of Tannin to which exported functions interface.\n   *\n   * @type {Tannin}\n   */\n  var tannin = new Tannin({});\n  var listeners = new Set();\n\n  var notifyListeners = function notifyListeners() {\n    listeners.forEach(function (listener) {\n      return listener();\n    });\n  };\n  /**\n   * Subscribe to changes of locale data.\n   *\n   * @param {SubscribeCallback} callback Subscription callback.\n   * @return {UnsubscribeCallback} Unsubscribe callback.\n   */\n\n\n  var subscribe = function subscribe(callback) {\n    listeners.add(callback);\n    return function () {\n      return listeners.delete(callback);\n    };\n  };\n  /** @type {GetLocaleData} */\n\n\n  var getLocaleData = function getLocaleData() {\n    var domain = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'default';\n    return tannin.data[domain];\n  };\n  /**\n   * @param {LocaleData} [data]\n   * @param {string} [domain]\n   */\n\n\n  var doSetLocaleData = function doSetLocaleData(data) {\n    var domain = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'default';\n    tannin.data[domain] = _objectSpread(_objectSpread(_objectSpread({}, DEFAULT_LOCALE_DATA), tannin.data[domain]), data); // Populate default domain configuration (supported locale date which omits\n    // a plural forms expression).\n\n    tannin.data[domain][''] = _objectSpread(_objectSpread({}, DEFAULT_LOCALE_DATA['']), tannin.data[domain]['']);\n  };\n  /** @type {SetLocaleData} */\n\n\n  var setLocaleData = function setLocaleData(data, domain) {\n    doSetLocaleData(data, domain);\n    notifyListeners();\n  };\n  /** @type {ResetLocaleData} */\n\n\n  var resetLocaleData = function resetLocaleData(data, domain) {\n    // Reset all current Tannin locale data.\n    tannin.data = {}; // Reset cached plural forms functions cache.\n\n    tannin.pluralForms = {};\n    setLocaleData(data, domain);\n  };\n  /**\n   * Wrapper for Tannin's `dcnpgettext`. Populates default locale data if not\n   * otherwise previously assigned.\n   *\n   * @param {string|undefined} domain   Domain to retrieve the translated text.\n   * @param {string|undefined} context  Context information for the translators.\n   * @param {string}           single   Text to translate if non-plural. Used as\n   *                                    fallback return value on a caught error.\n   * @param {string}           [plural] The text to be used if the number is\n   *                                    plural.\n   * @param {number}           [number] The number to compare against to use\n   *                                    either the singular or plural form.\n   *\n   * @return {string} The translated string.\n   */\n\n\n  var dcnpgettext = function dcnpgettext() {\n    var domain = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'default';\n    var context = arguments.length > 1 ? arguments[1] : undefined;\n    var single = arguments.length > 2 ? arguments[2] : undefined;\n    var plural = arguments.length > 3 ? arguments[3] : undefined;\n    var number = arguments.length > 4 ? arguments[4] : undefined;\n\n    if (!tannin.data[domain]) {\n      // use `doSetLocaleData` to set silently, without notifying listeners\n      doSetLocaleData(undefined, domain);\n    }\n\n    return tannin.dcnpgettext(domain, context, single, plural, number);\n  };\n  /** @type {GetFilterDomain} */\n\n\n  var getFilterDomain = function getFilterDomain() {\n    var domain = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'default';\n    return domain;\n  };\n  /** @type {__} */\n\n\n  var __ = function __(text, domain) {\n    var translation = dcnpgettext(domain, undefined, text);\n\n    if (!hooks) {\n      return translation;\n    }\n    /**\n     * Filters text with its translation.\n     *\n     * @param {string} translation Translated text.\n     * @param {string} text        Text to translate.\n     * @param {string} domain      Text domain. Unique identifier for retrieving translated strings.\n     */\n\n\n    translation =\n    /** @type {string} */\n\n    /** @type {*} */\n    hooks.applyFilters('i18n.gettext', translation, text, domain);\n    return (\n      /** @type {string} */\n\n      /** @type {*} */\n      hooks.applyFilters('i18n.gettext_' + getFilterDomain(domain), translation, text, domain)\n    );\n  };\n  /** @type {_x} */\n\n\n  var _x = function _x(text, context, domain) {\n    var translation = dcnpgettext(domain, context, text);\n\n    if (!hooks) {\n      return translation;\n    }\n    /**\n     * Filters text with its translation based on context information.\n     *\n     * @param {string} translation Translated text.\n     * @param {string} text        Text to translate.\n     * @param {string} context     Context information for the translators.\n     * @param {string} domain      Text domain. Unique identifier for retrieving translated strings.\n     */\n\n\n    translation =\n    /** @type {string} */\n\n    /** @type {*} */\n    hooks.applyFilters('i18n.gettext_with_context', translation, text, context, domain);\n    return (\n      /** @type {string} */\n\n      /** @type {*} */\n      hooks.applyFilters('i18n.gettext_with_context_' + getFilterDomain(domain), translation, text, context, domain)\n    );\n  };\n  /** @type {_n} */\n\n\n  var _n = function _n(single, plural, number, domain) {\n    var translation = dcnpgettext(domain, undefined, single, plural, number);\n\n    if (!hooks) {\n      return translation;\n    }\n    /**\n     * Filters the singular or plural form of a string.\n     *\n     * @param {string} translation Translated text.\n     * @param {string} single      The text to be used if the number is singular.\n     * @param {string} plural      The text to be used if the number is plural.\n     * @param {string} number      The number to compare against to use either the singular or plural form.\n     * @param {string} domain      Text domain. Unique identifier for retrieving translated strings.\n     */\n\n\n    translation =\n    /** @type {string} */\n\n    /** @type {*} */\n    hooks.applyFilters('i18n.ngettext', translation, single, plural, number, domain);\n    return (\n      /** @type {string} */\n\n      /** @type {*} */\n      hooks.applyFilters('i18n.ngettext_' + getFilterDomain(domain), translation, single, plural, number, domain)\n    );\n  };\n  /** @type {_nx} */\n\n\n  var _nx = function _nx(single, plural, number, context, domain) {\n    var translation = dcnpgettext(domain, context, single, plural, number);\n\n    if (!hooks) {\n      return translation;\n    }\n    /**\n     * Filters the singular or plural form of a string with gettext context.\n     *\n     * @param {string} translation Translated text.\n     * @param {string} single      The text to be used if the number is singular.\n     * @param {string} plural      The text to be used if the number is plural.\n     * @param {string} number      The number to compare against to use either the singular or plural form.\n     * @param {string} context     Context information for the translators.\n     * @param {string} domain      Text domain. Unique identifier for retrieving translated strings.\n     */\n\n\n    translation =\n    /** @type {string} */\n\n    /** @type {*} */\n    hooks.applyFilters('i18n.ngettext_with_context', translation, single, plural, number, context, domain);\n    return (\n      /** @type {string} */\n\n      /** @type {*} */\n      hooks.applyFilters('i18n.ngettext_with_context_' + getFilterDomain(domain), translation, single, plural, number, context, domain)\n    );\n  };\n  /** @type {IsRtl} */\n\n\n  var isRTL = function isRTL() {\n    return 'rtl' === _x('ltr', 'text direction');\n  };\n  /** @type {HasTranslation} */\n\n\n  var hasTranslation = function hasTranslation(single, context, domain) {\n    var _tannin$data, _tannin$data2;\n\n    var key = context ? context + \"\\x04\" + single : single;\n    var result = !!((_tannin$data = tannin.data) !== null && _tannin$data !== void 0 && (_tannin$data2 = _tannin$data[domain !== null && domain !== void 0 ? domain : 'default']) !== null && _tannin$data2 !== void 0 && _tannin$data2[key]);\n\n    if (hooks) {\n      /**\n       * Filters the presence of a translation in the locale data.\n       *\n       * @param {boolean} hasTranslation Whether the translation is present or not..\n       * @param {string} single The singular form of the translated text (used as key in locale data)\n       * @param {string} context Context information for the translators.\n       * @param {string} domain Text domain. Unique identifier for retrieving translated strings.\n       */\n      result =\n      /** @type { boolean } */\n\n      /** @type {*} */\n      hooks.applyFilters('i18n.has_translation', result, single, context, domain);\n      result =\n      /** @type { boolean } */\n\n      /** @type {*} */\n      hooks.applyFilters('i18n.has_translation_' + getFilterDomain(domain), result, single, context, domain);\n    }\n\n    return result;\n  };\n\n  if (initialData) {\n    setLocaleData(initialData, initialDomain);\n  }\n\n  if (hooks) {\n    /**\n     * @param {string} hookName\n     */\n    var onHookAddedOrRemoved = function onHookAddedOrRemoved(hookName) {\n      if (I18N_HOOK_REGEXP.test(hookName)) {\n        notifyListeners();\n      }\n    };\n\n    hooks.addAction('hookAdded', 'core/i18n', onHookAddedOrRemoved);\n    hooks.addAction('hookRemoved', 'core/i18n', onHookAddedOrRemoved);\n  }\n\n  return {\n    getLocaleData: getLocaleData,\n    setLocaleData: setLocaleData,\n    resetLocaleData: resetLocaleData,\n    subscribe: subscribe,\n    __: __,\n    _x: _x,\n    _n: _n,\n    _nx: _nx,\n    isRTL: isRTL,\n    hasTranslation: hasTranslation\n  };\n};\n//# sourceMappingURL=create-i18n.js.map","/**\n * Internal dependencies\n */\nimport { createI18n } from './create-i18n';\n/**\n * WordPress dependencies\n */\n\nimport { defaultHooks } from '@wordpress/hooks';\nvar i18n = createI18n(undefined, undefined, defaultHooks);\n/**\n * Default, singleton instance of `I18n`.\n */\n\nexport default i18n;\n/*\n * Comments in this file are duplicated from ./i18n due to\n * https://github.com/WordPress/gutenberg/pull/20318#issuecomment-590837722\n */\n\n/**\n * @typedef {import('./create-i18n').LocaleData} LocaleData\n * @typedef {import('./create-i18n').SubscribeCallback} SubscribeCallback\n * @typedef {import('./create-i18n').UnsubscribeCallback} UnsubscribeCallback\n */\n\n/**\n * Returns locale data by domain in a Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n *\n * @param {string} [domain] Domain for which to get the data.\n * @return {LocaleData} Locale data.\n */\n\nexport var getLocaleData = i18n.getLocaleData.bind(i18n);\n/**\n * Merges locale data into the Tannin instance by domain. Accepts data in a\n * Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n *\n * @param {LocaleData} [data]   Locale data configuration.\n * @param {string}     [domain] Domain for which configuration applies.\n */\n\nexport var setLocaleData = i18n.setLocaleData.bind(i18n);\n/**\n * Resets all current Tannin instance locale data and sets the specified\n * locale data for the domain. Accepts data in a Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n *\n * @param {LocaleData} [data]   Locale data configuration.\n * @param {string}     [domain] Domain for which configuration applies.\n */\n\nexport var resetLocaleData = i18n.resetLocaleData.bind(i18n);\n/**\n * Subscribes to changes of locale data\n *\n * @param {SubscribeCallback} callback Subscription callback\n * @return {UnsubscribeCallback} Unsubscribe callback\n */\n\nexport var subscribe = i18n.subscribe.bind(i18n);\n/**\n * Retrieve the translation of text.\n *\n * @see https://developer.wordpress.org/reference/functions/__/\n *\n * @param {string} text     Text to translate.\n * @param {string} [domain] Domain to retrieve the translated text.\n *\n * @return {string} Translated text.\n */\n\nexport var __ = i18n.__.bind(i18n);\n/**\n * Retrieve translated string with gettext context.\n *\n * @see https://developer.wordpress.org/reference/functions/_x/\n *\n * @param {string} text     Text to translate.\n * @param {string} context  Context information for the translators.\n * @param {string} [domain] Domain to retrieve the translated text.\n *\n * @return {string} Translated context string without pipe.\n */\n\nexport var _x = i18n._x.bind(i18n);\n/**\n * Translates and retrieves the singular or plural form based on the supplied\n * number.\n *\n * @see https://developer.wordpress.org/reference/functions/_n/\n *\n * @param {string} single   The text to be used if the number is singular.\n * @param {string} plural   The text to be used if the number is plural.\n * @param {number} number   The number to compare against to use either the\n *                          singular or plural form.\n * @param {string} [domain] Domain to retrieve the translated text.\n *\n * @return {string} The translated singular or plural form.\n */\n\nexport var _n = i18n._n.bind(i18n);\n/**\n * Translates and retrieves the singular or plural form based on the supplied\n * number, with gettext context.\n *\n * @see https://developer.wordpress.org/reference/functions/_nx/\n *\n * @param {string} single   The text to be used if the number is singular.\n * @param {string} plural   The text to be used if the number is plural.\n * @param {number} number   The number to compare against to use either the\n *                          singular or plural form.\n * @param {string} context  Context information for the translators.\n * @param {string} [domain] Domain to retrieve the translated text.\n *\n * @return {string} The translated singular or plural form.\n */\n\nexport var _nx = i18n._nx.bind(i18n);\n/**\n * Check if current locale is RTL.\n *\n * **RTL (Right To Left)** is a locale property indicating that text is written from right to left.\n * For example, the `he` locale (for Hebrew) specifies right-to-left. Arabic (ar) is another common\n * language written RTL. The opposite of RTL, LTR (Left To Right) is used in other languages,\n * including English (`en`, `en-US`, `en-GB`, etc.), Spanish (`es`), and French (`fr`).\n *\n * @return {boolean} Whether locale is RTL.\n */\n\nexport var isRTL = i18n.isRTL.bind(i18n);\n/**\n * Check if there is a translation for a given string (in singular form).\n *\n * @param {string} single Singular form of the string to look up.\n * @param {string} [context] Context information for the translators.\n * @param {string} [domain] Domain to retrieve the translated text.\n * @return {boolean} Whether the translation exists or not.\n */\n\nexport var hasTranslation = i18n.hasTranslation.bind(i18n);\n//# sourceMappingURL=default-i18n.js.map","export { sprintf } from './sprintf';\nexport * from './create-i18n';\nexport { default as defaultI18n, setLocaleData, resetLocaleData, getLocaleData, subscribe, __, _x, _n, _nx, isRTL, hasTranslation } from './default-i18n';\n//# sourceMappingURL=index.js.map","/**\n * External dependencies\n */\nimport memoize from 'memize';\nimport sprintfjs from 'sprintf-js';\n/**\n * Log to console, once per message; or more precisely, per referentially equal\n * argument set. Because Jed throws errors, we log these to the console instead\n * to avoid crashing the application.\n *\n * @param {...*} args Arguments to pass to `console.error`\n */\n\nvar logErrorOnce = memoize(console.error); // eslint-disable-line no-console\n\n/**\n * Returns a formatted string. If an error occurs in applying the format, the\n * original format string is returned.\n *\n * @param {string}    format The format of the string to generate.\n * @param {...*} args Arguments to apply to the format.\n *\n * @see https://www.npmjs.com/package/sprintf-js\n *\n * @return {string} The formatted string.\n */\n\nexport function sprintf(format) {\n  try {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return sprintfjs.sprintf.apply(sprintfjs, [format].concat(args));\n  } catch (error) {\n    logErrorOnce('sprintf error: \\n\\n' + error.toString());\n    return format;\n  }\n}\n//# sourceMappingURL=sprintf.js.map","import { __ } from '@wordpress/i18n';\n\nconst { div, svg } = frmDom;\n\n/**\n * Toggles the state of an add-on (ie. enable or disable an add-on).\n *\n * @param {Element} clicked\n * @param {string}  action\n */\nexport function toggleAddonState( clicked, action ) {\n\tconst ajaxurl = window.ajaxurl ?? frm_js.ajax_url; // eslint-disable-line camelcase\n\n\t// Remove any leftover error messages, output an icon and get the plugin basename that needs to be activated.\n\tjQuery( '.frm-addon-error' ).remove();\n\tconst button = jQuery( clicked );\n\tconst plugin = button.attr( 'rel' );\n\tconst el = button.parent();\n\tconst message = el.parent().find( '.addon-status-label' );\n\n\tbutton.addClass( 'frm_loading_button' );\n\n\t// Process the Ajax to perform the activation.\n\tjQuery.ajax( {\n\t\turl: ajaxurl,\n\t\ttype: 'POST',\n\t\tasync: true,\n\t\tcache: false,\n\t\tdataType: 'json',\n\t\tdata: {\n\t\t\taction: action,\n\t\t\tnonce: frmGlobal.nonce,\n\t\t\tplugin: plugin\n\t\t},\n\t\tsuccess: function( response ) {\n\t\t\tresponse = response?.data ?? response;\n\n\t\t\tlet saveAndReload;\n\n\t\t\tif ( 'string' !== typeof response && 'string' === typeof response.message ) {\n\t\t\t\tif ( 'undefined' !== typeof response.saveAndReload ) {\n\t\t\t\t\tsaveAndReload = response.saveAndReload;\n\t\t\t\t}\n\t\t\t\tresponse = response.message;\n\t\t\t}\n\n\t\t\tconst error = extractErrorFromAddOnResponse( response );\n\t\t\tif ( error ) {\n\t\t\t\taddonError( error, el, button );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tafterAddonInstall( response, button, message, el, saveAndReload, action );\n\n\t\t\t/**\n\t\t\t * Trigger an action after successfully toggling the addon state.\n\t\t\t *\n\t\t\t * @param {Object} response\n\t\t\t */\n\t\t\twp.hooks.doAction( 'frm_update_addon_state', response );\n\t\t},\n\t\terror: function() {\n\t\t\tbutton.removeClass( 'frm_loading_button' );\n\t\t}\n\t} );\n}\n\nexport function extractErrorFromAddOnResponse( response ) {\n\tif ( typeof response !== 'string' ) {\n\t\tif ( typeof response.success !== 'undefined' && response.success ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( response.form ) {\n\t\t\tif ( jQuery( response.form ).is( '#message' ) ) {\n\t\t\t\treturn {\n\t\t\t\t\tmessage: jQuery( response.form ).find( 'p' ).html()\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn response;\n\t}\n\n\treturn false;\n}\n\nexport function afterAddonInstall( response, button, message, el, saveAndReload, action = 'frm_activate_addon' ) {\n\tconst frmAdminJs = frm_admin_js; // eslint-disable-line camelcase\n\n\tconst addonStatuses = document.querySelectorAll( '.frm-addon-status' );\n\taddonStatuses.forEach(\n\t\taddonStatus => {\n\t\t\taddonStatus.textContent = response;\n\t\t\taddonStatus.style.display = 'block';\n\t\t}\n\t);\n\n\t// The Ajax request was successful, so let's update the output.\n\tbutton.css( { opacity: '0' } );\n\n\tdocument.querySelectorAll( '.frm-oneclick' ).forEach(\n\t\toneClick => {\n\t\t\toneClick.style.display = 'none';\n\t\t}\n\t);\n\n\tshowUpgradeModalSuccess();\n\n\t// Proceed with CSS changes\n\tconst actionMap = {\n\t\tfrm_activate_addon: { class: 'frm-addon-active', message: frmAdminJs.active },\n\t\tfrm_deactivate_addon: { class: 'frm-addon-installed', message: frmAdminJs.installed },\n\t\tfrm_uninstall_addon: { class: 'frm-addon-not-installed', message: frmAdminJs.not_installed }\n\t};\n\tactionMap.frm_install_addon = actionMap.frm_activate_addon;\n\n\tconst messageElement = message[ 0 ];\n\tif ( messageElement ) {\n\t\tmessageElement.textContent = actionMap[ action ].message;\n\t}\n\n\tconst parentElement = el[ 0 ].parentElement;\n\tparentElement.classList.remove( 'frm-addon-not-installed', 'frm-addon-installed', 'frm-addon-active' );\n\tparentElement.classList.add( actionMap[ action ].class );\n\n\tconst buttonElement = button[ 0 ];\n\tbuttonElement.classList.remove( 'frm_loading_button' );\n\n\t// Maybe refresh import and SMTP pages\n\tconst refreshPage = document.querySelectorAll( '.frm-admin-page-import, #frm-admin-smtp, #frm-welcome' );\n\tif ( refreshPage.length > 0 ) {\n\t\twindow.location.reload();\n\t\treturn;\n\t}\n\n\tif ( [ 'settings', 'form_builder' ].includes( saveAndReload ) ) {\n\t\taddonStatuses.forEach(\n\t\t\taddonStatus => {\n\t\t\t\tconst inModal = null !== addonStatus.closest( '#frm_upgrade_modal' );\n\t\t\t\taddonStatus.append( getSaveAndReloadSettingsOptions( saveAndReload, inModal ) );\n\t\t\t}\n\t\t);\n\t}\n}\n\nexport function addonError( response, el, button ) {\n\tif ( response.form ) {\n\t\tjQuery( '.frm-inline-error' ).remove();\n\t\tbutton.closest( '.frm-card' )\n\t\t\t.html( response.form )\n\t\t\t.css( { padding: 5 } )\n\t\t\t.find( '#upgrade' )\n\t\t\t.attr( 'rel', button.attr( 'rel' ) )\n\t\t\t.on( 'click', installAddonWithCreds );\n\t} else {\n\t\tel.append( '<div class=\"frm-addon-error frm_error_style\"><p><strong>' + response.message + '</strong></p></div>' );\n\t\tbutton.removeClass( 'frm_loading_button' );\n\t\tjQuery( '.frm-addon-error' ).delay( 4000 ).fadeOut();\n\t}\n}\n\nfunction getSaveAndReloadSettingsOptions( saveAndReload, inModal ) {\n\tconst className = 'frm-save-and-reload-options';\n\tconst children = [ saveAndReloadSettingsButton( saveAndReload ) ];\n\tif ( inModal ) {\n\t\tchildren.push( closePopupButton() );\n\t}\n\treturn div( { className, children } );\n}\n\nfunction saveAndReloadSettingsButton( saveAndReload ) {\n\tconst button = document.createElement( 'button' );\n\tbutton.classList.add( 'frm-save-and-reload', 'button', 'button-primary', 'frm-button-primary' );\n\tbutton.textContent = __( 'Save and Reload', 'formidable' );\n\tbutton.addEventListener( 'click', () => {\n\t\tif ( saveAndReload === 'form_builder' ) {\n\t\t\tsaveAndReloadFormBuilder();\n\t\t} else if ( saveAndReload === 'settings' ) {\n\t\t\tsaveAndReloadSettings();\n\t\t}\n\t} );\n\treturn button;\n}\n\nfunction saveAndReloadSettings() {\n\tconst page = document.getElementById( 'form_settings_page' );\n\tif ( null !== page ) {\n\t\tconst form = page.querySelector( 'form.frm_form_settings' );\n\t\tif ( null !== form ) {\n\t\t\twp.hooks.doAction( 'frm_reset_fields_updated' );\n\t\t\tform.submit();\n\t\t}\n\t}\n}\n\nfunction closePopupButton() {\n\tconst a = document.createElement( 'a' );\n\ta.setAttribute( 'href', '#' );\n\ta.classList.add( 'button', 'button-secondary', 'frm-button-secondary', 'dismiss' );\n\ta.textContent = __( 'Not Now', 'formidable' );\n\treturn a;\n}\n\nfunction saveAndReloadFormBuilder() {\n\tconst submitButton = document.getElementById( 'frm_submit_side_top' );\n\tif ( submitButton.classList.contains( 'frm_submit_ajax' ) ) {\n\t\tsubmitButton.setAttribute( 'data-new-addon-installed', true );\n\t}\n\tsubmitButton.click();\n}\n\n/**\n * Updates the upgrade modal to show successful addon installation state.\n *\n * @private\n * @return {void}\n */\nfunction showUpgradeModalSuccess() {\n\tconst upgradeModal = document.getElementById( 'frm_upgrade_modal' );\n\tif ( ! upgradeModal ) {\n\t\treturn;\n\t}\n\n\tupgradeModal.classList.add( 'frm-success' );\n\n\tconst upgradeMessage = upgradeModal.querySelector( '.frm-upgrade-message' );\n\tif ( upgradeMessage ) {\n\t\tconst image = upgradeMessage.querySelector( 'img' );\n\t\tupgradeMessage.replaceChildren(\n\t\t\t__( 'Great! Everything\\'s ready to go!', 'formidable' ),\n\t\t\tdocument.createElement( 'br' ),\n\t\t\t__( 'You just need to refresh the builder so the new field becomes available.', 'formidable' )\n\t\t);\n\t\tif ( image ) {\n\t\t\tupgradeMessage.append( image );\n\t\t}\n\t}\n\n\tconst frmAddonStatus = document.querySelector( '.frm-addon-status' );\n\tif ( frmAddonStatus ) {\n\t\tfrmAddonStatus.textContent = '';\n\t}\n\n\tconst circledIcon = upgradeModal.querySelector( '.frm-circled-icon' );\n\tif ( circledIcon ) {\n\t\tcircledIcon.classList.add( 'frm-circled-icon-green' );\n\t\tcircledIcon.querySelector( 'svg' )?.replaceWith( svg( { href: '#frm_checkmark_icon' } ) );\n\t}\n}\n","import { __ } from '@wordpress/i18n';\n\nconst { svg } = frmDom;\n\nfunction getShowLinkHrefValue( link, showLink ) {\n\tlet customLink = link.getAttribute( 'data-link' );\n\tif ( customLink === null || typeof customLink === 'undefined' || customLink === '' ) {\n\t\tcustomLink = showLink.getAttribute( 'data-default' );\n\t}\n\treturn customLink;\n}\n\n/**\n * Allow addons to be installed from the upgrade modal.\n *\n * @param {Element}          link\n * @param {string}           context      Either 'modal' or 'tab'.\n * @param {string|undefined} upgradeLabel\n */\nexport function addOneClick( link, context, upgradeLabel ) {\n\tlet container;\n\tif ( 'modal' === context ) {\n\t\tcontainer = document.getElementById( 'frm_upgrade_modal' );\n\t} else if ( 'tab' === context ) {\n\t\tcontainer = document.getElementById( link.getAttribute( 'href' ).substr( 1 ) );\n\t} else {\n\t\treturn;\n\t}\n\n\tconst oneclickMessage = container.querySelector( '.frm-oneclick' );\n\tconst upgradeMessage = container.querySelector( '.frm-upgrade-message' );\n\tconst showLink = container.querySelector( '.frm-upgrade-link' );\n\tconst button = container.querySelector( '.frm-oneclick-button' );\n\tconst addonStatus = container.querySelector( '.frm-addon-status' );\n\n\tlet oneclick = link.getAttribute( 'data-oneclick' );\n\tlet newMessage = link.getAttribute( 'data-message' );\n\tlet showIt = 'block';\n\tlet showMsg = 'block';\n\tlet hideIt = 'none';\n\n\tconst modalIconWrapper = container.querySelector( '.frm-circled-icon' );\n\tif ( modalIconWrapper ) {\n\t\tmodalIconWrapper.classList.remove( 'frm-circled-icon-green' );\n\t\tmodalIconWrapper.querySelector( 'svg' )?.replaceWith( svg( { href: '#frm_filled_lock_icon' } ) );\n\t}\n\n\tconst learnMoreLink = container.querySelector( '.frm-learn-more' );\n\tif ( learnMoreLink ) {\n\t\tlearnMoreLink.href = link.dataset.learnMore;\n\t}\n\n\t// If one click upgrade, hide other content.\n\tif ( oneclickMessage !== null && typeof oneclick !== 'undefined' && oneclick ) {\n\t\tif ( newMessage === null ) {\n\t\t\tshowMsg = 'none';\n\t\t}\n\t\tshowIt = 'none';\n\t\thideIt = 'block';\n\t\toneclick = JSON.parse( oneclick );\n\n\t\tbutton.className = button.className.replace( ' frm-install-addon', '' ).replace( ' frm-activate-addon', '' );\n\t\tbutton.className = button.className + ' ' + oneclick.class;\n\t\tbutton.rel = oneclick.url;\n\n\t\toneclickMessage.textContent = __( 'This plugin is not activated. Would you like to activate it now?', 'formidable' );\n\t\tbutton.textContent = __( 'Activate', 'formidable' );\n\n\t\tconst linkIcon = link.querySelector( 'use' );\n\t\tif ( linkIcon ) {\n\t\t\tmodalIconWrapper?.querySelector( 'svg' ).replaceWith(\n\t\t\t\tsvg( {\n\t\t\t\t\thref: linkIcon.getAttribute( 'href' ) || linkIcon.getAttribute( 'xlink:href' ), // Get the icon from xlink:href if it has not been updated to use href\n\t\t\t\t\tclassList: [ 'frm_svg32' ]\n\t\t\t\t} )\n\t\t\t);\n\t\t}\n\t}\n\n\tif ( ! newMessage ) {\n\t\tnewMessage = upgradeMessage.getAttribute( 'data-default' );\n\t}\n\tif ( undefined !== upgradeLabel ) {\n\t\tnewMessage = newMessage.replace( '<span class=\"frm_feature_label\"></span>', upgradeLabel );\n\t}\n\n\tupgradeMessage.innerHTML = newMessage;\n\n\tif ( link.dataset.upsellImage ) {\n\t\tupgradeMessage.append(\n\t\t\tfrmDom.img( {\n\t\t\t\tsrc: link.dataset.upsellImage,\n\t\t\t\talt: link.dataset.upgrade\n\t\t\t} )\n\t\t);\n\t}\n\n\t// Either set the link or use the default.\n\tshowLink.href = getShowLinkHrefValue( link, showLink );\n\n\taddonStatus.style.display = 'none';\n\n\toneclickMessage.style.display = hideIt;\n\tbutton.style.display = hideIt === 'block' ? 'inline-block' : hideIt;\n\tupgradeMessage.style.display = showMsg;\n\tshowLink.style.display = showIt === 'block' ? 'inline-block' : showIt;\n\n\tconst showLinkParent = showLink.closest( '.frm-upgrade-modal-actions' );\n\tif ( showLinkParent ) {\n\t\tshowLinkParent.style.display = showIt === 'block' ? 'flex' : showIt;\n\t}\n}\n\nexport function initModal( id, width ) {\n\tconst $info = jQuery( id );\n\tif ( ! $info.length ) {\n\t\treturn false;\n\t}\n\n\tif ( typeof width === 'undefined' ) {\n\t\twidth = '552px';\n\t}\n\n\tconst dialogArgs = {\n\t\tdialogClass: 'frm-dialog',\n\t\tmodal: true,\n\t\tautoOpen: false,\n\t\tcloseOnEscape: true,\n\t\twidth: width,\n\t\tresizable: false,\n\t\tdraggable: false,\n\t\topen: function() {\n\t\t\tjQuery( '.ui-dialog-titlebar' ).addClass( 'frm_hidden' ).removeClass( 'ui-helper-clearfix' );\n\t\t\tjQuery( '#wpwrap' ).addClass( 'frm_overlay' );\n\t\t\tjQuery( '.frm-dialog' ).removeClass( 'ui-widget ui-widget-content ui-corner-all' );\n\t\t\t$info.removeClass( 'ui-dialog-content ui-widget-content' );\n\t\t\tbindClickForDialogClose( $info );\n\t\t},\n\t\tclose: function() {\n\t\t\tjQuery( '#wpwrap' ).removeClass( 'frm_overlay' );\n\t\t\tjQuery( '.spinner' ).css( 'visibility', 'hidden' );\n\n\t\t\tthis.removeAttribute( 'data-option-type' );\n\t\t\tconst optionType = document.getElementById( 'bulk-option-type' );\n\t\t\tif ( optionType ) {\n\t\t\t\toptionType.value = '';\n\t\t\t}\n\t\t}\n\t};\n\n\t$info.dialog( dialogArgs );\n\n\treturn $info;\n}\n\nfunction bindClickForDialogClose( $modal ) {\n\tconst closeModal = function() {\n\t\t$modal.dialog( 'close' );\n\t};\n\tjQuery( '.ui-widget-overlay' ).on( 'click', closeModal );\n\t$modal.on( 'click', 'a.dismiss', closeModal );\n}\n\nexport function initUpgradeModal() {\n\tconst $info = initModal( '#frm_upgrade_modal' );\n\tif ( $info === false ) {\n\t\treturn;\n\t}\n\n\tdocument.addEventListener( 'click', handleUpgradeClick );\n\tfrmDom.util.documentOn( 'change', 'select.frm_select_with_upgrade', handleUpgradeClick );\n\n\tfunction handleUpgradeClick( event ) {\n\t\tlet element, link, content;\n\n\t\telement = event.target;\n\n\t\tif ( ! element.classList ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst showExpiredModal = element.classList.contains( 'frm_show_expired_modal' ) || null !== element.querySelector( '.frm_show_expired_modal' ) || element.closest( '.frm_show_expired_modal' );\n\n\t\t// If a `select` element is clicked, check if the selected option has a 'data-upgrade' attribute\n\t\tif ( event.type === 'change' && element.classList.contains( 'frm_select_with_upgrade' ) ) {\n\t\t\tconst selectedOption = element.options[ element.selectedIndex ];\n\t\t\tif ( selectedOption && selectedOption.dataset.upgrade ) {\n\t\t\t\telement = selectedOption;\n\t\t\t}\n\t\t}\n\n\t\tif ( ! element.dataset.upgrade ) {\n\t\t\tlet parent = element.closest( '[data-upgrade]' );\n\t\t\tif ( ! parent ) {\n\t\t\t\tparent = element.closest( '.frm_field_box' );\n\t\t\t\tif ( ! parent ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// Fake it if it's missing to avoid error.\n\t\t\t\telement.dataset.upgrade = '';\n\t\t\t}\n\t\t\telement = parent;\n\t\t}\n\n\t\tif ( showExpiredModal ) {\n\t\t\tconst hookName = 'frm_show_expired_modal';\n\t\t\twp.hooks.doAction( hookName, element );\n\t\t\treturn;\n\t\t}\n\n\t\tconst upgradeLabel = element.dataset.upgrade;\n\t\tif ( ! upgradeLabel || element.classList.contains( 'frm_show_upgrade_tab' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\n\t\tconst modal = $info.get( 0 );\n\t\tconst lockIcon = modal.querySelector( '.frm_lock_icon' );\n\n\t\tif ( lockIcon ) {\n\t\t\tlockIcon.style.display = 'block';\n\t\t\tlockIcon.classList.remove( 'frm_lock_open_icon' );\n\t\t\tlockIcon.querySelector( 'use' ).setAttribute( 'href', '#frm_lock_icon' );\n\t\t}\n\n\t\tconst upgradeImageId = 'frm_upgrade_modal_image';\n\t\tconst oldImage = document.getElementById( upgradeImageId );\n\t\tif ( oldImage ) {\n\t\t\toldImage.remove();\n\t\t}\n\n\t\tif ( element.dataset.image ) {\n\t\t\tif ( lockIcon ) {\n\t\t\t\tlockIcon.style.display = 'none';\n\t\t\t}\n\t\t\tlockIcon.parentNode.insertBefore( frmDom.img( { id: upgradeImageId, src: frmGlobal.url + '/images/' + element.dataset.image } ), lockIcon );\n\t\t}\n\n\t\tconst level = modal.querySelector( '.license-level' );\n\t\tif ( level ) {\n\t\t\tlevel.textContent = getRequiredLicenseFromTrigger( element );\n\t\t}\n\n\t\t// If one click upgrade, hide other content\n\t\taddOneClick( element, 'modal', upgradeLabel );\n\n\t\tmodal.querySelector( '.frm_are_not_installed' ).style.display = element.dataset.image || element.dataset.oneclick ? 'none' : 'inline-block';\n\t\tmodal.querySelector( '.frm-upgrade-modal-title-prefix' ).style.display = element.dataset.oneclick ? 'inline' : 'none';\n\t\tmodal.querySelector( '.frm_feature_label' ).textContent = upgradeLabel;\n\t\tmodal.querySelector( '.frm-upgrade-modal-title-suffix' ).style.display = 'none';\n\t\tmodal.querySelector( 'h2' ).style.display = 'block';\n\n\t\t$info.dialog( 'open' );\n\n\t\t// set the utm medium\n\t\tconst button = modal.querySelector( '.button-primary:not(.frm-oneclick-button)' );\n\t\tlink = button.getAttribute( 'href' ).replace( /(medium=)[a-z_-]+/ig, '$1' + element.getAttribute( 'data-medium' ) );\n\t\tcontent = element.getAttribute( 'data-content' );\n\t\tif ( content === null ) {\n\t\t\tcontent = '';\n\t\t}\n\t\tlink = link.replace( /(content=)[a-z_-]+/ig, '$1' + content );\n\t\tbutton.setAttribute( 'href', link );\n\t}\n}\n\nfunction getRequiredLicenseFromTrigger( element ) {\n\tif ( element.dataset.requires ) {\n\t\treturn element.dataset.requires;\n\t}\n\treturn 'Pro';\n}\n","/**\n * Memize options object.\n *\n * @typedef MemizeOptions\n *\n * @property {number} [maxSize] Maximum size of the cache.\n */\n\n/**\n * Internal cache entry.\n *\n * @typedef MemizeCacheNode\n *\n * @property {?MemizeCacheNode|undefined} [prev] Previous node.\n * @property {?MemizeCacheNode|undefined} [next] Next node.\n * @property {Array<*>}                   args   Function arguments for cache\n *                                               entry.\n * @property {*}                          val    Function result.\n */\n\n/**\n * Properties of the enhanced function for controlling cache.\n *\n * @typedef MemizeMemoizedFunction\n *\n * @property {()=>void} clear Clear the cache.\n */\n\n/**\n * Accepts a function to be memoized, and returns a new memoized function, with\n * optional options.\n *\n * @template {Function} F\n *\n * @param {F}             fn        Function to memoize.\n * @param {MemizeOptions} [options] Options object.\n *\n * @return {F & MemizeMemoizedFunction} Memoized function.\n */\nfunction memize( fn, options ) {\n\tvar size = 0;\n\n\t/** @type {?MemizeCacheNode|undefined} */\n\tvar head;\n\n\t/** @type {?MemizeCacheNode|undefined} */\n\tvar tail;\n\n\toptions = options || {};\n\n\tfunction memoized( /* ...args */ ) {\n\t\tvar node = head,\n\t\t\tlen = arguments.length,\n\t\t\targs, i;\n\n\t\tsearchCache: while ( node ) {\n\t\t\t// Perform a shallow equality test to confirm that whether the node\n\t\t\t// under test is a candidate for the arguments passed. Two arrays\n\t\t\t// are shallowly equal if their length matches and each entry is\n\t\t\t// strictly equal between the two sets. Avoid abstracting to a\n\t\t\t// function which could incur an arguments leaking deoptimization.\n\n\t\t\t// Check whether node arguments match arguments length\n\t\t\tif ( node.args.length !== arguments.length ) {\n\t\t\t\tnode = node.next;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Check whether node arguments match arguments values\n\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\tif ( node.args[ i ] !== arguments[ i ] ) {\n\t\t\t\t\tnode = node.next;\n\t\t\t\t\tcontinue searchCache;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// At this point we can assume we've found a match\n\n\t\t\t// Surface matched node to head if not already\n\t\t\tif ( node !== head ) {\n\t\t\t\t// As tail, shift to previous. Must only shift if not also\n\t\t\t\t// head, since if both head and tail, there is no previous.\n\t\t\t\tif ( node === tail ) {\n\t\t\t\t\ttail = node.prev;\n\t\t\t\t}\n\n\t\t\t\t// Adjust siblings to point to each other. If node was tail,\n\t\t\t\t// this also handles new tail's empty `next` assignment.\n\t\t\t\t/** @type {MemizeCacheNode} */ ( node.prev ).next = node.next;\n\t\t\t\tif ( node.next ) {\n\t\t\t\t\tnode.next.prev = node.prev;\n\t\t\t\t}\n\n\t\t\t\tnode.next = head;\n\t\t\t\tnode.prev = null;\n\t\t\t\t/** @type {MemizeCacheNode} */ ( head ).prev = node;\n\t\t\t\thead = node;\n\t\t\t}\n\n\t\t\t// Return immediately\n\t\t\treturn node.val;\n\t\t}\n\n\t\t// No cached value found. Continue to insertion phase:\n\n\t\t// Create a copy of arguments (avoid leaking deoptimization)\n\t\targs = new Array( len );\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\targs[ i ] = arguments[ i ];\n\t\t}\n\n\t\tnode = {\n\t\t\targs: args,\n\n\t\t\t// Generate the result from original function\n\t\t\tval: fn.apply( null, args ),\n\t\t};\n\n\t\t// Don't need to check whether node is already head, since it would\n\t\t// have been returned above already if it was\n\n\t\t// Shift existing head down list\n\t\tif ( head ) {\n\t\t\thead.prev = node;\n\t\t\tnode.next = head;\n\t\t} else {\n\t\t\t// If no head, follows that there's no tail (at initial or reset)\n\t\t\ttail = node;\n\t\t}\n\n\t\t// Trim tail if we're reached max size and are pending cache insertion\n\t\tif ( size === /** @type {MemizeOptions} */ ( options ).maxSize ) {\n\t\t\ttail = /** @type {MemizeCacheNode} */ ( tail ).prev;\n\t\t\t/** @type {MemizeCacheNode} */ ( tail ).next = null;\n\t\t} else {\n\t\t\tsize++;\n\t\t}\n\n\t\thead = node;\n\n\t\treturn node.val;\n\t}\n\n\tmemoized.clear = function() {\n\t\thead = null;\n\t\ttail = null;\n\t\tsize = 0;\n\t};\n\n\tif ( process.env.NODE_ENV === 'test' ) {\n\t\t// Cache is not exposed in the public API, but used in tests to ensure\n\t\t// expected list progression\n\t\tmemoized.getCache = function() {\n\t\t\treturn [ head, tail, size ];\n\t\t};\n\t}\n\n\t// Ignore reason: There's not a clear solution to create an intersection of\n\t// the function with additional properties, where the goal is to retain the\n\t// function signature of the incoming argument and add control properties\n\t// on the return value.\n\n\t// @ts-ignore\n\treturn memoized;\n}\n\nmodule.exports = memize;\n","/* global window, exports, define */\n\n!function() {\n    'use strict'\n\n    var re = {\n        not_string: /[^s]/,\n        not_bool: /[^t]/,\n        not_type: /[^T]/,\n        not_primitive: /[^v]/,\n        number: /[diefg]/,\n        numeric_arg: /[bcdiefguxX]/,\n        json: /[j]/,\n        not_json: /[^j]/,\n        text: /^[^\\x25]+/,\n        modulo: /^\\x25{2}/,\n        placeholder: /^\\x25(?:([1-9]\\d*)\\$|\\(([^)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-gijostTuvxX])/,\n        key: /^([a-z_][a-z_\\d]*)/i,\n        key_access: /^\\.([a-z_][a-z_\\d]*)/i,\n        index_access: /^\\[(\\d+)\\]/,\n        sign: /^[+-]/\n    }\n\n    function sprintf(key) {\n        // `arguments` is not an array, but should be fine for this call\n        return sprintf_format(sprintf_parse(key), arguments)\n    }\n\n    function vsprintf(fmt, argv) {\n        return sprintf.apply(null, [fmt].concat(argv || []))\n    }\n\n    function sprintf_format(parse_tree, argv) {\n        var cursor = 1, tree_length = parse_tree.length, arg, output = '', i, k, ph, pad, pad_character, pad_length, is_positive, sign\n        for (i = 0; i < tree_length; i++) {\n            if (typeof parse_tree[i] === 'string') {\n                output += parse_tree[i]\n            }\n            else if (typeof parse_tree[i] === 'object') {\n                ph = parse_tree[i] // convenience purposes only\n                if (ph.keys) { // keyword argument\n                    arg = argv[cursor]\n                    for (k = 0; k < ph.keys.length; k++) {\n                        if (arg == undefined) {\n                            throw new Error(sprintf('[sprintf] Cannot access property \"%s\" of undefined value \"%s\"', ph.keys[k], ph.keys[k-1]))\n                        }\n                        arg = arg[ph.keys[k]]\n                    }\n                }\n                else if (ph.param_no) { // positional argument (explicit)\n                    arg = argv[ph.param_no]\n                }\n                else { // positional argument (implicit)\n                    arg = argv[cursor++]\n                }\n\n                if (re.not_type.test(ph.type) && re.not_primitive.test(ph.type) && arg instanceof Function) {\n                    arg = arg()\n                }\n\n                if (re.numeric_arg.test(ph.type) && (typeof arg !== 'number' && isNaN(arg))) {\n                    throw new TypeError(sprintf('[sprintf] expecting number but found %T', arg))\n                }\n\n                if (re.number.test(ph.type)) {\n                    is_positive = arg >= 0\n                }\n\n                switch (ph.type) {\n                    case 'b':\n                        arg = parseInt(arg, 10).toString(2)\n                        break\n                    case 'c':\n                        arg = String.fromCharCode(parseInt(arg, 10))\n                        break\n                    case 'd':\n                    case 'i':\n                        arg = parseInt(arg, 10)\n                        break\n                    case 'j':\n                        arg = JSON.stringify(arg, null, ph.width ? parseInt(ph.width) : 0)\n                        break\n                    case 'e':\n                        arg = ph.precision ? parseFloat(arg).toExponential(ph.precision) : parseFloat(arg).toExponential()\n                        break\n                    case 'f':\n                        arg = ph.precision ? parseFloat(arg).toFixed(ph.precision) : parseFloat(arg)\n                        break\n                    case 'g':\n                        arg = ph.precision ? String(Number(arg.toPrecision(ph.precision))) : parseFloat(arg)\n                        break\n                    case 'o':\n                        arg = (parseInt(arg, 10) >>> 0).toString(8)\n                        break\n                    case 's':\n                        arg = String(arg)\n                        arg = (ph.precision ? arg.substring(0, ph.precision) : arg)\n                        break\n                    case 't':\n                        arg = String(!!arg)\n                        arg = (ph.precision ? arg.substring(0, ph.precision) : arg)\n                        break\n                    case 'T':\n                        arg = Object.prototype.toString.call(arg).slice(8, -1).toLowerCase()\n                        arg = (ph.precision ? arg.substring(0, ph.precision) : arg)\n                        break\n                    case 'u':\n                        arg = parseInt(arg, 10) >>> 0\n                        break\n                    case 'v':\n                        arg = arg.valueOf()\n                        arg = (ph.precision ? arg.substring(0, ph.precision) : arg)\n                        break\n                    case 'x':\n                        arg = (parseInt(arg, 10) >>> 0).toString(16)\n                        break\n                    case 'X':\n                        arg = (parseInt(arg, 10) >>> 0).toString(16).toUpperCase()\n                        break\n                }\n                if (re.json.test(ph.type)) {\n                    output += arg\n                }\n                else {\n                    if (re.number.test(ph.type) && (!is_positive || ph.sign)) {\n                        sign = is_positive ? '+' : '-'\n                        arg = arg.toString().replace(re.sign, '')\n                    }\n                    else {\n                        sign = ''\n                    }\n                    pad_character = ph.pad_char ? ph.pad_char === '0' ? '0' : ph.pad_char.charAt(1) : ' '\n                    pad_length = ph.width - (sign + arg).length\n                    pad = ph.width ? (pad_length > 0 ? pad_character.repeat(pad_length) : '') : ''\n                    output += ph.align ? sign + arg + pad : (pad_character === '0' ? sign + pad + arg : pad + sign + arg)\n                }\n            }\n        }\n        return output\n    }\n\n    var sprintf_cache = Object.create(null)\n\n    function sprintf_parse(fmt) {\n        if (sprintf_cache[fmt]) {\n            return sprintf_cache[fmt]\n        }\n\n        var _fmt = fmt, match, parse_tree = [], arg_names = 0\n        while (_fmt) {\n            if ((match = re.text.exec(_fmt)) !== null) {\n                parse_tree.push(match[0])\n            }\n            else if ((match = re.modulo.exec(_fmt)) !== null) {\n                parse_tree.push('%')\n            }\n            else if ((match = re.placeholder.exec(_fmt)) !== null) {\n                if (match[2]) {\n                    arg_names |= 1\n                    var field_list = [], replacement_field = match[2], field_match = []\n                    if ((field_match = re.key.exec(replacement_field)) !== null) {\n                        field_list.push(field_match[1])\n                        while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\n                            if ((field_match = re.key_access.exec(replacement_field)) !== null) {\n                                field_list.push(field_match[1])\n                            }\n                            else if ((field_match = re.index_access.exec(replacement_field)) !== null) {\n                                field_list.push(field_match[1])\n                            }\n                            else {\n                                throw new SyntaxError('[sprintf] failed to parse named argument key')\n                            }\n                        }\n                    }\n                    else {\n                        throw new SyntaxError('[sprintf] failed to parse named argument key')\n                    }\n                    match[2] = field_list\n                }\n                else {\n                    arg_names |= 2\n                }\n                if (arg_names === 3) {\n                    throw new Error('[sprintf] mixing positional and named placeholders is not (yet) supported')\n                }\n\n                parse_tree.push(\n                    {\n                        placeholder: match[0],\n                        param_no:    match[1],\n                        keys:        match[2],\n                        sign:        match[3],\n                        pad_char:    match[4],\n                        align:       match[5],\n                        width:       match[6],\n                        precision:   match[7],\n                        type:        match[8]\n                    }\n                )\n            }\n            else {\n                throw new SyntaxError('[sprintf] unexpected placeholder')\n            }\n            _fmt = _fmt.substring(match[0].length)\n        }\n        return sprintf_cache[fmt] = parse_tree\n    }\n\n    /**\n     * export to either browser or node.js\n     */\n    /* eslint-disable quote-props */\n    if (typeof exports !== 'undefined') {\n        exports['sprintf'] = sprintf\n        exports['vsprintf'] = vsprintf\n    }\n    if (typeof window !== 'undefined') {\n        window['sprintf'] = sprintf\n        window['vsprintf'] = vsprintf\n\n        if (typeof define === 'function' && define['amd']) {\n            define(function() {\n                return {\n                    'sprintf': sprintf,\n                    'vsprintf': vsprintf\n                }\n            })\n        }\n    }\n    /* eslint-enable quote-props */\n}(); // eslint-disable-line\n","import pluralForms from '@tannin/plural-forms';\n\n/**\n * Tannin constructor options.\n *\n * @typedef {Object} TanninOptions\n *\n * @property {string}   [contextDelimiter] Joiner in string lookup with context.\n * @property {Function} [onMissingKey]     Callback to invoke when key missing.\n */\n\n/**\n * Domain metadata.\n *\n * @typedef {Object} TanninDomainMetadata\n *\n * @property {string}            [domain]       Domain name.\n * @property {string}            [lang]         Language code.\n * @property {(string|Function)} [plural_forms] Plural forms expression or\n *                                              function evaluator.\n */\n\n/**\n * Domain translation pair respectively representing the singular and plural\n * translation.\n *\n * @typedef {[string,string]} TanninTranslation\n */\n\n/**\n * Locale data domain. The key is used as reference for lookup, the value an\n * array of two string entries respectively representing the singular and plural\n * translation.\n *\n * @typedef {{[key:string]:TanninDomainMetadata|TanninTranslation,'':TanninDomainMetadata|TanninTranslation}} TanninLocaleDomain\n */\n\n/**\n * Jed-formatted locale data.\n *\n * @see http://messageformat.github.io/Jed/\n *\n * @typedef {{[domain:string]:TanninLocaleDomain}} TanninLocaleData\n */\n\n/**\n * Default Tannin constructor options.\n *\n * @type {TanninOptions}\n */\nvar DEFAULT_OPTIONS = {\n\tcontextDelimiter: '\\u0004',\n\tonMissingKey: null,\n};\n\n/**\n * Given a specific locale data's config `plural_forms` value, returns the\n * expression.\n *\n * @example\n *\n * ```\n * getPluralExpression( 'nplurals=2; plural=(n != 1);' ) === '(n != 1)'\n * ```\n *\n * @param {string} pf Locale data plural forms.\n *\n * @return {string} Plural forms expression.\n */\nfunction getPluralExpression( pf ) {\n\tvar parts, i, part;\n\n\tparts = pf.split( ';' );\n\n\tfor ( i = 0; i < parts.length; i++ ) {\n\t\tpart = parts[ i ].trim();\n\t\tif ( part.indexOf( 'plural=' ) === 0 ) {\n\t\t\treturn part.substr( 7 );\n\t\t}\n\t}\n}\n\n/**\n * Tannin constructor.\n *\n * @class\n *\n * @param {TanninLocaleData} data      Jed-formatted locale data.\n * @param {TanninOptions}    [options] Tannin options.\n */\nexport default function Tannin( data, options ) {\n\tvar key;\n\n\t/**\n\t * Jed-formatted locale data.\n\t *\n\t * @name Tannin#data\n\t * @type {TanninLocaleData}\n\t */\n\tthis.data = data;\n\n\t/**\n\t * Plural forms function cache, keyed by plural forms string.\n\t *\n\t * @name Tannin#pluralForms\n\t * @type {Object<string,Function>}\n\t */\n\tthis.pluralForms = {};\n\n\t/**\n\t * Effective options for instance, including defaults.\n\t *\n\t * @name Tannin#options\n\t * @type {TanninOptions}\n\t */\n\tthis.options = {};\n\n\tfor ( key in DEFAULT_OPTIONS ) {\n\t\tthis.options[ key ] = options !== undefined && key in options\n\t\t\t? options[ key ]\n\t\t\t: DEFAULT_OPTIONS[ key ];\n\t}\n}\n\n/**\n * Returns the plural form index for the given domain and value.\n *\n * @param {string} domain Domain on which to calculate plural form.\n * @param {number} n      Value for which plural form is to be calculated.\n *\n * @return {number} Plural form index.\n */\nTannin.prototype.getPluralForm = function( domain, n ) {\n\tvar getPluralForm = this.pluralForms[ domain ],\n\t\tconfig, plural, pf;\n\n\tif ( ! getPluralForm ) {\n\t\tconfig = this.data[ domain ][ '' ];\n\n\t\tpf = (\n\t\t\tconfig[ 'Plural-Forms' ] ||\n\t\t\tconfig[ 'plural-forms' ] ||\n\t\t\t// Ignore reason: As known, there's no way to document the empty\n\t\t\t// string property on a key to guarantee this as metadata.\n\t\t\t// @ts-ignore\n\t\t\tconfig.plural_forms\n\t\t);\n\n\t\tif ( typeof pf !== 'function' ) {\n\t\t\tplural = getPluralExpression(\n\t\t\t\tconfig[ 'Plural-Forms' ] ||\n\t\t\t\tconfig[ 'plural-forms' ] ||\n\t\t\t\t// Ignore reason: As known, there's no way to document the empty\n\t\t\t\t// string property on a key to guarantee this as metadata.\n\t\t\t\t// @ts-ignore\n\t\t\t\tconfig.plural_forms\n\t\t\t);\n\n\t\t\tpf = pluralForms( plural );\n\t\t}\n\n\t\tgetPluralForm = this.pluralForms[ domain ] = pf;\n\t}\n\n\treturn getPluralForm( n );\n};\n\n/**\n * Translate a string.\n *\n * @param {string}      domain   Translation domain.\n * @param {string|void} context  Context distinguishing terms of the same name.\n * @param {string}      singular Primary key for translation lookup.\n * @param {string=}     plural   Fallback value used for non-zero plural\n *                               form index.\n * @param {number=}     n        Value to use in calculating plural form.\n *\n * @return {string} Translated string.\n */\nTannin.prototype.dcnpgettext = function( domain, context, singular, plural, n ) {\n\tvar index, key, entry;\n\n\tif ( n === undefined ) {\n\t\t// Default to singular.\n\t\tindex = 0;\n\t} else {\n\t\t// Find index by evaluating plural form for value.\n\t\tindex = this.getPluralForm( domain, n );\n\t}\n\n\tkey = singular;\n\n\t// If provided, context is prepended to key with delimiter.\n\tif ( context ) {\n\t\tkey = context + this.options.contextDelimiter + singular;\n\t}\n\n\tentry = this.data[ domain ][ key ];\n\n\t// Verify not only that entry exists, but that the intended index is within\n\t// range and non-empty.\n\tif ( entry && entry[ index ] ) {\n\t\treturn entry[ index ];\n\t}\n\n\tif ( this.options.onMissingKey ) {\n\t\tthis.options.onMissingKey( singular, domain );\n\t}\n\n\t// If entry not found, fall back to singular vs. plural with zero index\n\t// representing the singular value.\n\treturn index === 0 ? singular : plural;\n};\n","function _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nexport { _arrayLikeToArray as default };","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nfunction _arrayWithoutHoles(r) {\n  if (Array.isArray(r)) return arrayLikeToArray(r);\n}\nexport { _arrayWithoutHoles as default };","function _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nexport { _classCallCheck as default };","function _iterableToArray(r) {\n  if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\nexport { _iterableToArray as default };","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _nonIterableSpread as default };","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nfunction _toConsumableArray(r) {\n  return arrayWithoutHoles(r) || iterableToArray(r) || unsupportedIterableToArray(r) || nonIterableSpread();\n}\nexport { _toConsumableArray as default };","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? arrayLikeToArray(r, a) : void 0;\n  }\n}\nexport { _unsupportedIterableToArray as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* exported frm_add_logic_row, frm_remove_tag, frm_show_div, frmCheckAll, frmCheckAllLevel */\n/* eslint-disable jsdoc/require-param, prefer-const, no-redeclare, @wordpress/no-unused-vars-before-return, jsdoc/check-types, jsdoc/check-tag-names, @wordpress/i18n-translator-comments, @wordpress/valid-sprintf, jsdoc/require-returns-description, jsdoc/require-param-type, no-unused-expressions, compat/compat */\n\nwindow.FrmFormsConnect = window.FrmFormsConnect || ( function( document, window, $ ) {\n\t/*global jQuery:false, frm_admin_js, frmGlobal, ajaxurl */\n\n\tconst el = {\n\t\tmessageBox: null,\n\t\treset: null,\n\n\t\tsetElements: function() {\n\t\t\tel.messageBox = document.querySelector( '.frm_pro_license_msg' );\n\t\t\tel.reset = document.getElementById( 'frm_reconnect_link' );\n\t\t}\n\t};\n\n\t/**\n\t * Public functions and properties.\n\t *\n\t * @since 4.03\n\t *\n\t * @type {Object}\n\t */\n\tconst app = {\n\n\t\t/**\n\t\t * Register connect button event.\n\t\t *\n\t\t * @since 4.03\n\t\t */\n\t\tinit: function() {\n\t\t\tel.setElements();\n\n\t\t\t$( document.getElementById( 'frm_deauthorize_link' ) ).on( 'click', app.deauthorize );\n\t\t\t$( '.frm_authorize_link' ).on( 'click', app.authorize );\n\t\t\t// Handles FF dashboard Authorize & Reauthorize events.\n\t\t\t// Attach click event to parent as #frm_deauthorize_link & #frm_reconnect_link dynamically recreated by bootstrap.setupBootstrapDropdowns in dom.js\n\t\t\t$( '.frm-dashboard-license-options' ).on( 'click', '#frm_deauthorize_link', app.deauthorize );\n\t\t\t$( '.frm-dashboard-license-options' ).on( 'click', '#frm_reconnect_link', app.reauthorize );\n\n\t\t\tif ( el.reset !== null ) {\n\t\t\t\t$( el.reset ).on( 'click', app.reauthorize );\n\t\t\t}\n\t\t},\n\n\t\t/* Manual license authorization */\n\t\tauthorize: function() {\n\t\t\t/*jshint validthis:true */\n\t\t\tconst button = this;\n\t\t\tconst pluginSlug = this.getAttribute( 'data-plugin' );\n\t\t\tconst input = document.getElementById( 'edd_' + pluginSlug + '_license_key' );\n\t\t\tconst license = input.value;\n\t\t\tlet wpmu = document.getElementById( 'proplug-wpmu' );\n\t\t\tthis.classList.add( 'frm_loading_button' );\n\t\t\tif ( wpmu === null ) {\n\t\t\t\twpmu = 0;\n\t\t\t} else if ( wpmu.checked ) {\n\t\t\t\twpmu = 1;\n\t\t\t} else {\n\t\t\t\twpmu = 0;\n\t\t\t}\n\n\t\t\t$.ajax( {\n\t\t\t\ttype: 'POST', url: ajaxurl, dataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'frm_addon_activate',\n\t\t\t\t\tlicense: license,\n\t\t\t\t\tplugin: pluginSlug,\n\t\t\t\t\twpmu: wpmu,\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t},\n\t\t\t\tsuccess: function( msg ) {\n\t\t\t\t\tapp.afterAuthorize( msg, input );\n\t\t\t\t\tbutton.classList.remove( 'frm_loading_button' );\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\n\t\tafterAuthorize: function( msg, input ) {\n\t\t\tif ( msg.success === true ) {\n\t\t\t\tinput.value = '';\n\t\t\t}\n\n\t\t\twp.hooks.doAction( 'frm_after_authorize', msg );\n\t\t\tapp.showMessage( msg );\n\t\t},\n\n\t\tshowProgress: function( msg ) {\n\t\t\tif ( el.messageBox === null ) {\n\t\t\t\t// In case the message box was added after page load.\n\t\t\t\tel.setElements();\n\t\t\t}\n\n\t\t\tconst messageBox = el.messageBox;\n\t\t\tif ( messageBox === null ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( msg.success === true ) {\n\t\t\t\tmessageBox.classList.remove( 'frm_error_style' );\n\t\t\t\tmessageBox.classList.add( 'frm_message', 'frm_updated_message' );\n\t\t\t} else {\n\t\t\t\tmessageBox.classList.add( 'frm_error_style' );\n\t\t\t\tmessageBox.classList.remove( 'frm_message', 'frm_updated_message' );\n\t\t\t}\n\t\t\tmessageBox.classList.remove( 'frm_hidden' );\n\t\t\tmessageBox.innerHTML = msg.message;\n\t\t},\n\n\t\tshowMessage: function( msg ) {\n\t\t\tif ( el.messageBox === null ) {\n\t\t\t\t// In case the message box was added after page load.\n\t\t\t\tel.setElements();\n\t\t\t}\n\t\t\tconst messageBox = el.messageBox;\n\n\t\t\tif ( msg.success === true ) {\n\t\t\t\tapp.showAuthorized( true );\n\t\t\t\tapp.showInlineSuccess();\n\n\t\t\t\t/**\n\t\t\t\t * Triggers the after license is authorized action for a confirmation/success modal.\n\t\t\t\t *\n\t\t\t\t * @param {Object} msg An object containing message data received from Authorize request.\n\t\t\t\t */\n\t\t\t\twp.hooks.doAction( 'frmAdmin.afterLicenseAuthorizeSuccess', { msg } );\n\t\t\t}\n\t\t\tapp.showProgress( msg );\n\n\t\t\tif ( msg.message !== '' ) {\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tmessageBox.innerHTML = '';\n\t\t\t\t\tmessageBox.classList.add( 'frm_hidden' );\n\t\t\t\t\tmessageBox.classList.remove( 'frm_error_style', 'frm_message', 'frm_updated_message' );\n\t\t\t\t}, 10000 );\n\t\t\t\tconst refreshPage = document.querySelector( '.frm-admin-page-dashboard' );\n\t\t\t\tif ( refreshPage ) {\n\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}, 1000 );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tshowAuthorized: function( show ) {\n\t\t\tconst from = show ? 'unauthorized' : 'authorized';\n\t\t\tconst to = show ? 'authorized' : 'unauthorized';\n\t\t\tconst container = document.querySelectorAll( '.frm_' + from + '_box' );\n\t\t\tif ( container.length ) {\n\t\t\t\t// Replace all authorized boxes with unauthorized boxes.\n\t\t\t\tcontainer.forEach( function( box ) {\n\t\t\t\t\tbox.className = box.className.replace( 'frm_' + from + '_box', 'frm_' + to + '_box' );\n\t\t\t\t} );\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Use the data-success element to replace the element content.\n\t\t */\n\t\tshowInlineSuccess: function() {\n\t\t\tconst successElement = document.querySelectorAll( '.frm-confirm-msg [data-success]' );\n\t\t\tif ( successElement.length ) {\n\t\t\t\tsuccessElement.forEach( function( element ) {\n\t\t\t\t\telement.innerHTML = frmAdminBuild.purifyHtml( element.getAttribute( 'data-success' ) );\n\t\t\t\t} );\n\t\t\t}\n\t\t},\n\n\t\t/* Clear the site license cache */\n\t\treauthorize: function() {\n\t\t\t/*jshint validthis:true */\n\t\t\tthis.innerHTML = '<span class=\"frm-wait frm_spinner\" style=\"visibility:visible;float:none\"></span>';\n\n\t\t\t$.ajax( {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: ajaxurl,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'frm_reset_cache',\n\t\t\t\t\tplugin: 'formidable_pro',\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t},\n\t\t\t\tsuccess: function( msg ) {\n\t\t\t\t\tel.reset.textContent = msg.message;\n\t\t\t\t\tif ( el.reset.getAttribute( 'data-refresh' ) === '1' ) {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t\treturn false;\n\t\t},\n\n\t\tdeauthorize: function() {\n\t\t\t/*jshint validthis:true */\n\t\t\tif ( ! confirm( frmGlobal.deauthorize ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst pluginSlug = this.getAttribute( 'data-plugin' ),\n\t\t\t\tinput = document.getElementById( 'edd_' + pluginSlug + '_license_key' ),\n\t\t\t\tlicense = input.value,\n\t\t\t\tlink = this;\n\n\t\t\tthis.innerHTML = '<span class=\"frm-wait frm_spinner\" style=\"visibility:visible;\"></span>';\n\n\t\t\t$.ajax( {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: ajaxurl,\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'frm_addon_deactivate',\n\t\t\t\t\tlicense: license,\n\t\t\t\t\tplugin: pluginSlug,\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t},\n\t\t\t\tsuccess: function() {\n\t\t\t\t\tapp.showAuthorized( false );\n\t\t\t\t\tinput.value = '';\n\t\t\t\t\tlink.replaceWith( 'Disconnected' );\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Triggers the after license is deauthorized sruccess action.\n\t\t\t\t\t */\n\t\t\t\t\twp.hooks.doAction( 'frmAdmin.afterLicenseDeauthorizeSuccess', {} );\n\t\t\t\t}\n\t\t\t} );\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t// Provide access to public functions/properties.\n\treturn app;\n}( document, window, jQuery ) );\n\nwindow.frmAdminBuildJS = function() {\n\t//'use strict';\n\n\t/*global jQuery:false, frm_admin_js, frmGlobal, ajaxurl, fromDom */\n\n\tconst MAX_FIELD_GROUP_SIZE = 12;\n\n\tconst frmAdminJs = frm_admin_js; // eslint-disable-line camelcase\n\tconst { tag, div, span, a, svg, img } = frmDom;\n\tconst { onClickPreventDefault } = frmDom.util;\n\tconst { doJsonFetch, doJsonPost } = frmDom.ajax;\n\tfrmAdminJs.contextualShortcodes = getContextualShortcodes();\n\tconst icons = {\n\t\tsave: svg( { href: '#frm_save_icon' } ),\n\t\tdrag: svg( { href: '#frm_drag_icon', classList: [ 'frm_drag_icon', 'frm-drag' ] } )\n\t};\n\n\tlet $newFields = jQuery( document.getElementById( 'frm-show-fields' ) ),\n\t\tbuilderForm = document.getElementById( 'new_fields' ),\n\t\tthisForm = document.getElementById( 'form_id' ),\n\t\tcopyHelper = false,\n\t\tfieldsUpdated = 0,\n\t\tthisFormId = 0,\n\t\tautoId = 0,\n\t\toptionMap = {},\n\t\tlastNewActionIdReturned = 0;\n\n\tconst { __, sprintf } = wp.i18n;\n\tlet debouncedSyncAfterDragAndDrop, postBodyContent, $postBodyContent;\n\n\tconst dragState = {\n\t\tdragging: false\n\t};\n\n\tif ( thisForm !== null ) {\n\t\tthisFormId = thisForm.value;\n\t}\n\n\tconst currentURL = new URL( window.location.href );\n\tconst urlParams = currentURL.searchParams;\n\tconst builderPage = document.getElementById( 'frm_builder_page' );\n\n\t// Global settings\n\tlet s;\n\n\tfunction showElement( element ) {\n\t\tif ( ! element[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\t\telement[ 0 ].style.display = '';\n\t}\n\n\tfunction empty( $obj ) {\n\t\tif ( $obj !== null ) {\n\t\t\twhile ( $obj.firstChild ) {\n\t\t\t\t$obj.firstChild.remove();\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction addClass( $obj, className ) {\n\t\tif ( $obj.classList ) {\n\t\t\t$obj.classList.add( className );\n\t\t} else {\n\t\t\t$obj.className += ' ' + className;\n\t\t}\n\t}\n\n\tfunction confirmClick( e ) {\n\t\t/*jshint validthis:true */\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t\tconfirmLinkClick( this );\n\t}\n\n\tfunction confirmLinkClick( link ) {\n\t\tconst message = link.getAttribute( 'data-frmverify' ),\n\t\t\tloadedFrom = link.getAttribute( 'data-loaded-from' );\n\n\t\tif ( message === null || link.id === 'frm-confirmed-click' ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( 'entries-list' === loadedFrom ) {\n\t\t\tconst confirmModal = wp.hooks.applyFilters( 'frm_on_multiple_entries_delete', { link, initModal } );\n\t\t\tif ( typeof confirmModal === 'string' ) {\n\t\t\t\treturn confirmModal;\n\t\t\t}\n\t\t\treturn confirmDeleteAllEntriesModal( { link, initModal } );\n\t\t}\n\n\t\treturn confirmModal( link );\n\t}\n\n\tfunction confirmDeleteAllEntriesModal( args ) {\n\t\tconst self = this;\n\t\tconst { link, initModal } = args;\n\n\t\tthis.modal = initModal( '#frm_confirm_modal', '500px' );\n\n\t\tthis.wrapper = document.getElementById( 'frm_confirm_modal' );\n\t\tthis.confirmButton = document.getElementById( 'frm-confirmed-click' );\n\n\t\tthis.confirmationInput = self.wrapper.querySelector(\n\t\t\t'.frm-delete-confirmation-input'\n\t\t);\n\n\t\tthis.timeoutInterval = null;\n\n\t\tthis.modalOptions = {\n\t\t\theading: 'Delete all %entriesCount% entries?',\n\t\t\theadingSingleEntry: 'Delete the entry?',\n\t\t\tcopy: '',\n\t\t\tinputPlaceholder: 'Type in \"DELETE ALL\" to delete all entries',\n\t\t\tentriesCount: 0,\n\t\t};\n\n\t\tthis.deleteAllFormEntries = false;\n\n\t\tthis.countEntries = function() {\n\t\t\tif ( null !== link.getAttribute( 'data-total-entries' ) ) {\n\t\t\t\tself.modalOptions.entriesCount = parseInt(\n\t\t\t\t\tlink.getAttribute( 'data-total-entries' ),\n\t\t\t\t\t10\n\t\t\t\t);\n\t\t\t\tself.deleteAllFormEntries = true;\n\t\t\t\treturn self.modalOptions.entriesCount;\n\t\t\t}\n\n\t\t\tself.modalOptions.entriesCount = 0;\n\t\t\tdocument\n\t\t\t\t.querySelectorAll( 'input[name=\"item-action[]\"]' )\n\t\t\t\t.forEach( function( checkbox ) {\n\t\t\t\t\tif ( checkbox.checked ) {\n\t\t\t\t\t\tself.modalOptions.entriesCount++;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\treturn self.modalOptions.entriesCount;\n\t\t};\n\n\t\tthis.getHeading = function() {\n\t\t\tif ( 1 === self.modalOptions.entriesCount ) {\n\t\t\t\treturn self.modalOptions.headingSingleEntry;\n\t\t\t}\n\t\t\treturn self.modalOptions.heading.replace(\n\t\t\t\t'%entriesCount%',\n\t\t\t\tself.modalOptions.entriesCount\n\t\t\t);\n\t\t};\n\n\t\tthis.getCopy = function() {\n\t\t\tif ( ! link.getAttribute( 'data-frmverify' ) ) {\n\t\t\t\treturn self.modalOptions.copy;\n\t\t\t}\n\n\t\t\tconst copy = window.frmDom.tag( 'span' );\n\t\t\tcopy.innerHTML = link.getAttribute( 'data-frmverify' );\n\n\t\t\tif ( false === self.deleteAllFormEntries ) {\n\t\t\t\tif ( 1 === self.modalOptions.entriesCount ) {\n\t\t\t\t\tcopy.innerHTML = link\n\t\t\t\t\t\t.getAttribute( 'data-frmverify' )\n\t\t\t\t\t\t.replace( 'ALL entries', 'The selected entry' );\n\t\t\t\t} else {\n\t\t\t\t\tcopy.innerHTML = link\n\t\t\t\t\t\t.getAttribute( 'data-frmverify' )\n\t\t\t\t\t\t.replace( 'ALL entries', 'The selected entries' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn ( self.modalOptions.copy = copy );\n\t\t};\n\n\t\tthis.getConfirmationInput = function() {\n\t\t\tself.confirmationInput = window.frmDom.tag( 'input', {\n\t\t\t\tclassName: 'frm-delete-confirmation-input',\n\t\t\t} );\n\t\t\tself.confirmationInput.setAttribute( 'type', 'text' );\n\t\t\treturn self.confirmationInput;\n\t\t};\n\n\t\tthis.getOnDeleteActionsTriggerCheckbox = function() {\n\t\t\treturn wp.hooks.applyFilters( 'frm_on_delete_actions_trigger', false, args );\n\t\t};\n\n\t\tthis.updateOnDeleteURL = function( triggerOnDeleteActions = true ) {\n\t\t\tlet redirectURL = link.getAttribute( 'href' );\n\t\t\tif ( triggerOnDeleteActions ) {\n\t\t\t\tredirectURL += '&trigger_on_delete_entry_actions=delete';\n\t\t\t}\n\t\t\tself.confirmButton.setAttribute(\n\t\t\t\t'href',\n\t\t\t\tredirectURL\n\t\t\t);\n\t\t};\n\n\t\tthis.initConfirmButton = function( active ) {\n\t\t\tself.confirmButton.classList.add(\n\t\t\t\tlink.getAttribute( 'data-frmverify-btn' )\n\t\t\t);\n\t\t\tif ( true === active ) {\n\t\t\t\tself.confirmButton.classList.remove( 'frm-btn-inactive' );\n\t\t\t\tself.confirmButton.classList.add( 'dismiss' );\n\t\t\t\tconst triggerActionsOnDeleteEl = document.getElementById( 'frm_trigger_on_delete_entry_actions' );\n\t\t\t\tif ( triggerActionsOnDeleteEl ) {\n\t\t\t\t\tself.updateOnDeleteURL( triggerActionsOnDeleteEl.checked );\n\t\t\t\t} else {\n\t\t\t\t\tself.updateOnDeleteURL( link.getAttribute( 'data-total-entries' ) );\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tself.confirmButton.setAttribute( 'href', '#' );\n\t\t\tself.confirmButton.classList.add( 'frm-btn-inactive' );\n\t\t\tself.confirmButton.classList.remove( 'dismiss' );\n\t\t\tself.modal.one( 'dialogclose', function() {\n\t\t\t\tself.confirmButton.classList.remove( 'frm-btn-inactive' );\n\t\t\t} );\n\t\t};\n\n\t\tthis.initConfirmationInput = function() {\n\t\t\tself.confirmationInput.placeholder =\n\t\t\t\tself.modalOptions.inputPlaceholder;\n\t\t\tself.confirmationInput.addEventListener( 'keydown', function() {\n\t\t\t\tclearTimeout( self.timeoutInterval );\n\t\t\t\tself.timeoutInterval = setTimeout(\n\t\t\t\t\tself.confirmationCheck,\n\t\t\t\t\t100\n\t\t\t\t);\n\t\t\t} );\n\t\t};\n\n\t\tthis.confirmationCheck = function() {\n\t\t\tif (\n\t\t\t\t'delete all' ===\n\t\t\t\tself.confirmationInput.value.toLowerCase().trim()\n\t\t\t) {\n\t\t\t\tself.initConfirmButton( true );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tself.initConfirmButton( false );\n\t\t};\n\n\t\tthis.initModal = function() {\n\t\t\tif (\n\t\t\t\tnull === self.wrapper ||\n\t\t\t\tnull === self.wrapper.querySelector( '.frm-confirm-msg' )\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst copyWrapper =\n\t\t\t\tself.wrapper.querySelector( '.frm-confirm-msg' );\n\t\t\tcopyWrapper.classList.add(\n\t\t\t\t'frm-delete-all-entries-modal-confirmation'\n\t\t\t);\n\t\t\tcopyWrapper.innerHTML = '';\n\t\t\tcopyWrapper.append( window.frmDom.tag( 'h2', self.getHeading() ) );\n\t\t\tcopyWrapper.append( self.getCopy() );\n\t\t\tcopyWrapper.append( self.getConfirmationInput() );\n\t\t\tconst onDeleteActionsTrigger = self.getOnDeleteActionsTriggerCheckbox();\n\t\t\tif (\n\t\t\t\tlink.getAttribute( 'data-total-entries' ) &&\n\t\t\t\t( 'undefined' === typeof frmEntriesData || frmEntriesData.hasPostAction === '0' ) &&\n\t\t\t\tonDeleteActionsTrigger\n\t\t\t) {\n\t\t\t\tcopyWrapper.append( onDeleteActionsTrigger );\n\t\t\t}\n\n\t\t\tself.initConfirmationInput();\n\t\t\tself.initConfirmButton( false );\n\t\t};\n\n\t\tthis.openModal = function() {\n\t\t\tif ( false === self.modal || 0 === self.countEntries() ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tself.initModal();\n\t\t\tself.modal.dialog( 'open' );\n\t\t};\n\n\t\treturn this.openModal();\n\t}\n\n\tfunction confirmModal( link ) {\n\t\tlet verify, $confirmMessage, i, dataAtts, btnClass,\n\t\t\t$info = initModal( '#frm_confirm_modal', '400px' ),\n\t\t\tcontinueButton = document.getElementById( 'frm-confirmed-click' );\n\n\t\tif ( $info === false ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// The confirm button is hidden when showLimitModal is called,\n\t\t// so make sure it is visible every time we open the modal.\n\t\tif ( continueButton ) {\n\t\t\tcontinueButton.style.display = 'block';\n\t\t}\n\n\t\tverify = link.getAttribute( 'data-frmverify' );\n\t\tbtnClass = verify ? link.getAttribute( 'data-frmverify-btn' ) : '';\n\t\t$confirmMessage = jQuery( '.frm-confirm-msg' );\n\t\t$confirmMessage.empty();\n\n\t\tif ( verify ) {\n\t\t\t$confirmMessage.append( document.createTextNode( verify ) );\n\t\t\tif ( btnClass ) {\n\t\t\t\tcontinueButton.classList.add( btnClass );\n\t\t\t}\n\t\t}\n\n\t\tfor ( i in continueButton.dataset ) {\n\t\t\tcontinueButton.removeAttribute( 'data-' + i );\n\t\t}\n\n\t\tdataAtts = link.dataset;\n\t\tfor ( i in dataAtts ) {\n\t\t\tif ( i !== 'frmverify' ) {\n\t\t\t\tcontinueButton.setAttribute( 'data-' + i, dataAtts[ i ] );\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Triggers the pre-open action for a confirmation modal. This action passes\n\t\t * relevant modal information and associated link to any listening hooks.\n\t\t *\n\t\t * @param {Object}      options       An object containing modal elements and data.\n\t\t * @param {HTMLElement} options.$info The HTML element containing modal information.\n\t\t * @param {string}      options.link  The link associated with the modal action.\n\t\t */\n\t\twp.hooks.doAction( 'frmAdmin.beforeOpenConfirmModal', { $info, link } );\n\n\t\t$info.dialog( 'open' );\n\t\tcontinueButton.setAttribute( 'href', link.getAttribute( 'href' ) || link.getAttribute( 'data-href' ) );\n\t\treturn false;\n\t}\n\n\tfunction infoModal( msg ) {\n\t\tconst $info = initModal( '#frm_info_modal', '400px' );\n\n\t\tif ( $info === false ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tjQuery( '.frm-info-msg' ).html( msg );\n\n\t\t$info.dialog( 'open' );\n\t\treturn false;\n\t}\n\n\tfunction toggleItem( e ) {\n\t\t/*jshint validthis:true */\n\t\tconst toggle = this.getAttribute( 'data-frmtoggle' );\n\t\tconst text = this.getAttribute( 'data-toggletext' );\n\t\tconst $items = jQuery( toggle );\n\n\t\te.preventDefault();\n\n\t\t$items.toggle();\n\n\t\tif ( text !== null && text !== '' ) {\n\t\t\tthis.setAttribute( 'data-toggletext', this.innerHTML );\n\t\t\tthis.textContent = text;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Toggle a class on target elements when an anchor is clicked, or when a radio or checkbox has been selected.\n\t *\n\t * @param {Event} e Event with either the change or click type.\n\t * @return {false}\n\t */\n\tfunction hideShowItem( e ) {\n\t\t/*jshint validthis:true */\n\t\tlet hide = this.getAttribute( 'data-frmhide' );\n\t\tlet show = this.getAttribute( 'data-frmshow' );\n\t\tlet uncheckList = this.getAttribute( 'data-frmuncheck' );\n\t\tlet uncheckListArray = uncheckList ? uncheckList.split( ',' ) : [];\n\n\t\t// Flip unchecked checkboxes so an off value undoes the on value.\n\t\tif ( isUncheckedCheckbox( this ) ) {\n\t\t\tif ( hide !== null ) {\n\t\t\t\tshow = hide;\n\t\t\t\thide = null;\n\t\t\t} else if ( show !== null ) {\n\t\t\t\thide = show;\n\t\t\t\tshow = null;\n\t\t\t}\n\t\t}\n\n\t\te.preventDefault();\n\n\t\tconst toggleClass = this.getAttribute( 'data-toggleclass' ) || 'frm_hidden';\n\n\t\tif ( hide !== null ) {\n\t\t\tjQuery( hide ).addClass( toggleClass );\n\t\t}\n\n\t\tif ( show !== null ) {\n\t\t\tjQuery( show ).removeClass( toggleClass );\n\t\t}\n\n\t\tconst current = this.parentNode.querySelectorAll( 'a.current' );\n\t\tif ( current !== null ) {\n\t\t\tfor ( let i = 0; i < current.length; i++ ) {\n\t\t\t\tcurrent[ i ].classList.remove( 'current' );\n\t\t\t}\n\t\t\tthis.classList.add( 'current' );\n\t\t}\n\n\t\tif ( uncheckListArray.length ) {\n\t\t\tuncheckListArray.forEach( function( uncheckItem ) {\n\t\t\t\tconst uncheckItemElement = document.querySelector( uncheckItem );\n\t\t\t\tif ( uncheckItemElement ) {\n\t\t\t\t\tuncheckItemElement.checked = false;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfunction isUncheckedCheckbox( element ) {\n\t\treturn 'INPUT' === element.nodeName && 'checkbox' === element.type && ! element.checked;\n\t}\n\n\t/**\n\t * Load a tooltip for a single element.\n\t *\n\t * @since 6.26\n\t *\n\t * @param {HTMLElement} element\n\t * @param {boolean}     show\n\t */\n\tfunction loadTooltip( element, show = false ) {\n\t\tlet tooltipTarget = element;\n\n\t\t// Bootstrap 5 does not allow tooltips on dropdown triggers, so move the tooltip to the parent element.\n\t\tif ( tooltipTarget.hasAttribute( 'data-toggle' ) || tooltipTarget.hasAttribute( 'data-bs-toggle' ) ) {\n\t\t\ttooltipTarget.parentElement.setAttribute( 'title', tooltipTarget.getAttribute( 'title' ) );\n\t\t\ttooltipTarget.removeAttribute( 'title' );\n\t\t\ttooltipTarget.classList.remove( 'frm_bstooltip' );\n\t\t\ttooltipTarget.parentElement.classList.add( 'frm_bstooltip' );\n\t\t\ttooltipTarget = tooltipTarget.parentElement;\n\t\t}\n\n\t\tjQuery( tooltipTarget ).tooltip();\n\n\t\tif ( show ) {\n\t\t\tdeleteTooltips();\n\t\t\tjQuery( tooltipTarget ).tooltip( 'show' );\n\t\t}\n\t}\n\n\tfunction loadTooltips() {\n\t\tlet wrapClass = jQuery( '.wrap, .frm_wrap' ),\n\t\t\tconfirmModal = document.getElementById( 'frm_confirm_modal' ),\n\t\t\tdoAction = false,\n\t\t\tconfirmedBulkDelete = false;\n\n\t\tjQuery( confirmModal ).on( 'click', '[data-deletefield]', deleteFieldConfirmed );\n\t\tjQuery( confirmModal ).on( 'click', '[data-removeid]', removeThisTag );\n\t\tjQuery( confirmModal ).on( 'click', '[data-trashtemplate]', trashTemplate );\n\n\t\twrapClass.on( 'click', '.frm_remove_tag, .frm_remove_form_action', removeThisTag );\n\t\twrapClass.on( 'click', 'a[data-frmverify]', confirmClick );\n\t\twrapClass.on( 'click', 'a[data-frmtoggle]', toggleItem );\n\t\twrapClass.on( 'click', 'a[data-frmhide], a[data-frmshow]', hideShowItem );\n\t\twrapClass.on( 'change', 'input[data-frmhide], input[data-frmshow]', hideShowItem );\n\t\twrapClass.on( 'click', '.widget-top,a.widget-action', clickWidget );\n\n\t\twrapClass.on( 'mouseenter.frm', '.frm_bstooltip, .frm_help', function() {\n\t\t\tjQuery( this ).off( 'mouseenter.frm' );\n\t\t\tloadTooltip( this, true );\n\t\t} );\n\n\t\tjQuery( document ).on( 'click', '#doaction, #doaction2', function( event ) {\n\t\t\tconst isTop = this.id === 'doaction',\n\t\t\t\tsuffix = isTop ? 'top' : 'bottom',\n\t\t\t\tbulkActionSelector = document.getElementById( 'bulk-action-selector-' + suffix ),\n\t\t\t\tconfirmBulkDelete = document.getElementById( 'confirm-bulk-delete-' + suffix );\n\n\t\t\tif ( bulkActionSelector !== null && confirmBulkDelete !== null ) {\n\t\t\t\tdoAction = this;\n\n\t\t\t\tif ( ! confirmedBulkDelete && bulkActionSelector.value === 'bulk_delete' ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconfirmLinkClick( confirmBulkDelete );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdoAction = false;\n\t\t\t}\n\t\t} );\n\n\t\tjQuery( document ).on( 'click', '#frm-confirmed-click', function( event ) {\n\t\t\tif ( doAction === false || event.target.classList.contains( 'frm-btn-inactive' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( this.getAttribute( 'href' ) === 'confirm-bulk-delete' ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconfirmedBulkDelete = true;\n\t\t\t\tdoAction.click();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction deleteTooltips() {\n\t\tdocument.querySelectorAll( '.tooltip' ).forEach(\n\t\t\tfunction( tooltip ) {\n\t\t\t\ttooltip.remove();\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction removeThisTag() {\n\t\t/*jshint validthis:true */\n\t\tlet show, hide, removeMore;\n\n\t\tif ( parseInt( this.getAttribute( 'data-skip-frm-js' ) ) || confirmLinkClick( this ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst deleteButton = jQuery( this );\n\t\tconst id = deleteButton.attr( 'data-removeid' );\n\n\t\tshow = deleteButton.attr( 'data-showlast' );\n\t\tif ( typeof show === 'undefined' ) {\n\t\t\tshow = '';\n\t\t}\n\n\t\thide = deleteButton.attr( 'data-hidelast' );\n\t\tif ( typeof hide === 'undefined' ) {\n\t\t\thide = '';\n\t\t}\n\n\t\tremoveMore = deleteButton.attr( 'data-removemore' );\n\n\t\tif ( show !== '' ) {\n\t\t\tif ( deleteButton.closest( '.frm_add_remove' ).find( '.frm_remove_tag:visible' ).length > 1 ) {\n\t\t\t\tshow = '';\n\t\t\t\thide = '';\n\t\t\t}\n\t\t} else if ( id.indexOf( 'frm_postmeta_' ) === 0 ) {\n\t\t\tif ( jQuery( '#frm_postmeta_rows .frm_postmeta_row' ).length < 2 ) {\n\t\t\t\tshow = '.frm_add_postmeta_row.button';\n\t\t\t}\n\t\t\tif ( jQuery( '.frm_toggle_cf_opts' ).length && jQuery( '#frm_postmeta_rows .frm_postmeta_row:not(#' + id + ')' ).last().length ) {\n\t\t\t\tif ( show !== '' ) {\n\t\t\t\t\tshow += ',';\n\t\t\t\t}\n\t\t\t\tshow += '#' + jQuery( '#frm_postmeta_rows .frm_postmeta_row:not(#' + id + ')' ).last().attr( 'id' ) + ' .frm_toggle_cf_opts';\n\t\t\t}\n\t\t}\n\n\t\tconst fadeEle = document.getElementById( id );\n\t\tconst $fadeEle = jQuery( fadeEle );\n\t\t$fadeEle.fadeOut( 300, function() {\n\t\t\t$fadeEle.remove();\n\t\t\tfieldUpdated();\n\n\t\t\tif ( hide !== '' ) {\n\t\t\t\tjQuery( hide ).hide();\n\t\t\t}\n\n\t\t\tif ( show !== '' ) {\n\t\t\t\tjQuery( show + ' a,' + show ).removeClass( 'frm_hidden' ).fadeIn( 'slow' );\n\t\t\t}\n\n\t\t\tif ( this.closest( '.frm_form_action_settings' ) ) {\n\t\t\t\tconst type = this.closest( '.frm_form_action_settings' ).querySelector( '.frm_action_name' ).value;\n\t\t\t\tafterActionRemoved( type );\n\t\t\t}\n\t\t\tdocument.querySelector( '.tooltip' )?.remove();\n\t\t} );\n\n\t\tif ( typeof removeMore !== 'undefined' ) {\n\t\t\tremoveMore = jQuery( removeMore );\n\t\t\tremoveMore.fadeOut( 400, function() {\n\t\t\t\tremoveMore.remove();\n\t\t\t} );\n\t\t}\n\n\t\tif ( show !== '' ) {\n\t\t\tjQuery( this ).closest( '.frm_logic_rows' ).fadeOut( 'slow' );\n\t\t}\n\n\t\t/**\n\t\t * Fires after a tag element has been removed in the admin interface.\n\t\t *\n\t\t * @param {string}      id      The ID of the removed element\n\t\t * @param {HTMLElement} fadeEle The removed element that was faded out\n\t\t */\n\t\twp.hooks.doAction( 'frm_admin_tag_removed', id, fadeEle );\n\n\t\treturn false;\n\t}\n\n\tfunction afterActionRemoved( type ) {\n\t\tcheckActiveAction( type );\n\n\t\tconst hookName = 'frm_after_action_removed';\n\t\tconst hookArgs = { type };\n\t\twp.hooks.doAction( hookName, hookArgs );\n\t}\n\n\tfunction clickWidget( event, b ) {\n\t\t/*jshint validthis:true */\n\t\tif ( typeof b === 'undefined' ) {\n\t\t\tb = this;\n\t\t}\n\n\t\tpopCalcFields( b, false );\n\n\t\tconst cont = jQuery( b ).closest( '.frm_form_action_settings' );\n\t\tconst target = event.target;\n\n\t\tif ( cont.length && typeof target !== 'undefined' ) {\n\t\t\tconst className = target.parentElement.className;\n\t\t\tif ( 'string' === typeof className ) {\n\t\t\t\tif ( className.includes( 'frm_email_icons' ) || className.includes( 'frm_toggle' ) ) {\n\t\t\t\t\t// clicking on delete icon shouldn't open it\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet inside = cont.children( '.widget-inside' );\n\n\t\tif ( cont.length && inside.find( 'p, div, table' ).length < 1 ) {\n\t\t\tconst actionId = cont.find( 'input[name$=\"[ID]\"]' ).val();\n\t\t\tconst actionType = cont.find( 'input[name$=\"[post_excerpt]\"]' ).val();\n\t\t\tif ( actionType ) {\n\t\t\t\tinside.html( '<span class=\"frm-wait frm_spinner\"></span>' );\n\t\t\t\tcont.find( '.spinner' ).fadeIn( 'slow' );\n\t\t\t\tjQuery.ajax( {\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\turl: ajaxurl,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taction: 'frm_form_action_fill',\n\t\t\t\t\t\taction_id: actionId,\n\t\t\t\t\t\taction_type: actionType,\n\t\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function( html ) {\n\t\t\t\t\t\tinside.html( html );\n\t\t\t\t\t\tinitiateMultiselect();\n\t\t\t\t\t\tshowInputIcon( '#' + cont.attr( 'id' ) );\n\t\t\t\t\t\tinitAutocomplete( inside );\n\t\t\t\t\t\tjQuery( b ).trigger( 'frm-action-loaded' );\n\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Fires after filling form action content when opening.\n\t\t\t\t\t\t *\n\t\t\t\t\t\t * @since 5.5.4\n\t\t\t\t\t\t *\n\t\t\t\t\t\t * @param {Object} insideElement JQuery object of form action inside element.\n\t\t\t\t\t\t */\n\t\t\t\t\t\twp.hooks.doAction( 'frm_filled_form_action', inside );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\tjQuery( b ).closest( '.frm_field_box' ).siblings().find( '.widget-inside' ).slideUp( 'fast' );\n\t\tif ( ( typeof b.className !== 'undefined' && b.className.includes( 'widget-action' ) ) || jQuery( b ).closest( '.start_divider' ).length < 1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tinside = jQuery( b ).closest( 'div.widget' ).children( '.widget-inside' );\n\t\tif ( inside.is( ':hidden' ) ) {\n\t\t\tinside.slideDown( 'fast' );\n\t\t} else {\n\t\t\tinside.slideUp( 'fast' );\n\t\t}\n\t}\n\n\tfunction clickNewTab() {\n\t\t/*jshint validthis:true */\n\t\tconst t = this.getAttribute( 'href' );\n\t\tif ( typeof t === 'undefined' ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst c = t.replace( '#', '.' );\n\t\tconst $link = jQuery( this );\n\n\t\t$link.closest( 'li' ).addClass( 'frm-tabs active' ).siblings( 'li' ).removeClass( 'frm-tabs active starttab' );\n\t\t$link.closest( 'div' ).children( '.tabs-panel' ).not( t ).not( c ).hide();\n\n\t\tconst tabContent = document.getElementById( t.replace( '#', '' ) );\n\t\tif ( tabContent ) {\n\t\t\ttabContent.style.display = 'block';\n\t\t}\n\n\t\t// clearSettingsBox would hide field settings when opening the fields modal and we want to skip it there.\n\t\tif ( this.id === 'frm_insert_fields_tab' && ! this.closest( '#frm_adv_info' ) ) {\n\t\t\tclearSettingsBox();\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction clickTab( link, auto ) {\n\t\tlink = jQuery( link );\n\t\tconst t = link.attr( 'href' );\n\t\tif ( typeof t === 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst c = t.replace( '#', '.' );\n\n\t\tlink.closest( 'li' ).addClass( 'frm-tabs active' ).siblings( 'li' ).removeClass( 'frm-tabs active starttab' );\n\t\tif ( link.closest( 'div' ).find( '.tabs-panel' ).length ) {\n\t\t\tlink.closest( 'div' ).children( '.tabs-panel' ).not( t ).not( c ).hide();\n\t\t} else if ( document.getElementById( 'form_global_settings' ) !== null ) {\n\t\t\t/* global settings */\n\t\t\tconst ajax = link.data( 'frmajax' );\n\t\t\tlink.closest( '.frm_wrap' ).find( '.tabs-panel, .hide_with_tabs' ).hide();\n\t\t\tif ( typeof ajax !== 'undefined' && ajax == '1' ) {\n\t\t\t\tloadSettingsTab( t );\n\t\t\t}\n\t\t} else {\n\t\t\t/* form settings page */\n\t\t\tjQuery( '#frm-categorydiv .tabs-panel, .hide_with_tabs' ).hide();\n\t\t}\n\t\tjQuery( t ).show();\n\t\tjQuery( c ).show();\n\n\t\thideShortcodes();\n\n\t\tif ( auto !== 'auto' ) {\n\t\t\t// Hide success message on tab change.\n\t\t\tjQuery( '.frm_updated_message' ).hide();\n\t\t\tjQuery( '.frm_warning_style' ).hide();\n\t\t}\n\n\t\tif ( jQuery( link ).closest( '#frm_adv_info' ).length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( jQuery( '.frm_form_settings' ).length ) {\n\t\t\tjQuery( '.frm_form_settings' ).attr( 'action', '?page=formidable&frm_action=settings&id=' + jQuery( '.frm_form_settings input[name=\"id\"]' ).val() + '&t=' + t.replace( '#', '' ) );\n\t\t} else {\n\t\t\tjQuery( '.frm_settings_form' ).attr( 'action', '?page=formidable-settings&t=' + t.replace( '#', '' ) );\n\t\t}\n\t}\n\n\tfunction setupSortable( sortableSelector ) {\n\t\tdocument.querySelectorAll( sortableSelector ).forEach(\n\t\t\tlist => {\n\t\t\t\tmakeDroppable( list );\n\t\t\t\tArray.from( list.children ).forEach( child => makeDraggable( child, '.frm-move' ) );\n\n\t\t\t\tconst $sectionTitle = jQuery( list ).children( '[data-type=\"divider\"]' ).children( '.divider_section_only' );\n\t\t\t\tif ( $sectionTitle.length ) {\n\t\t\t\t\tmakeDroppable( $sectionTitle );\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\tsetupFieldOptionSorting( jQuery( '#frm_builder_page' ) );\n\t}\n\n\tfunction makeDroppable( list ) {\n\t\tjQuery( list ).droppable( {\n\t\t\taccept: '.frmbutton, li.frm_field_box',\n\t\t\tdeactivate: handleFieldDrop,\n\t\t\tover: onDragOverDroppable,\n\t\t\tout: onDraggableLeavesDroppable,\n\t\t\ttolerance: 'pointer'\n\t\t} );\n\t}\n\n\tfunction onDragOverDroppable( event, ui ) {\n\t\tconst droppable = getDroppableForOnDragOver( event.target );\n\t\tconst draggable = ui.draggable[ 0 ];\n\n\t\tif ( ! allowDrop( draggable, droppable, event ) ) {\n\t\t\tdroppable.classList.remove( 'frm-over-droppable' );\n\t\t\tjQuery( droppable ).parents( 'ul.frm_sorting' ).addClass( 'frm-over-droppable' );\n\t\t\treturn;\n\t\t}\n\n\t\tdocument.querySelectorAll( '.frm-over-droppable' ).forEach( droppable => droppable.classList.remove( 'frm-over-droppable' ) );\n\t\tdroppable.classList.add( 'frm-over-droppable' );\n\t\tjQuery( droppable ).parents( 'ul.frm_sorting' ).addClass( 'frm-over-droppable' );\n\t}\n\n\t/**\n\t * Maybe change the droppable.\n\t * Section titles are made droppable, but are not a list, so we need to change the droppable to the section's list instead.\n\t *\n\t * @param {Element} droppable\n\t * @return {Element}\n\t */\n\tfunction getDroppableForOnDragOver( droppable ) {\n\t\tif ( droppable.classList.contains( 'divider_section_only' ) ) {\n\t\t\tdroppable = jQuery( droppable ).nextAll( '.start_divider.frm_sorting' ).get( 0 );\n\t\t}\n\t\treturn droppable;\n\t}\n\n\tfunction onDraggableLeavesDroppable( event ) {\n\t\tconst droppable = event.target;\n\t\tdroppable.classList.remove( 'frm-over-droppable' );\n\t}\n\n\tfunction makeDraggable( draggable, handle ) {\n\t\tconst settings = {\n\t\t\thelper: getDraggableHelper,\n\t\t\trevert: 'invalid',\n\t\t\tdelay: 10,\n\t\t\tstart: handleDragStart,\n\t\t\tstop: handleDragStop,\n\t\t\tdrag: handleDrag,\n\t\t\tcursor: 'grabbing',\n\t\t\trefreshPositions: true,\n\t\t\tcursorAt: {\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 90 // The width of draggable button is 180. 90 should center the draggable on the cursor.\n\t\t\t}\n\t\t};\n\t\tif ( 'string' === typeof handle ) {\n\t\t\tsettings.handle = handle;\n\t\t}\n\t\tjQuery( draggable ).draggable( settings );\n\t}\n\n\tfunction getDraggableHelper( event ) {\n\t\tconst draggable = event.delegateTarget;\n\n\t\tif ( isFieldGroup( draggable ) ) {\n\t\t\tconst newTextFieldClone = document.getElementById( 'frm-insert-fields' ).querySelector( '.frm_ttext' ).cloneNode( true );\n\t\t\tnewTextFieldClone.querySelector( 'use' ).setAttributeNS( 'http://www.w3.org/1999/xlink', 'href', '#frm_field_group_layout_icon' );\n\t\t\tnewTextFieldClone.querySelector( 'span' ).textContent = __( 'Field Group', 'formidable' );\n\t\t\tnewTextFieldClone.classList.add( 'frm_field_box' );\n\t\t\tnewTextFieldClone.classList.add( 'ui-sortable-helper' );\n\t\t\treturn newTextFieldClone;\n\t\t}\n\n\t\tlet copyTarget;\n\t\tconst isNewField = draggable.classList.contains( 'frmbutton' );\n\t\tif ( isNewField ) {\n\t\t\tcopyTarget = draggable.cloneNode( true );\n\t\t\tcopyTarget.classList.add( 'ui-sortable-helper' );\n\t\t\tdraggable.classList.add( 'frm-new-field' );\n\t\t\treturn copyTarget;\n\t\t}\n\n\t\tif ( draggable.hasAttribute( 'data-ftype' ) ) {\n\t\t\tconst fieldType = draggable.getAttribute( 'data-ftype' );\n\t\t\tcopyTarget = document.getElementById( 'frm-insert-fields' ).querySelector( '.frm_t' + fieldType );\n\t\t\tcopyTarget = copyTarget.cloneNode( true );\n\t\t\tcopyTarget.classList.add( 'form-field' );\n\n\t\t\tcopyTarget.classList.add( 'ui-sortable-helper' );\n\n\t\t\tif ( copyTarget ) {\n\t\t\t\treturn copyTarget.cloneNode( true );\n\t\t\t}\n\t\t}\n\n\t\treturn div( { className: 'frmbutton' } );\n\t}\n\n\tfunction handleDragStart( event, ui ) {\n\t\tif ( event.target.classList.contains( 'frm_at_limit' ) ) {\n\t\t\tshowLimitModal();\n\t\t\treturn false;\n\t\t}\n\n\t\tdragState.dragging = true;\n\n\t\tconst container = postBodyContent;\n\t\tcontainer.classList.add( 'frm-dragging-field' );\n\n\t\tdocument.body.classList.add( 'frm-dragging' );\n\t\tui.helper.addClass( 'frm-sortable-helper' );\n\t\tui.helper.initialOffset = container.scrollTop;\n\n\t\tevent.target.classList.add( 'frm-drag-fade' );\n\n\t\tunselectFieldGroups();\n\t\tdeleteEmptyDividerWrappers();\n\t\tmaybeRemoveGroupHoverTarget();\n\t\tcloseOpenFieldDropdowns();\n\t\tdeleteTooltips();\n\t}\n\n\tfunction handleDragStop() {\n\t\tconst container = postBodyContent;\n\t\tcontainer.classList.remove( 'frm-dragging-field' );\n\t\tdocument.body.classList.remove( 'frm-dragging' );\n\n\t\tconst fade = document.querySelector( '.frm-drag-fade' );\n\t\tif ( fade ) {\n\t\t\tfade.classList.remove( 'frm-drag-fade' );\n\t\t}\n\t}\n\n\tfunction handleDrag( event, ui ) {\n\t\tmaybeScrollBuilder( event );\n\t\tconst draggable = event.target;\n\t\tconst droppable = getDroppableTarget();\n\n\t\tlet placeholder = document.getElementById( 'frm_drag_placeholder' );\n\t\tif ( ! allowDrop( draggable, droppable, event ) ) {\n\t\t\tif ( placeholder ) {\n\t\t\t\tplaceholder.remove();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! placeholder ) {\n\t\t\tplaceholder = tag( 'li', {\n\t\t\t\tid: 'frm_drag_placeholder',\n\t\t\t\tclassName: 'sortable-placeholder'\n\t\t\t} );\n\t\t}\n\t\tconst frmSortableHelper = ui.helper.get( 0 );\n\t\tif ( frmSortableHelper.classList.contains( 'form-field' ) || frmSortableHelper.classList.contains( 'frm_field_box' ) ) {\n\t\t\t// Sync the y position of the draggable so it still follows the cursor after scrolling up and down the field list.\n\t\t\tfrmSortableHelper.style.transform = 'translateY(' + getDragOffset( ui.helper ) + 'px)';\n\t\t}\n\n\t\tif ( 'frm-show-fields' === droppable.id || droppable.classList.contains( 'start_divider' ) ) {\n\t\t\tplaceholder.style.left = 0;\n\t\t\thandleDragOverYAxis( { droppable, y: event.clientY, placeholder } );\n\t\t\treturn;\n\t\t}\n\n\t\tplaceholder.style.top = '';\n\t\thandleDragOverFieldGroup( { droppable, x: event.clientX, placeholder } );\n\t}\n\n\tfunction maybeScrollBuilder( event ) {\n\t\t$postBodyContent.scrollTop(\n\t\t\t( _, v ) => {\n\t\t\t\tconst moved = event.clientY;\n\t\t\t\tconst h = postBodyContent.offsetHeight;\n\t\t\t\tconst relativePos = event.clientY - postBodyContent.offsetTop;\n\t\t\t\tconst y = relativePos - ( h / 2 );\n\n\t\t\t\tif ( relativePos > ( h - 50 ) && moved > 5 ) {\n\t\t\t\t\t// Scrolling down.\n\t\t\t\t\treturn v + ( y * 0.1 );\n\t\t\t\t}\n\n\t\t\t\tif ( relativePos < 70 && moved < 130 ) {\n\t\t\t\t\t// Scrolling up.\n\t\t\t\t\treturn v - Math.abs( y * 0.1 );\n\t\t\t\t}\n\n\t\t\t\treturn v;\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction getDragOffset( $helper ) {\n\t\treturn postBodyContent.scrollTop - $helper.initialOffset;\n\t}\n\n\tfunction getDroppableTarget() {\n\t\tlet droppable = document.getElementById( 'frm-show-fields' );\n\t\twhile ( droppable.querySelector( '.frm-over-droppable' ) ) {\n\t\t\tdroppable = droppable.querySelector( '.frm-over-droppable' );\n\t\t}\n\t\tif ( 'frm-show-fields' === droppable.id && ! droppable.classList.contains( 'frm-over-droppable' ) ) {\n\t\t\tdroppable = false;\n\t\t}\n\t\treturn droppable;\n\t}\n\n\tfunction handleFieldDrop( _, ui ) {\n\t\tif ( ! dragState.dragging ) {\n\t\t\t// dragState.dragging is set to true on drag start.\n\t\t\t// The deactivate event gets called for every droppable. This check to make sure it happens once.\n\t\t\treturn;\n\t\t}\n\n\t\tdragState.dragging = false;\n\n\t\tconst draggable = ui.draggable[ 0 ];\n\t\tconst placeholder = document.getElementById( 'frm_drag_placeholder' );\n\n\t\tif ( ! placeholder ) {\n\t\t\tui.helper.remove();\n\t\t\tdebouncedSyncAfterDragAndDrop();\n\t\t\treturn;\n\t\t}\n\n\t\tmaybeOpenCollapsedPage( placeholder );\n\n\t\tconst $previousFieldContainer = ui.helper.parent();\n\t\tconst previousSection = ui.helper.get( 0 ).closest( 'ul.start_divider' );\n\t\tconst newSection = placeholder.closest( 'ul.start_divider' );\n\n\t\tif ( draggable.classList.contains( 'frm-new-field' ) ) {\n\t\t\tinsertNewFieldByDragging( draggable.id );\n\t\t} else {\n\t\t\tmoveFieldThatAlreadyExists( draggable, placeholder );\n\t\t\tmaybeMakeFieldGroupDraggableAfterDragging( placeholder.parentElement );\n\t\t}\n\n\t\tconst previousSectionId = previousSection ? parseInt( previousSection.closest( '.edit_field_type_divider' ).getAttribute( 'data-fid' ) ) : 0;\n\t\tconst newSectionId = newSection ? parseInt( newSection.closest( '.edit_field_type_divider' ).getAttribute( 'data-fid' ) ) : 0;\n\n\t\tplaceholder.remove();\n\t\tui.helper.remove();\n\n\t\tconst $previousContainerFields = $previousFieldContainer.length ? getFieldsInRow( $previousFieldContainer ) : [];\n\t\tmaybeUpdatePreviousFieldContainerAfterDrop( $previousFieldContainer, $previousContainerFields );\n\t\tmaybeUpdateDraggableClassAfterDrop( draggable, $previousContainerFields );\n\n\t\tif ( previousSectionId !== newSectionId ) {\n\t\t\tupdateFieldAfterMovingBetweenSections( jQuery( draggable ), previousSection );\n\t\t}\n\n\t\tdebouncedSyncAfterDragAndDrop();\n\t}\n\n\t/**\n\t * When a field is moved into a field group, make sure the field group is draggable.\n\t *\n\t * @since 6.24\n\t *\n\t * @param {HTMLElement} placeholderParent\n\t * @return {void}\n\t */\n\tfunction maybeMakeFieldGroupDraggableAfterDragging( placeholderParent ) {\n\t\tconst isDroppingIntoFieldGroup = placeholderParent.nodeName === 'UL' &&\n\t\t\t! placeholderParent.classList.contains( 'start_divider' ) &&\n\t\t\t'frm-show-fields' !== placeholderParent.id;\n\n\t\tif ( ! isDroppingIntoFieldGroup ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst fieldGroupLi = placeholderParent.closest( 'li' );\n\t\tif ( fieldGroupLi && ! fieldGroupLi.classList.contains( 'ui-draggable' ) ) {\n\t\t\tmakeDraggable( fieldGroupLi, '.frm-move' );\n\t\t}\n\t}\n\n\t/**\n\t * If a page if collapsed, expand it before dragging since only the page break will move.\n\t *\n\t * @param {Element} placeholder\n\t * @return {void}\n\t */\n\tfunction maybeOpenCollapsedPage( placeholder ) {\n\t\tif ( ! placeholder.previousElementSibling || ! placeholder.previousElementSibling.classList.contains( 'frm-is-collapsed' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst $pageBreakField = jQuery( placeholder ).prevUntil( '[data-type=\"break\"]' );\n\t\tif ( ! $pageBreakField.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst collapseButton = $pageBreakField.find( '.frm-collapse-page' ).get( 0 );\n\t\tif ( collapseButton ) {\n\t\t\tcollapseButton.click();\n\t\t}\n\t}\n\n\tfunction maybeUpdatePreviousFieldContainerAfterDrop( $previousFieldContainer, $previousContainerFields ) {\n\t\tif ( ! $previousFieldContainer.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( $previousContainerFields.length ) {\n\t\t\tsyncLayoutClasses( $previousContainerFields.first() );\n\t\t} else {\n\t\t\tmaybeDeleteAnEmptyFieldGroup( $previousFieldContainer.get( 0 ) );\n\t\t}\n\t}\n\n\tfunction maybeUpdateDraggableClassAfterDrop( draggable, $previousContainerFields ) {\n\t\tif ( 0 !== $previousContainerFields.length || 1 !== getFieldsInRow( jQuery( draggable.parentNode ) ).length ) {\n\t\t\tsyncLayoutClasses( jQuery( draggable ) );\n\t\t}\n\t}\n\n\t/**\n\t * Remove an empty field group, but don't remove an empty section.\n\t *\n\t * @param {Element} previousFieldContainer\n\t * @return {void}\n\t */\n\tfunction maybeDeleteAnEmptyFieldGroup( previousFieldContainer ) {\n\t\tconst closestFieldBox = previousFieldContainer.closest( 'li.frm_field_box' );\n\t\tif ( closestFieldBox && ! closestFieldBox.classList.contains( 'edit_field_type_divider' ) ) {\n\t\t\tclosestFieldBox.remove();\n\t\t}\n\t}\n\n\tfunction handleDragOverYAxis( { droppable, y, placeholder } ) {\n\t\tconst $list = jQuery( droppable );\n\n\t\tlet top;\n\n\t\tconst $children = $list.children().not( '.edit_field_type_end_divider' );\n\t\tif ( 0 === $children.length ) {\n\t\t\t$list.prepend( placeholder );\n\t\t\ttop = 0;\n\t\t} else {\n\t\t\tconst insertAtIndex = determineIndexBasedOffOfMousePositionInList( $list, y );\n\n\t\t\tif ( insertAtIndex === $children.length ) {\n\t\t\t\tconst $lastChild = jQuery( $children.get( insertAtIndex - 1 ) );\n\t\t\t\ttop = $lastChild.offset().top + $lastChild.outerHeight();\n\t\t\t\t$list.append( placeholder );\n\n\t\t\t\t// Make sure nothing gets inserted after the end divider.\n\t\t\t\tconst $endDivider = $list.children( '.edit_field_type_end_divider' );\n\t\t\t\tif ( $endDivider.length ) {\n\t\t\t\t\t$list.append( $endDivider );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttop = jQuery( $children.get( insertAtIndex ) ).offset().top;\n\t\t\t\tjQuery( $children.get( insertAtIndex ) ).before( placeholder );\n\t\t\t}\n\t\t}\n\n\t\ttop -= $list.offset().top;\n\t\tplaceholder.style.top = top + 'px';\n\t}\n\n\tfunction determineIndexBasedOffOfMousePositionInList( $list, y ) {\n\t\tconst $items = $list.children().not( '.edit_field_type_end_divider' );\n\t\tconst length = $items.length;\n\n\t\tlet index, item, itemTop, returnIndex;\n\n\t\tif ( ! document.querySelector( '.frm-has-fields .frm_no_fields' ) ) {\n\t\t\t// Always return 0 when there are no fields.\n\t\t\treturn 0;\n\t\t}\n\n\t\treturnIndex = 0;\n\t\tfor ( index = length - 1; index >= 0; --index ) {\n\t\t\titem = $items.get( index );\n\t\t\titemTop = jQuery( item ).offset().top;\n\t\t\tif ( y > itemTop ) {\n\t\t\t\treturnIndex = index;\n\t\t\t\tif ( y > itemTop + ( jQuery( item ).outerHeight() / 2 ) ) {\n\t\t\t\t\treturnIndex = index + 1;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn returnIndex;\n\t}\n\n\tfunction handleDragOverFieldGroup( { droppable, x, placeholder } ) {\n\t\tconst $row = jQuery( droppable );\n\t\tconst $children = getFieldsInRow( $row );\n\n\t\tif ( ! $children.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet left;\n\t\tconst insertAtIndex = determineIndexBasedOffOfMousePositionInRow( $row, x );\n\n\t\tif ( insertAtIndex === $children.length ) {\n\t\t\tconst $lastChild = jQuery( $children.get( insertAtIndex - 1 ) );\n\t\t\tleft = $lastChild.offset().left + $lastChild.outerWidth();\n\t\t\t$row.append( placeholder );\n\t\t} else {\n\t\t\tleft = jQuery( $children.get( insertAtIndex ) ).offset().left;\n\t\t\tjQuery( $children.get( insertAtIndex ) ).before( placeholder );\n\n\t\t\tconst amountToOffsetLeftBy = 0 === insertAtIndex ? 4 : 8; // Offset by 8 in between rows, but only 4 for the first item in a group.\n\t\t\tleft -= amountToOffsetLeftBy; // Offset the placeholder slightly so it appears between two fields.\n\t\t}\n\n\t\tleft -= $row.offset().left;\n\n\t\tplaceholder.style.left = left + 'px';\n\t}\n\n\tfunction syncAfterDragAndDrop() {\n\t\tfixUnwrappedListItems();\n\t\ttoggleSectionHolder();\n\t\tmaybeFixEndDividers();\n\t\tmaybeDeleteEmptyFieldGroups();\n\t\tupdateFieldOrder();\n\n\t\tconst event = new Event( 'frm_sync_after_drag_and_drop', { bubbles: false } );\n\t\tdocument.dispatchEvent( event );\n\t}\n\n\tfunction maybeFixEndDividers() {\n\t\tdocument.querySelectorAll( '.edit_field_type_end_divider' ).forEach(\n\t\t\tendDivider => endDivider.parentNode.append( endDivider )\n\t\t);\n\t}\n\n\tfunction maybeDeleteEmptyFieldGroups() {\n\t\tdocument.querySelectorAll( 'li.form_field_box:not(.form-field)' ).forEach(\n\t\t\tfieldGroup => ! fieldGroup.children.length && fieldGroup.remove()\n\t\t);\n\t}\n\n\tfunction fixUnwrappedListItems() {\n\t\tconst lists = document.querySelectorAll( 'ul#frm-show-fields, ul.start_divider' );\n\t\tlists.forEach(\n\t\t\tlist => {\n\t\t\t\tlist.childNodes.forEach(\n\t\t\t\t\tchild => {\n\t\t\t\t\t\tif ( 'undefined' === typeof child.classList ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( child.classList.contains( 'edit_field_type_end_divider' ) ) {\n\t\t\t\t\t\t\t// Never wrap end divider in place.\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( 'undefined' !== typeof child.classList && child.classList.contains( 'form-field' ) ) {\n\t\t\t\t\t\t\twrapFieldLiInPlace( child );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction deleteEmptyDividerWrappers() {\n\t\tconst dividers = document.querySelectorAll( 'ul.start_divider' );\n\t\tif ( ! dividers.length ) {\n\t\t\treturn;\n\t\t}\n\t\tdividers.forEach(\n\t\t\tfunction( divider ) {\n\t\t\t\tconst children = [].slice.call( divider.children );\n\t\t\t\tchildren.forEach(\n\t\t\t\t\tfunction( child ) {\n\t\t\t\t\t\tif ( 0 === child.children.length ) {\n\t\t\t\t\t\t\tchild.remove();\n\t\t\t\t\t\t} else if ( 1 === child.children.length && 'ul' === child.firstElementChild.nodeName.toLowerCase() && 0 === child.firstElementChild.children.length ) {\n\t\t\t\t\t\t\tchild.remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction getFieldsInRow( $row ) {\n\t\tlet $fields = jQuery();\n\n\t\tconst row = $row.get( 0 );\n\t\tif ( ! row.children ) {\n\t\t\treturn $fields;\n\t\t}\n\n\t\tArray.from( row.children ).forEach(\n\t\t\tchild => {\n\t\t\t\tif ( 'none' === child.style.display ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst classes = child.classList;\n\t\t\t\tif ( ! classes.contains( 'form-field' ) || classes.contains( 'edit_field_type_end_divider' ) || classes.contains( 'frm-sortable-helper' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$fields = $fields.add( child );\n\t\t\t}\n\t\t);\n\t\treturn $fields;\n\t}\n\n\tfunction determineIndexBasedOffOfMousePositionInRow( $row, x ) {\n\t\tlet $inputs = getFieldsInRow( $row ),\n\t\t\tlength = $inputs.length,\n\t\t\tindex, input, inputLeft, returnIndex;\n\n\t\treturnIndex = 0;\n\t\tfor ( index = length - 1; index >= 0; --index ) {\n\t\t\tinput = $inputs.get( index );\n\t\t\tinputLeft = jQuery( input ).offset().left;\n\t\t\tif ( x > inputLeft ) {\n\t\t\t\treturnIndex = index;\n\t\t\t\tif ( x > inputLeft + ( jQuery( input ).outerWidth() / 2 ) ) {\n\t\t\t\t\treturnIndex = index + 1;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn returnIndex;\n\t}\n\n\tfunction syncLayoutClasses( $item, type ) {\n\t\tlet $fields, size, layoutClasses, classToAddFunction;\n\n\t\tif ( 'undefined' === typeof type ) {\n\t\t\ttype = 'even';\n\t\t}\n\n\t\t$fields = $item.parent().children( 'li.form-field, li.frmbutton_loadingnow' ).not( '.edit_field_type_end_divider' );\n\t\tsize = $fields.length;\n\t\tlayoutClasses = getLayoutClasses();\n\n\t\tif ( 'even' === type && 5 !== size ) {\n\t\t\t$fields.each( getSyncLayoutClass( layoutClasses, getEvenClassForSize( size ) ) );\n\t\t} else if ( 'clear' === type ) {\n\t\t\t$fields.each( getSyncLayoutClass( layoutClasses, '' ) );\n\t\t} else {\n\t\t\tif ( -1 !== [ 'left', 'right', 'middle', 'even' ].indexOf( type ) ) {\n\t\t\t\tclassToAddFunction = function( index ) {\n\t\t\t\t\treturn getClassForBlock( size, type, index );\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tclassToAddFunction = function( index ) {\n\t\t\t\t\tconst size = type[ index ];\n\t\t\t\t\treturn getLayoutClassForSize( size );\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t$fields.each( getSyncLayoutClass( layoutClasses, classToAddFunction ) );\n\t\t}\n\n\t\tupdateFieldGroupControls( $item.parent(), $fields.length );\n\t}\n\n\tfunction updateFieldGroupControls( $row, count ) {\n\t\tlet rowOffset, shouldShowControls, controls;\n\n\t\trowOffset = $row.offset();\n\n\t\tif ( 'undefined' === typeof rowOffset ) {\n\t\t\treturn;\n\t\t}\n\n\t\tshouldShowControls = count >= 2;\n\n\t\tcontrols = document.getElementById( 'frm_field_group_controls' );\n\t\tif ( null === controls ) {\n\t\t\tif ( ! shouldShowControls ) {\n\t\t\t\t// exit early. if we do not need controls and they do not exist, do nothing.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcontrols = div();\n\t\t\tcontrols.id = 'frm_field_group_controls';\n\t\t\tcontrols.setAttribute( 'role', 'group' );\n\t\t\tcontrols.setAttribute( 'tabindex', 0 );\n\t\t\tsetFieldControlsHtml( controls );\n\t\t\tbuilderPage.append( controls );\n\t\t}\n\n\t\t$row.append( controls );\n\t\tcontrols.style.display = shouldShowControls ? 'block' : 'none';\n\t}\n\n\tfunction setFieldControlsHtml( controls ) {\n\t\tlet layoutOption, moveOption;\n\n\t\tlayoutOption = document.createElement( 'span' );\n\t\tlayoutOption.innerHTML = '<svg class=\"frmsvg\"><use href=\"#frm_field_group_layout_icon\"></use></svg>';\n\t\tconst layoutOptionLabel = __( 'Set Row Layout', 'formidable' );\n\t\taddTooltip( layoutOption, layoutOptionLabel );\n\t\tmakeTabbable( layoutOption, layoutOptionLabel );\n\n\t\tmoveOption = document.createElement( 'span' );\n\t\tmoveOption.innerHTML = '<svg class=\"frmsvg\"><use href=\"#frm_thick_move_icon\"></use></svg>';\n\t\tmoveOption.classList.add( 'frm-move' );\n\t\tconst moveOptionLabel = __( 'Move Field Group', 'formidable' );\n\t\taddTooltip( moveOption, moveOptionLabel );\n\t\tmakeTabbable( moveOption, moveOptionLabel );\n\n\t\tcontrols.innerHTML = '';\n\t\tcontrols.append( layoutOption );\n\t\tcontrols.append( moveOption );\n\t\tcontrols.append( getFieldControlsDropdown() );\n\t}\n\n\tfunction addTooltip( element, title ) {\n\t\telement.setAttribute( 'data-bs-toggle', 'tooltip' );\n\t\telement.setAttribute( 'data-bs-container', 'body' );\n\t\telement.setAttribute( 'title', title );\n\t\telement.addEventListener(\n\t\t\t'mouseover',\n\t\t\tfunction() {\n\t\t\t\tif ( null === element.getAttribute( 'data-original-title' ) ) {\n\t\t\t\t\tjQuery( element ).tooltip();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction getFieldControlsDropdown() {\n\t\tconst dropdown = span( { className: 'dropdown' } );\n\t\tconst trigger = a( {\n\t\t\tclassName: 'frm_bstooltip frm-hover-icon frm-dropdown-toggle dropdown-toggle',\n\t\t\tchildren: [\n\t\t\t\tspan( {\n\t\t\t\t\tchild: svg( { href: '#frm_thick_more_vert_icon' } )\n\t\t\t\t} ),\n\t\t\t\tspan( {\n\t\t\t\t\tclassName: 'screen-reader-text',\n\t\t\t\t\ttext: __( 'Toggle More Options Dropdown', 'formidable' )\n\t\t\t\t} )\n\t\t\t]\n\t\t} );\n\n\t\tfrmDom.setAttributes(\n\t\t\ttrigger,\n\t\t\t{\n\t\t\t\ttitle: __( 'More Options', 'formidable' ),\n\t\t\t\t'data-bs-toggle': 'dropdown',\n\t\t\t\t'data-bs-container': 'body',\n\t\t\t\t'data-bs-display': 'static'\n\t\t\t}\n\t\t);\n\t\tmakeTabbable( trigger, __( 'More Options', 'formidable' ) );\n\t\tdropdown.append( trigger );\n\n\t\tconst ul = div( {\n\t\t\tclassName: 'frm-dropdown-menu dropdown-menu dropdown-menu-right'\n\t\t} );\n\t\tul.setAttribute( 'role', 'menu' );\n\t\tdropdown.append( ul );\n\n\t\treturn dropdown;\n\t}\n\n\tfunction getSyncLayoutClass( layoutClasses, classToAdd ) {\n\t\treturn function( itemIndex ) {\n\t\t\tlet currentClassToAdd, length, layoutClassIndex, currentClass, activeLayoutClass, fieldId, layoutClassesInput;\n\n\t\t\tcurrentClassToAdd = 'function' === typeof classToAdd ? classToAdd( itemIndex ) : classToAdd;\n\t\t\tlength = layoutClasses.length;\n\t\t\tactiveLayoutClass = false;\n\t\t\tfor ( layoutClassIndex = 0; layoutClassIndex < length; ++layoutClassIndex ) {\n\t\t\t\tcurrentClass = layoutClasses[ layoutClassIndex ];\n\t\t\t\tif ( this.classList.contains( currentClass ) ) {\n\t\t\t\t\tactiveLayoutClass = currentClass;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfieldId = this.dataset.fid;\n\n\t\t\tif ( 'undefined' === typeof fieldId ) {\n\t\t\t\t// we are syncing the drag/drop placeholder before the actual field has loaded.\n\t\t\t\t// this will get called again afterward and the input will exist then.\n\t\t\t\tthis.classList.add( currentClassToAdd );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmoveFieldSettings( document.getElementById( 'frm-single-settings-' + fieldId ) );\n\t\t\tlayoutClassesInput = document.getElementById( 'frm_classes_' + fieldId );\n\n\t\t\tif ( null === layoutClassesInput ) {\n\t\t\t\t// not every field type has a layout class input.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( false === activeLayoutClass ) {\n\t\t\t\tif ( '' !== currentClassToAdd ) {\n\t\t\t\t\tlayoutClassesInput.value = layoutClassesInput.value.concat( ' ' + currentClassToAdd );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.classList.remove( activeLayoutClass );\n\t\t\t\tlayoutClassesInput.value = layoutClassesInput.value.replace( activeLayoutClass, currentClassToAdd );\n\t\t\t}\n\n\t\t\tif ( this.classList.contains( 'frm_first' ) ) {\n\t\t\t\tthis.classList.remove( 'frm_first' );\n\t\t\t\tlayoutClassesInput.value = layoutClassesInput.value.replace( 'frm_first', '' ).trim();\n\t\t\t}\n\n\t\t\tif ( 0 === itemIndex ) {\n\t\t\t\tthis.classList.add( 'frm_first' );\n\t\t\t\tlayoutClassesInput.value = layoutClassesInput.value.concat( ' frm_first' );\n\t\t\t}\n\n\t\t\tjQuery( layoutClassesInput ).trigger( 'change' );\n\t\t};\n\t}\n\n\tfunction getLayoutClasses() {\n\t\treturn [ 'frm_full', 'frm_half', 'frm_third', 'frm_fourth', 'frm_sixth', 'frm_two_thirds', 'frm_three_fourths', 'frm1', 'frm2', 'frm3', 'frm4', 'frm5', 'frm6', 'frm7', 'frm8', 'frm9', 'frm10', 'frm11', 'frm12' ];\n\t}\n\n\tfunction setupFieldOptionSorting( sort ) {\n\t\tconst opts = {\n\t\t\titems: '.frm_sortable_field_opts li',\n\t\t\taxis: 'y',\n\t\t\topacity: 0.65,\n\t\t\tforcePlaceholderSize: false,\n\t\t\thandle: '.frm-drag',\n\t\t\thelper: function( e, li ) {\n\t\t\t\tcopyHelper = li.clone().insertAfter( li );\n\t\t\t\treturn li.clone();\n\t\t\t},\n\t\t\tstop: function( e, ui ) {\n\t\t\t\tcopyHelper && copyHelper.remove();\n\t\t\t\tconst fieldId = ui.item.attr( 'id' ).replace( 'frm_delete_field_', '' ).replace( '-' + ui.item.data( 'optkey' ) + '_container', '' );\n\t\t\t\tresetDisplayedOpts( fieldId );\n\t\t\t\tfieldUpdated();\n\t\t\t}\n\t\t};\n\t\tjQuery( sort ).sortable( opts );\n\t}\n\n\t// Get the section where a field is dropped\n\tfunction getSectionForFieldPlacement( currentItem ) {\n\t\tlet section = '';\n\t\tif ( typeof currentItem !== 'undefined' && ! currentItem.hasClass( 'edit_field_type_divider' ) ) {\n\t\t\tsection = currentItem.closest( '.edit_field_type_divider' );\n\t\t}\n\t\treturn section;\n\t}\n\n\t// Get the form ID where a field is dropped\n\tfunction getFormIdForFieldPlacement( section ) {\n\t\tlet formId = '';\n\n\t\tif ( typeof section[ 0 ] !== 'undefined' ) {\n\t\t\tconst sDivide = section.children( '.start_divider' );\n\t\t\tsDivide.children( '.edit_field_type_end_divider' ).appendTo( sDivide );\n\t\t\tif ( typeof section.attr( 'data-formid' ) !== 'undefined' ) {\n\t\t\t\tconst fieldId = section.attr( 'data-fid' );\n\t\t\t\tformId = jQuery( 'input[name=\"field_options[form_select_' + fieldId + ']\"]' ).val();\n\t\t\t}\n\t\t}\n\n\t\tif ( typeof formId === 'undefined' || formId === '' ) {\n\t\t\tformId = thisFormId;\n\t\t}\n\n\t\treturn formId;\n\t}\n\n\t// Get the section ID where a field is dropped\n\tfunction getSectionIdForFieldPlacement( section ) {\n\t\tlet sectionId = 0;\n\t\tif ( typeof section[ 0 ] !== 'undefined' ) {\n\t\t\tsectionId = section.attr( 'id' ).replace( 'frm_field_id_', '' );\n\t\t}\n\n\t\treturn sectionId;\n\t}\n\n\t/**\n\t * Update a field after it is dragged and dropped into, out of, or between sections\n\t *\n\t * @param {Object} currentItem\n\t * @param {Object} previousSection\n\t * @return {void}\n\t */\n\tfunction updateFieldAfterMovingBetweenSections( currentItem, previousSection ) {\n\t\tif ( ! currentItem.hasClass( 'form-field' ) ) {\n\t\t\t// currentItem is a field group. Call for children recursively.\n\t\t\tgetFieldsInRow( jQuery( currentItem.get( 0 ).firstChild ) ).each(\n\t\t\t\tfunction() {\n\t\t\t\t\tupdateFieldAfterMovingBetweenSections( jQuery( this ), previousSection );\n\t\t\t\t}\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst fieldId = currentItem.attr( 'id' ).replace( 'frm_field_id_', '' );\n\t\tconst section = getSectionForFieldPlacement( currentItem );\n\t\tconst formId = getFormIdForFieldPlacement( section );\n\t\tconst sectionId = getSectionIdForFieldPlacement( section );\n\t\tconst previousFormId = previousSection ? getFormIdForFieldPlacement( jQuery( previousSection.parentNode ) ) : 0;\n\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_update_field_after_move',\n\t\t\t\tform_id: formId,\n\t\t\t\tfield: fieldId,\n\t\t\t\tsection_id: sectionId,\n\t\t\t\tprevious_form_id: previousFormId,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: function() {\n\t\t\t\ttoggleSectionHolder();\n\t\t\t\tupdateInSectionValue( fieldId, sectionId );\n\t\t\t}\n\t\t} );\n\t}\n\n\t// Update the in_section field value\n\tfunction updateInSectionValue( fieldId, sectionId ) {\n\t\tdocument.getElementById( 'frm_in_section_' + fieldId ).value = sectionId;\n\t}\n\n\t/**\n\t * Get the arguments for inserting a new field.\n\t *\n\t * @since 6.23\n\t *\n\t * @param {string} fieldType\n\t * @param {string} sectionId\n\t * @param {string} formId\n\t * @param {Number} hasBreak\n\t *\n\t * @return {Object}\n\t */\n\tfunction getInsertNewFieldArgs( fieldType, sectionId, formId, hasBreak ) {\n\t\tconst fieldArgs = {\n\t\t\taction: 'frm_insert_field',\n\t\t\tform_id: formId,\n\t\t\tfield_type: fieldType,\n\t\t\tsection_id: sectionId,\n\t\t\tnonce: frmGlobal.nonce,\n\t\t\thas_break: hasBreak\n\t\t};\n\n\t\t// Only send last row field IDs to update their order if this field isn't added to a repeater.\n\t\tconst isInRepeater = sectionId > 0 && document.getElementById( 'form_id' ).value !== formId;\n\t\tif ( ! isInRepeater ) {\n\t\t\tfieldArgs.last_row_field_ids = getFieldIdsInSubmitRow();\n\t\t}\n\n\t\treturn fieldArgs;\n\t}\n\n\t/**\n\t * Returns true if it's a range field type and slider type is not selected.\n\t *\n\t * @since 6.23\n\t *\n\t * @param {string} fieldType\n\t * @return {boolean}\n\t */\n\tfunction shouldStopInsertingField( fieldType ) {\n\t\treturn wp.hooks.applyFilters( 'frm_should_stop_inserting_field', false, fieldType );\n\t}\n\n\t/**\n\t * Add a new field by dragging and dropping it from the Fields sidebar\n\t *\n\t * @param {string} fieldType\n\t */\n\tfunction insertNewFieldByDragging( fieldType ) {\n\t\tif ( shouldStopInsertingField( fieldType ) ) {\n\t\t\twp.hooks.doAction( 'frm_stopped_inserting_by_dragging', fieldType );\n\t\t\treturn;\n\t\t}\n\n\t\tconst placeholder = document.getElementById( 'frm_drag_placeholder' );\n\t\tconst loadingID = fieldType.replace( '|', '-' ) + '_' + getAutoId();\n\t\tconst loading = tag(\n\t\t\t'li',\n\t\t\t{\n\t\t\t\tid: loadingID,\n\t\t\t\tclassName: 'frm-wait frmbutton_loadingnow'\n\t\t\t}\n\t\t);\n\t\tconst $placeholder = jQuery( loading );\n\t\tconst currentItem = jQuery( placeholder );\n\t\tconst section = getSectionForFieldPlacement( currentItem );\n\t\tconst formId = getFormIdForFieldPlacement( section );\n\t\tconst sectionId = getSectionIdForFieldPlacement( section );\n\n\t\tplaceholder.parentNode.insertBefore( loading, placeholder );\n\t\tplaceholder.remove();\n\t\tsyncLayoutClasses( $placeholder );\n\n\t\tlet hasBreak = 0;\n\t\tif ( 'summary' === fieldType ) {\n\t\t\t// see if we need to insert a page break before this newly-added summary field. Check for at least 1 page break\n\t\t\thasBreak = jQuery( '.frmbutton_loadingnow#' + loadingID ).prevAll( 'li[data-type=\"break\"]' ).length ? 1 : 0;\n\t\t}\n\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: getInsertNewFieldArgs( fieldType, sectionId, formId, hasBreak ),\n\t\t\tsuccess: function( msg ) {\n\t\t\t\thandleInsertFieldByDraggingResponse( msg, $placeholder );\n\n\t\t\t\tconst fieldId = checkMsgForFieldId( msg );\n\t\t\t\tif ( fieldId ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * Fires after a field is added.\n\t\t\t\t\t *\n\t\t\t\t\t * @since 6.23\n\t\t\t\t\t *\n\t\t\t\t\t * @param {Object} fieldData            The field data.\n\t\t\t\t\t * @param {string} fieldData.field      The field HTML.\n\t\t\t\t\t * @param {string} fieldData.field_type The field type.\n\t\t\t\t\t * @param {string} fieldData.form_id    The form ID.\n\t\t\t\t\t */\n\t\t\t\t\twp.hooks.doAction( 'frm_after_field_added_in_form_builder', {\n\t\t\t\t\t\tfield: msg,\n\t\t\t\t\t\tfieldId,\n\t\t\t\t\t\tfieldType,\n\t\t\t\t\t\tform_id: formId,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: handleInsertFieldError\n\t\t} );\n\t}\n\n\t/**\n\t * @param {string} msg\n\t * @param {Object} $placeholder jQuery object.\n\t */\n\tfunction handleInsertFieldByDraggingResponse( msg, $placeholder ) {\n\t\tlet replaceWith;\n\t\tdocument.getElementById( 'frm_form_editor_container' ).classList.add( 'frm-has-fields' );\n\t\tconst $siblings = $placeholder.siblings( 'li.form-field' ).not( '.edit_field_type_end_divider' );\n\n\t\tif ( ! $siblings.length ) {\n\t\t\t// if dragging into a new row, we need to wrap the li first.\n\t\t\treplaceWith = wrapFieldLi( msg );\n\t\t} else {\n\t\t\treplaceWith = msgAsjQueryObject( msg );\n\t\t\tif ( ! $placeholder.get( 0 ).parentNode.parentNode.classList.contains( 'ui-draggable' ) ) {\n\t\t\t\t// If a field group wasn't draggable because it only had a single field, make it draggable.\n\t\t\t\tmakeDraggable( $placeholder.get( 0 ).parentNode.parentNode, '.frm-move' );\n\t\t\t}\n\t\t}\n\t\t$placeholder.replaceWith( replaceWith );\n\t\tupdateFieldOrder();\n\t\tafterAddField( msg, false );\n\t\tif ( $siblings.length ) {\n\t\t\tsyncLayoutClasses( $siblings.first() );\n\t\t}\n\t\ttoggleSectionHolder();\n\n\t\tif ( ! $siblings.length ) {\n\t\t\tmakeDroppable( replaceWith.get( 0 ).querySelector( 'ul.frm_sorting' ) );\n\t\t\tmakeDraggable( replaceWith.get( 0 ).querySelector( 'li.form-field' ), '.frm-move' );\n\t\t} else {\n\t\t\tmakeDraggable( replaceWith.get( 0 ), '.frm-move' );\n\t\t}\n\t}\n\n\t/**\n\t * Get the field ID from the response message.\n\t *\n\t * @since 6.23\n\t *\n\t * @param {string} msg\n\t * @return {Number}\n\t */\n\tfunction checkMsgForFieldId( msg ) {\n\t\tconst result = msg.match( /data-fid=\"(\\d+)\"/ );\n\t\treturn result ? parseInt( result[ 1 ] ) : 0;\n\t}\n\n\tfunction getFieldIdsInSubmitRow() {\n\t\tconst submitField = document.querySelector( '.edit_field_type_submit' );\n\t\tif ( ! submitField ) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst lastRowFields = submitField.parentNode.children;\n\t\tconst ids = [];\n\t\tfor ( let i = 0; i < lastRowFields.length; i++ ) {\n\t\t\tids.push( lastRowFields[ i ].dataset.fid );\n\t\t}\n\n\t\treturn ids;\n\t}\n\n\tfunction moveFieldThatAlreadyExists( draggable, placeholder ) {\n\t\tplaceholder.parentNode.insertBefore( draggable, placeholder );\n\t}\n\n\tfunction msgAsjQueryObject( msg ) {\n\t\tconst element = div();\n\t\telement.innerHTML = msg;\n\t\treturn jQuery( element.firstChild );\n\t}\n\n\tfunction handleInsertFieldError( jqXHR, _, errorThrown ) {\n\t\tmaybeShowInsertFieldError( errorThrown, jqXHR );\n\t}\n\n\tfunction maybeShowInsertFieldError( errorThrown, jqXHR ) {\n\t\tif ( ! jqXHRAborted( jqXHR ) ) {\n\t\t\tinfoModal( errorThrown + '. Please try again.' );\n\t\t}\n\t}\n\n\tfunction jqXHRAborted( jqXHR ) {\n\t\treturn jqXHR.status === 0 || jqXHR.readyState === 0;\n\t}\n\n\t/**\n\t * Get a unique id that automatically increments with every function call.\n\t * Can be used for any UI that requires a unique id.\n\t * Not to be used in data.\n\t *\n\t * @return {number}\n\t */\n\tfunction getAutoId() {\n\t\treturn ++autoId;\n\t}\n\n\t/**\n\t * Determine if a draggable element can be droppable into a droppable element.\n\t *\n\t * Don't allow page break, embed form, or section inside section field\n\t * Don't allow page breaks inside of field groups.\n\t * Don't allow field groups with sections inside of sections.\n\t * Don't allow field groups in field groups.\n\t * Don't allow hidden fields inside of field groups but allow them in sections.\n\t * Don't allow any fields below the submit button field.\n\t * Don't allow submit button field above any fields.\n\t * Don't allow GDPR fields in repeaters.\n\t *\n\t * @param {HTMLElement} draggable\n\t * @param {HTMLElement} droppable\n\t * @param {Event}       event\n\t * @return {Boolean}\n\t */\n\tfunction allowDrop( draggable, droppable, event ) {\n\t\tif ( false === droppable ) {\n\t\t\t// Don't show drop placeholder if dragging somewhere off of the droppable area.\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( droppable.closest( '.frm-sortable-helper' ) ) {\n\t\t\t// Do not allow drop into draggable.\n\t\t\treturn false;\n\t\t}\n\n\t\tconst isSubmitBtn = draggable.classList.contains( 'edit_field_type_submit' );\n\t\tconst containSubmitBtn = ! draggable.classList.contains( 'form_field' ) && !! draggable.querySelector( '.edit_field_type_submit' );\n\n\t\tif ( 'frm-show-fields' === droppable.id ) {\n\t\t\tconst draggableIndex = determineIndexBasedOffOfMousePositionInList( jQuery( droppable ), event.clientY );\n\n\t\t\tif ( isSubmitBtn || containSubmitBtn ) {\n\t\t\t\t// Do not allow dropping submit button to above position.\n\t\t\t\tconst lastRowIndex = droppable.childElementCount - 1;\n\t\t\t\treturn draggableIndex > lastRowIndex;\n\t\t\t}\n\n\t\t\t// Do not allow dropping other fields to below submit button.\n\t\t\tconst submitButtonIndex = jQuery( droppable.querySelector( '.edit_field_type_submit' ).closest( '#frm-show-fields > li' ) ).index();\n\t\t\treturn draggableIndex <= submitButtonIndex;\n\t\t}\n\n\t\tif ( isSubmitBtn ) {\n\t\t\tif ( droppable.classList.contains( 'start_divider' ) ) {\n\t\t\t\t// Don't allow dropping submit button into a repeater.\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif ( isLastRow( droppable.parentElement ) ) {\n\t\t\t\t// Allow dropping submit button into the last row.\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ( ! isLastRow( droppable.parentElement.nextElementSibling ) ) {\n\t\t\t\t// Don't a dropping submit button into the row that isn't the second one from bottom.\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Allow dropping submit button into the second row from bottom if there is only submit button in the last row.\n\t\t\treturn ! draggable.parentElement.querySelector( 'li.frm_field_box:not(.edit_field_type_submit)' );\n\t\t}\n\n\t\tconst droppableIsARepeater = droppable.classList.contains( 'start_divider' ) && null !== droppable.closest( '.repeat_section' );\n\t\tconst droppableIsInsideOfARepeater = null !== droppable.closest( '.repeat_section' );\n\n\t\tif ( droppableIsARepeater || droppableIsInsideOfARepeater ) {\n\t\t\tconst isGdpr = draggable.classList.contains( 'edit_field_type_gdpr' ) || draggable.id === 'gdpr';\n\t\t\tif ( isGdpr ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * @since 6.27\n\t\t\t *\n\t\t\t * @param {boolean}     denyDropInRepeater\n\t\t\t * @param {HTMLElement} draggable\n\t\t\t */\n\t\t\tconst shouldDenyDropInRepeater = wp.hooks.applyFilters( 'frm_deny_drop_in_repeater', false, draggable );\n\t\t\tif ( shouldDenyDropInRepeater ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tif ( ! droppableIsARepeater ) {\n\t\t\tconst $fieldsInRow = getFieldsInRow( jQuery( droppable ) );\n\t\t\tif ( ! groupCanFitAnotherField( $fieldsInRow, jQuery( draggable ) ) ) {\n\t\t\t\t// Field group is full and cannot accept another field.\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif ( draggable.id === 'divider' && droppable.closest( '.start_divider' ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tconst isNewField = draggable.classList.contains( 'frm-new-field' );\n\t\tif ( isNewField ) {\n\t\t\treturn allowNewFieldDrop( draggable, droppable );\n\t\t}\n\n\t\treturn allowMoveField( draggable, droppable );\n\t}\n\n\t/**\n\t * Checks if given element is the last row in form builder.\n\t *\n\t * @param {HTMLElement} element Element.\n\t * @return {Boolean}\n\t */\n\tfunction isLastRow( element ) {\n\t\treturn element && element.matches( '#frm-show-fields > li:last-child' );\n\t}\n\n\t// Don't allow a new page break or hidden field in a field group.\n\t// Don't allow a new field into a field group that includes a page break or hidden field.\n\t// Don't allow a new section inside of a section.\n\t// Don't allow an embedded form in a section.\n\tfunction allowNewFieldDrop( draggable, droppable ) {\n\t\tconst classes = draggable.classList;\n\t\tconst newPageBreakField = classes.contains( 'frm_tbreak' );\n\t\tconst newHiddenField = classes.contains( 'frm_thidden' );\n\t\tconst newSectionField = classes.contains( 'frm_tdivider' );\n\t\tconst newEmbedField = classes.contains( 'frm_tform' );\n\t\tconst newUserIdField = classes.contains( 'frm_tuser_id' );\n\n\t\tconst newFieldWillBeAddedToAGroup = ! ( 'frm-show-fields' === droppable.id || droppable.classList.contains( 'start_divider' ) );\n\t\tif ( newFieldWillBeAddedToAGroup ) {\n\t\t\tif ( groupIncludesBreakOrHiddenOrUserId( droppable ) ) {\n\t\t\t\t// Never allow any field beside a page break or a hidden field.\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn ! newHiddenField && ! newPageBreakField && ! newUserIdField;\n\t\t}\n\n\t\tconst fieldTypeIsAlwaysAllowed = ! newPageBreakField && ! newHiddenField && ! newSectionField && ! newEmbedField;\n\t\tif ( fieldTypeIsAlwaysAllowed ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst newFieldWillBeAddedToASection = droppable.classList.contains( 'start_divider' ) || null !== droppable.closest( '.start_divider' );\n\t\tif ( newFieldWillBeAddedToASection ) {\n\t\t\t// Don't allow a section or an embedded form in a section.\n\t\t\treturn ! newEmbedField && ! newSectionField;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction allowMoveField( draggable, droppable ) {\n\t\tif ( isFieldGroup( draggable ) ) {\n\t\t\treturn allowMoveFieldGroup( draggable, droppable );\n\t\t}\n\n\t\tconst isPageBreak = draggable.classList.contains( 'edit_field_type_break' );\n\t\tif ( isPageBreak ) {\n\t\t\t// Page breaks are only allowed in the main list of fields, not in sections or in field groups.\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( droppable.classList.contains( 'start_divider' ) ) {\n\t\t\treturn allowMoveFieldToSection( draggable );\n\t\t}\n\n\t\tconst isHiddenField = draggable.classList.contains( 'edit_field_type_hidden' );\n\t\tconst isUserIdField = draggable.classList.contains( 'edit_field_type_user_id' );\n\t\tif ( isHiddenField || isUserIdField ) {\n\t\t\t// Hidden fields and user id fields should not be added to field groups since they're not shown\n\t\t\t// and don't make sense with the grid distribution.\n\t\t\treturn false;\n\t\t}\n\n\t\treturn allowMoveFieldToGroup( draggable, droppable );\n\t}\n\n\tfunction isFieldGroup( draggable ) {\n\t\treturn draggable.classList.contains( 'frm_field_box' ) && ! draggable.classList.contains( 'form-field' );\n\t}\n\n\tfunction allowMoveFieldGroup( fieldGroup, droppable ) {\n\t\tif ( droppable.classList.contains( 'start_divider' ) && null === fieldGroup.querySelector( '.start_divider' ) ) {\n\t\t\t// Allow a field group with no section inside of a section.\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction allowMoveFieldToSection( draggable ) {\n\t\tconst draggableIncludeEmbedForm = draggable.classList.contains( 'edit_field_type_form' ) || draggable.querySelector( '.edit_field_type_form' );\n\t\tif ( draggableIncludeEmbedForm ) {\n\t\t\t// Do not allow an embedded form inside of a section.\n\t\t\treturn false;\n\t\t}\n\n\t\tconst draggableIncludesSection = draggable.classList.contains( 'edit_field_type_divider' ) || draggable.querySelector( '.edit_field_type_divider' );\n\t\tif ( draggableIncludesSection ) {\n\t\t\t// Do not allow a section inside of a section.\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction allowMoveFieldToGroup( draggable, group ) {\n\t\tif ( groupIncludesBreakOrHiddenOrUserId( group ) ) {\n\t\t\t// Never allow any field beside a page break or a hidden field.\n\t\t\treturn false;\n\t\t}\n\n\t\tconst isFieldGroup = jQuery( draggable ).children( 'ul.frm_sorting' ).not( '.start_divider' ).length > 0;\n\t\tif ( isFieldGroup ) {\n\t\t\t// Do not allow a field group directly inside of a field group unless it's in a section.\n\t\t\treturn false;\n\t\t}\n\n\t\tconst draggableIncludesASection = draggable.classList.contains( 'edit_field_type_divider' ) || draggable.querySelector( '.edit_field_type_divider' );\n\t\tconst draggableIsEmbedField = draggable.classList.contains( 'edit_field_type_form' );\n\t\tconst groupIsInASection = null !== group.closest( '.start_divider' );\n\t\tif ( groupIsInASection && ( draggableIncludesASection || draggableIsEmbedField ) ) {\n\t\t\t// Do not allow a section or an embed field inside of a section.\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction groupIncludesBreakOrHiddenOrUserId( group ) {\n\t\treturn null !== group.querySelector( '.edit_field_type_break, .edit_field_type_hidden, .edit_field_type_user_id' );\n\t}\n\n\tfunction groupCanFitAnotherField( fieldsInRow, $field ) {\n\t\tlet fieldId;\n\t\tif ( fieldsInRow.length < MAX_FIELD_GROUP_SIZE ) {\n\t\t\treturn true;\n\t\t}\n\t\tif ( fieldsInRow.length > MAX_FIELD_GROUP_SIZE ) {\n\t\t\treturn false;\n\t\t}\n\t\tfieldId = $field.attr( 'data-fid' );\n\t\t// Allow the maximum number if we're not changing field groups.\n\t\treturn 1 === jQuery( fieldsInRow ).filter( '[data-fid=\"' + fieldId + '\"]' ).length;\n\t}\n\n\tfunction loadFields( fieldId ) {\n\t\tconst thisField = document.getElementById( fieldId );\n\t\tconst $thisField = jQuery( thisField );\n\t\tconst field = [];\n\t\tconst addHtmlToField = element => {\n\t\t\tconst frmHiddenFdata = element.querySelector( '.frm_hidden_fdata' );\n\t\t\telement.classList.add( 'frm_load_now' );\n\t\t\tif ( frmHiddenFdata !== null ) {\n\t\t\t\tfield.push( frmHiddenFdata.innerHTML );\n\t\t\t}\n\t\t};\n\n\t\tlet nextElement = thisField;\n\t\taddHtmlToField( nextElement );\n\n\t\tlet nextField = getNextField( nextElement );\n\t\twhile ( nextField && field.length < 15 ) {\n\t\t\taddHtmlToField( nextField );\n\t\t\tnextElement = nextField;\n\t\t\tnextField = getNextField( nextField );\n\t\t}\n\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_load_field',\n\t\t\t\tfield: field,\n\t\t\t\tform_id: thisFormId,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: html => handleAjaxLoadFieldSuccess( html, $thisField, field )\n\t\t} );\n\t}\n\n\tfunction getNextField( field ) {\n\t\tif ( field.nextElementSibling ) {\n\t\t\treturn field.nextElementSibling;\n\t\t}\n\t\treturn field.parentNode?.closest( '.frm_field_box' )?.nextElementSibling?.querySelector( '.form-field' );\n\t}\n\n\tfunction handleAjaxLoadFieldSuccess( html, $thisField, field ) {\n\t\tlet key, $nextSet;\n\n\t\thtml = html.replace( /^\\s+|\\s+$/g, '' );\n\t\tif ( html.indexOf( '{' ) !== 0 ) {\n\t\t\tjQuery( '.frm_load_now' ).removeClass( '.frm_load_now' ).html( 'Error' );\n\t\t\treturn;\n\t\t}\n\n\t\thtml = JSON.parse( html );\n\t\tfor ( key in html ) {\n\t\t\tjQuery( '#frm_field_id_' + key ).replaceWith( html[ key ] );\n\n\t\t\tconst newReplacedField = document.getElementById( 'frm_field_id_' + key );\n\t\t\tif ( newReplacedField ) {\n\t\t\t\tnewReplacedField.querySelectorAll( '[data-toggle]' ).forEach( toggle => toggle.setAttribute( 'data-bs-toggle', toggle.getAttribute( 'data-toggle' ) ) );\n\t\t\t\tnewReplacedField.querySelectorAll( '.frm-dropdown-menu' ).forEach( dropdownMenu => dropdownMenu.classList.add( 'dropdown-menu' ) );\n\t\t\t}\n\n\t\t\tsetupSortable( '#frm_field_id_' + key + '.edit_field_type_divider ul.frm_sorting' );\n\t\t\tmakeDraggable( document.getElementById( 'frm_field_id_' + key ) );\n\t\t}\n\n\t\t$nextSet = $thisField.nextAll( '.frm_field_loading:not(.frm_load_now)' );\n\t\tif ( $nextSet.length ) {\n\t\t\tloadFields( $nextSet.attr( 'id' ) );\n\t\t} else {\n\t\t\t// go up a level\n\t\t\t$nextSet = jQuery( document.getElementById( 'frm-show-fields' ) ).find( '.frm_field_loading:not(.frm_load_now)' );\n\t\t\tif ( $nextSet.length ) {\n\t\t\t\tloadFields( $nextSet.attr( 'id' ) );\n\t\t\t}\n\t\t}\n\n\t\tinitiateMultiselect();\n\t\trenumberPageBreaks();\n\t\tmaybeHideQuantityProductFieldOption();\n\n\t\tconst loadedEvent = new Event( 'frm_ajax_loaded_field', { bubbles: false } );\n\t\tloadedEvent.frmFields = field.map( f => JSON.parse( f ) );\n\t\tdocument.dispatchEvent( loadedEvent );\n\t}\n\n\tfunction addFieldClick() {\n\t\t/*jshint validthis:true */\n\t\tconst $thisObj = jQuery( this );\n\t\t// there is no real way to disable a <a> (with a valid href attribute) in HTML - https://css-tricks.com/how-to-disable-links/\n\t\tif ( $thisObj.hasClass( 'disabled' ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst $button = $thisObj.closest( '.frmbutton' );\n\t\tconst fieldType = $button.attr( 'id' );\n\n\t\tif ( $button.hasClass( 'frm_at_limit' ) ) {\n\t\t\tshowLimitModal();\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( shouldStopInsertingField( fieldType ) ) {\n\t\t\t// We do not want to return false here.\n\t\t\t// Otherwise it causes issues with trying to add a new slider field\n\t\t\t// when clicking the button.\n\t\t\treturn;\n\t\t}\n\n\t\tlet hasBreak = 0;\n\t\tif ( 'summary' === fieldType ) {\n\t\t\thasBreak = $newFields.children( 'li[data-type=\"break\"]' ).length > 0 ? 1 : 0;\n\t\t}\n\n\t\tconst formId = thisFormId;\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: getInsertNewFieldArgs( fieldType, 0, formId, hasBreak ),\n\t\t\tsuccess: function( msg ) {\n\t\t\t\thandleAddFieldClickResponse( msg );\n\n\t\t\t\tconst fieldId = checkMsgForFieldId( msg );\n\t\t\t\tif ( fieldId ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * Fires after a field is added.\n\t\t\t\t\t *\n\t\t\t\t\t * @since 6.23\n\t\t\t\t\t *\n\t\t\t\t\t * @param {Object} fieldData            The field data.\n\t\t\t\t\t * @param {string} fieldData.field      The field HTML.\n\t\t\t\t\t * @param {string} fieldData.field_type The field type.\n\t\t\t\t\t * @param {string} fieldData.form_id    The form ID.\n\t\t\t\t\t */\n\t\t\t\t\twp.hooks.doAction( 'frm_after_field_added_in_form_builder', {\n\t\t\t\t\t\tfield: msg,\n\t\t\t\t\t\tfieldId,\n\t\t\t\t\t\tfieldType,\n\t\t\t\t\t\tform_id: formId,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: handleInsertFieldError\n\t\t} );\n\t\treturn false;\n\t}\n\n\tfunction showLimitModal() {\n\t\tconst wrapper = document.querySelector( '.frm_wrap' );\n\t\tif ( ! wrapper ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst temporaryAnchor = document.createElement( 'a' );\n\t\ttemporaryAnchor.setAttribute( 'data-frmverify', __( 'This field type has reached its limit.', 'formidable' ) );\n\n\t\twrapper.append( temporaryAnchor );\n\t\ttemporaryAnchor.click();\n\t\ttemporaryAnchor.remove();\n\n\t\tconst confirmButton = document.getElementById( 'frm-confirmed-click' );\n\t\tif ( confirmButton ) {\n\t\t\tconfirmButton.style.display = 'none';\n\t\t}\n\t}\n\n\tfunction handleAddFieldClickResponse( msg ) {\n\t\tdocument.getElementById( 'frm_form_editor_container' ).classList.add( 'frm-has-fields' );\n\t\tconst replaceWith = wrapFieldLi( msg );\n\t\tconst submitField = $newFields[ 0 ].querySelector( '.edit_field_type_submit' );\n\n\t\tif ( ! submitField ) {\n\t\t\t$newFields.append( replaceWith );\n\t\t} else {\n\t\t\tjQuery( submitField.closest( '.frm_field_box:not(.form-field)' ) ).before( replaceWith );\n\t\t}\n\n\t\tafterAddField( msg, true );\n\n\t\treplaceWith.each(\n\t\t\tfunction() {\n\t\t\t\tmakeDroppable( this.querySelector( 'ul.frm_sorting' ) );\n\t\t\t\tmakeDraggable( this.querySelector( '.form-field' ), '.frm-move' );\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction insertFormField( fieldType, fieldOptions = {} ) {\n\t\treturn new Promise( resolve => {\n\t\t\tconst formId = thisFormId;\n\t\t\tlet hasBreak = 0;\n\n\t\t\tif ( 'summary' === fieldType ) {\n\t\t\t\thasBreak = $newFields.children( 'li[data-type=\"break\"]' ).length > 0 ? 1 : 0;\n\t\t\t}\n\n\t\t\tjQuery.ajax( {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: ajaxurl,\n\t\t\t\tdata: Object.assign( getInsertNewFieldArgs( fieldType, 0, formId, hasBreak ), { field_options: fieldOptions } ),\n\t\t\t\tsuccess: function( msg ) {\n\t\t\t\t\tresolve( msg );\n\n\t\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t\tupdateFieldOrder();\n\t\t\t\t\t\tafterAddField( msg, true );\n\n\t\t\t\t\t\tconst fieldId = checkMsgForFieldId( msg );\n\t\t\t\t\t\tif ( fieldId ) {\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * Fires after a field is added.\n\t\t\t\t\t\t\t *\n\t\t\t\t\t\t\t * @since 6.23\n\t\t\t\t\t\t\t *\n\t\t\t\t\t\t\t * @param {Object} fieldData            The field data.\n\t\t\t\t\t\t\t * @param {string} fieldData.field      The field HTML.\n\t\t\t\t\t\t\t * @param {string} fieldData.field_type The field type.\n\t\t\t\t\t\t\t * @param {string} fieldData.form_id    The form ID.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\twp.hooks.doAction( 'frm_after_field_added_in_form_builder', {\n\t\t\t\t\t\t\t\tfield: msg,\n\t\t\t\t\t\t\t\tfieldId,\n\t\t\t\t\t\t\t\tfieldType,\n\t\t\t\t\t\t\t\tform_id: formId,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 10 );\n\t\t\t\t},\n\t\t\t\terror: handleInsertFieldError\n\t\t\t} );\n\t\t} );\n\t}\n\n\tfunction maybeHideQuantityProductFieldOption() {\n\t\tlet hide = true,\n\t\t\topts = document.querySelectorAll( '.frmjs_prod_field_opt_cont' );\n\n\t\tif ( $newFields.find( 'li.edit_field_type_product' ).length > 1 ) {\n\t\t\thide = false;\n\t\t}\n\n\t\tfor ( let i = 0; i < opts.length; i++ ) {\n\t\t\tif ( hide ) {\n\t\t\t\topts[ i ].classList.add( 'frm_hidden' );\n\t\t\t} else {\n\t\t\t\topts[ i ].classList.remove( 'frm_hidden' );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns true if a field can be duplicated.\n\t *\n\t * @since 6.19\n\t *\n\t * @param {HTMLElement} field\n\t * @param {number}      maxFieldsInGroup\n\t *\n\t * @return {Boolean}\n\t */\n\tfunction canDuplicateField( field, maxFieldsInGroup ) {\n\t\tif ( field.classList.contains( 'frm-page-collapsed' ) ) {\n\t\t\treturn false;\n\t\t}\n\t\tconst fieldGroup = field.closest( 'li.frm_field_box:not(.form-field)' );\n\t\tif ( ! fieldGroup ) {\n\t\t\treturn true;\n\t\t}\n\t\tconst fieldsInGroup = getFieldsInRow( jQuery( fieldGroup.querySelector( 'ul' ) ) ).length;\n\t\treturn fieldsInGroup < maxFieldsInGroup;\n\t}\n\n\tfunction duplicateField() {\n\t\tlet $field, fieldId, children, newRowId, fieldOrder;\n\t\tconst maxFieldsInGroup = MAX_FIELD_GROUP_SIZE;\n\n\t\t$field = jQuery( this ).closest( 'li.form-field' );\n\t\tnewRowId = this.getAttribute( 'frm-target-row-id' );\n\n\t\tif ( ! ( newRowId && newRowId.startsWith( 'frm_field_group_' ) ) && ! canDuplicateField( $field.get( 0 ), maxFieldsInGroup ) ) {\n\t\t\t/* translators: %1$d: Maximum number of fields allowed in a field group. */\n\t\t\tinfoModal( sprintf( __( 'You can only have a maximum of %1$d fields in a field group. Delete or move out a field from the group and try again.', 'formidable' ), maxFieldsInGroup ) );\n\t\t\treturn;\n\t\t}\n\n\t\tcloseOpenFieldDropdowns();\n\t\tfieldId = $field.data( 'fid' );\n\t\tchildren = fieldsInSection( fieldId );\n\n\t\tif ( null !== newRowId ) {\n\t\t\tfieldOrder = this.getAttribute( 'frm-field-order' );\n\t\t}\n\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_duplicate_field',\n\t\t\t\tfield_id: fieldId,\n\t\t\t\tform_id: thisFormId,\n\t\t\t\tchildren: children,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: function( msg ) {\n\t\t\t\tlet newRow;\n\n\t\t\t\tlet replaceWith;\n\n\t\t\t\tif ( null !== newRowId ) {\n\t\t\t\t\tnewRow = document.getElementById( newRowId );\n\t\t\t\t\tif ( null !== newRow ) {\n\t\t\t\t\t\treplaceWith = msgAsjQueryObject( msg );\n\t\t\t\t\t\tjQuery( newRow ).append( replaceWith );\n\t\t\t\t\t\tmakeDraggable( replaceWith.get( 0 ), '.frm-move' );\n\t\t\t\t\t\tif ( null !== fieldOrder ) {\n\t\t\t\t\t\t\tnewRow.lastElementChild.setAttribute( 'frm-field-order', fieldOrder );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tjQuery( newRow ).trigger(\n\t\t\t\t\t\t\t'frm_added_duplicated_field_to_row',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tduplicatedFieldHtml: msg,\n\t\t\t\t\t\t\t\toriginalFieldId: fieldId\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tafterAddField( msg, false );\n\t\t\t\t\t\tsetLayoutClassesForDuplicatedFieldInGroup( $field.get( 0 ), replaceWith.get( 0 ) );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( $field.siblings( 'li.form-field' ).length ) {\n\t\t\t\t\treplaceWith = msgAsjQueryObject( msg );\n\t\t\t\t\t$field.after( replaceWith );\n\t\t\t\t\tsyncLayoutClasses( $field );\n\t\t\t\t\tmakeDraggable( replaceWith.get( 0 ), '.frm-move' );\n\t\t\t\t} else {\n\t\t\t\t\treplaceWith = wrapFieldLi( msg );\n\t\t\t\t\t$field.parent().parent().after( replaceWith );\n\t\t\t\t\tmakeDroppable( replaceWith.get( 0 ).querySelector( 'ul.frm_sorting' ) );\n\t\t\t\t\tmakeDraggable( replaceWith.get( 0 ).querySelector( 'li.form-field' ), '.frm-move' );\n\t\t\t\t}\n\n\t\t\t\tupdateFieldOrder();\n\t\t\t\tafterAddField( msg, false );\n\t\t\t\tmaybeDuplicateUnsavedSettings( fieldId, msg );\n\t\t\t\ttoggleOneSectionHolder( replaceWith.find( '.start_divider' ) );\n\t\t\t\t$field[ 0 ].querySelector( '.frm-dropdown-menu.dropdown-menu-right' )?.classList.remove( 'show' );\n\t\t\t\tsetLayoutClassesForDuplicatedFieldInGroup( $field.get( 0 ), replaceWith.get( 0 ) );\n\t\t\t}\n\t\t} );\n\t\treturn false;\n\t}\n\n\t/**\n\t * Sets the layout classes for a duplicated field in a field group from the layout classes of the original field.\n\t *\n\t * @param {HTMLElement} field    The original field.\n\t * @param {HTMLElement} newField The duplicated field.\n\t *\n\t * @return {void}\n\t */\n\tfunction setLayoutClassesForDuplicatedFieldInGroup( field, newField ) {\n\t\tconst hoverTarget = field.closest( '.frm-field-group-hover-target' );\n\t\tif ( ! hoverTarget || ! isFieldGroup( hoverTarget.parentElement ) ) {\n\t\t\treturn;\n\t\t}\n\t\tconst fieldId = field.dataset.fid;\n\t\tlet fieldClasses = document.getElementById( 'frm_classes_' + fieldId )?.value;\n\t\tif ( ! fieldClasses ) {\n\t\t\treturn;\n\t\t}\n\t\tfieldClasses = fieldClasses.replace( 'frm_first', '' );\n\t\tif ( ! newField.className.includes( fieldClasses ) ) {\n\t\t\tnewField.className += ' ' + fieldClasses;\n\n\t\t\tconst classesInput = document.getElementById( 'frm_classes_' + newField.dataset.fid );\n\t\t\tif ( classesInput ) {\n\t\t\t\tclassesInput.value = fieldClasses;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction maybeDuplicateUnsavedSettings( originalFieldId, newFieldHtml ) {\n\t\tlet originalSettings, newFieldId, copySettings, fieldOptionKeys, originalDefault, copyDefault;\n\n\t\toriginalSettings = document.getElementById( 'frm-single-settings-' + originalFieldId );\n\t\tif ( null === originalSettings ) {\n\t\t\treturn;\n\t\t}\n\n\t\tnewFieldId = jQuery( newFieldHtml ).attr( 'data-fid' );\n\t\tif ( 'undefined' === typeof newFieldId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tcopySettings = document.getElementById( 'frm-single-settings-' + newFieldId );\n\t\tif ( null === copySettings ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfieldOptionKeys = [\n\t\t\t'name', 'required', 'unique', 'read_only', 'placeholder', 'description', 'size', 'max', 'format', 'prepend', 'append', 'separate_value'\n\t\t];\n\n\t\toriginalSettings.querySelectorAll( 'input[name^=\"field_options[\"], textarea[name^=\"field_options[\"]' ).forEach(\n\t\t\tfunction( originalSetting ) {\n\t\t\t\tlet key, tagType, copySetting;\n\n\t\t\t\tkey = getKeyFromSettingInput( originalSetting );\n\n\t\t\t\tif ( 'options' === key ) {\n\t\t\t\t\tcopyOption( originalSetting, copySettings, originalFieldId, newFieldId );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( -1 === fieldOptionKeys.indexOf( key ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttagType = originalSetting.matches( 'input' ) ? 'input' : 'textarea';\n\t\t\t\tcopySetting = copySettings.querySelector( tagType + '[name=\"field_options[' + key + '_' + newFieldId + ']\"]' );\n\t\t\t\tif ( null === copySetting ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( 'checkbox' === originalSetting.type ) {\n\t\t\t\t\tif ( originalSetting.checked !== copySetting.checked ) {\n\t\t\t\t\t\tjQuery( copySetting ).trigger( 'click' );\n\t\t\t\t\t}\n\t\t\t\t} else if ( 'text' === originalSetting.type || 'textarea' === tagType ) {\n\t\t\t\t\tif ( originalSetting.value !== copySetting.value ) {\n\t\t\t\t\t\tcopySetting.value = originalSetting.value;\n\t\t\t\t\t\tjQuery( copySetting ).trigger( 'change' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\toriginalDefault = originalSettings.querySelector( 'input[name=\"default_value_' + originalFieldId + '\"]' );\n\t\tif ( null !== originalDefault ) {\n\t\t\tcopyDefault = copySettings.querySelector( 'input[name=\"default_value_' + newFieldId + '\"]' );\n\t\t\tif ( null !== copyDefault && originalDefault.value !== copyDefault.value ) {\n\t\t\t\tcopyDefault.value = originalDefault.value;\n\t\t\t\tjQuery( copyDefault ).trigger( 'change' );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction copyOption( originalSetting, copySettings, originalFieldId, newFieldId ) {\n\t\tlet remainingKeyDetails, copyKey, copySetting;\n\t\tremainingKeyDetails = originalSetting.name.substr( 23 + ( '' + originalFieldId ).length );\n\t\tcopyKey = 'field_options[options_' + newFieldId + ']' + remainingKeyDetails;\n\t\tcopySetting = copySettings.querySelector( 'input[name=\"' + copyKey + '\"]' );\n\t\tif ( null !== copySetting && copySetting.value !== originalSetting.value ) {\n\t\t\tcopySetting.value = originalSetting.value;\n\t\t\tjQuery( copySetting ).trigger( 'change' );\n\t\t}\n\t}\n\n\tfunction getKeyFromSettingInput( input ) {\n\t\tlet nameWithoutPrefix, nameSplit;\n\t\tnameWithoutPrefix = input.name.substr( 14 );\n\t\tnameSplit = nameWithoutPrefix.split( '_' );\n\t\tnameSplit.pop();\n\t\treturn nameSplit.join( '_' );\n\t}\n\n\tfunction closeOpenFieldDropdowns() {\n\t\tconst openSettings = document.querySelector( '.frm-field-settings-open' );\n\t\tif ( null !== openSettings ) {\n\t\t\topenSettings.classList.remove( 'frm-field-settings-open' );\n\t\t\tjQuery( document ).off( 'click', '#frm_builder_page', handleClickOutsideOfFieldSettings );\n\t\t\tjQuery( '.frm-field-action-icons .dropdown.open' ).removeClass( 'open' );\n\t\t}\n\t}\n\n\tfunction handleClickOutsideOfFieldSettings( event ) {\n\t\tif ( ! jQuery( event.originalEvent.target ).closest( '.frm-field-action-icons' ).length ) {\n\t\t\tcloseOpenFieldDropdowns();\n\t\t}\n\t}\n\n\tfunction checkForMultiselectKeysOnMouseMove( event ) {\n\t\tconst keyIsDown = ! ! ( event.ctrlKey || event.metaKey || event.shiftKey );\n\t\tjQuery( builderPage ).toggleClass( 'frm-multiselect-key-is-down', keyIsDown );\n\t\tcheckForActiveHoverTarget( event );\n\t}\n\n\tfunction checkForActiveHoverTarget( event ) {\n\t\tlet container, elementFromPoint, list, previousHoverTarget;\n\n\t\tcontainer = postBodyContent;\n\t\tif ( container.classList.contains( 'frm-dragging-field' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( null !== document.querySelector( '.frm-field-group-hover-target .frm-field-settings-open' ) ) {\n\t\t\t// do not set a hover target if a dropdown is open for the current hover target.\n\t\t\treturn;\n\t\t}\n\n\t\telementFromPoint = document.elementFromPoint( event.clientX, event.clientY );\n\t\tif ( null !== elementFromPoint && ! elementFromPoint.classList.contains( 'edit_field_type_divider' ) ) {\n\t\t\tlist = elementFromPoint.closest( 'ul.frm_sorting' );\n\n\t\t\tif ( null !== list && ! list.classList.contains( 'start_divider' ) && 'frm-show-fields' !== list.id ) {\n\t\t\t\tpreviousHoverTarget = maybeRemoveGroupHoverTarget();\n\t\t\t\tif ( false !== previousHoverTarget && ! jQuery( previousHoverTarget ).is( list ) ) {\n\t\t\t\t\tdestroyFieldGroupPopup();\n\t\t\t\t}\n\t\t\t\tupdateFieldGroupControls( jQuery( list ), getFieldsInRow( jQuery( list ) ).length );\n\t\t\t\tlist.classList.add( 'frm-field-group-hover-target' );\n\t\t\t\tjQuery( '#wpbody-content' ).on( 'mousemove', maybeRemoveHoverTargetOnMouseMove );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction maybeRemoveGroupHoverTarget() {\n\t\tlet controls, previousHoverTarget;\n\n\t\tcontrols = document.getElementById( 'frm_field_group_controls' );\n\t\tif ( null !== controls ) {\n\t\t\tcontrols.style.display = 'none';\n\t\t}\n\n\t\tpreviousHoverTarget = document.querySelector( '.frm-field-group-hover-target' );\n\t\tif ( null === previousHoverTarget ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tjQuery( '#wpbody-content' ).off( 'mousemove', maybeRemoveHoverTargetOnMouseMove );\n\t\tpreviousHoverTarget.classList.remove( 'frm-field-group-hover-target' );\n\t\treturn previousHoverTarget;\n\t}\n\n\tfunction maybeRemoveHoverTargetOnMouseMove( event ) {\n\t\tconst elementFromPoint = document.elementFromPoint( event.clientX, event.clientY );\n\t\tif ( null !== elementFromPoint && null !== elementFromPoint.closest( '#frm-show-fields' ) ) {\n\t\t\treturn;\n\t\t}\n\t\tmaybeRemoveGroupHoverTarget();\n\t\tdeleteTooltips();\n\t}\n\n\tfunction onFieldActionDropdownShow( isFieldGroup ) {\n\t\tunselectFieldGroups();\n\n\t\t// maybe offset the dropdown if it goes off of the right of the screen.\n\t\tsetTimeout(\n\t\t\tfunction() {\n\t\t\t\tlet ul, $ul;\n\n\t\t\t\tul = document.querySelector( '.dropdown .frm-dropdown-menu.show' );\n\n\t\t\t\tif ( null === ul ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif ( null === ul.getAttribute( 'aria-label' ) ) {\n\t\t\t\t\tul.setAttribute( 'aria-label', __( 'More Options', 'formidable' ) );\n\t\t\t\t}\n\t\t\t\tif ( 0 === ul.children.length ) {\n\t\t\t\t\tfillFieldActionDropdown( ul, true === isFieldGroup );\n\t\t\t\t}\n\t\t\t\t$ul = jQuery( ul );\n\t\t\t\tif ( $ul.offset().left > jQuery( window ).width() - $ul.outerWidth() ) {\n\t\t\t\t\tul.style.left = ( -$ul.outerWidth() ) + 'px';\n\t\t\t\t}\n\t\t\t\tconst firstAnchor = ul.firstElementChild.querySelector( 'a' );\n\t\t\t\tif ( firstAnchor ) {\n\t\t\t\t\tfirstAnchor.focus();\n\t\t\t\t}\n\t\t\t},\n\t\t\t0\n\t\t);\n\t}\n\n\tfunction onFieldGroupActionDropdownShow() {\n\t\tonFieldActionDropdownShow( true );\n\t}\n\n\tfunction changeSectionStyle( e ) {\n\t\tconst collapsedSection = e.target.closest( '.frm-section-collapsed' );\n\t\tif ( ! collapsedSection ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( e.type === 'show' ) {\n\t\t\tcollapsedSection.style.zIndex = 3;\n\t\t} else {\n\t\t\tcollapsedSection.style.zIndex = 1;\n\t\t}\n\t}\n\n\tfunction fillFieldActionDropdown( ul, isFieldGroup ) {\n\t\tlet classSuffix, options;\n\t\tclassSuffix = isFieldGroup ? '_field_group' : '_field';\n\t\toptions = [ getDeleteActionOption( isFieldGroup ), getDuplicateActionOption( isFieldGroup ) ];\n\t\tif ( ! isFieldGroup ) {\n\t\t\toptions.push(\n\t\t\t\t{ class: 'frm_select', icon: 'frm_settings_icon', label: __( 'Field Settings', 'formidable' ) }\n\t\t\t);\n\t\t}\n\t\toptions.forEach(\n\t\t\tfunction( option ) {\n\t\t\t\tlet li, anchor, span;\n\t\t\t\tli = document.createElement( 'div' );\n\t\t\t\tli.classList.add( 'frm_more_options_li', 'dropdown-item' );\n\n\t\t\t\tanchor = document.createElement( 'a' );\n\t\t\t\tanchor.classList.add( option.class + classSuffix );\n\t\t\t\tanchor.setAttribute( 'href', '#' );\n\t\t\t\tmakeTabbable( anchor );\n\n\t\t\t\tspan = document.createElement( 'span' );\n\t\t\t\tspan.textContent = option.label;\n\t\t\t\tanchor.innerHTML = '<svg class=\"frmsvg\"><use href=\"#' + option.icon + '\"></use></svg>';\n\t\t\t\tanchor.append( document.createTextNode( ' ' ) );\n\t\t\t\tanchor.append( span );\n\n\t\t\t\tli.append( anchor );\n\t\t\t\tul.append( li );\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction getDeleteActionOption( isFieldGroup ) {\n\t\tconst option = { class: 'frm_delete', icon: 'frm_delete_icon' };\n\t\toption.label = isFieldGroup ? __( 'Delete Group', 'formidable' ) : __( 'Delete', 'formidable' );\n\t\treturn option;\n\t}\n\n\tfunction getDuplicateActionOption( isFieldGroup ) {\n\t\tconst option = { class: 'frm_clone', icon: 'frm_clone_icon' };\n\t\toption.label = isFieldGroup ? __( 'Duplicate Group', 'formidable' ) : __( 'Duplicate', 'formidable' );\n\t\treturn option;\n\t}\n\n\tfunction wrapFieldLi( field ) {\n\t\tconst wrapper = div();\n\n\t\tif ( 'string' === typeof field ) {\n\t\t\twrapper.innerHTML = field;\n\t\t} else {\n\t\t\twrapper.append( field );\n\t\t}\n\n\t\tlet result = jQuery();\n\t\tArray.from( wrapper.children ).forEach(\n\t\t\tli => {\n\t\t\t\tresult = result.add(\n\t\t\t\t\tjQuery( '<li>' )\n\t\t\t\t\t\t.addClass( 'frm_field_box' )\n\t\t\t\t\t\t.html(\n\t\t\t\t\t\t\tjQuery( '<ul>' ).addClass( 'frm_grid_container frm_sorting' ).append( li )\n\t\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\n\t\treturn result;\n\t}\n\n\tfunction wrapFieldLiInPlace( li ) {\n\t\tconst ul = tag(\n\t\t\t'ul',\n\t\t\t{\n\t\t\t\tclassName: 'frm_grid_container frm_sorting'\n\t\t\t}\n\t\t);\n\t\tconst wrapper = tag(\n\t\t\t'li',\n\t\t\t{\n\t\t\t\tclassName: 'frm_field_box',\n\t\t\t\tchild: ul\n\t\t\t}\n\t\t);\n\n\t\tli.replaceWith( wrapper );\n\t\tul.append( li );\n\n\t\tmakeDroppable( ul );\n\t\tmakeDraggable( wrapper, '.frm-move' );\n\t}\n\n\tfunction afterAddField( msg, addFocus ) {\n\t\tconst regex = /id=\"(\\S+)\"/;\n\t\tconst match = regex.exec( msg );\n\t\tconst field = document.getElementById( match[ 1 ] );\n\t\tconst section = '#' + match[ 1 ] + '.edit_field_type_divider ul.frm_sorting.start_divider';\n\t\tconst $thisSection = jQuery( section );\n\t\tconst type = field.getAttribute( 'data-type' );\n\n\t\tcheckHtmlForNewFields( msg );\n\n\t\tlet toggled = false;\n\n\t\tfieldUpdated();\n\t\tsetupSortable( section );\n\n\t\tif ( 'quantity' === type ) {\n\t\t\t// try to automatically attach a product field\n\t\t\tmaybeSetProductField( field );\n\t\t}\n\n\t\tif ( 'product' === type || 'quantity' === type ) {\n\t\t\t// quantity too needs to be a part of the if stmt especially cos of the very\n\t\t\t// 1st quantity field (or even if it's just one quantity field in the form).\n\t\t\tmaybeHideQuantityProductFieldOption();\n\t\t}\n\n\t\tif ( $thisSection.length ) {\n\t\t\t$thisSection.parent( '.frm_field_box' ).children( '.frm_no_section_fields' ).addClass( 'frm_block' );\n\t\t} else {\n\t\t\tconst $parentSection = jQuery( field ).closest( 'ul.frm_sorting.start_divider' );\n\t\t\tif ( $parentSection.length ) {\n\t\t\t\ttoggleOneSectionHolder( $parentSection );\n\t\t\t\ttoggled = true;\n\t\t\t}\n\t\t}\n\n\t\tif ( msg.includes( 'frm-collapse-page' ) ) {\n\t\t\trenumberPageBreaks();\n\t\t}\n\n\t\taddClass( field, 'frm-newly-added' );\n\t\tsetTimeout( function() {\n\t\t\tfield.classList.remove( 'frm-newly-added' );\n\t\t}, 1000 );\n\n\t\tconst lastRowOrderInput = field.querySelector( '#frm-last-row-fields-order' );\n\t\tif ( lastRowOrderInput ) {\n\t\t\tupdateLastRowFieldsOrder( JSON.parse( lastRowOrderInput.value ) );\n\t\t}\n\n\t\tif ( addFocus ) {\n\t\t\tconst bounding = field.getBoundingClientRect(),\n\t\t\t\tcontainer = document.getElementById( 'post-body-content' ),\n\t\t\t\tinView = ( bounding.top >= 0 &&\n\t\t\t\t\tbounding.left >= 0 &&\n\t\t\t\t\tbounding.right <= ( window.innerWidth || document.documentElement.clientWidth ) &&\n\t\t\t\t\tbounding.bottom <= ( window.innerHeight || document.documentElement.clientHeight )\n\t\t\t\t);\n\n\t\t\tif ( ! inView ) {\n\t\t\t\tcontainer.scroll( {\n\t\t\t\t\ttop: container.scrollHeight,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tbehavior: 'smooth'\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif ( toggled === false ) {\n\t\t\t\ttoggleOneSectionHolder( $thisSection );\n\t\t\t}\n\t\t}\n\n\t\tdeselectFields();\n\t\tinitiateMultiselect();\n\n\t\tdocument.getElementById( 'frm-show-fields' ).classList.remove( 'frm-over-droppable' );\n\n\t\tmaybeDisableFieldButtonAtLimit( type );\n\n\t\t// Bootstrap 5 uses data-bs-toggle instead of data-toggle, and requires that elements have the dropdown-menu class.\n\t\tfield.querySelectorAll( '[data-toggle]' ).forEach( toggle => toggle.setAttribute( 'data-bs-toggle', toggle.getAttribute( 'data-toggle' ) ) );\n\t\tfield.querySelectorAll( '.frm-dropdown-menu' ).forEach( dropdownMenu => dropdownMenu.classList.add( 'dropdown-menu' ) );\n\n\t\tconst addedEvent = new Event( 'frm_added_field', { bubbles: false } );\n\t\taddedEvent.frmField = field;\n\t\taddedEvent.frmSection = section;\n\t\taddedEvent.frmType = type;\n\t\taddedEvent.frmToggles = toggled;\n\t\tdocument.dispatchEvent( addedEvent );\n\t}\n\n\t/**\n\t * @since 6.27\n\t *\n\t * @param {string} type\n\t * @return {void}\n\t */\n\tfunction maybeDisableFieldButtonAtLimit( type ) {\n\t\tconst button = document.getElementById( type );\n\t\tif ( button && button.dataset.limit && countFieldTypeInForm( type ) >= button.dataset.limit ) {\n\t\t\tbutton.classList.add( 'frm_at_limit' );\n\t\t}\n\t}\n\n\tfunction updateLastRowFieldsOrder( fieldsOrder ) {\n\t\tif ( ! fieldsOrder || 'object' !== typeof fieldsOrder ) {\n\t\t\treturn;\n\t\t}\n\n\t\tObject.keys( fieldsOrder ).forEach( fieldId => {\n\t\t\tconst orderInput = document.querySelector( 'input[name=\"field_options[field_order_' + fieldId + ']\"]' );\n\t\t\tif ( orderInput ) {\n\t\t\t\torderInput.value = fieldsOrder[ fieldId ];\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Since multiple new fields may get added when a new field is inserted, check the HTML.\n\t *\n\t * @param {string} html\n\t * @return {void}\n\t */\n\tfunction checkHtmlForNewFields( html ) {\n\t\tconst element = div();\n\t\telement.innerHTML = html;\n\t\telement.querySelectorAll( '.form-field' ).forEach( addFieldIdToDraftFieldsInput );\n\t}\n\n\t/**\n\t * @param {HTMLElement} field\n\t * @return {void}\n\t */\n\tfunction addFieldIdToDraftFieldsInput( field ) {\n\t\tif ( ! field.dataset.fid ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst draftInput = document.getElementById( 'draft_fields' );\n\t\tif ( ! draftInput ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( '' === draftInput.value ) {\n\t\t\tdraftInput.value = field.dataset.fid;\n\t\t} else {\n\t\t\tconst split = draftInput.value.split( ',' );\n\t\t\tif ( ! split.includes( field.dataset.fid ) ) {\n\t\t\t\tdraftInput.value += ',' + field.dataset.fid;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction clearSettingsBox( preventFieldGroups ) {\n\t\tjQuery( '#new_fields .frm-single-settings' ).addClass( 'frm_hidden' );\n\t\tjQuery( '#frm-options-panel > .frm-single-settings' ).removeClass( 'frm_hidden' );\n\t\tdeselectFields( preventFieldGroups );\n\t}\n\n\tfunction deselectFields( preventFieldGroups ) {\n\t\tjQuery( 'li.ui-state-default.selected' ).removeClass( 'selected' );\n\t\tjQuery( '.frm-show-field-settings.selected' ).removeClass( 'selected' );\n\t\tif ( ! preventFieldGroups ) {\n\t\t\tunselectFieldGroups();\n\t\t}\n\t}\n\n\tfunction scrollToField( field ) {\n\t\tconst newPos = field.getBoundingClientRect().top,\n\t\t\tcontainer = document.getElementById( 'post-body-content' );\n\n\t\tif ( typeof animate === 'undefined' ) {\n\t\t\tjQuery( container ).scrollTop( newPos );\n\t\t} else {\n\t\t\t// TODO: smooth scroll\n\t\t\tjQuery( container ).animate( { scrollTop: newPos }, 500 );\n\t\t}\n\t}\n\n\tfunction checkCalculationCreatedByUser() {\n\t\tconst calculation = this.value;\n\t\tlet warningMessage = checkMatchingParens( calculation );\n\t\twarningMessage += checkShortcodes( calculation, this );\n\n\t\tif ( warningMessage !== '' ) {\n\t\t\tinfoModal( calculation + '\\n\\n' + warningMessage );\n\t\t}\n\t}\n\n\t/**\n\t * Checks a string for parens, brackets, and curly braces and returns a message if any unmatched are found.\n\t *\n\t * @param  formula\n\t * @return {string}\n\t */\n\tfunction checkMatchingParens( formula ) {\n\t\tlet stack = [],\n\t\t\tformulaArray = formula.split( '' ),\n\t\t\tlength = formulaArray.length,\n\t\t\topening = [ '{', '[', '(' ],\n\t\t\tclosing = {\n\t\t\t\t'}': '{',\n\t\t\t\t')': '(',\n\t\t\t\t']': '['\n\t\t\t},\n\t\t\tunmatchedClosing = [],\n\t\t\tmsg = '',\n\t\t\ti, top;\n\n\t\tfor ( i = 0; i < length; i++ ) {\n\t\t\tif ( opening.includes( formulaArray[ i ] ) ) {\n\t\t\t\tstack.push( formulaArray[ i ] );\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ( closing.hasOwnProperty( formulaArray[ i ] ) ) {\n\t\t\t\ttop = stack.pop();\n\t\t\t\tif ( top !== closing[ formulaArray[ i ] ] ) {\n\t\t\t\t\tunmatchedClosing.push( formulaArray[ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( stack.length > 0 || unmatchedClosing.length > 0 ) {\n\t\t\tmsg = frmAdminJs.unmatched_parens + '\\n\\n';\n\t\t\treturn msg;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\t/**\n\t * Checks a calculation for shortcodes that shouldn't be in it and returns a message if found.\n\t *\n\t * @param  calculation\n\t * @param  inputElement\n\t * @return {string}\n\t */\n\tfunction checkShortcodes( calculation, inputElement ) {\n\t\tlet msg = checkNonNumericShortcodes( calculation, inputElement );\n\t\tmsg += checkNonFormShortcodes( calculation );\n\n\t\treturn msg;\n\t}\n\n\t/**\n\t * Checks if a numeric calculation has shortcodes that output non-numeric strings and returns a message if found.\n\t *\n\t * @param  calculation\n\t *\n\t * @param  inputElement\n\t * @return {string}\n\t */\n\tfunction checkNonNumericShortcodes( calculation, inputElement ) {\n\t\tlet msg = '';\n\n\t\tif ( isTextCalculation( inputElement ) ) {\n\t\t\treturn msg;\n\t\t}\n\n\t\tconst nonNumericShortcodes = getNonNumericShortcodes();\n\n\t\tif ( nonNumericShortcodes.test( calculation ) ) {\n\t\t\tmsg = frmAdminJs.text_shortcodes + '\\n\\n';\n\t\t}\n\n\t\treturn msg;\n\t}\n\n\t/**\n\t * Determines if the calculation input is from a text calculation.\n\t *\n\t * @param inputElement\n\t */\n\tfunction isTextCalculation( inputElement ) {\n\t\treturn jQuery( inputElement ).siblings( 'label[for^=\"calc_type\"]' ).children( 'input' ).prop( 'checked' );\n\t}\n\n\t/**\n\t * Returns a regular expression of shortcodes that can't be used in numeric calculations.\n\t *\n\t * @return {RegExp}\n\t */\n\tfunction getNonNumericShortcodes() {\n\t\treturn /\\[(date|time|email|ip)\\]/;\n\t}\n\n\t/**\n\t * Checks if a string has any shortcodes that do not belong in forms and returns a message if any are found.\n\t *\n\t * @param  formula\n\t * @return {string}\n\t */\n\tfunction checkNonFormShortcodes( formula ) {\n\t\tlet nonFormShortcodes = getNonFormShortcodes(),\n\t\t\tmsg = '';\n\n\t\tif ( nonFormShortcodes.test( formula ) ) {\n\t\t\tmsg += frmAdminJs.view_shortcodes + '\\n\\n';\n\t\t}\n\n\t\treturn msg;\n\t}\n\n\t/**\n\t * Returns a regular expression of shortcodes that can't be used in forms but can be used in Views, Email\n\t * Notifications, and other Formidable areas.\n\t *\n\t * @return {RegExp}\n\t */\n\tfunction getNonFormShortcodes() {\n\t\treturn /\\[id\\]|\\[key\\]|\\[if\\s\\w+\\]|\\[foreach\\s\\w+\\]|\\[created-at(\\s*)?/g;\n\t}\n\n\tfunction isCalcBoxType( box, listClass ) {\n\t\tconst list = jQuery( box ).find( '.frm_code_list' );\n\t\treturn 1 === list.length && list.hasClass( listClass );\n\t}\n\n\tfunction extractExcludedOptions( exclude ) {\n\t\tconst opts = [];\n\t\tif ( ! Array.isArray( exclude ) ) {\n\t\t\treturn opts;\n\t\t}\n\n\t\tfor ( let i = 0; i < exclude.length; i++ ) {\n\t\t\tif ( exclude[ i ].startsWith( '[' ) ) {\n\t\t\t\topts.push( exclude[ i ] );\n\t\t\t\t// remove it\n\t\t\t\texclude.splice( i, 1 );\n\t\t\t\t// https://love2dev.com/blog/javascript-remove-from-array/#remove-from-array-splice-value\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\treturn opts;\n\t}\n\n\tfunction hasExcludedOption( field, excludedOpts ) {\n\t\tlet hasOption = false;\n\t\tfor ( let i = 0; i < excludedOpts.length; i++ ) {\n\t\t\tconst inputs = document.getElementsByName( getFieldOptionInputName( excludedOpts[ i ], field.fieldId ) );\n\t\t\t// 2nd condition checks that there's at least one non-empty value\n\t\t\tif ( inputs.length && jQuery( inputs[ 0 ] ).val() ) {\n\t\t\t\thasOption = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn hasOption;\n\t}\n\n\tfunction getFieldOptionInputName( opt, fieldId ) {\n\t\tconst at = opt.indexOf( ']' );\n\t\treturn 'field_options' + opt.substring( 0, at ) + '_' + fieldId + opt.substring( at );\n\t}\n\n\tfunction popCalcFields( v, force ) {\n\t\tlet box, exclude, fields, i, list,\n\t\t\tp = jQuery( v ).closest( '.frm-single-settings' ),\n\t\t\tcalc = p.find( '.frm-calc-field' );\n\n\t\tif ( ! force && ( ! calc.length || calc.val() === '' || calc.is( ':hidden' ) ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isSummary = isCalcBoxType( v, 'frm_js_summary_list' );\n\n\t\tconst fieldId = p.find( 'input[name=\"frm_fields_submitted[]\"]' ).val();\n\n\t\tif ( force ) {\n\t\t\tbox = v;\n\t\t} else {\n\t\t\tbox = document.getElementById( 'frm-calc-box-' + fieldId );\n\t\t}\n\n\t\texclude = getExcludeArray( box, isSummary );\n\t\tconst excludedOpts = extractExcludedOptions( exclude );\n\n\t\tfields = getFieldList();\n\t\tlist = document.getElementById( 'frm-calc-list-' + fieldId );\n\t\tlist.innerHTML = '';\n\n\t\tfor ( i = 0; i < fields.length; i++ ) {\n\t\t\tif ( ( exclude && exclude.includes( fields[ i ].fieldType ) ) ||\n\t\t\t\t( excludedOpts.length && hasExcludedOption( fields[ i ], excludedOpts ) ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst a = document.createElement( 'a' );\n\t\t\ta.setAttribute( 'href', '#' );\n\t\t\ta.setAttribute( 'data-code', fields[ i ].fieldId );\n\t\t\ta.classList.add( 'frm_insert_code' );\n\t\t\ta.append( span( fields[ i ].fieldName ) );\n\t\t\ta.append( span( { className: 'frm-text-sm frm-text-grey-500', text: '[' + fields[ i ].fieldId + ']' } ) );\n\n\t\t\tconst li = document.createElement( 'li' );\n\t\t\tli.classList.add( 'frm-field-list-' + fieldId );\n\t\t\tli.classList.add( 'frm-field-list-' + fields[ i ].fieldType );\n\t\t\tli.append( a );\n\t\t\tlist.append( li );\n\t\t}\n\t}\n\n\tfunction getExcludeArray( calcBox, isSummary ) {\n\t\tconst codeList = calcBox.querySelector( '.frm_code_list' );\n\t\tconst exclude = JSON.parse( codeList.getAttribute( 'data-exclude' ) );\n\n\t\tif ( isSummary ) {\n\t\t\t// includedExtras are those that are normally excluded from the summary but the form owner can choose to include,\n\t\t\t// when they have been chosen to be included, then they can now be manually excluded in the calc box.\n\t\t\tconst includedExtras = getIncludedExtras();\n\t\t\tif ( includedExtras.length ) {\n\t\t\t\tfor ( let i = 0; i < exclude.length; i++ ) {\n\t\t\t\t\tif ( includedExtras.includes( exclude[ i ] ) ) {\n\t\t\t\t\t\t// remove it\n\t\t\t\t\t\texclude.splice( i, 1 );\n\t\t\t\t\t\t// https://love2dev.com/blog/javascript-remove-from-array/#remove-from-array-splice-value\n\t\t\t\t\t\ti--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn exclude;\n\t}\n\n\tfunction getIncludedExtras() {\n\t\tconst checked = [];\n\t\tconst checkboxes = document.getElementsByClassName( 'frm_include_extras_field' );\n\n\t\tfor ( let i = 0; i < checkboxes.length; i++ ) {\n\t\t\tif ( checkboxes[ i ].checked ) {\n\t\t\t\tchecked.push( checkboxes[ i ].value );\n\t\t\t}\n\t\t}\n\n\t\treturn checked;\n\t}\n\n\tfunction rePopCalcFieldsForSummary() {\n\t\tpopCalcFields( jQuery( '.frm-inline-modal.postbox:has(.frm_js_summary_list)' )[ 0 ], true );\n\t}\n\n\tfunction getFieldList( fieldType ) {\n\t\tlet i,\n\t\t\tfields = [],\n\t\t\tallFields = document.querySelectorAll( 'li.frm_field_box' ),\n\t\t\tcheckType = 'undefined' !== typeof fieldType;\n\n\t\tfor ( i = 0; i < allFields.length; i++ ) {\n\t\t\t// data-ftype is better (than data-type) cos of fields loaded by AJAX - which might not be ready yet\n\t\t\tif ( checkType && allFields[ i ].getAttribute( 'data-ftype' ) !== fieldType ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst fieldId = allFields[ i ].getAttribute( 'data-fid' );\n\t\t\tif ( typeof fieldId !== 'undefined' && fieldId ) {\n\t\t\t\tfields.push( {\n\t\t\t\t\tfieldId: fieldId,\n\t\t\t\t\tfieldName: getPossibleValue( 'frm_name_' + fieldId ),\n\t\t\t\t\tfieldType: getPossibleValue( 'field_options_type_' + fieldId ),\n\t\t\t\t\tfieldKey: getPossibleValue( 'field_options_field_key_' + fieldId )\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\treturn wp.hooks.applyFilters( 'frm_admin_get_field_list', fields, fieldType, allFields );\n\t}\n\n\tfunction popProductFields( field ) {\n\t\tlet i, checked, id,\n\t\t\toptions = [],\n\t\t\tcurrent = getCurrentProductFields( field ),\n\t\t\tfName = field.getAttribute( 'data-frmfname' ),\n\t\t\tproducts = getFieldList( 'product' ),\n\t\t\tquantities = getFieldList( 'quantity' ),\n\t\t\tisSelect = field.tagName === 'SELECT', // for reverse compatibility.\n\t\t\t// whether we have just 1 product and 1 quantity field & should therefore attach the latter to the former\n\t\t\tauto = 1 === quantities.length && 1 === products.length;\n\n\t\tif ( isSelect ) {\n\t\t\t// This fallback can be removed after 4.05.\n\t\t\tcurrent = field.getAttribute( 'data-frmcurrent' );\n\t\t}\n\n\t\tfor ( i = 0; i < products.length; i++ ) {\n\t\t\t// let's be double sure it's string, else indexOf will fail\n\t\t\tid = products[ i ].fieldId.toString();\n\t\t\tchecked = auto || -1 !== current.indexOf( id );\n\t\t\tif ( isSelect ) {\n\t\t\t\t// This fallback can be removed after 4.05.\n\t\t\t\tchecked = checked ? ' selected' : '';\n\t\t\t\toptions.push( '<option value=\"' + id + '\"' + checked + '>' + products[ i ].fieldName + '</option>' );\n\t\t\t} else {\n\t\t\t\tchecked = checked ? ' checked' : '';\n\t\t\t\toptions.push( '<label class=\"frm6\">' );\n\t\t\t\toptions.push( '<input type=\"checkbox\" name=\"' + fName + '\" value=\"' + id + '\"' + checked + '> ' + products[ i ].fieldName );\n\t\t\t\toptions.push( '</label>' );\n\t\t\t}\n\t\t}\n\n\t\tfield.innerHTML = options.join( '' );\n\t}\n\n\tfunction getCurrentProductFields( prodFieldOpt ) {\n\t\tconst products = prodFieldOpt.querySelectorAll( '[type=\"checkbox\"]:checked' ),\n\t\t\tidsArray = [];\n\n\t\tfor ( let i = 0; i < products.length; i++ ) {\n\t\t\tidsArray.push( products[ i ].value );\n\t\t}\n\n\t\treturn idsArray;\n\t}\n\n\tfunction popAllProductFields() {\n\t\tconst opts = document.querySelectorAll( '.frmjs_prod_field_opt' );\n\t\tfor ( let i = 0; i < opts.length; i++ ) {\n\t\t\tpopProductFields( opts[ i ] );\n\t\t}\n\t}\n\n\tfunction maybeSetProductField( field ) {\n\t\tconst fieldId = field.getAttribute( 'data-fid' ),\n\t\t\tproductFieldOpt = document.getElementById( 'field_options[product_field_' + fieldId + ']' );\n\n\t\tif ( null === productFieldOpt ) {\n\t\t\treturn;\n\t\t}\n\n\t\tpopProductFields( productFieldOpt );\n\t\t// in order to move its settings to that LHS panel where\n\t\t// the update form resides, else it'll lose this setting\n\t\tmoveFieldSettings( document.getElementById( 'frm-single-settings-' + fieldId ) );\n\t}\n\n\t/**\n\t * If the element doesn't exist, use a blank value.\n\t */\n\tfunction getPossibleValue( id ) {\n\t\tconst field = document.getElementById( id );\n\t\tif ( field !== null ) {\n\t\t\treturn field.value;\n\t\t}\n\t\treturn '';\n\t}\n\n\tfunction liveChanges() {\n\t\t/*jshint validthis:true */\n\t\tlet option,\n\t\t\tnewValue = this.value,\n\t\t\tchanges = document.getElementById( this.getAttribute( 'data-changeme' ) ),\n\t\t\tatt = this.getAttribute( 'data-changeatt' );\n\n\t\tif ( changes === null ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( att !== null ) {\n\t\t\tif ( changes.tagName === 'SELECT' && att === 'placeholder' ) {\n\t\t\t\toption = changes.options[ 0 ];\n\t\t\t\tif ( option.value === '' ) {\n\t\t\t\t\toption.innerHTML = newValue;\n\t\t\t\t} else {\n\t\t\t\t\t// Create a placeholder option if there are no blank values.\n\t\t\t\t\taddBlankSelectOption( changes, newValue );\n\t\t\t\t}\n\t\t\t} else if ( att === 'class' ) {\n\t\t\t\tchangeFieldClass( changes, this );\n\t\t\t} else if ( isSliderField( changes ) ) {\n\t\t\t\tupdateSliderFieldPreview( changes, att, newValue );\n\t\t\t} else {\n\t\t\t\tchanges.setAttribute( att, newValue );\n\t\t\t}\n\t\t} else if ( changes.id.indexOf( 'setup-message' ) === 0 ) {\n\t\t\tif ( newValue !== '' ) {\n\t\t\t\tchanges.innerHTML = '<input type=\"text\" value=\"\" disabled />';\n\t\t\t}\n\t\t} else {\n\t\t\tchanges.innerHTML = purifyHtml( newValue );\n\t\t\tif ( 'TEXTAREA' === changes.nodeName && changes.classList.contains( 'wp-editor-area' ) ) {\n\t\t\t\t// Trigger change events on wysiwyg textareas so we can also sync default values in the visual tab.\n\t\t\t\tjQuery( changes ).trigger( 'change' );\n\t\t\t}\n\n\t\t\tif ( changes.classList.contains( 'frm_primary_label' ) && 'break' === changes.nextElementSibling.getAttribute( 'data-ftype' ) ) {\n\t\t\t\tchanges.nextElementSibling.querySelector( '.frm_button_submit' ).textContent = newValue;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction updateSliderFieldPreview( field, att, newValue ) {\n\t\tif ( frmGlobal.proIncludesSliderJs ) {\n\t\t\tconst hookName = 'frm_update_slider_field_preview';\n\t\t\tconst hookArgs = { field, att, newValue };\n\t\t\twp.hooks.doAction( hookName, hookArgs );\n\t\t\treturn;\n\t\t}\n\n\t\t// This functionality has been moved to pro since v5.4.3. This code should be removed eventually.\n\t\tif ( 'value' === att ) {\n\t\t\tif ( '' === newValue ) {\n\t\t\t\tnewValue = getSliderMidpoint( field );\n\t\t\t}\n\t\t\tfield.value = newValue;\n\t\t} else {\n\t\t\tfield.setAttribute( att, newValue );\n\t\t}\n\n\t\tif ( -1 === [ 'value', 'min', 'max' ].indexOf( att ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ( 'max' === att || 'min' === att ) && '' === getSliderDefaultValueInput( field.id ) ) {\n\t\t\tfield.value = getSliderMidpoint( field );\n\t\t}\n\n\t\tfield.parentNode.querySelector( '.frm_range_value' ).textContent = field.value;\n\t}\n\n\tfunction getSliderDefaultValueInput( previewInputId ) {\n\t\treturn document.querySelector( 'input[data-changeme=\"' + previewInputId + '\"][data-changeatt=\"value\"]' ).value;\n\t}\n\n\tfunction getSliderMidpoint( sliderInput ) {\n\t\tconst max = parseFloat( sliderInput.getAttribute( 'max' ) );\n\t\tconst min = parseFloat( sliderInput.getAttribute( 'min' ) );\n\t\treturn ( ( max - min ) / 2 ) + min;\n\t}\n\n\tfunction isSliderField( previewInput ) {\n\t\treturn 'range' === previewInput.type && previewInput.parentNode.classList.contains( 'frm_range_container' );\n\t}\n\n\tfunction toggleInvalidMsg() {\n\t\t/*jshint validthis:true */\n\t\tlet typeDropdown, fieldType,\n\t\t\tfieldId = this.getAttribute( 'data-fid' ),\n\t\t\tvalue = '';\n\n\t\t[ 'field_options_max_', 'frm_format_' ].forEach( function( id ) {\n\t\t\tconst input = document.getElementById( id + fieldId );\n\t\t\tif ( ! input ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvalue += input.value;\n\t\t} );\n\n\t\ttypeDropdown = document.getElementsByName( 'field_options[type_' + fieldId + ']' )[ 0 ];\n\t\tfieldType = typeDropdown.options[ typeDropdown.selectedIndex ].value;\n\n\t\tif ( fieldType === 'text' ) {\n\t\t\ttoggleValidationBox( '' !== value, '.frm_invalid_msg' + fieldId );\n\t\t}\n\t}\n\n\tfunction markRequired() {\n\t\t/*jshint validthis:true */\n\t\tconst thisid = this.id.replace( 'frm_', '' ),\n\t\t\tfieldId = thisid.replace( 'req_field_', '' ),\n\t\t\tchecked = this.checked,\n\t\t\tlabel = jQuery( '#field_label_' + fieldId + ' .frm_required' );\n\n\t\ttoggleValidationBox( checked, '.frm_required_details' + fieldId );\n\n\t\tif ( checked ) {\n\t\t\tconst $reqBox = jQuery( 'input[name=\"field_options[required_indicator_' + fieldId + ']\"]' );\n\t\t\tif ( $reqBox.val() === '' ) {\n\t\t\t\t$reqBox.val( '*' );\n\t\t\t}\n\t\t\tlabel.removeClass( 'frm_hidden' );\n\t\t} else {\n\t\t\tlabel.addClass( 'frm_hidden' );\n\t\t}\n\t}\n\n\tfunction toggleValidationBox( hasValue, messageClass ) {\n\t\tconst $msg = jQuery( messageClass );\n\t\tif ( hasValue ) {\n\t\t\t$msg.fadeIn( 'fast' ).closest( '.frm_validation_msg' ).fadeIn( 'fast' );\n\t\t} else {\n\t\t\t// Fade out validation options\n\t\t\tconst $validationBox = $msg.fadeOut( 'fast' ).closest( '.frm_validation_box' );\n\t\t\tconst v = $validationBox.css( 'display', 'block' ).children( ':not(' + messageClass + '):visible' ).length;\n\t\t\t$validationBox.css( 'display', '' );\n\t\t\tif ( v === 0 ) {\n\t\t\t\t$msg.closest( '.frm_validation_msg' ).fadeOut( 'fast' );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction markUnique() {\n\t\t/*jshint validthis:true */\n\t\tconst fieldId = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' );\n\t\tconst $thisField = jQuery( '.frm_unique_details' + fieldId );\n\t\tif ( this.checked ) {\n\t\t\t$thisField.fadeIn( 'fast' ).closest( '.frm_validation_msg' ).fadeIn( 'fast' );\n\t\t\tconst $unqDetail = jQuery( '.frm_unique_details' + fieldId + ' input' );\n\t\t\tif ( $unqDetail.val() === '' ) {\n\t\t\t\t$unqDetail.val( frmAdminJs.default_unique );\n\t\t\t}\n\t\t} else {\n\t\t\tconst $validationBox = $thisField.fadeOut( 'fast' ).closest( '.frm_validation_box' );\n\t\t\tconst v = $validationBox.css( 'display', 'block' ).children( ':not(.frm_unique_details' + fieldId + '):visible' ).length;\n\t\t\t$validationBox.css( 'display', '' );\n\t\t\tif ( v === 0 ) {\n\t\t\t\t$thisField.closest( '.frm_validation_msg' ).fadeOut( 'fast' );\n\t\t\t}\n\t\t}\n\t}\n\n\t//Fade confirmation field and validation option in or out\n\tfunction addConf() {\n\t\t/*jshint validthis:true */\n\t\tconst fieldId = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' );\n\t\tconst val = jQuery( this ).val();\n\t\tconst $thisField = jQuery( document.getElementById( 'frm_field_id_' + fieldId ) );\n\n\t\ttoggleValidationBox( val !== '', '.frm_conf_details' + fieldId );\n\n\t\tif ( val !== '' ) {\n\t\t\t//Add default validation message if empty\n\t\t\tconst valMsg = jQuery( '.frm_validation_box .frm_conf_details' + fieldId + ' input' );\n\t\t\tif ( valMsg.val() === '' ) {\n\t\t\t\tvalMsg.val( frmAdminJs.default_conf );\n\t\t\t}\n\n\t\t\tsetConfirmationFieldDescriptions( fieldId );\n\n\t\t\t//Add or remove class for confirmation field styling\n\t\t\tif ( val === 'inline' ) {\n\t\t\t\t$thisField.removeClass( 'frm_conf_below' ).addClass( 'frm_conf_inline' );\n\t\t\t} else if ( val === 'below' ) {\n\t\t\t\t$thisField.removeClass( 'frm_conf_inline' ).addClass( 'frm_conf_below' );\n\t\t\t}\n\t\t\tjQuery( '.frm-conf-box-' + fieldId ).removeClass( 'frm_hidden' );\n\t\t} else {\n\t\t\tjQuery( '.frm-conf-box-' + fieldId ).addClass( 'frm_hidden' );\n\t\t\tsetTimeout( function() {\n\t\t\t\t$thisField.removeClass( 'frm_conf_inline frm_conf_below' );\n\t\t\t}, 200 );\n\t\t}\n\t}\n\n\tfunction setConfirmationFieldDescriptions( fieldId ) {\n\t\tconst fieldType = document.getElementsByName( 'field_options[type_' + fieldId + ']' )[ 0 ].value;\n\n\t\tconst fieldDescription = document.getElementById( 'field_description_' + fieldId );\n\t\tconst hiddenDescName = 'field_options[description_' + fieldId + ']';\n\t\tconst newValue = frmAdminJs[ 'enter_' + fieldType ];\n\t\tmaybeSetNewDescription( fieldDescription, hiddenDescName, newValue );\n\n\t\tconst confFieldDescription = document.getElementById( 'conf_field_description_' + fieldId );\n\t\tconst hiddenConfName = 'field_options[conf_desc_' + fieldId + ']';\n\t\tconst newConfValue = frmAdminJs[ 'confirm_' + fieldType ];\n\t\tmaybeSetNewDescription( confFieldDescription, hiddenConfName, newConfValue );\n\t}\n\n\tfunction maybeSetNewDescription( descriptionDiv, hiddenName, newValue ) {\n\t\tif ( descriptionDiv.innerHTML === frmAdminJs.desc ) {\n\t\t\t// Set the visible description value and the hidden description value\n\t\t\tdescriptionDiv.innerHTML = newValue;\n\t\t\tdocument.getElementsByName( hiddenName )[ 0 ].value = newValue;\n\t\t}\n\t}\n\n\tfunction initBulkOptionsOverlay() {\n\t\t/*jshint validthis:true */\n\t\tconst $info = initModal( '#frm-bulk-modal', '700px' );\n\t\tif ( $info === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\tjQuery( '.frm-insert-preset' ).on( 'click', insertBulkPreset );\n\n\t\tjQuery( builderForm ).on( 'click', 'a.frm-bulk-edit-link', function( event ) {\n\t\t\tevent.preventDefault();\n\t\t\tlet i, key, label,\n\t\t\t\tcontent = '',\n\t\t\t\toptList,\n\t\t\t\topts,\n\t\t\t\tfieldId = jQuery( this ).closest( '[data-fid]' ).data( 'fid' ),\n\t\t\t\tseparate = usingSeparateValues( fieldId ),\n\t\t\t\tproduct = isProductField( fieldId );\n\n\t\t\toptList = document.getElementById( 'frm_field_' + fieldId + '_opts' );\n\t\t\tif ( ! optList ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\topts = optList.getElementsByTagName( 'li' );\n\n\t\t\tdocument.getElementById( 'bulk-field-id' ).value = fieldId;\n\n\t\t\tfor ( i = 0; i < opts.length; i++ ) {\n\t\t\t\tkey = opts[ i ].getAttribute( 'data-optkey' );\n\t\t\t\tif ( key !== '000' ) {\n\t\t\t\t\tlabel = document.getElementsByName( 'field_options[options_' + fieldId + '][' + key + '][label]' )[ 0 ];\n\t\t\t\t\tif ( typeof label !== 'undefined' ) {\n\t\t\t\t\t\tcontent += label.value;\n\t\t\t\t\t\tif ( separate ) {\n\t\t\t\t\t\t\tcontent += '|' + document.getElementsByName( 'field_options[options_' + fieldId + '][' + key + '][value]' )[ 0 ].value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( product ) {\n\t\t\t\t\t\t\tcontent += '|' + document.getElementsByName( 'field_options[options_' + fieldId + '][' + key + '][price]' )[ 0 ].value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontent += '\\r\\n';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( i >= opts.length - 1 ) {\n\t\t\t\t\tdocument.getElementById( 'frm_bulk_options' ).value = content;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$info.dialog( 'open' );\n\n\t\t\treturn false;\n\t\t} );\n\n\t\tjQuery( '#frm-update-bulk-opts' ).on( 'click', function() {\n\t\t\tconst fieldId = document.getElementById( 'bulk-field-id' ).value;\n\t\t\tconst optionType = document.getElementById( 'bulk-option-type' ).value;\n\n\t\t\tif ( optionType ) {\n\t\t\t\t// Use custom handler for custom option type.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.classList.add( 'frm_loading_button' );\n\t\t\tfrmAdminBuild.updateOpts( fieldId, document.getElementById( 'frm_bulk_options' ).value, $info );\n\t\t\tfieldUpdated();\n\t\t} );\n\t}\n\n\tfunction insertBulkPreset( event ) {\n\t\t/*jshint validthis:true */\n\t\tconst opts = JSON.parse( this.getAttribute( 'data-opts' ) );\n\t\tevent.preventDefault();\n\t\tdocument.getElementById( 'frm_bulk_options' ).value = opts.join( '\\n' );\n\t\treturn false;\n\t}\n\n\t//Add new option or \"Other\" option to radio/checkbox/dropdown\n\tfunction addFieldOption() {\n\t\t/*jshint validthis:true */\n\t\tlet fieldId = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' ),\n\t\t\tnewOption = jQuery( '#frm_field_' + fieldId + '_opts .frm_option_template' ).prop( 'outerHTML' ),\n\t\t\toptType = jQuery( this ).data( 'opttype' ),\n\t\t\toptKey = 0,\n\t\t\toldKey = '000',\n\t\t\tlastKey = getHighestOptKey( fieldId );\n\n\t\tif ( lastKey !== oldKey ) {\n\t\t\toptKey = lastKey + 1;\n\t\t}\n\n\t\t//Update hidden field\n\t\tif ( optType === 'other' ) {\n\t\t\tdocument.getElementById( 'other_input_' + fieldId ).value = 1;\n\n\t\t\t//Hide \"Add Other\" option now if this is radio field\n\t\t\tconst ftype = jQuery( this ).data( 'ftype' );\n\t\t\tif ( ftype === 'radio' || ftype === 'select' ) {\n\t\t\t\tjQuery( this ).fadeOut( 'slow' );\n\t\t\t}\n\n\t\t\tconst data = {\n\t\t\t\taction: 'frm_add_field_option',\n\t\t\t\tfield_id: fieldId,\n\t\t\t\topt_key: optKey,\n\t\t\t\topt_type: optType,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t};\n\t\t\tjQuery.post( ajaxurl, data, function( msg ) {\n\t\t\t\tjQuery( document.getElementById( 'frm_field_' + fieldId + '_opts' ) ).append( msg );\n\t\t\t\tresetDisplayedOpts( fieldId );\n\t\t\t} );\n\t\t} else {\n\t\t\tnewOption = newOption.replace( new RegExp( 'optkey=\"' + oldKey + '\"', 'g' ), 'optkey=\"' + optKey + '\"' );\n\t\t\tnewOption = newOption.replace( new RegExp( '-' + oldKey + '_', 'g' ), '-' + optKey + '_' );\n\t\t\tnewOption = newOption.replace( new RegExp( '-' + oldKey + '\"', 'g' ), '-' + optKey + '\"' );\n\t\t\tnewOption = newOption.replace( new RegExp( '\\\\[' + oldKey + '\\\\]', 'g' ), '[' + optKey + ']' );\n\t\t\tnewOption = newOption.replace( 'frm_hidden frm_option_template', '' );\n\t\t\tnewOption = { newOption };\n\t\t\taddSaveAndDragIconsToOption( fieldId, newOption );\n\t\t\tthis.closest( '.frm_single_option' ).after( newOption.newOption );\n\t\t\tresetDisplayedOpts( fieldId );\n\t\t}\n\n\t\t// Make sure all remove buttons are enabled\n\t\tthis.closest( '.frm_sortable_field_opts' )?.querySelectorAll( '.frm_remove_tag.frm_disabled' )?.\n\t\t\tforEach( button => button.classList.remove( 'frm_disabled' ) );\n\n\t\tfieldUpdated();\n\t}\n\n\tfunction getHighestOptKey( fieldId ) {\n\t\tlet i = 0,\n\t\t\toptKey = 0,\n\t\t\topts = jQuery( '#frm_field_' + fieldId + '_opts li' ),\n\t\t\tlastKey = 0;\n\n\t\tfor ( i; i < opts.length; i++ ) {\n\t\t\toptKey = opts[ i ].getAttribute( 'data-optkey' );\n\t\t\tif ( opts.length === 1 ) {\n\t\t\t\treturn optKey;\n\t\t\t}\n\t\t\tif ( optKey !== '000' ) {\n\t\t\t\toptKey = optKey.replace( 'other_', '' );\n\t\t\t\toptKey = parseInt( optKey, 10 );\n\t\t\t}\n\n\t\t\tif ( ! isNaN( lastKey ) && ( optKey > lastKey || lastKey === '000' ) ) {\n\t\t\t\tlastKey = optKey;\n\t\t\t}\n\t\t}\n\n\t\treturn lastKey;\n\t}\n\n\tfunction toggleMultSel() {\n\t\t/*jshint validthis:true */\n\t\tconst fieldId = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' );\n\t\ttoggleMultiSelect( fieldId, this.value );\n\t}\n\n\tfunction toggleMultiSelect( fieldId, value ) {\n\t\tconst setting = jQuery( '.frm_multiple_cont_' + fieldId );\n\t\tif ( value === 'select' ) {\n\t\t\tsetting.fadeIn( 'fast' );\n\t\t} else {\n\t\t\tsetting.fadeOut( 'fast' );\n\t\t}\n\t}\n\n\tfunction toggleSepValues() {\n\t\t/*jshint validthis:true */\n\t\tconst fieldId = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' );\n\t\ttoggle( jQuery( '.field_' + fieldId + '_option_key' ) );\n\t\tjQuery( '.field_' + fieldId + '_option' ).toggleClass( 'frm_with_key' );\n\t}\n\n\tfunction toggleImageOptions() {\n\t\t/*jshint validthis:true */\n\t\tlet hasImageOptions, imageSize,\n\t\t\t$field = jQuery( this ).closest( '.frm-single-settings' ),\n\t\t\tfieldId = $field.data( 'fid' ),\n\t\t\tdisplayField = document.getElementById( 'frm_field_id_' + fieldId );\n\n\t\trefreshOptionDisplayNow( jQuery( this ) );\n\n\t\ttoggle( jQuery( '.field_' + fieldId + '_image_id' ) );\n\t\ttoggle( jQuery( '.frm_toggle_image_options_' + fieldId ) );\n\t\ttoggle( jQuery( '.frm_image_size_' + fieldId ) );\n\t\ttoggle( jQuery( '.frm_alignment_' + fieldId ) );\n\t\ttoggle( jQuery( '.frm-add-other#frm_add_field_' + fieldId ) );\n\n\t\thasImageOptions = imagesAsOptions( fieldId );\n\n\t\tif ( hasImageOptions ) {\n\t\t\tsetAlignment( fieldId, 'inline' );\n\t\t\tremoveImageSizeClasses( displayField );\n\t\t\timageSize = getImageOptionSize( fieldId );\n\t\t\tdisplayField.classList.add( 'frm_image_options' );\n\t\t\tdisplayField.classList.add( 'frm_image_size_' + imageSize );\n\t\t\t$field.find( '.frm-bulk-edit-link' ).hide();\n\t\t} else {\n\t\t\tdisplayField.classList.remove( 'frm_image_options' );\n\t\t\tremoveImageSizeClasses( displayField );\n\t\t\tsetAlignment( fieldId, 'block' );\n\t\t\t$field.find( '.frm-bulk-edit-link' ).show();\n\t\t}\n\n\t\t/**\n\t\t * Fires when image options are toggled for a field.\n\t\t *\n\t\t * @param {HTMLElement} field           The field element.\n\t\t * @param {boolean}     hasImageOptions Whether the field has image options enabled.\n\t\t */\n\t\twp.hooks.doAction( 'frm_image_options_toggled', $field[ 0 ], hasImageOptions );\n\t}\n\n\tfunction removeImageSizeClasses( field ) {\n\t\tfield.classList.remove( 'frm_image_size_', 'frm_image_size_small', 'frm_image_size_medium', 'frm_image_size_large', 'frm_image_size_xlarge' );\n\t}\n\n\tfunction setAlignment( fieldId, alignment ) {\n\t\tjQuery( '#field_options_align_' + fieldId ).val( alignment ).trigger( 'change' );\n\t}\n\n\tfunction setImageSize() {\n\t\tconst $field = jQuery( this ).closest( '.frm-single-settings' ),\n\t\t\tfieldId = $field.data( 'fid' ),\n\t\t\tdisplayField = document.getElementById( 'frm_field_id_' + fieldId );\n\n\t\trefreshOptionDisplay();\n\n\t\tif ( imagesAsOptions( fieldId ) ) {\n\t\t\tremoveImageSizeClasses( displayField );\n\t\t\tdisplayField.classList.add( 'frm_image_options' );\n\t\t\tdisplayField.classList.add( 'frm_image_size_' + getImageOptionSize( fieldId ) );\n\t\t}\n\t}\n\n\tfunction refreshOptionDisplayNow( object ) {\n\t\tconst $field = object.closest( '.frm-single-settings' ),\n\t\t\tfieldID = $field.data( 'fid' );\n\t\tjQuery( '.field_' + fieldID + '_option' ).trigger( 'change' );\n\t}\n\n\tfunction refreshOptionDisplay() {\n\t\t/*jshint validthis:true */\n\t\trefreshOptionDisplayNow( jQuery( this ) );\n\t}\n\n\tfunction addImageToOption( event ) {\n\t\tconst imagePreview = event.target.closest( '.frm_image_preview_wrapper' );\n\t\tif ( ! wp?.media || imagePreview?.dataset.upgrade ) {\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\n\t\twp.media.model.settings.post.id = 0;\n\n\t\tconst fileFrame = wp.media.frames.file_frame = wp.media( {\n\t\t\tmultiple: false,\n\t\t\tlibrary: {\n\t\t\t\ttype: [ 'image' ]\n\t\t\t}\n\t\t} );\n\n\t\tfileFrame.on( 'select', function() {\n\t\t\tconst attachment = fileFrame.state().get( 'selection' ).first().toJSON();\n\t\t\tconst img = imagePreview.querySelector( 'img' );\n\n\t\t\timg.setAttribute( 'src', attachment.url );\n\t\t\timg.classList.remove( 'frm_hidden' );\n\t\t\timg.removeAttribute( 'srcset' ); // Prevent the old image from sticking around.\n\n\t\t\timagePreview.querySelector( '.frm_image_preview_frame' ).style.display = 'block';\n\t\t\timagePreview.querySelector( '.frm_image_preview_title' ).textContent = attachment.filename;\n\t\t\timagePreview.querySelector( '.frm_choose_image_box' ).style.display = 'none';\n\n\t\t\tconst $imagePreview = jQuery( imagePreview );\n\t\t\t$imagePreview.siblings( 'input[name*=\"[label]\"]' ).data( 'frmimgurl', attachment.url );\n\t\t\t$imagePreview.find( 'input.frm_image_id' ).val( attachment.id ).trigger( 'change' );\n\t\t\twp.media.model.settings.post.id = 0;\n\t\t} );\n\n\t\tfileFrame.open();\n\t}\n\n\tfunction removeImageFromOption( event ) {\n\t\tconst $this = jQuery( this ),\n\t\t\tpreviewWrapper = $this.closest( '.frm_image_preview_wrapper' );\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tpreviewWrapper.find( 'img' ).attr( 'src', '' );\n\t\tpreviewWrapper.find( '.frm_image_preview_frame' ).hide();\n\t\tpreviewWrapper.find( '.frm_choose_image_box' ).show();\n\t\tpreviewWrapper.find( 'input.frm_image_id' ).val( 0 ).trigger( 'change' );\n\t}\n\n\tfunction toggleMultiselect() {\n\t\t/*jshint validthis:true */\n\t\tconst dropdown = jQuery( this ).closest( 'li' ).find( '.frm_form_fields select' );\n\t\tif ( this.checked ) {\n\t\t\tdropdown.attr( 'multiple', 'multiple' );\n\t\t} else {\n\t\t\tdropdown.removeAttr( 'multiple' );\n\t\t}\n\t}\n\n\t/**\n\t * Allow typing on form switcher click without an extra click to search.\n\t */\n\tfunction focusSearchBox() {\n\t\tconst searchBox = document.getElementById( 'dropform-search-input' );\n\t\tif ( searchBox !== null ) {\n\t\t\tsetTimeout( function() {\n\t\t\t\tsearchBox.focus();\n\t\t\t}, 100 );\n\t\t}\n\t}\n\n\t/**\n\t * Dismiss a warning message and send an AJAX request to update the dismissal state.\n\t *\n\t * @since 6.3\n\t *\n\t * @param {Event} event The event object associated with the click on the dismiss icon.\n\t */\n\tfunction dismissWarningMessage( event ) {\n\t\tconst target = event.target;\n\n\t\tconst warningEl = target.closest( '.frm_warning_style' );\n\t\tjQuery( warningEl ).fadeOut( 400, () => warningEl.remove() );\n\n\t\tconst action = target.dataset.action;\n\t\tconst formData = new FormData();\n\t\tdoJsonPost( action, formData );\n\t}\n\n\t/**\n\t * If a field is clicked in the builder, prevent inputs from changing.\n\t */\n\tfunction stopFieldFocus( e ) {\n\t\te.preventDefault();\n\t}\n\n\t/**\n\t * Delete a field option.\n\t */\n\tfunction deleteFieldOption() {\n\t\tconst parentLi = this.parentNode;\n\t\tconst parentUl = parentLi.parentNode;\n\n\t\t// If only 2 visible options, add disabled class to the other delete button\n\t\tconst visibleOptions = parentUl.querySelectorAll( 'li:not(.frm_hidden)' );\n\t\tif ( visibleOptions.length === 2 ) {\n\t\t\tArray.from( visibleOptions )\n\t\t\t\t.find( li => li !== parentLi )\n\t\t\t\t.querySelector( '.frm_remove_tag' )?.classList.add( 'frm_disabled' );\n\t\t}\n\n\t\t/*jshint validthis:true */\n\t\tlet otherInput,\n\t\t\tfieldId = this.getAttribute( 'data-fid' );\n\n\t\tjQuery( parentLi ).fadeOut( 'fast', function() {\n\t\t\twp.hooks.doAction( 'frm_before_delete_field_option', this );\n\t\t\tjQuery( parentLi ).remove();\n\n\t\t\tconst hasOther = jQuery( parentUl ).find( '.frm_other_option' );\n\t\t\tif ( hasOther.length < 1 ) {\n\t\t\t\totherInput = document.getElementById( 'other_input_' + fieldId );\n\t\t\t\tif ( otherInput !== null ) {\n\t\t\t\t\totherInput.value = 0;\n\t\t\t\t}\n\t\t\t\tjQuery( '#other_button_' + fieldId ).fadeIn( 'fast' );\n\t\t\t}\n\t\t} );\n\t\tfieldUpdated();\n\t}\n\n\t/**\n\t * If a radio button is set as default, allow a click to\n\t * deselect it.\n\t */\n\tfunction maybeUncheckRadio() {\n\t\tlet $self, uncheck, unbind, up;\n\n\t\t/*jshint validthis:true */\n\t\t$self = jQuery( this );\n\t\tif ( $self.is( ':checked' ) ) {\n\t\t\tuncheck = function() {\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t$self.prop( 'checked', false );\n\t\t\t\t}, 0 );\n\t\t\t};\n\t\t\tunbind = function() {\n\t\t\t\t$self.off( 'mouseup', up );\n\t\t\t};\n\t\t\tup = function() {\n\t\t\t\tuncheck();\n\t\t\t\tunbind();\n\t\t\t};\n\t\t\t$self.on( 'mouseup', up );\n\t\t\t$self.one( 'mouseout', unbind );\n\t\t}\n\t}\n\n\t/**\n\t * If the field option has the default text, clear it out on click.\n\t */\n\tfunction maybeClearOptText() {\n\t\t/*jshint validthis:true */\n\t\tif ( this.value === frmAdminJs.new_option ) {\n\t\t\tthis.setAttribute( 'data-value-on-focus', this.value );\n\t\t\tthis.value = '';\n\t\t}\n\t}\n\n\tfunction confirmFieldsDeleteMessage( numberOfFields ) {\n\t\t/* translators: %1$s: Number of fields that are selected to be deleted. */\n\t\treturn sprintf( __( 'Are you sure you want to delete these %1$s selected field(s)?', 'formidable' ), numberOfFields );\n\t}\n\n\tfunction clickDeleteField() {\n\t\t/*jshint validthis:true */\n\t\tlet confirmMsg = frmAdminJs.conf_delete,\n\t\t\tmaybeDivider = this.parentNode.parentNode.parentNode.parentNode.parentNode,\n\t\t\tli = maybeDivider.parentNode,\n\t\t\tfield = jQuery( this ).closest( 'li.form-field' ),\n\t\t\tfieldId = field.data( 'fid' );\n\n\t\tif ( field.data( 'ftype' ) === 'divider' ) {\n\t\t\tconst fieldBoxes = document.querySelectorAll( '.frm-field-group-hover-target .start_divider .frm_field_box' );\n\t\t\tlet fieldIdsToDelete = 0;\n\t\t\tfieldBoxes.forEach( fieldBox => {\n\t\t\t\tconst fieldsInsideFieldBox = fieldBox.querySelectorAll( 'li.form-field' );\n\t\t\t\tif ( fieldsInsideFieldBox ) {\n\t\t\t\t\tfieldIdsToDelete += fieldsInsideFieldBox.length;\n\t\t\t\t}\n\t\t\t} );\n\t\t\tif ( fieldIdsToDelete ) {\n\t\t\t\tconfirmMsg = confirmFieldsDeleteMessage( ++fieldIdsToDelete );\n\t\t\t}\n\t\t}\n\n\t\tif ( li.classList.contains( 'frm-section-collapsed' ) || li.classList.contains( 'frm-page-collapsed' ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If deleting a section, use a special message.\n\t\tif ( maybeDivider.className === 'divider_section_only' ) {\n\t\t\tconfirmMsg = frmAdminJs.conf_delete_sec;\n\t\t}\n\n\t\tthis.setAttribute( 'data-frmverify', confirmMsg );\n\t\tthis.setAttribute( 'data-frmverify-btn', 'frm-button-red' );\n\t\tthis.setAttribute( 'data-deletefield', fieldId );\n\n\t\tcloseOpenFieldDropdowns();\n\n\t\tconfirmLinkClick( this );\n\t\treturn false;\n\t}\n\n\tfunction clickSelectField() {\n\t\tthis.closest( 'li.form-field' ).click();\n\t}\n\n\tfunction clickDeleteFieldGroup() {\n\t\tlet hoverTarget, decoy;\n\n\t\thoverTarget = document.querySelector( '.frm-field-group-hover-target' );\n\t\tif ( null === hoverTarget ) {\n\t\t\treturn;\n\t\t}\n\n\t\thoverTarget.classList.add( 'frm-selected-field-group' );\n\n\t\tdecoy = document.createElement( 'div' );\n\t\tdecoy.classList.add( 'frm-delete-field-groups', 'frm_hidden' );\n\t\tdocument.body.append( decoy );\n\t\tdecoy.click();\n\t}\n\n\tfunction duplicateFieldGroup() {\n\t\tconst hoverTarget = document.querySelector( '.frm-field-group-hover-target' );\n\t\tif ( null === hoverTarget ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst newRowId = 'frm_field_group_' + getAutoId();\n\t\tconst placeholderUlChild = document.createTextNode( '' );\n\t\twrapFieldLiInPlace( placeholderUlChild );\n\n\t\tconst newRow = jQuery( placeholderUlChild ).closest( 'li' ).get( 0 );\n\t\tnewRow.classList.add( 'frm_hidden' );\n\n\t\tconst newRowUl = newRow.querySelector( 'ul' );\n\t\tnewRowUl.id = newRowId;\n\n\t\tjQuery( hoverTarget.closest( 'li.frm_field_box' ) ).after( newRow );\n\n\t\tconst $fields = getFieldsInRow( jQuery( hoverTarget ) );\n\t\tconst syncDetails = [];\n\t\tconst injectedCloneOptions = [];\n\n\t\tconst expectedLength = $fields.length;\n\t\tconst originalFieldIdByDuplicatedFieldId = {};\n\n\t\tlet duplicatedCount = 0;\n\n\t\tjQuery( newRow ).on(\n\t\t\t'frm_added_duplicated_field_to_row',\n\t\t\tfunction( _, args ) {\n\t\t\t\toriginalFieldIdByDuplicatedFieldId[ jQuery( args.duplicatedFieldHtml ).attr( 'data-fid' ) ] = args.originalFieldId;\n\n\t\t\t\tif ( expectedLength > ++duplicatedCount ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst $newRowUl = jQuery( newRowUl );\n\t\t\t\tconst $duplicatedFields = getFieldsInRow( $newRowUl );\n\n\t\t\t\tinjectedCloneOptions.forEach(\n\t\t\t\t\tfunction( cloneOption ) {\n\t\t\t\t\t\tcloneOption.remove();\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tfor ( let index = 0; index < expectedLength; ++index ) {\n\t\t\t\t\t$newRowUl.append( $newRowUl.children( 'li.form-field[frm-field-order=\"' + index + '\"]' ) );\n\t\t\t\t}\n\n\t\t\t\tsyncLayoutClasses( $duplicatedFields.first(), syncDetails );\n\t\t\t\tnewRow.classList.remove( 'frm_hidden' );\n\t\t\t\tupdateFieldOrder();\n\n\t\t\t\tgetFieldsInRow( $newRowUl ).each(\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tmaybeDuplicateUnsavedSettings( originalFieldIdByDuplicatedFieldId[ this.getAttribute( 'data-fid' ) ], jQuery( this ).prop( 'outerHTML' ) );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\n\t\t$fields.each(\n\t\t\tfunction( index ) {\n\t\t\t\tlet cloneOption;\n\t\t\t\tcloneOption = document.createElement( 'li' );\n\t\t\t\tcloneOption.classList.add( 'frm_clone_field' );\n\t\t\t\tcloneOption.setAttribute( 'frm-target-row-id', newRowId );\n\t\t\t\tcloneOption.setAttribute( 'frm-field-order', index );\n\t\t\t\tthis.append( cloneOption );\n\t\t\t\tcloneOption.click();\n\t\t\t\tinjectedCloneOptions.push( cloneOption );\n\t\t\t\tsyncDetails.push( getSizeOfLayoutClass( getLayoutClassName( this.classList ) ) );\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction clickFieldGroupLayout() {\n\t\tlet hoverTarget, sizeOfFieldGroup, popupWrapper;\n\n\t\thoverTarget = document.querySelector( '.frm-field-group-hover-target' );\n\n\t\tif ( null === hoverTarget ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdeselectFields();\n\n\t\tsizeOfFieldGroup = getSizeOfFieldGroupFromChildElement( hoverTarget.querySelector( 'li.form-field' ) );\n\n\t\thoverTarget.classList.add( 'frm-has-open-field-group-popup' );\n\t\tjQuery( document ).on( 'click', '#frm_builder_page', destroyFieldGroupPopupOnOutsideClick );\n\n\t\tpopupWrapper = div();\n\t\tpopupWrapper.style.position = 'relative';\n\t\tpopupWrapper.append( getFieldGroupPopup( sizeOfFieldGroup, this ) );\n\t\tthis.parentNode.append( popupWrapper );\n\n\t\tconst firstLayoutOption = popupWrapper.querySelector( '.frm-row-layout-option' );\n\t\tif ( firstLayoutOption ) {\n\t\t\tfirstLayoutOption.focus();\n\t\t}\n\t}\n\n\tfunction destroyFieldGroupPopupOnOutsideClick( event ) {\n\t\tif ( event.target.classList.contains( 'frm-custom-field-group-layout' ) || event.target.classList.contains( 'frm-cancel-custom-field-group-layout' ) ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( ! jQuery( event.target ).closest( '#frm_field_group_controls' ).length && ! jQuery( event.target ).closest( '#frm_field_group_popup' ).length ) {\n\t\t\tdestroyFieldGroupPopup();\n\t\t}\n\t}\n\n\tfunction getSizeOfFieldGroupFromChildElement( element ) {\n\t\tconst $ul = jQuery( element ).closest( 'ul' );\n\t\tif ( $ul.length ) {\n\t\t\treturn getFieldsInRow( $ul ).length;\n\t\t}\n\t\treturn getSelectedFieldCount();\n\t}\n\n\tfunction getFieldGroupPopup( sizeOfFieldGroup, childElement ) {\n\t\tlet popup, wrapper, rowLayoutOptions, ul;\n\n\t\tpopup = document.getElementById( 'frm_field_group_popup' );\n\t\tif ( null === popup ) {\n\t\t\tpopup = div();\n\t\t} else {\n\t\t\tpopup.innerHTML = '';\n\t\t}\n\n\t\tpopup.id = 'frm_field_group_popup';\n\n\t\twrapper = div();\n\t\twrapper.style.padding = '0 24px 12px';\n\t\twrapper.append( getRowLayoutTitle() );\n\n\t\trowLayoutOptions = getRowLayoutOptions( sizeOfFieldGroup );\n\n\t\tul = childElement.closest( 'ul.frm_sorting' );\n\t\tif ( null !== ul ) {\n\t\t\tmaybeMarkRowLayoutAsActive( ul, rowLayoutOptions );\n\t\t}\n\n\t\twrapper.append( rowLayoutOptions );\n\n\t\tpopup.append( wrapper );\n\t\tpopup.append( separator() );\n\n\t\tif ( sizeOfFieldGroup <= 6 ) {\n\t\t\tpopup.append( getCustomLayoutOption() );\n\t\t}\n\n\t\tpopup.append( getBreakIntoDifferentRowsOption() );\n\n\t\treturn popup;\n\t}\n\n\tfunction maybeMarkRowLayoutAsActive( activeRow, options ) {\n\t\tlet length, index, currentRow;\n\n\t\tlength = options.children.length;\n\t\tfor ( index = 0; index < length; ++index ) {\n\t\t\tcurrentRow = options.children[ index ];\n\t\t\tif ( rowLayoutsMatch( currentRow, activeRow ) ) {\n\t\t\t\tcurrentRow.classList.add( 'frm-active-row-layout' );\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction separator() {\n\t\treturn document.createElement( 'hr' );\n\t}\n\n\tfunction getCustomLayoutOption() {\n\t\tconst option = div();\n\t\toption.textContent = __( 'Custom layout', 'formidable' );\n\t\tjQuery( option ).prepend( getIconClone( 'frm_gear_svg' ) );\n\t\toption.classList.add( 'frm-custom-field-group-layout' );\n\t\tmakeTabbable( option );\n\t\treturn option;\n\t}\n\n\tfunction makeTabbable( element, ariaLabel ) {\n\t\telement.setAttribute( 'tabindex', 0 );\n\t\telement.setAttribute( 'role', 'button' );\n\t\tif ( 'undefined' !== typeof ariaLabel ) {\n\t\t\telement.setAttribute( 'aria-label', ariaLabel );\n\t\t}\n\t}\n\n\tfunction getIconClone( iconId ) {\n\t\tconst clone = document.getElementById( iconId ).cloneNode( true );\n\t\tclone.id = '';\n\t\treturn clone;\n\t}\n\n\tfunction getBreakIntoDifferentRowsOption() {\n\t\tconst option = div();\n\t\toption.textContent = __( 'Break into rows', 'formidable' );\n\t\tjQuery( option ).prepend( getIconClone( 'frm_break_field_group_svg' ) );\n\t\toption.classList.add( 'frm-break-field-group' );\n\t\tmakeTabbable( option );\n\t\treturn option;\n\t}\n\n\tfunction getRowLayoutTitle() {\n\t\tconst rowLayoutTitle = div();\n\t\trowLayoutTitle.classList.add( 'frm-row-layout-title' );\n\t\trowLayoutTitle.textContent = __( 'Row Layout', 'formidable' );\n\t\treturn rowLayoutTitle;\n\t}\n\n\tfunction getRowLayoutOptions( size ) {\n\t\tlet wrapper, padding;\n\n\t\twrapper = getEmptyGridContainer();\n\n\t\tif ( size > 6 ) {\n\t\t\twrapper.append( getRowLayoutOption( size, 'even' ) );\n\t\t\treturn wrapper;\n\t\t}\n\n\t\tif ( 5 !== size ) {\n\t\t\twrapper.append( getRowLayoutOption( size, 'even' ) );\n\t\t}\n\t\tif ( size % 2 === 1 ) {\n\t\t\t// only include the middle option for odd numbers because even doesn't make a lot of sense.\n\t\t\twrapper.append( getRowLayoutOption( size, 'middle' ) );\n\t\t}\n\t\tif ( size < 6 ) {\n\t\t\twrapper.append( getRowLayoutOption( size, 'left' ) );\n\t\t\twrapper.append( getRowLayoutOption( size, 'right' ) );\n\t\t} else {\n\t\t\tpadding = div();\n\t\t\tpadding.classList.add( 'frm_fourth' );\n\t\t\twrapper.prepend( padding );\n\t\t}\n\n\t\treturn wrapper;\n\t}\n\n\tfunction getRowLayoutOption( size, type ) {\n\t\tlet option, useClass;\n\n\t\toption = div();\n\t\toption.classList.add( 'frm-row-layout-option' );\n\t\tmakeTabbable( option, type );\n\n\t\tswitch ( size ) {\n\t\t\tcase 6:\n\t\t\t\tuseClass = 'frm_half';\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tuseClass = 'frm_third';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif ( size > 6 ) {\n\t\t\t\t\t// We only show a single option at 6-12, so we use the full width.\n\t\t\t\t\tuseClass = 'frm_full';\n\t\t\t\t} else {\n\t\t\t\t\tuseClass = size % 2 === 1 ? 'frm_fourth' : 'frm_third';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\toption.classList.add( useClass );\n\t\toption.setAttribute( 'layout-type', type );\n\n\t\toption.append( getRowForSizeAndType( size, type ) );\n\t\treturn option;\n\t}\n\n\tfunction rowLayoutsMatch( row1, row2 ) {\n\t\treturn getRowLayoutAsKey( row1 ) === getRowLayoutAsKey( row2 );\n\t}\n\n\tfunction getRowLayoutAsKey( row ) {\n\t\tlet $fields, sizes;\n\t\tif ( row.classList.contains( 'frm-row-layout-option' ) ) {\n\t\t\t$fields = jQuery( row ).find( '.frm_grid_container' ).children();\n\t\t} else {\n\t\t\t$fields = getFieldsInRow( jQuery( row ) );\n\t\t}\n\t\tsizes = [];\n\t\t$fields.each(\n\t\t\tfunction() {\n\t\t\t\tsizes.push( getSizeOfLayoutClass( getLayoutClassName( this.classList ) ) );\n\t\t\t}\n\t\t);\n\t\treturn sizes.join( '-' );\n\t}\n\n\tfunction getRowForSizeAndType( size, type ) {\n\t\tlet row, index, block;\n\n\t\trow = getEmptyGridContainer();\n\t\tfor ( index = 0; index < size; ++index ) {\n\t\t\tblock = div();\n\t\t\tblock.classList.add( getClassForBlock( size, type, index ) );\n\t\t\tblock.style.height = '16px';\n\t\t\tblock.style.background = '#9EA9B8';\n\t\t\tblock.style.borderRadius = '1px';\n\t\t\trow.append( block );\n\t\t}\n\n\t\treturn row;\n\t}\n\n\t/**\n\t * @param {number} size  2-12.\n\t * @param {string} type  even, middle, left, or right.\n\t * @param {number} index 0-5.\n\t * @return {string} The class name.\n\t */\n\tfunction getClassForBlock( size, type, index ) {\n\t\tif ( 'even' === type ) {\n\t\t\treturn getEvenClassForSize( size, index );\n\t\t} else if ( 'middle' === type ) {\n\t\t\tif ( 3 === size ) {\n\t\t\t\treturn 1 === index ? 'frm6' : 'frm3';\n\t\t\t}\n\t\t\tif ( 5 === size ) {\n\t\t\t\treturn 2 === index ? 'frm4' : 'frm2';\n\t\t\t}\n\t\t} else if ( 'left' === type ) {\n\t\t\treturn 0 === index ? getLargeClassForSize( size ) : getSmallClassForSize( size );\n\t\t} else if ( 'right' === type ) {\n\t\t\treturn index === size - 1 ? getLargeClassForSize( size ) : getSmallClassForSize( size );\n\t\t}\n\t\treturn 'frm12';\n\t}\n\n\t/**\n\t * @param {number}           size  2-12.\n\t * @param {number|undefined} index 0-5.\n\t * @return {string} The class name.\n\t */\n\tfunction getEvenClassForSize( size, index ) {\n\t\tif ( size > 6 ) {\n\t\t\treturn 'frm1';\n\t\t}\n\t\tif ( -1 !== [ 2, 3, 4, 6 ].indexOf( size ) ) {\n\t\t\treturn getLayoutClassForSize( 12 / size );\n\t\t}\n\t\tif ( 5 === size && 'undefined' !== typeof index ) {\n\t\t\treturn 0 === index ? 'frm4' : 'frm2';\n\t\t}\n\t\treturn 'frm12';\n\t}\n\n\tfunction getSmallClassForSize( size ) {\n\t\tswitch ( size ) {\n\t\t\tcase 2: case 3:\n\t\t\t\treturn 'frm3';\n\t\t\tcase 4:\n\t\t\t\treturn 'frm2';\n\t\t\tcase 5:\n\t\t\t\treturn 'frm2';\n\t\t\tcase 6:\n\t\t\t\treturn 'frm1';\n\t\t}\n\t\treturn 'frm12';\n\t}\n\n\tfunction getLargeClassForSize( size ) {\n\t\tswitch ( size ) {\n\t\t\tcase 2:\n\t\t\t\treturn 'frm9';\n\t\t\tcase 3: case 4:\n\t\t\t\treturn 'frm6';\n\t\t\tcase 5:\n\t\t\t\treturn 'frm4';\n\t\t\tcase 6:\n\t\t\t\treturn 'frm7';\n\t\t}\n\t\treturn 'frm12';\n\t}\n\n\tfunction getEmptyGridContainer() {\n\t\tconst wrapper = div();\n\t\twrapper.classList.add( 'frm_grid_container' );\n\t\treturn wrapper;\n\t}\n\n\t/**\n\t * Handle when a field group layout option (that sets grid classes/column sizing) is selected in the \"Row Layout\" popup.\n\t *\n\t * @return {void}\n\t */\n\tfunction handleFieldGroupLayoutOptionClick() {\n\t\tconst row = document.querySelector( '.frm-field-group-hover-target' );\n\t\tif ( ! row ) {\n\t\t\t// The field group layout options also get clicked when merging multiple rows.\n\t\t\t// The following code isn't required for multiple rows though so just exit early.\n\t\t\treturn;\n\t\t}\n\n\t\tconst type = this.getAttribute( 'layout-type' );\n\t\tsyncLayoutClasses( getFieldsInRow( jQuery( row ) ).first(), type );\n\t\tdestroyFieldGroupPopup();\n\t}\n\n\tfunction handleFieldGroupLayoutOptionInsideMergeClick() {\n\t\tlet $ul, type;\n\t\t$ul = mergeSelectedFieldGroups();\n\t\ttype = this.getAttribute( 'layout-type' );\n\t\tsyncLayoutClasses( getFieldsInRow( $ul ).first(), type );\n\t\tunselectFieldGroups();\n\t}\n\n\tfunction mergeSelectedFieldGroups() {\n\t\tconst $selectedFieldGroups = jQuery( '.frm-selected-field-group' ),\n\t\t\t$firstGroupUl = $selectedFieldGroups.first();\n\t\t$selectedFieldGroups.not( $firstGroupUl ).each(\n\t\t\tfunction() {\n\t\t\t\tgetFieldsInRow( jQuery( this ) ).each(\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tconst previousParent = this.parentNode;\n\t\t\t\t\t\tgetFieldsInRow( $firstGroupUl ).last().after( this );\n\t\t\t\t\t\tif ( ! jQuery( previousParent ).children( 'li.form-field' ).length ) {\n\t\t\t\t\t\t\t// clean up the previous field group if we've removed all of its fields.\n\t\t\t\t\t\t\tpreviousParent.closest( 'li.frm_field_box' ).remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t\tupdateFieldOrder();\n\t\tsyncLayoutClasses( getFieldsInRow( $firstGroupUl ).first() );\n\t\treturn $firstGroupUl;\n\t}\n\n\tfunction customFieldGroupLayoutClick() {\n\t\tlet $fields;\n\t\tif ( null !== this.closest( '.frm-merge-fields-into-row' ) ) {\n\t\t\treturn;\n\t\t}\n\t\t$fields = getFieldsInRow( jQuery( '.frm-field-group-hover-target' ) );\n\t\tsetupCustomLayoutOptions( $fields );\n\t}\n\n\tfunction setupCustomLayoutOptions( $fields ) {\n\t\tlet size, popup, wrapper, layoutClass, inputRow, paddingElement, inputValueOverride, index, inputField, heading, label, buttonsWrapper, cancelButton, saveButton;\n\n\t\tsize = $fields.length;\n\n\t\tpopup = document.getElementById( 'frm_field_group_popup' );\n\t\tpopup.innerHTML = '';\n\n\t\twrapper = div();\n\t\twrapper.style.padding = '0 24px';\n\n\t\tlayoutClass = getEvenClassForSize( 5 === size ? 6 : size );\n\n\t\tinputRow = div();\n\t\tinputRow.style.padding = '20px 0';\n\t\tinputRow.classList.add( 'frm_grid_container' );\n\n\t\tif ( 5 === size ) {\n\t\t\t// add a span to pad the inputs by 1 column, to account for the missing 2 columns.\n\t\t\tpaddingElement = document.createElement( 'span' );\n\t\t\tpaddingElement.classList.add( 'frm1' );\n\t\t\tinputRow.append( paddingElement );\n\t\t}\n\n\t\tinputValueOverride = getSelectedFieldCount() > 0 ? getSizeOfLayoutClass( getEvenClassForSize( size ) ) : false;\n\t\tif ( false !== inputValueOverride && inputValueOverride >= 12 ) {\n\t\t\tinputValueOverride = Math.floor( 12 / size );\n\t\t}\n\n\t\tfor ( index = 0; index < size; ++index ) {\n\t\t\tinputField = document.createElement( 'input' );\n\t\t\tinputField.type = 'text';\n\t\t\tinputField.classList.add( layoutClass );\n\t\t\tinputField.classList.add( 'frm-custom-grid-size-input' );\n\t\t\tinputField.value = false !== inputValueOverride ? inputValueOverride : getSizeOfLayoutClass( getLayoutClassName( $fields.get( index ).classList ) );\n\t\t\tinputRow.append( inputField );\n\t\t}\n\n\t\theading = div();\n\t\theading.classList.add( 'frm-builder-popup-heading' );\n\t\theading.textContent = __( 'Enter number of columns for each field', 'formidable' );\n\n\t\tlabel = div();\n\t\tlabel.classList.add( 'frm-builder-popup-subheading' );\n\t\tlabel.textContent = __( 'Layouts are based on a 12-column grid system', 'formidable' );\n\n\t\twrapper.append( heading );\n\t\twrapper.append( label );\n\n\t\twrapper.append( inputRow );\n\n\t\tbuttonsWrapper = div();\n\t\tbuttonsWrapper.style.textAlign = 'right';\n\n\t\tcancelButton = getSecondaryButton();\n\t\tcancelButton.textContent = __( 'Cancel', 'formidable' );\n\t\tcancelButton.classList.add( 'frm-cancel-custom-field-group-layout' );\n\t\tcancelButton.style.marginRight = '10px';\n\n\t\tsaveButton = getPrimaryButton();\n\t\tsaveButton.textContent = __( 'Save', 'formidable' );\n\t\tsaveButton.classList.add( 'frm-save-custom-field-group-layout' );\n\n\t\tbuttonsWrapper.append( cancelButton );\n\t\tbuttonsWrapper.append( saveButton );\n\n\t\twrapper.append( buttonsWrapper );\n\n\t\tpopup.append( wrapper );\n\n\t\tsetTimeout(\n\t\t\tfunction() {\n\t\t\t\tconst firstInput = popup.querySelector( 'input.frm-custom-grid-size-input' ).focus();\n\t\t\t\tif ( firstInput ) {\n\t\t\t\t\tfirstInput.focus();\n\t\t\t\t}\n\t\t\t},\n\t\t\t0\n\t\t);\n\t}\n\n\tfunction customFieldGroupLayoutInsideMergeClick() {\n\t\tconst $fields = jQuery( '.frm-selected-field-group li.form-field' );\n\t\tsetupCustomLayoutOptions( $fields );\n\t}\n\n\tfunction getPrimaryButton() {\n\t\tconst button = getButton();\n\t\tbutton.classList.add( 'button-primary', 'frm-button-primary' );\n\t\treturn button;\n\t}\n\n\tfunction getSecondaryButton() {\n\t\tconst button = getButton();\n\t\tbutton.classList.add( 'button-secondary', 'frm-button-secondary' );\n\t\treturn button;\n\t}\n\n\tfunction getButton() {\n\t\tconst button = document.createElement( 'a' );\n\t\tbutton.setAttribute( 'href', '#' );\n\t\tbutton.classList.add( 'button' );\n\t\tbutton.style.textDecoration = 'none';\n\t\treturn button;\n\t}\n\n\tfunction getSizeOfLayoutClass( className ) {\n\t\tswitch ( className ) {\n\t\t\tcase 'frm_half':\n\t\t\t\treturn 6;\n\t\t\tcase 'frm_third':\n\t\t\t\treturn 4;\n\t\t\tcase 'frm_two_thirds':\n\t\t\t\treturn 8;\n\t\t\tcase 'frm_fourth':\n\t\t\t\treturn 3;\n\t\t\tcase 'frm_three_fourths':\n\t\t\t\treturn 9;\n\t\t\tcase 'frm_sixth':\n\t\t\t\treturn 2;\n\t\t}\n\n\t\tif ( 0 === className.indexOf( 'frm' ) ) {\n\t\t\treturn parseInt( className.substr( 3 ) );\n\t\t}\n\n\t\t// Anything missing a layout class should be a full width row.\n\t\treturn 12;\n\t}\n\n\tfunction getLayoutClassName( classList ) {\n\t\tlet classes, index, currentClass;\n\t\tclasses = getLayoutClasses();\n\t\tfor ( index = 0; index < classes.length; ++index ) {\n\t\t\tcurrentClass = classes[ index ];\n\t\t\tif ( classList.contains( currentClass ) ) {\n\t\t\t\treturn currentClass;\n\t\t\t}\n\t\t}\n\t\treturn '';\n\t}\n\n\tfunction getLayoutClassForSize( size ) {\n\t\treturn 'frm' + size;\n\t}\n\n\tfunction breakFieldGroupClick() {\n\t\tconst row = document.querySelector( '.frm-field-group-hover-target' );\n\t\tbreakRow( row );\n\t\tdestroyFieldGroupPopup();\n\t}\n\n\tfunction breakRow( row ) {\n\t\tconst $row = jQuery( row );\n\t\tgetFieldsInRow( $row ).each(\n\t\t\tfunction( index ) {\n\t\t\t\tconst field = this;\n\t\t\t\tif ( 0 !== index ) {\n\t\t\t\t\t$row.parent().after( wrapFieldLi( field ) );\n\t\t\t\t}\n\t\t\t\tstripLayoutFromFields( jQuery( field ) );\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction stripLayoutFromFields( field ) {\n\t\tsyncLayoutClasses( field, 'clear' );\n\t}\n\n\tfunction focusFieldGroupInputOnClick() {\n\t\tthis.select();\n\t}\n\n\tfunction cancelCustomFieldGroupClick() {\n\t\trevertToFieldGroupPopupFirstPage( this );\n\t}\n\n\tfunction revertToFieldGroupPopupFirstPage( triggerElement ) {\n\t\tjQuery( document.getElementById( 'frm_field_group_popup' ) ).replaceWith(\n\t\t\tgetFieldGroupPopup( getSizeOfFieldGroupFromChildElement( triggerElement ), triggerElement )\n\t\t);\n\t}\n\n\tfunction destroyFieldGroupPopup() {\n\t\tlet popup, wrapper;\n\t\tpopup = document.getElementById( 'frm_field_group_popup' );\n\t\tif ( popup === null ) {\n\t\t\treturn;\n\t\t}\n\t\twrapper = document.querySelector( '.frm-has-open-field-group-popup' );\n\t\tif ( null !== wrapper ) {\n\t\t\twrapper.classList.remove( 'frm-has-open-field-group-popup' );\n\t\t\tpopup.parentNode.remove();\n\t\t}\n\t\tjQuery( document ).off( 'click', '#frm_builder_page', destroyFieldGroupPopupOnOutsideClick );\n\t}\n\n\tfunction saveCustomFieldGroupClick() {\n\t\tlet syncDetails, $controls, $ul;\n\n\t\tsyncDetails = [];\n\n\t\tjQuery( document.getElementById( 'frm_field_group_popup' ).querySelectorAll( '.frm_grid_container input' ) )\n\t\t\t.each(\n\t\t\t\tfunction() {\n\t\t\t\t\tsyncDetails.push( parseInt( this.value ) );\n\t\t\t\t}\n\t\t\t);\n\n\t\t$controls = jQuery( document.getElementById( 'frm_field_group_controls' ) );\n\n\t\tif ( $controls.length && 'none' !== $controls.get( 0 ).style.display ) {\n\t\t\tsyncLayoutClasses( getFieldsInRow( jQuery( document.querySelector( '.frm-field-group-hover-target' ) ) ).first(), syncDetails );\n\t\t} else {\n\t\t\t$ul = mergeSelectedFieldGroups();\n\t\t\tsyncLayoutClasses( getFieldsInRow( $ul ).first(), syncDetails );\n\t\t\tunselectFieldGroups();\n\t\t}\n\n\t\tdestroyFieldGroupPopup();\n\t}\n\n\tfunction fieldGroupClick( e ) {\n\t\tmaybeShowFieldGroupMessage();\n\n\t\tif ( 'ul' !== e.originalEvent.target.nodeName.toLowerCase() ) {\n\t\t\t// only continue if the group itself was clicked / ignore when a field is clicked.\n\t\t\treturn;\n\t\t}\n\n\t\tconst hoverTarget = document.querySelector( '.frm-field-group-hover-target' );\n\t\tif ( ! hoverTarget ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst ctrlOrCmdKeyIsDown = e.ctrlKey || e.metaKey;\n\t\tconst shiftKeyIsDown = e.shiftKey;\n\t\tconst groupIsActive = hoverTarget.classList.contains( 'frm-selected-field-group' );\n\t\tconst $selectedFieldGroups = getSelectedFieldGroups();\n\n\t\tlet numberOfSelectedGroups = $selectedFieldGroups.length;\n\n\t\tif ( ctrlOrCmdKeyIsDown || shiftKeyIsDown ) {\n\t\t\t// multi-selecting\n\n\t\t\tconst selectedField = getSelectedField();\n\t\t\tif ( null !== selectedField && ! jQuery( selectedField ).siblings( 'li.form-field' ).length ) {\n\t\t\t\t// count a selected field on its own as a selected field group when multiselecting.\n\t\t\t\tselectedField.parentNode.classList.add( 'frm-selected-field-group' );\n\t\t\t\t++numberOfSelectedGroups;\n\t\t\t}\n\n\t\t\tif ( ctrlOrCmdKeyIsDown ) {\n\t\t\t\tif ( groupIsActive ) {\n\t\t\t\t\t// unselect if holding ctrl or cmd and the group was already active.\n\t\t\t\t\t--numberOfSelectedGroups;\n\t\t\t\t\thoverTarget.classList.remove( 'frm-selected-field-group' );\n\t\t\t\t\tsyncAfterMultiSelect( numberOfSelectedGroups );\n\t\t\t\t\treturn; // exit early to avoid adding back frm-selected-field-group\n\t\t\t\t}\n\n\t\t\t\t++numberOfSelectedGroups;\n\t\t\t} else if ( shiftKeyIsDown && ! groupIsActive ) {\n\t\t\t\t++numberOfSelectedGroups; // include the one we're selecting right now.\n\t\t\t\tconst $firstGroup = $selectedFieldGroups.first();\n\n\t\t\t\tlet $range;\n\t\t\t\tif ( $firstGroup.parent().index() < jQuery( hoverTarget.parentNode ).index() ) {\n\t\t\t\t\t$range = $firstGroup.parent().nextUntil( hoverTarget.parentNode );\n\t\t\t\t} else {\n\t\t\t\t\t$range = $firstGroup.parent().prevUntil( hoverTarget.parentNode );\n\t\t\t\t}\n\n\t\t\t\t$range.each(\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tconst $fieldGroup = jQuery( this ).closest( 'li' ).find( 'ul.frm_sorting' );\n\t\t\t\t\t\tif ( ! $fieldGroup.hasClass( 'frm-selected-field-group' ) ) {\n\t\t\t\t\t\t\t++numberOfSelectedGroups;\n\t\t\t\t\t\t\t$fieldGroup.addClass( 'frm-selected-field-group' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\t// not multi-selecting\n\t\t\tunselectFieldGroups();\n\t\t\tnumberOfSelectedGroups = 1;\n\t\t}\n\n\t\thoverTarget.classList.add( 'frm-selected-field-group' );\n\t\tsyncAfterMultiSelect( numberOfSelectedGroups );\n\n\t\tmaybeHideFieldGroupMessage();\n\n\t\tjQuery( document ).off( 'click', unselectFieldGroups );\n\t\tjQuery( document ).on( 'click', unselectFieldGroups );\n\t}\n\n\t/**\n\t * Hide the field group message by manipulating classes.\n\t *\n\t * @param {Element} fieldGroupMessage The field group message element.\n\t * @return {void}\n\t */\n\tfunction hideFieldGroupMessage( fieldGroupMessage ) {\n\t\tif ( ! fieldGroupMessage ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfieldGroupMessage.classList.add( 'frm_hidden' );\n\t\tfieldGroupMessage.classList.remove( 'frm-fadein-up-back' );\n\t}\n\n\t/**\n\t * Show the field group message by manipulating classes.\n\t *\n\t * @param {Element} fieldGroupMessage The field group message element.\n\t * @return {void}\n\t */\n\tfunction showFieldGroupMessage( fieldGroupMessage ) {\n\t\tif ( ! fieldGroupMessage ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfieldGroupMessage.classList.remove( 'frm_hidden' );\n\t\tfieldGroupMessage.classList.add( 'frm-fadein-up-back' );\n\t}\n\n\t/**\n\t * Maybe show a message if there are at least two rows.\n\t *\n\t * @return {void}\n\t */\n\tfunction maybeShowFieldGroupMessage() {\n\t\tlet fieldGroupMessage = document.getElementById( 'frm-field-group-message' );\n\t\tconst rows = document.querySelectorAll( '.edit_form_item:not(.edit_field_type_end_divider)' );\n\n\t\tif ( rows.length < 2 ) {\n\t\t\thideFieldGroupMessage( fieldGroupMessage );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( fieldGroupMessage ) {\n\t\t\tshowFieldGroupMessage( fieldGroupMessage );\n\t\t\treturn;\n\t\t}\n\n\t\tfieldGroupMessage = div( {\n\t\t\tid: 'frm-field-group-message',\n\t\t\tclassName: 'frm-flex-center frm-fadein-up-back',\n\t\t\tchildren: [\n\t\t\t\tspan( {\n\t\t\t\t\tid: 'frm-field-group-message-dismiss',\n\t\t\t\t\tclassName: 'frm-flex-center',\n\t\t\t\t\tchild: svg( { href: '#frm_close_icon' } )\n\t\t\t\t} )\n\t\t\t]\n\t\t} );\n\n\t\t// Insert the field group into the DOM\n\t\tdocument.getElementById( 'post-body-content' ).append( fieldGroupMessage );\n\n\t\t// Get and add the field group message text\n\t\tconst messageText = getFieldGroupMessageText();\n\t\tfieldGroupMessage.prepend( messageText );\n\n\t\t// Set up a click event listener\n\t\tdocument.getElementById( 'frm-field-group-message-dismiss' ).addEventListener( 'click', () => {\n\t\t\thideFieldGroupMessage( document.getElementById( 'frm-field-group-message' ) );\n\t\t} );\n\t}\n\n\t/**\n\t * Get a span element with text about selecting multiple fields.\n\t *\n\t * @return {HTMLElement} A span element with the message and style classes.\n\t */\n\tfunction getFieldGroupMessageText() {\n\t\tconst text = document.createElement( 'span' );\n\t\ttext.classList.add( 'frm-field-group-message-text', 'frm-flex-center' );\n\t\ttext.innerHTML = sprintf(\n\t\t\t/* translators: %1$s: Start span HTML, %2$s: end span HTML */\n\t\t\tfrm_admin_js.holdShiftMsg, // eslint-disable-line camelcase\n\t\t\t'<span class=\"frm-meta-tag frm-flex-center\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-shift\" viewBox=\"0 0 16 16\"><path d=\"M7.3 2a1 1 0 0 1 1.4 0l6.4 6.8a1 1 0 0 1-.8 1.7h-2.8v3a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-3H1.7a1 1 0 0 1-.8-1.7L7.3 2zm7 7.5L8 2.7 1.7 9.5h2.8a1 1 0 0 1 1 1v3h5v-3a1 1 0 0 1 1-1h2.8z\"/></svg>',\n\t\t\t'</span>'\n\t\t);\n\n\t\treturn text;\n\t}\n\n\t/**\n\t * Maybe hide the field group message based on the number of selected rows.\n\t *\n\t * @return {void}\n\t */\n\tfunction maybeHideFieldGroupMessage() {\n\t\tconst selectedRowCount = document.querySelectorAll( '.frm-selected-field-group' ).length;\n\t\tif ( selectedRowCount < 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst fieldGroupMessage = document.getElementById( 'frm-field-group-message' );\n\t\thideFieldGroupMessage( fieldGroupMessage );\n\t}\n\n\tfunction getSelectedField() {\n\t\treturn document.getElementById( 'frm-show-fields' ).querySelector( 'li.form-field.selected' );\n\t}\n\n\tfunction getSelectedFieldGroups() {\n\t\tconst $fieldGroups = jQuery( '.frm-selected-field-group' );\n\t\tif ( $fieldGroups.length ) {\n\t\t\treturn $fieldGroups;\n\t\t}\n\n\t\tconst selectedField = getSelectedField();\n\t\tif ( selectedField ) {\n\t\t\t// If there is only one field in a group and the field is selected, consider the field's group as selected for multi-select.\n\t\t\tconst selectedFieldGroup = selectedField.closest( 'ul' );\n\t\t\tif ( selectedFieldGroup && 1 === getFieldsInRow( jQuery( selectedFieldGroup ) ).length ) {\n\t\t\t\tselectedFieldGroup.classList.add( 'frm-selected-field-group' );\n\t\t\t\treturn jQuery( selectedFieldGroup );\n\t\t\t}\n\t\t}\n\n\t\treturn jQuery();\n\t}\n\n\tfunction syncAfterMultiSelect( numberOfSelectedGroups ) {\n\t\tclearSettingsBox( true ); // unselect any fields if one is selected.\n\t\tif ( numberOfSelectedGroups >= 2 || ( 1 === numberOfSelectedGroups && selectedGroupHasMultipleFields() ) ) {\n\t\t\taddFieldMultiselectPopup();\n\t\t} else {\n\t\t\tmaybeRemoveMultiselectPopup();\n\t\t}\n\t\tmaybeRemoveGroupHoverTarget();\n\t}\n\n\tfunction selectedGroupHasMultipleFields() {\n\t\treturn getFieldsInRow( jQuery( document.querySelector( '.frm-selected-field-group' ) ) ).length > 1;\n\t}\n\n\tfunction unselectFieldGroups( event ) {\n\t\tif ( 'undefined' !== typeof event ) {\n\t\t\tif ( null !== event.originalEvent.target.closest( '#frm-show-fields' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( event.originalEvent.target.classList.contains( 'frm-merge-fields-into-row' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( null !== event.originalEvent.target.closest( '.frm-merge-fields-into-row' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( event.originalEvent.target.classList.contains( 'frm-custom-field-group-layout' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( event.originalEvent.target.classList.contains( 'frm-cancel-custom-field-group-layout' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tjQuery( '.frm-selected-field-group' ).removeClass( 'frm-selected-field-group' );\n\t\tjQuery( document ).off( 'click', unselectFieldGroups );\n\t\tmaybeRemoveMultiselectPopup();\n\t}\n\n\tfunction maybeRemoveMultiselectPopup() {\n\t\tconst popup = document.getElementById( 'frm_field_multiselect_popup' );\n\t\tif ( null !== popup ) {\n\t\t\tpopup.remove();\n\t\t}\n\t}\n\n\tfunction addFieldMultiselectPopup() {\n\t\tgetFieldMultiselectPopup();\n\t}\n\n\tfunction getFieldMultiselectPopup() {\n\t\tlet popup, mergeOption, caret, verticalSeparator, deleteOption;\n\n\t\tpopup = document.getElementById( 'frm_field_multiselect_popup' );\n\n\t\tif ( null !== popup ) {\n\t\t\tpopup.classList.toggle( 'frm-unmergable', ! selectedFieldsAreMergeable() );\n\t\t\treturn popup;\n\t\t}\n\n\t\tpopup = div();\n\t\tpopup.id = 'frm_field_multiselect_popup';\n\t\tif ( ! selectedFieldsAreMergeable() ) {\n\t\t\tpopup.classList.add( 'frm-unmergable' );\n\t\t}\n\n\t\tmergeOption = div();\n\t\tmergeOption.classList.add( 'frm-merge-fields-into-row' );\n\t\tmergeOption.textContent = __( 'Merge into row', 'formidable' );\n\n\t\tcaret = document.createElement( 'a' );\n\t\tcaret.style.marginLeft = '5px';\n\t\tcaret.classList.add( 'frm_icon_font', 'frm_arrowdown6_icon' );\n\t\tcaret.setAttribute( 'href', '#' );\n\t\tmergeOption.append( caret );\n\n\t\tpopup.append( mergeOption );\n\n\t\tverticalSeparator = div();\n\t\tverticalSeparator.classList.add( 'frm-multiselect-popup-separator' );\n\t\tpopup.append( verticalSeparator );\n\n\t\tdeleteOption = div();\n\t\tdeleteOption.classList.add( 'frm-delete-field-groups' );\n\t\tdeleteOption.append( getIconClone( 'frm_trash_svg' ) );\n\t\tpopup.append( deleteOption );\n\n\t\tdocument.getElementById( 'post-body-content' ).append( popup );\n\n\t\tjQuery( popup ).hide().fadeIn();\n\n\t\treturn popup;\n\t}\n\n\tfunction selectedFieldsAreMergeable() {\n\t\tlet selectedFieldGroups, totalFieldCount, length, index, fieldGroup;\n\t\tselectedFieldGroups = document.querySelectorAll( '.frm-selected-field-group' );\n\t\tlength = selectedFieldGroups.length;\n\t\tif ( 1 === length ) {\n\t\t\treturn false;\n\t\t}\n\t\ttotalFieldCount = 0;\n\t\tfor ( index = 0; index < length; ++index ) {\n\t\t\tfieldGroup = selectedFieldGroups[ index ];\n\t\t\tif ( null !== fieldGroup.querySelector( '.edit_field_type_break, .edit_field_type_hidden' ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\ttotalFieldCount += getFieldsInRow( jQuery( fieldGroup ) ).length;\n\t\t\tif ( totalFieldCount > MAX_FIELD_GROUP_SIZE ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction mergeFieldsIntoRowClick( event ) {\n\t\tlet size, popup;\n\n\t\tif ( null !== event.originalEvent.target.closest( '#frm_field_group_popup' ) ) {\n\t\t\t// prevent clicks within the popup from triggering the button again.\n\t\t\treturn;\n\t\t}\n\n\t\tif ( event.originalEvent.target.classList.contains( 'frm-custom-field-group-layout' ) ) {\n\t\t\t// avoid switching back to the first page when clicking the custom option nested inside of the merge option.\n\t\t\treturn;\n\t\t}\n\n\t\tsize = getSelectedFieldCount();\n\t\tpopup = getFieldGroupPopup( size, document.querySelector( '.frm-selected-field-group' ).firstChild );\n\t\tthis.append( popup );\n\t}\n\n\tfunction getSelectedFieldCount() {\n\t\tlet count = 0;\n\t\tjQuery( document.querySelectorAll( '.frm-selected-field-group' ) ).each(\n\t\t\tfunction() {\n\t\t\t\tcount += getFieldsInRow( jQuery( this ) ).length;\n\t\t\t}\n\t\t);\n\t\treturn count;\n\t}\n\n\tfunction deleteFieldGroupsClick() {\n\t\tlet fieldIdsToDelete, deleteOnConfirm, multiselectPopup;\n\n\t\tfieldIdsToDelete = getSelectedFieldIds();\n\t\tdeleteOnConfirm = getDeleteSelectedFieldGroupsOnConfirmFunction( fieldIdsToDelete );\n\n\t\tmultiselectPopup = document.getElementById( 'frm_field_multiselect_popup' );\n\t\tif ( null !== multiselectPopup ) {\n\t\t\tmultiselectPopup.remove();\n\t\t}\n\n\t\tthis.setAttribute( 'data-frmverify', confirmFieldsDeleteMessage( fieldIdsToDelete.length ) );\n\t\tconfirmLinkClick( this );\n\n\t\tconst confirmedClick = document.getElementById( 'frm-confirmed-click' );\n\n\t\t// Remove any previous delete field data so delete confirmation does not attempt\n\t\t// to delete a field that was already deleted or previously attempted and cancelled.\n\t\tconfirmedClick?.removeAttribute( 'data-deletefield' );\n\n\t\tjQuery( confirmedClick ).on( 'click', deleteOnConfirm );\n\t\tjQuery( '#frm_confirm_modal' ).one( 'dialogclose', function() {\n\t\t\tjQuery( confirmedClick ).off( 'click', deleteOnConfirm );\n\t\t} );\n\t}\n\n\tfunction getSelectedFieldIds() {\n\t\tconst deleteFieldIds = [];\n\t\tjQuery( '.frm-selected-field-group > li.form-field' )\n\t\t\t.each(\n\t\t\t\tfunction() {\n\t\t\t\t\tdeleteFieldIds.push( this.dataset.fid );\n\t\t\t\t}\n\t\t\t);\n\t\treturn deleteFieldIds;\n\t}\n\n\tfunction getDeleteSelectedFieldGroupsOnConfirmFunction( deleteFieldIds ) {\n\t\treturn function( event ) {\n\t\t\tevent.preventDefault();\n\t\t\tdeleteAllSelectedFieldGroups( deleteFieldIds );\n\t\t};\n\t}\n\n\tfunction deleteAllSelectedFieldGroups( deleteFieldIds ) {\n\t\tdeleteFieldIds.forEach(\n\t\t\tfunction( fieldId ) {\n\t\t\t\tdeleteFields( fieldId );\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction deleteFieldConfirmed() {\n\t\t/*jshint validthis:true */\n\t\tdeleteFields( this.getAttribute( 'data-deletefield' ) );\n\t}\n\n\tfunction deleteFields( fieldId ) {\n\t\tconst field = jQuery( '#frm_field_id_' + fieldId );\n\n\t\tdeleteField( fieldId );\n\n\t\tif ( field.hasClass( 'edit_field_type_divider' ) ) {\n\t\t\tfield.find( 'li.frm_field_box[data-fid]' ).each( function() {\n\t\t\t\tdeleteField( this.getAttribute( 'data-fid' ) );\n\t\t\t} );\n\t\t}\n\n\t\ttoggleSectionHolder();\n\t}\n\n\t/**\n\t * Checks if there is only submit field in the form builder.\n\t *\n\t * @return {Boolean}\n\t */\n\tfunction hasOnlySubmitField() {\n\t\t// If there are at least 2 rows, return false.\n\t\tif ( $newFields.get( 0 ).childElementCount > 1 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst childUl = $newFields.get( 0 ).firstElementChild.firstElementChild;\n\n\t\t// Use query instead of children because there might be a div inside this ul.\n\t\tconst childLi = childUl.querySelectorAll( 'li.frm_field_box' );\n\n\t\t// If there are at least 2 items in the row, return false.\n\t\tif ( childLi.length > 1 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn childLi[ 0 ].classList.contains( 'edit_field_type_submit' );\n\t}\n\n\t/**\n\t * Moves open modals out of the field options form.\n\t *\n\t * When a modal is open, it is moved in the DOM and appended to the parent element of the modal trigger input. That\n\t * creates a problem since deleting the field also deletes the modal and this function fixes that problem.\n\t *\n\t * @since 6.22\n\t *\n\t * @param {Object} settings\n\t * @return {void}\n\t */\n\tfunction moveOpenModalsOutOfFieldOptions( settings ) {\n\t\tconst openModals = settings[ 0 ].querySelectorAll( '.frm-inline-modal[data-fills]' );\n\t\tif ( ! openModals.length ) {\n\t\t\treturn;\n\t\t}\n\t\topenModals.forEach( modal => {\n\t\t\tmodal.classList.add( 'frm_hidden' );\n\t\t\tmodal.removeAttribute( 'data-fills' );\n\t\t\tmodal.closest( 'form' ).append( modal );\n\t\t} );\n\t}\n\n\tfunction deleteField( fieldId ) {\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_delete_field',\n\t\t\t\tfield_id: fieldId,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: function() {\n\t\t\t\tconst $thisField = jQuery( document.getElementById( 'frm_field_id_' + fieldId ) ),\n\t\t\t\t\tsettings = jQuery( '#frm-single-settings-' + fieldId );\n\n\t\t\t\t// Remove settings from sidebar.\n\t\t\t\tif ( settings.is( ':visible' ) ) {\n\t\t\t\t\tdocument.querySelector( '.frm-settings-panel .frm-tabs-navs ul > li:first-child' )?.click();\n\t\t\t\t\tdocument.querySelector( '#frm-options-panel .frm-single-settings' ).classList.remove( 'frm_hidden' );\n\t\t\t\t}\n\n\t\t\t\tmoveOpenModalsOutOfFieldOptions( settings );\n\t\t\t\tsettings.remove();\n\n\t\t\t\t$thisField.fadeOut( 'slow', function() {\n\t\t\t\t\tlet $section = $thisField.closest( '.start_divider' ),\n\t\t\t\t\t\ttype = $thisField.data( 'type' ),\n\t\t\t\t\t\t$adjacentFields = $thisField.siblings( 'li.form-field' ),\n\t\t\t\t\t\t$liWrapper;\n\n\t\t\t\t\tif ( ! $adjacentFields.length ) {\n\t\t\t\t\t\tif ( $thisField.is( '.edit_field_type_end_divider' ) ) {\n\t\t\t\t\t\t\t$adjacentFields.length = $thisField.closest( 'li.form-field' ).siblings();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$liWrapper = $thisField.closest( 'ul.frm_sorting' ).parent();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$thisField.remove();\n\t\t\t\t\tif ( type === 'break' ) {\n\t\t\t\t\t\trenumberPageBreaks();\n\t\t\t\t\t} else if ( type === 'product' ) {\n\t\t\t\t\t\tmaybeHideQuantityProductFieldOption();\n\t\t\t\t\t\t// a product field attached to a quantity field earlier might be the one deleted, so re-populate\n\t\t\t\t\t\tpopAllProductFields();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( $adjacentFields.length ) {\n\t\t\t\t\t\tsyncLayoutClasses( $adjacentFields.first() );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$liWrapper.remove();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( jQuery( '#frm-show-fields li' ).length === 0 || hasOnlySubmitField() ) {\n\t\t\t\t\t\tconst formEditorContainer = document.getElementById( 'frm_form_editor_container' );\n\t\t\t\t\t\tformEditorContainer.classList.remove( 'frm-has-fields' );\n\t\t\t\t\t\tformEditorContainer.classList.add( 'frm-empty-fields' );\n\t\t\t\t\t} else if ( $section.length ) {\n\t\t\t\t\t\ttoggleOneSectionHolder( $section );\n\t\t\t\t\t}\n\n\t\t\t\t\t// prevent \"More Options\" tooltips from staying around after their target field is deleted.\n\t\t\t\t\tdeleteTooltips();\n\t\t\t\t} );\n\n\t\t\t\tif ( $thisField.length ) {\n\t\t\t\t\tmaybeEnableFieldButtonAtLimit( $thisField.data( 'type' ) );\n\t\t\t\t\twp.hooks.doAction( 'frm_after_delete_field', $thisField[ 0 ] );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * @since 6.27\n\t *\n\t * @param {string} type\n\t * @return {void}\n\t */\n\tfunction maybeEnableFieldButtonAtLimit( type ) {\n\t\tconst button = document.getElementById( type );\n\n\t\tif ( ! button || ! button.dataset.limit ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Subtract one because the field has not really been removed from the page yet.\n\t\tconst fieldTypeCount = countFieldTypeInForm( type ) - 1;\n\t\tif ( fieldTypeCount < button.dataset.limit ) {\n\t\t\tbutton.classList.remove( 'frm_at_limit' );\n\t\t}\n\t}\n\n\tfunction countFieldTypeInForm( type ) {\n\t\treturn document.getElementById( 'frm-show-fields' ).querySelectorAll( 'li.form-field[data-ftype=\"' + type + '\"]' ).length;\n\t}\n\n\tfunction addFieldLogicRow() {\n\t\t/*jshint validthis:true */\n\t\tconst id = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' ),\n\t\t\tformId = thisFormId,\n\t\t\tlogicRows = document.getElementById( 'frm_logic_row_' + id ).querySelectorAll( '.frm_logic_row' );\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_add_logic_row',\n\t\t\t\tform_id: formId,\n\t\t\t\tfield_id: id,\n\t\t\t\tnonce: frmGlobal.nonce,\n\t\t\t\tmeta_name: getNewRowId( logicRows, 'frm_logic_' + id + '_' ),\n\t\t\t\tfields: getFieldList()\n\t\t\t},\n\t\t\tsuccess: function( html ) {\n\t\t\t\tjQuery( document.getElementById( 'logic_' + id ) ).fadeOut( 'fast', function() {\n\t\t\t\t\tconst logicRow = document.getElementById( 'frm_logic_row_' + id );\n\t\t\t\t\tlogicRow.insertAdjacentHTML( 'beforeend', html );\n\n\t\t\t\t\tconst logicRowText = logicRow.querySelector( '.frm_logic_row:last-child .frm-logic-rule-text' );\n\t\t\t\t\tif ( logicRowText ) {\n\t\t\t\t\t\tlogicRowText.textContent = logicRow.dataset.ruleText;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst logicRows = logicRow.closest( '.frm_logic_rows' );\n\t\t\t\t\tlogicRows.style.height = 'auto';\n\t\t\t\t\tjQuery( logicRows ).fadeIn( 'fast' );\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t\treturn false;\n\t}\n\n\tfunction getNewRowId( rows, replace, defaultValue ) {\n\t\tif ( ! rows.length ) {\n\t\t\treturn 'undefined' !== typeof defaultValue ? defaultValue : 0;\n\t\t}\n\t\treturn parseInt( rows[ rows.length - 1 ].id.replace( replace, '' ), 10 ) + 1;\n\t}\n\n\tfunction addWatchLookupRow() {\n\t\t/*jshint validthis:true */\n\t\tlet lastRowId,\n\t\t\tid = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' ),\n\t\t\tformId = thisFormId,\n\t\t\tlookupBlockRows = document.getElementById( 'frm_watch_lookup_block_' + id ).children;\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_add_watch_lookup_row',\n\t\t\t\tform_id: formId,\n\t\t\t\tfield_id: id,\n\t\t\t\trow_key: getNewRowId( lookupBlockRows, 'frm_watch_lookup_' + id + '_' ),\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: function( newRow ) {\n\t\t\t\tconst watchRowBlock = jQuery( document.getElementById( 'frm_watch_lookup_block_' + id ) );\n\t\t\t\twatchRowBlock.append( newRow );\n\t\t\t\twatchRowBlock.fadeIn( 'slow' );\n\n\t\t\t\t// Show the \"Watch Lookup Fields\" label if it was hidden\n\t\t\t\tdocument.getElementById( `frm_watch_lookup_label_${ id }` )?.classList.remove( 'frm-force-hidden' );\n\t\t\t}\n\t\t} );\n\t\treturn false;\n\t}\n\n\tfunction resetOptionTextDetails() {\n\t\tjQuery( '.frm-single-settings ul input[type=\"text\"][name^=\"field_options[options_\"]' ).filter( '[data-value-on-load]' ).removeAttr( 'data-value-on-load' );\n\t\tjQuery( 'input[type=\"hidden\"][name^=optionmap]' ).remove();\n\t}\n\n\tfunction optionTextAlreadyExists( input ) {\n\t\tlet fieldId = jQuery( input ).closest( '.frm-single-settings' ).attr( 'data-fid' ),\n\t\t\toptionInputs = jQuery( input ).closest( 'ul' ).get( 0 ).querySelectorAll( '.field_' + fieldId + '_option' ),\n\t\t\tindex,\n\t\t\toptionInput;\n\n\t\tfor ( index in optionInputs ) {\n\t\t\toptionInput = optionInputs[ index ];\n\t\t\tif ( optionInput.id !== input.id && optionInput.value === input.value && optionInput.getAttribute( 'data-duplicate' ) !== 'true' ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfunction onOptionTextFocus() {\n\t\tlet input,\n\t\t\tfieldId;\n\n\t\tif ( this.getAttribute( 'data-value-on-load' ) === null ) {\n\t\t\tthis.setAttribute( 'data-value-on-load', this.value );\n\n\t\t\tfieldId = jQuery( this ).closest( '.frm-single-settings' ).attr( 'data-fid' );\n\t\t\tinput = document.createElement( 'input' );\n\t\t\tinput.value = this.value;\n\t\t\tinput.setAttribute( 'type', 'hidden' );\n\t\t\tinput.setAttribute( 'name', 'optionmap[' + fieldId + '][' + this.value + ']' );\n\t\t\tthis.parentNode.append( input );\n\n\t\t\tif ( typeof optionMap[ fieldId ] === 'undefined' ) {\n\t\t\t\toptionMap[ fieldId ] = {};\n\t\t\t}\n\n\t\t\toptionMap[ fieldId ][ this.value ] = input;\n\t\t}\n\n\t\tif ( this.getAttribute( 'data-duplicate' ) === 'true' ) {\n\t\t\tthis.removeAttribute( 'data-duplicate' );\n\n\t\t\t// we want to use original value if actually still a duplicate\n\t\t\tif ( optionTextAlreadyExists( this ) ) {\n\t\t\t\tthis.setAttribute( 'data-value-on-focus', this.getAttribute( 'data-value-on-load' ) );\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif ( '' !== this.value || frmAdminJs.new_option !== this.getAttribute( 'data-value-on-focus' ) ) {\n\t\t\tthis.setAttribute( 'data-value-on-focus', this.value );\n\t\t}\n\t}\n\n\t/**\n\t * Returns an object that has the old and new values and labels, when a field choice is changed.\n\t *\n\t * @param {HTMLElement} input\n\t * @return {Object}\n\t */\n\tfunction getChoiceOldAndNewValues( input ) {\n\t\tconst { oldValue, oldLabel } = getChoiceOldValueAndLabel( input );\n\t\tconst { newValue, newLabel } = getChoiceNewValueAndLabel( input );\n\n\t\treturn { oldValue, oldLabel, newValue, newLabel };\n\t}\n\n\t/**\n\t * Returns an object that has the new value and label, when a field choice is changed.\n\t *\n\t * @param {HTMLElement} choiceElement\n\t * @return {Object}\n\t */\n\tfunction getChoiceNewValueAndLabel( choiceElement ) {\n\t\tconst singleOptionContainer = choiceElement.closest( '.frm_single_option' );\n\n\t\tlet newValue, newLabel;\n\n\t\tif ( choiceElement.parentElement.classList.contains( 'frm_single_option' ) ) { // label changed\n\t\t\tnewValue = singleOptionContainer.querySelector( '.frm_option_key input[type=\"text\"]' ).value;\n\t\t\tnewLabel = choiceElement.value;\n\t\t\treturn { newValue, newLabel };\n\t\t}\n\n\t\t// saved value changed\n\t\tnewLabel = singleOptionContainer.querySelector( 'input[type=\"text\"]' ).value;\n\t\tnewValue = choiceElement.value;\n\t\treturn { newValue, newLabel };\n\t}\n\n\t/**\n\t * Returns an object that has the old value and label, when a field choice is changed.\n\t *\n\t * @param {HTMLElement} choiceElement\n\t * @return {Object}\n\t */\n\tfunction getChoiceOldValueAndLabel( choiceElement ) {\n\t\tconst usingSeparateValues = choiceElement.closest( '.frm-single-settings' ).querySelector( '.frm_toggle_sep_values' )?.checked ?? false;\n\t\tconst singleOptionContainer = choiceElement.closest( '.frm_single_option' );\n\n\t\tlet oldValue, oldLabel;\n\n\t\tif ( usingSeparateValues ) {\n\t\t\tif ( choiceElement.parentElement.classList.contains( 'frm_single_option' ) ) { // label changed\n\t\t\t\toldValue = singleOptionContainer.querySelector( '.frm_option_key input[type=\"text\"]' ).getAttribute( 'data-value-on-focus' );\n\t\t\t\toldLabel = choiceElement.getAttribute( 'data-value-on-focus' );\n\t\t\t\treturn { oldValue, oldLabel };\n\t\t\t}\n\t\t}\n\t\toldValue = choiceElement.getAttribute( 'data-value-on-focus' );\n\t\toldLabel = singleOptionContainer.querySelector( 'input[type=\"text\"]' ).getAttribute( 'data-value-on-focus' );\n\n\t\treturn { oldValue, oldLabel };\n\t}\n\n\tfunction onOptionTextBlur() {\n\t\tlet originalValue,\n\t\t\tfieldId,\n\t\t\tfieldIndex,\n\t\t\tlogicId,\n\t\t\trow,\n\t\t\trowLength,\n\t\t\trowIndex,\n\t\t\tvalueSelect,\n\t\t\topts,\n\t\t\tfieldIds,\n\t\t\tsettingId,\n\t\t\tsetting,\n\t\t\toptionMatches,\n\t\t\toption;\n\n\t\tconst { oldValue, oldLabel, newValue, newLabel } = getChoiceOldAndNewValues( this );\n\n\t\tif ( oldValue === newValue && oldLabel === newLabel ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst singleSettingsContainer = this.closest( '.frm-single-settings' );\n\n\t\tfieldId = singleSettingsContainer.getAttribute( 'data-fid' );\n\t\toriginalValue = this.getAttribute( 'data-value-on-load' );\n\n\t\t// check if the newValue is already mapped to another option\n\t\t// if it is, mark as duplicate and return\n\t\tif ( optionTextAlreadyExists( this ) ) {\n\t\t\tthis.setAttribute( 'data-duplicate', 'true' );\n\n\t\t\tif ( typeof optionMap[ fieldId ] !== 'undefined' && typeof optionMap[ fieldId ][ originalValue ] !== 'undefined' ) {\n\t\t\t\t// unmap any other change that may have happened before instead of changing it to something unused\n\t\t\t\toptionMap[ fieldId ][ originalValue ].value = originalValue;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( typeof optionMap[ fieldId ] !== 'undefined' && typeof optionMap[ fieldId ][ originalValue ] !== 'undefined' ) {\n\t\t\toptionMap[ fieldId ][ originalValue ].value = newValue;\n\t\t}\n\n\t\tfieldIds = [];\n\t\tconst rows = builderPage.querySelectorAll( '.frm_logic_row' );\n\t\trowLength = rows.length;\n\t\tfor ( rowIndex = 0; rowIndex < rowLength; rowIndex++ ) {\n\t\t\trow = rows[ rowIndex ];\n\t\t\topts = row.querySelector( '.frm_logic_field_opts' );\n\n\t\t\tif ( opts.value !== fieldId ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlogicId = row.id.split( '_' )[ 2 ];\n\t\t\tvalueSelect = row.querySelector( 'select[name=\"field_options[hide_opt_' + logicId + '][]\"]' );\n\n\t\t\tif ( '' === oldValue ) {\n\t\t\t\toptionMatches = [];\n\t\t\t} else {\n\t\t\t\toptionMatches = valueSelect.querySelectorAll( 'option[value=\"' + oldValue + '\"]' );\n\t\t\t}\n\n\t\t\tif ( ! optionMatches.length ) {\n\t\t\t\toptionMatches = valueSelect.querySelectorAll( 'option[value=\"' + newValue + '\"]' );\n\n\t\t\t\tif ( ! optionMatches.length ) {\n\t\t\t\t\tif ( ! singleSettingsContainer.querySelector( '.frm_toggle_sep_values' )?.checked ) {\n\t\t\t\t\t\toption = searchSelectByText( valueSelect, oldValue ); // Find conditional logic option with oldValue\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! option ) {\n\t\t\t\t\t\toption = document.createElement( 'option' );\n\t\t\t\t\t\tvalueSelect.append( option );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( optionMatches.length ) {\n\t\t\t\toption = optionMatches[ optionMatches.length - 1 ];\n\t\t\t}\n\n\t\t\toption.setAttribute( 'value', newValue );\n\t\t\toption.textContent = newLabel;\n\n\t\t\tif ( ! fieldIds.includes( logicId ) ) {\n\t\t\t\tfieldIds.push( logicId );\n\t\t\t}\n\t\t}\n\n\t\tfor ( fieldIndex in fieldIds ) {\n\t\t\tsettingId = fieldIds[ fieldIndex ];\n\t\t\tsetting = document.getElementById( 'frm-single-settings-' + settingId );\n\t\t\tmoveFieldSettings( setting );\n\t\t}\n\t}\n\n\t/**\n\t * Returns an option element that matches a string with its text content.\n\t *\n\t * @param {HTMLElement} selectElement\n\t * @param {string}      searchText\n\t * @return {HTMLElement|null}\n\t */\n\tfunction searchSelectByText( selectElement, searchText ) {\n\t\tconst options = selectElement.options;\n\n\t\tfor ( let i = 0; i < options.length; i++ ) {\n\t\t\tconst option = options[ i ];\n\t\t\tif ( searchText === option.textContent ) {\n\t\t\t\treturn option;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfunction updateGetValueFieldSelection() {\n\t\t/*jshint validthis:true */\n\t\tconst fieldID = this.id.replace( 'get_values_form_', '' );\n\t\tconst fieldSelect = document.getElementById( 'get_values_field_' + fieldID );\n\t\tconst fieldType = this.getAttribute( 'data-fieldtype' );\n\n\t\tif ( this.value === '' ) {\n\t\t\tfieldSelect.options.length = 1;\n\t\t} else {\n\t\t\tconst formID = this.value;\n\t\t\tjQuery.ajax( {\n\t\t\t\ttype: 'POST', url: ajaxurl,\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'frm_get_options_for_get_values_field',\n\t\t\t\t\tform_id: formID,\n\t\t\t\t\tfield_type: fieldType,\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t},\n\t\t\t\tsuccess: function( fields ) {\n\t\t\t\t\tfieldSelect.innerHTML = fields;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\t// Clear the Watch Fields option when Lookup field switches to \"Text\" option\n\tfunction maybeClearWatchFields() {\n\t\t/*jshint validthis:true */\n\t\tlet link, lookupBlock,\n\t\t\tfieldID = this.name.replace( 'field_options[data_type_', '' ).replace( ']', '' );\n\n\t\tlink = document.getElementById( 'frm_add_watch_lookup_link_' + fieldID );\n\t\tif ( ! link ) {\n\t\t\treturn;\n\t\t}\n\t\tlink = link.parentNode;\n\n\t\tif ( this.value === 'text' ) {\n\t\t\tlookupBlock = document.getElementById( 'frm_watch_lookup_block_' + fieldID );\n\t\t\tif ( lookupBlock !== null ) {\n\t\t\t\t// Clear and hide the Watch Fields option\n\t\t\t\tlookupBlock.innerHTML = '';\n\t\t\t\tlink.classList.add( 'frm_hidden' );\n\n\t\t\t\t// Hide the Watch Fields row\n\t\t\t\tlink.previousElementSibling.style.display = 'none';\n\t\t\t\tlink.previousElementSibling.previousElementSibling.style.display = 'none';\n\t\t\t\tlink.previousElementSibling.previousElementSibling.previousElementSibling.style.display = 'none';\n\t\t\t}\n\t\t} else {\n\t\t\t// Show the Watch Fields option\n\t\t\tlink.classList.remove( 'frm_hidden' );\n\t\t}\n\n\t\ttoggleMultiSelect( fieldID, this.value );\n\t}\n\n\t// Number the pages and hide/show the first page as needed.\n\tfunction renumberPageBreaks() {\n\t\tlet i, containerClass,\n\t\t\tpages = document.getElementsByClassName( 'frm-page-num' );\n\n\t\tif ( pages.length > 1 ) {\n\t\t\tdocument.getElementById( 'frm-fake-page' ).style.display = 'block';\n\t\t\tfor ( i = 0; i < pages.length; i++ ) {\n\t\t\t\tcontainerClass = pages[ i ].parentNode.parentNode.parentNode.classList;\n\t\t\t\tif ( i === 1 ) {\n\t\t\t\t\t// Hide previous button on page 1\n\t\t\t\t\tcontainerClass.add( 'frm-first-page' );\n\t\t\t\t} else {\n\t\t\t\t\tcontainerClass.remove( 'frm-first-page' );\n\t\t\t\t}\n\t\t\t\tpages[ i ].textContent = ( i + 1 );\n\t\t\t}\n\t\t} else {\n\t\t\tdocument.getElementById( 'frm-fake-page' ).style.display = 'none';\n\t\t}\n\n\t\twp.hooks.doAction( 'frm_renumber_page_breaks', pages );\n\t}\n\n\t// The fake field works differently than real fields.\n\tfunction maybeCollapsePage() {\n\t\t/*jshint validthis:true */\n\t\tconst field = jQuery( this ).closest( '.frm_field_box[data-ftype=break]' );\n\t\tif ( field.length ) {\n\t\t\ttoggleCollapsePage( field );\n\t\t} else {\n\t\t\ttoggleCollapseFakePage();\n\t\t}\n\t}\n\n\t// Find all fields in a page and hide/show them\n\tfunction toggleCollapsePage( field ) {\n\t\tconst toCollapse = getAllFieldsForPage( field.get( 0 ).parentNode.closest( 'li.frm_field_box' ).nextElementSibling );\n\t\ttogglePage( field, toCollapse );\n\t}\n\n\tfunction toggleCollapseFakePage() {\n\t\tconst topLevel = document.getElementById( 'frm-fake-page' ),\n\t\t\tfirstField = document.getElementById( 'frm-show-fields' ).firstElementChild,\n\t\t\ttoCollapse = getAllFieldsForPage( firstField );\n\n\t\tif ( firstField.getAttribute( 'data-ftype' ) === 'break' ) {\n\t\t\t// Don't collapse if the first field is a page break.\n\t\t\treturn;\n\t\t}\n\n\t\ttogglePage( jQuery( topLevel ), toCollapse );\n\t}\n\n\tfunction getAllFieldsForPage( firstWrapper ) {\n\t\tlet $fieldsForPage, currentWrapper;\n\n\t\t$fieldsForPage = jQuery();\n\n\t\tif ( null === firstWrapper ) {\n\t\t\treturn $fieldsForPage;\n\t\t}\n\n\t\tcurrentWrapper = firstWrapper;\n\n\t\tdo {\n\t\t\tif ( null !== currentWrapper.querySelector( '.edit_field_type_break' ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t$fieldsForPage = $fieldsForPage.add( jQuery( currentWrapper ) );\n\t\t\tcurrentWrapper = currentWrapper.nextElementSibling;\n\t\t} while ( null !== currentWrapper );\n\n\t\treturn $fieldsForPage;\n\t}\n\n\tfunction togglePage( field, toCollapse ) {\n\t\tlet i,\n\t\t\tfieldCount = toCollapse.length,\n\t\t\tslide = Math.min( fieldCount, 3 );\n\n\t\tif ( field.hasClass( 'frm-page-collapsed' ) ) {\n\t\t\tfield.removeClass( 'frm-page-collapsed' );\n\t\t\ttoCollapse.removeClass( 'frm-is-collapsed' );\n\t\t\tfor ( i = 0; i < slide; i++ ) {\n\t\t\t\tif ( i === slide - 1 ) {\n\t\t\t\t\tjQuery( toCollapse[ i ] ).slideDown( 150, function() {\n\t\t\t\t\t\ttoCollapse.show();\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tjQuery( toCollapse[ i ] ).slideDown( 150 );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfield.addClass( 'frm-page-collapsed' );\n\t\t\ttoCollapse.addClass( 'frm-is-collapsed' );\n\t\t\tfor ( i = 0; i < slide; i++ ) {\n\t\t\t\tif ( i === slide - 1 ) {\n\t\t\t\t\tjQuery( toCollapse[ i ] ).slideUp( 150, function() {\n\t\t\t\t\t\ttoCollapse.css( 'cssText', 'display:none !important;' );\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tjQuery( toCollapse[ i ] ).slideUp( 150 );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction maybeCollapseSection() {\n\t\t/*jshint validthis:true */\n\t\tconst parentCont = this.parentNode.parentNode.parentNode.parentNode;\n\n\t\tparentCont.classList.toggle( 'frm-section-collapsed' );\n\t}\n\n\tfunction maybeCollapseSettings() {\n\t\t/*jshint validthis:true */\n\t\tthis.classList.toggle( 'frm-collapsed' );\n\n\t\t// Toggles the \"aria-expanded\" attribute\n\t\tconst expanded = this.getAttribute( 'aria-expanded' ) === 'true' || false;\n\t\tthis.setAttribute( 'aria-expanded', ! expanded );\n\n\t\taddSlideAnimationCssVars( this.nextElementSibling );\n\t}\n\n\t/**\n\t * Add slide animation CSS variables to the element\n\t *\n\t * @param {HTMLElement} element The element to add CSS variables to\n\t * @return {void}\n\t */\n\tfunction addSlideAnimationCssVars( element ) {\n\t\tif ( ! element ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet height = element.scrollHeight;\n\t\tif ( height <= 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\theight += 250;\n\t\telement.style.setProperty( '--slide-height', `${ height }px` );\n\t\telement.style.setProperty( '--slide-time', `${ Math.ceil( height * 0.8 ) }ms` );\n\t}\n\n\tfunction clickLabel() {\n\t\tif ( ! this.id ) {\n\t\t\treturn;\n\t\t}\n\n\t\t/*jshint validthis:true */\n\t\tlet setting = document.querySelectorAll( '[data-changeme=\"' + this.id + '\"]' )[ 0 ],\n\t\t\tfieldId = this.id.replace( 'field_label_', '' ),\n\t\t\tfieldType = document.getElementById( 'field_options_type_' + fieldId ),\n\t\t\tfieldTypeName = fieldType.value;\n\n\t\tif ( typeof setting !== 'undefined' ) {\n\t\t\tif ( fieldType.tagName === 'SELECT' ) {\n\t\t\t\tfieldTypeName = fieldType.options[ fieldType.selectedIndex ].text.toLowerCase();\n\t\t\t} else {\n\t\t\t\tfieldTypeName = fieldTypeName.replace( '_', ' ' );\n\t\t\t}\n\n\t\t\tfieldTypeName = normalizeFieldName( fieldTypeName );\n\n\t\t\tsetTimeout( function() {\n\t\t\t\tif ( setting.value.toLowerCase() === fieldTypeName ) {\n\t\t\t\t\tsetting.select();\n\t\t\t\t} else {\n\t\t\t\t\tsetting.focus();\n\t\t\t\t}\n\t\t\t}, 50 );\n\t\t}\n\t}\n\n\tfunction clickDescription() {\n\t\t/*jshint validthis:true */\n\t\tconst setting = document.querySelectorAll( '[data-changeme=\"' + this.id + '\"]' )[ 0 ];\n\t\tif ( typeof setting !== 'undefined' ) {\n\t\t\tsetTimeout( function() {\n\t\t\t\tsetting.focus();\n\t\t\t\tautoExpandSettings( setting );\n\t\t\t}, 50 );\n\t\t}\n\t}\n\n\tfunction autoExpandSettings( setting ) {\n\t\tconst inSection = setting.closest( '.frm-collapse-me' );\n\t\tif ( inSection !== null ) {\n\t\t\tinSection.previousElementSibling.classList.remove( 'frm-collapsed' );\n\t\t}\n\t}\n\n\tfunction normalizeFieldName( fieldTypeName ) {\n\t\tif ( fieldTypeName === 'divider' ) {\n\t\t\tfieldTypeName = 'section';\n\t\t} else if ( fieldTypeName === 'range' ) {\n\t\t\tfieldTypeName = 'slider';\n\t\t} else if ( fieldTypeName === 'data' ) {\n\t\t\tfieldTypeName = 'dynamic';\n\t\t} else if ( fieldTypeName === 'form' ) {\n\t\t\tfieldTypeName = 'embed form';\n\t\t}\n\t\treturn fieldTypeName;\n\t}\n\n\tfunction clickVis( e ) {\n\t\t/*jshint validthis:true */\n\t\tlet currentClass, originalList;\n\n\t\tcurrentClass = e.target.classList;\n\n\t\tif ( currentClass.contains( 'frm-collapse-page' ) || currentClass.contains( 'frm-sub-label' ) || e.target.closest( '.dropdown' ) !== null ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.closest( '.start_divider' ) !== null ) {\n\t\t\te.stopPropagation();\n\t\t}\n\n\t\tif ( this.classList.contains( 'edit_field_type_divider' ) ) {\n\t\t\toriginalList = e.originalEvent.target.closest( 'ul.frm_sorting' );\n\t\t\tif ( null !== originalList ) {\n\t\t\t\t// prevent section click if clicking a field group within a section.\n\t\t\t\tif ( originalList.classList.contains( 'edit_field_type_divider' ) || originalList.parentNode.parentNode.classList.contains( 'start_divider' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tclickAction( this );\n\t}\n\n\t/**\n\t * Update the format input based on the selected format type.\n\t *\n\t * @since 6.9\n\t *\n\t * @param {Event} event The event object from the format type selection.\n\t * @return {void}\n\t */\n\tfunction maybeUpdateFormatInput( event ) {\n\t\tconst formatElement = event.target;\n\t\tconst type = formatElement.value;\n\n\t\tif ( 'custom' === type ) {\n\t\t\tconst fieldId = formatElement.dataset.fieldId;\n\t\t\tconst formatInput = document.getElementById( `frm-field-format-custom-${ fieldId }` ).querySelector( '.frm_format_opt' );\n\n\t\t\tif ( 'international' === formatInput.value || 'currency' === formatInput.value || 'number' === formatInput.value ) {\n\t\t\t\tformatInput.setAttribute( 'value', '' );\n\t\t\t}\n\t\t}\n\n\t\tsetTimeout(\n\t\t\t() => {\n\t\t\t\tformatElement.querySelectorAll( 'option' ).forEach(\n\t\t\t\t\toption => {\n\t\t\t\t\t\tif ( option.selected && option.classList.contains( 'frm_show_upgrade' ) ) {\n\t\t\t\t\t\t\tformatElement.value = 'none';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t},\n\t\t\t0\n\t\t);\n\t}\n\n\t/**\n\t * Open Advanced settings on double click.\n\t */\n\tfunction openAdvanced() {\n\t\tconst fieldId = this.getAttribute( 'data-fid' );\n\t\tautoExpandSettings( document.getElementById( 'field_options_field_key_' + fieldId ) );\n\t}\n\n\tfunction toggleRepeatButtons() {\n\t\t/*jshint validthis:true */\n\t\tconst $thisField = jQuery( this ).closest( '.frm_field_box' );\n\t\t$thisField.find( '.repeat_icon_links' ).removeClass( 'repeat_format repeat_formatboth repeat_formattext' ).addClass( 'repeat_format' + this.value );\n\t\tif ( this.value === 'text' || this.value === 'both' ) {\n\t\t\t$thisField.find( '.frm_repeat_text' ).show();\n\t\t\t$thisField.find( '.repeat_icon_links a' ).addClass( 'frm_button' );\n\t\t} else {\n\t\t\t$thisField.find( '.frm_repeat_text' ).hide();\n\t\t\t$thisField.find( '.repeat_icon_links a' ).removeClass( 'frm_button' );\n\t\t}\n\t}\n\n\tfunction checkRepeatLimit() {\n\t\t/*jshint validthis:true */\n\t\tconst val = this.value;\n\t\tif ( val !== '' && ( val < 2 || val > 200 ) ) {\n\t\t\tinfoModal( frmAdminJs.repeat_limit_min );\n\t\t\tthis.value = '';\n\t\t}\n\t}\n\n\tfunction checkCheckboxSelectionsLimit() {\n\t\t/*jshint validthis:true */\n\t\tconst val = this.value;\n\t\tif ( val !== '' && ( val < 1 || val > 200 ) ) {\n\t\t\tinfoModal( frmAdminJs.checkbox_limit );\n\t\t\tthis.value = '';\n\t\t}\n\t}\n\n\tfunction updateRepeatText( obj, addRemove ) {\n\t\tconst $thisField = jQuery( obj ).closest( '.frm_field_box' );\n\t\t$thisField.find( '.frm_' + addRemove + '_form_row .frm_repeat_label' ).text( obj.value );\n\t}\n\n\tfunction fieldsInSection( id ) {\n\t\tconst children = [];\n\t\tjQuery( document.getElementById( 'frm_field_id_' + id ) ).find( 'li.frm_field_box:not(.no_repeat_section .edit_field_type_end_divider)' ).each( function() {\n\t\t\tchildren.push( jQuery( this ).data( 'fid' ) );\n\t\t} );\n\t\treturn children;\n\t}\n\n\tfunction toggleFormTax() {\n\t\t/*jshint validthis:true */\n\t\tconst id = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' );\n\t\tconst val = this.value;\n\t\tconst $showFields = document.getElementById( 'frm_show_selected_fields_' + id );\n\t\tconst $showForms = document.getElementById( 'frm_show_selected_forms_' + id );\n\n\t\tjQuery( $showForms ).find( 'select' ).val( '' );\n\t\tif ( val === 'form' ) {\n\t\t\t$showForms.style.display = 'inline';\n\t\t\tempty( $showFields );\n\t\t} else {\n\t\t\t$showFields.style.display = 'none';\n\t\t\t$showForms.style.display = 'none';\n\t\t\tgetTaxOrFieldSelection( val, id );\n\t\t}\n\t}\n\n\tfunction resetOptOnChange() {\n\t\t/*jshint validthis:true */\n\t\tlet field, thisOpt;\n\n\t\tfield = getFieldKeyFromOpt( this );\n\t\tif ( ! field ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthisOpt = jQuery( this ).closest( '.frm_single_option' );\n\n\t\tresetSingleOpt( field.fieldId, field.fieldKey, thisOpt );\n\t}\n\n\tfunction getFieldKeyFromOpt( object ) {\n\t\tlet allOpts, fieldId, fieldKey;\n\n\t\tallOpts = jQuery( object ).closest( '.frm_sortable_field_opts' );\n\t\tif ( ! allOpts.length ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfieldId = allOpts.attr( 'id' ).replace( 'frm_field_', '' ).replace( '_opts', '' );\n\t\tfieldKey = allOpts.data( 'key' );\n\n\t\treturn {\n\t\t\tfieldId: fieldId,\n\t\t\tfieldKey: fieldKey\n\t\t};\n\t}\n\n\tfunction resetSingleOpt( fieldId, fieldKey, thisOpt ) {\n\t\tlet saved, text, defaultVal, previewInput, labelForDisplay, optContainer,\n\t\t\toptKey = thisOpt.data( 'optkey' ),\n\t\t\tseparateValues = usingSeparateValues( fieldId ),\n\t\t\tsingle = jQuery( 'label[for=\"field_' + fieldKey + '-' + optKey + '\"]' ),\n\t\t\tbaseName = 'field_options[options_' + fieldId + '][' + optKey + ']',\n\t\t\tlabel = jQuery( 'input[name=\"' + baseName + '[label]\"]' );\n\n\t\tif ( single.length < 1 ) {\n\t\t\tresetDisplayedOpts( fieldId );\n\n\t\t\t// Set the default value.\n\t\t\tdefaultVal = thisOpt.find( 'input[name^=\"default_value_\"]' );\n\t\t\tif ( defaultVal.is( ':checked' ) && label.length > 0 ) {\n\t\t\t\tjQuery( 'select[name^=\"item_meta[' + fieldId + ']\"]' ).val( label.val() );\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tpreviewInput = single.children( 'input' );\n\n\t\tif ( label.length < 1 ) {\n\t\t\t// Check for other label.\n\t\t\tlabel = jQuery( 'input[name=\"' + baseName + '\"]' );\n\t\t\tsaved = label.val();\n\t\t} else if ( separateValues ) {\n\t\t\tsaved = jQuery( 'input[name=\"' + baseName + '[value]\"]' ).val();\n\t\t} else {\n\t\t\tsaved = label.val();\n\t\t}\n\n\t\tif ( label.length < 1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Set the displayed value.\n\t\ttext = single[ 0 ].childNodes;\n\n\t\tif ( imagesAsOptions( fieldId ) ) {\n\t\t\tlabelForDisplay = getImageDisplayValue( thisOpt, fieldId, label );\n\t\t\toptContainer = single.find( '.frm_image_option_container' );\n\n\t\t\tif ( optContainer.length > 0 ) {\n\t\t\t\toptContainer.replaceWith( labelForDisplay );\n\t\t\t} else {\n\t\t\t\ttext[ text.length - 1 ].nodeValue = '';\n\t\t\t\tsingle.append( labelForDisplay );\n\t\t\t}\n\t\t} else {\n\t\t\tlet firstInputIndex = false;\n\t\t\ttext.forEach( ( node, index ) => {\n\t\t\t\tif ( firstInputIndex === false ) {\n\t\t\t\t\tif ( node.tagName === 'INPUT' ) {\n\t\t\t\t\t\tfirstInputIndex = index;\n\t\t\t\t\t}\n\t\t\t\t} else if ( index === firstInputIndex + 1 ) {\n\t\t\t\t\tlet nodeValue = '';\n\n\t\t\t\t\tif ( buttonsAsOptions( fieldId ) ) {\n\t\t\t\t\t\tnodeValue = div( { className: 'frm_label_button_container', text: ' ' + label.val() } );\n\t\t\t\t\t\tsingle[ 0 ].replaceChild( nodeValue, node );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode.nodeValue = ' ' + label.val();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tnode.remove();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Set saved value.\n\t\tpreviewInput.val( saved );\n\n\t\t// Set the default value.\n\t\tdefaultVal = thisOpt.find( 'input[name^=\"default_value_\"]' );\n\t\tpreviewInput.prop( 'checked', defaultVal.is( ':checked' ) ? true : false );\n\t}\n\n\tfunction buttonsAsOptions( fieldId ) {\n\t\tconst fields = document.getElementsByName( 'field_options[image_options_' + fieldId + ']' );\n\t\tconst result = Array.from( fields ).find( field => field.checked && ( 'buttons' === field.value ) );\n\n\t\treturn typeof result !== 'undefined';\n\t}\n\n\t/**\n\t * Set the displayed value for an image option.\n\t */\n\tfunction getImageDisplayValue( thisOpt, fieldId, label ) {\n\t\tlet image, imageUrl, showLabelWithImage, fieldType;\n\n\t\timage = thisOpt.find( 'img' );\n\t\tif ( image ) {\n\t\t\timageUrl = image.attr( 'src' );\n\t\t}\n\n\t\tshowLabelWithImage = showingLabelWithImage( fieldId );\n\t\tfieldType = radioOrCheckbox( fieldId );\n\t\treturn getImageLabel( label.val(), showLabelWithImage, imageUrl, fieldType );\n\t}\n\n\tfunction getImageOptionSize( fieldId ) {\n\t\tlet val,\n\t\t\tfield = document.getElementById( 'field_options_image_size_' + fieldId ),\n\t\t\tsize = '';\n\n\t\tif ( field !== null ) {\n\t\t\tval = field.value;\n\t\t\tif ( val !== '' ) {\n\t\t\t\tsize = val;\n\t\t\t}\n\t\t}\n\n\t\treturn size;\n\t}\n\n\tfunction resetDisplayedOpts( fieldId ) {\n\t\tlet i, opts, type, placeholder, fieldInfo,\n\t\t\tinput = jQuery( '[name^=\"item_meta[' + fieldId + ']\"]' );\n\n\t\tif ( input.length < 1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( input.is( 'select' ) ) {\n\t\t\tplaceholder = document.getElementById( 'frm_placeholder_' + fieldId );\n\t\t\tif ( placeholder !== null && placeholder.value === '' ) {\n\t\t\t\tfillDropdownOpts( input[ 0 ], { sourceID: fieldId } );\n\t\t\t} else {\n\t\t\t\tfillDropdownOpts( input[ 0 ], {\n\t\t\t\t\tsourceID: fieldId,\n\t\t\t\t\tplaceholder: placeholder.value\n\t\t\t\t} );\n\t\t\t}\n\t\t} else {\n\t\t\topts = getMultipleOpts( fieldId );\n\t\t\tjQuery( '#field_' + fieldId + '_inner_container > .frm_form_fields' ).html( '' );\n\t\t\tfieldInfo = getFieldKeyFromOpt( jQuery( '#frm_delete_field_' + fieldId + '-000_container' ) );\n\n\t\t\tconst container = jQuery( '#field_' + fieldId + '_inner_container > .frm_form_fields' ),\n\t\t\t\thasImageOptions = imagesAsOptions( fieldId ),\n\t\t\t\timageSize = hasImageOptions ? getImageOptionSize( fieldId ) : '',\n\t\t\t\timageOptionClass = hasImageOptions ? ( 'frm_image_option frm_image_' + imageSize + ' ' ) : '',\n\t\t\t\tisProduct = isProductField( fieldId );\n\n\t\t\ttype = ( 'hidden' === input.attr( 'type' ) ? input.data( 'field-type' ) : input.attr( 'type' ) );\n\t\t\tfor ( i = 0; i < opts.length; i++ ) {\n\t\t\t\tcontainer.append( addRadioCheckboxOpt( type, opts[ i ], fieldId, fieldInfo.fieldKey, isProduct, imageOptionClass ) );\n\t\t\t}\n\t\t}\n\n\t\tadjustConditionalLogicOptionOrders( fieldId );\n\t}\n\n\t/**\n\t * Returns an object that has a value and label for new conditional logic option, for a given option value.\n\t *\n\t * @param {Number} fieldId\n\t * @param {string} expectedOption\n\t * @return {Object}\n\t */\n\tfunction getNewConditionalLogicOption( fieldId, expectedOption ) {\n\t\tconst optionsContainer = document.getElementById( 'frm_field_' + fieldId + '_opts' );\n\n\t\tconst expectedOptionInput = optionsContainer.querySelector( 'input[value=\"' + expectedOption + '\"]' );\n\n\t\tif ( expectedOptionInput ) {\n\t\t\treturn getChoiceNewValueAndLabel( expectedOptionInput );\n\t\t}\n\n\t\treturn { newValue: expectedOption, newLabel: expectedOption };\n\t}\n\n\tfunction adjustConditionalLogicOptionOrders( fieldId, type ) {\n\t\tlet row, opts, logicId, valueSelect, optionLength, optionIndex, expectedOption, optionMatch, fieldOptions, rowIndex,\n\t\t\trows = builderPage.querySelectorAll( '.frm_logic_row' ),\n\t\t\trowLength = rows.length;\n\n\t\tfieldOptions = wp.hooks.applyFilters( 'frm_conditional_logic_field_options', getFieldOptions( fieldId ), { type, fieldId } );\n\t\toptionLength = fieldOptions.length;\n\n\t\tfor ( rowIndex = 0; rowIndex < rowLength; rowIndex++ ) {\n\t\t\trow = rows[ rowIndex ];\n\t\t\topts = row.querySelector( '.frm_logic_field_opts' );\n\n\t\t\tif ( opts.value != fieldId ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlogicId = row.id.split( '_' )[ 2 ];\n\t\t\tvalueSelect = row.querySelector( 'select[name=\"field_options[hide_opt_' + logicId + '][]\"]' );\n\n\t\t\tfor ( optionIndex = optionLength - 1; optionIndex >= 0; optionIndex-- ) {\n\t\t\t\texpectedOption = fieldOptions[ optionIndex ];\n\t\t\t\tlet expectedOptionValue = document.getElementById( 'frm_field_' + fieldId + '_opts' ).querySelector( '.frm_option_key input[type=\"text\"]' )?.value;\n\t\t\t\tif ( ! expectedOptionValue ) {\n\t\t\t\t\texpectedOptionValue = expectedOption;\n\t\t\t\t}\n\n\t\t\t\toptionMatch = valueSelect.querySelector( 'option[value=\"' + expectedOptionValue + '\"]' );\n\n\t\t\t\tconst { newValue, newLabel } = getNewConditionalLogicOption( fieldId, expectedOption );\n\n\t\t\t\tconst fieldChoices = document.querySelectorAll( '#frm_field_' + fieldId + '_opts input[data-value-on-focus]' );\n\t\t\t\tconst expectedChoiceEl = Array.from( fieldChoices ).find( element => element.value === expectedOption );\n\t\t\t\tif ( expectedChoiceEl ) {\n\t\t\t\t\tconst oldValue = expectedChoiceEl.dataset.valueOnFocus;\n\t\t\t\t\tconst hasMatch = oldValue && valueSelect.querySelector( 'option[value=\"' + oldValue + '\"]' );\n\t\t\t\t\tif ( hasMatch ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tprependValueSelectWithOptionMatch( valueSelect, optionMatch, newValue, newLabel );\n\t\t\t}\n\n\t\t\toptionMatch = valueSelect.querySelector( 'option[value=\"\"]' );\n\t\t\tif ( optionMatch !== null ) {\n\t\t\t\tvalueSelect.prepend( optionMatch );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction prependValueSelectWithOptionMatch( valueSelect, optionMatch, newValue, newLabel ) {\n\t\tif ( optionMatch === null && ! valueSelect.querySelector( 'option[value=\"' + newValue + '\"]' ) ) {\n\t\t\toptionMatch = frmDom.tag( 'option', { text: newLabel } );\n\t\t\toptionMatch.value = newValue;\n\t\t}\n\n\t\tvalueSelect.prepend( optionMatch );\n\t}\n\n\tfunction getFieldOptions( fieldId ) {\n\t\tlet index, input, li, listItems, optsContainer, length,\n\t\t\toptions = [];\n\t\toptsContainer = document.getElementById( 'frm_field_' + fieldId + '_opts' );\n\n\t\tif ( ! optsContainer ) {\n\t\t\treturn options;\n\t\t}\n\t\tlistItems = optsContainer.querySelectorAll( '.frm_single_option' );\n\t\tlength = listItems.length;\n\n\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\tli = listItems[ index ];\n\n\t\t\tif ( li.classList.contains( 'frm_hidden' ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tinput = li.querySelector( '.field_' + fieldId + '_option' );\n\t\t\toptions.push( input.value );\n\t\t}\n\t\treturn options;\n\t}\n\n\tfunction addRadioCheckboxOpt( type, opt, fieldId, fieldKey, isProduct, classes ) {\n\t\tlet other,\n\t\t\tsingle = '',\n\t\t\tisOther = opt.key.includes( 'other' ),\n\t\t\tid = 'field_' + fieldKey + '-' + opt.key,\n\t\t\tinputType = type === 'scale' ? 'radio' : type;\n\n\t\tother = '<input type=\"text\" id=\"field_' + fieldKey + '-' + opt.key + '-otext\" class=\"frm_other_input frm_pos_none\" name=\"item_meta[other][' + fieldId + '][' + opt.key + ']\" value=\"\" />';\n\n\t\tthis.getSingle = function() {\n\t\t\t/**\n\t\t\t * Get single option template.\n\t\t\t *\n\t\t\t * @param {Object} option  Object containing the option data.\n\t\t\t * @param {string} type    The field type.\n\t\t\t * @param {string} fieldId The field id.\n\t\t\t * @param {string} classes The option clasnames.\n\t\t\t * @param {string} id      The input id attribute.\n\t\t\t */\n\t\t\tsingle = wp.hooks.applyFilters( 'frm_admin.build_single_option_template', single, { opt, type, fieldId, classes, id } );\n\n\t\t\tif ( '' !== single ) {\n\t\t\t\treturn single;\n\t\t\t}\n\n\t\t\treturn '<div class=\"frm_' + type + ' ' + type + ' ' + classes + '\" id=\"frm_' + type + '_' + fieldId + '-' + opt.key + '\"><label for=\"' + id +\n\t\t\t'\"><input type=\"' + inputType +\n\t\t\t'\" name=\"item_meta[' + fieldId + ']' + ( type === 'checkbox' ? '[]' : '' ) +\n\t\t\t'\" value=\"' + purifyHtml( opt.saved ) + '\" id=\"' + id + '\"' + ( isProduct ? ' data-price=\"' + opt.price + '\"' : '' ) + ( opt.checked ? ' checked=\"checked\"' : '' ) + '> ' + purifyHtml( opt.label ) + '</label>' +\n\t\t\t( isOther ? other : '' ) +\n\t\t\t'</div>';\n\t\t};\n\n\t\treturn this.getSingle();\n\t}\n\n\tfunction fillDropdownOpts( field, atts ) {\n\t\tif ( field === null ) {\n\t\t\treturn;\n\t\t}\n\t\tconst sourceID = atts.sourceID,\n\t\t\tplaceholder = atts.placeholder,\n\t\t\tisProduct = isProductField( sourceID ),\n\t\t\tshowOther = atts.other;\n\n\t\tremoveDropdownOpts( field );\n\t\tlet opts = getMultipleOpts( sourceID, field.id.includes( 'frm_field_logic_opt' ) );\n\t\tlet hasPlaceholder = ( typeof placeholder !== 'undefined' );\n\n\t\tfor ( let i = 0; i < opts.length; i++ ) {\n\t\t\tlet label = opts[ i ].label,\n\t\t\t\tisOther = opts[ i ].key.includes( 'other' );\n\n\t\t\tif ( hasPlaceholder && label !== '' ) {\n\t\t\t\taddBlankSelectOption( field, placeholder );\n\t\t\t} else if ( hasPlaceholder ) {\n\t\t\t\tlabel = placeholder;\n\t\t\t}\n\t\t\thasPlaceholder = false;\n\n\t\t\tif ( ! isOther || showOther ) {\n\t\t\t\tconst opt = document.createElement( 'option' );\n\t\t\t\topt.value = opts[ i ].saved;\n\t\t\t\topt.innerHTML = purifyHtml( label );\n\n\t\t\t\tif ( isProduct ) {\n\t\t\t\t\topt.setAttribute( 'data-price', opts[ i ].price );\n\t\t\t\t}\n\n\t\t\t\tfield.append( opt );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction addBlankSelectOption( field, placeholder ) {\n\t\tconst opt = document.createElement( 'option' ),\n\t\t\tfirstChild = field.firstChild;\n\n\t\topt.value = '';\n\t\topt.innerHTML = placeholder;\n\t\tif ( firstChild !== null ) {\n\t\t\tfirstChild.before( opt );\n\t\t\tfield.selectedIndex = 0;\n\t\t} else {\n\t\t\tfield.append( opt );\n\t\t}\n\t}\n\n\t/**\n\t * Get multiple options for a field.\n\t *\n\t * @param {string}  fieldId          The field id.\n\t * @param {boolean} showValueAsLabel Whether to show the value as label for empty labels.\n\t */\n\tfunction getMultipleOpts( fieldId, showValueAsLabel = false ) {\n\t\tlet i, saved, labelName, label, key, optObj,\n\t\t\tfieldType,\n\t\t\tchecked = false,\n\t\t\topts = [],\n\t\t\timageUrl = '';\n\n\t\tconst optVals = jQuery( 'input[name^=\"field_options[options_' + fieldId + ']\"]' ).filter( '[name$=\"[label]\"], [name*=\"[other_\"]' );\n\t\tconst isProduct = isProductField( fieldId );\n\t\tconst showLabelWithImage = showingLabelWithImage( fieldId );\n\t\tconst hasImageOptions = imagesAsOptions( fieldId );\n\t\tconst separateValues = usingSeparateValues( fieldId );\n\n\t\tfor ( i = 0; i < optVals.length; i++ ) {\n\t\t\tif ( optVals[ i ].name.indexOf( '[000]' ) > 0 ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tsaved = optVals[ i ].value;\n\t\t\tlabel = saved;\n\t\t\tkey = optVals[ i ].name.replace( 'field_options[options_' + fieldId + '][', '' ).replace( '[label]', '' ).replace( ']', '' );\n\n\t\t\tif ( separateValues ) {\n\t\t\t\tlabelName = optVals[ i ].name.replace( '[label]', '[value]' );\n\t\t\t\tsaved = jQuery( 'input[name=\"' + labelName + '\"]' ).val();\n\n\t\t\t\tif ( showValueAsLabel && '' === label ) {\n\t\t\t\t\tlabel = '' !== saved ? saved : frm_admin_js.no_label; // eslint-disable-line camelcase\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( hasImageOptions ) {\n\t\t\t\timageUrl = getImageUrlFromInput( optVals[ i ] );\n\t\t\t\tfieldType = radioOrCheckbox( fieldId );\n\t\t\t\tlabel = getImageLabel( label, showLabelWithImage, imageUrl, fieldType );\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * @since 5.0.04\n\t\t\t */\n\t\t\tlabel = frmAdminBuild.hooks.applyFilters( 'frm_choice_field_label', label, fieldId, optVals[ i ], hasImageOptions );\n\n\t\t\tchecked = getChecked( optVals[ i ].id );\n\n\t\t\toptObj = {\n\t\t\t\tsaved: saved,\n\t\t\t\tlabel: label,\n\t\t\t\tchecked: checked,\n\t\t\t\tkey: key\n\t\t\t};\n\n\t\t\tif ( isProduct ) {\n\t\t\t\tlabelName = optVals[ i ].name.replace( '[label]', '[price]' );\n\t\t\t\toptObj.price = jQuery( 'input[name=\"' + labelName + '\"]' ).val();\n\t\t\t}\n\n\t\t\topts.push( optObj );\n\t\t}\n\n\t\treturn opts;\n\t}\n\n\tfunction radioOrCheckbox( fieldId ) {\n\t\tconst settings = document.getElementById( 'frm-single-settings-' + fieldId );\n\t\tif ( settings === null ) {\n\t\t\treturn 'radio';\n\t\t}\n\n\t\treturn settings.classList.contains( 'frm-type-checkbox' ) ? 'checkbox' : 'radio';\n\t}\n\n\tfunction getImageUrlFromInput( optVal ) {\n\t\tlet img,\n\t\t\twrapper = jQuery( optVal ).siblings( '.frm_image_preview_wrapper' );\n\n\t\tif ( ! wrapper.length ) {\n\t\t\treturn '';\n\t\t}\n\n\t\timg = wrapper.find( 'img' );\n\t\tif ( ! img.length ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn img.attr( 'src' );\n\t}\n\n\tfunction purifyHtml( html ) {\n\t\tif ( html instanceof Element || html instanceof Document ) {\n\t\t\thtml = html.outerHTML;\n\t\t}\n\n\t\tconst clean = jQuery.parseHTML( html ).reduce(\n\t\t\t( total, currentNode ) => {\n\t\t\t\tconst cleanNode = frmDom.cleanNode( currentNode );\n\n\t\t\t\tif ( '#text' === cleanNode.nodeName ) {\n\t\t\t\t\treturn total += cleanNode.textContent;\n\t\t\t\t}\n\n\t\t\t\treturn total + cleanNode.outerHTML;\n\t\t\t},\n\t\t\t''\n\t\t);\n\n\t\tif ( clean !== html ) {\n\t\t\t// Clean it until nothing changes, in case the stripped result is now unsafe.\n\t\t\treturn purifyHtml( clean );\n\t\t}\n\n\t\treturn clean;\n\t}\n\n\tfunction getImageLabel( label, showLabelWithImage, imageUrl, fieldType ) {\n\t\tlet imageLabelClass,\n\t\t\toriginalLabel = label,\n\t\t\tshape = fieldType === 'checkbox' ? 'square' : 'circle',\n\t\t\tlabelImage,\n\t\t\tlabelNode,\n\t\t\timageLabel;\n\n\t\toriginalLabel = purifyHtml( originalLabel );\n\n\t\tif ( imageUrl ) {\n\t\t\tlabelImage = img( { src: imageUrl, alt: originalLabel } );\n\t\t} else {\n\t\t\tlabelImage = div( { className: 'frm_empty_url' } );\n\t\t\tlabelImage.innerHTML = frmAdminJs.image_placeholder_icon;\n\t\t}\n\n\t\timageLabelClass = showLabelWithImage ? ' frm_label_with_image' : '';\n\n\t\timageLabel = tag( 'span', { className: 'frm_text_label_for_image_inner' } );\n\n\t\timageLabel.innerHTML = originalLabel;\n\t\tlabelNode = tag(\n\t\t\t'span',\n\t\t\t{\n\t\t\t\tclassName: 'frm_image_option_container' + imageLabelClass,\n\t\t\t\tchildren: [\n\t\t\t\t\tlabelImage,\n\t\t\t\t\ttag( 'span', { className: 'frm_text_label_for_image', child: imageLabel } )\n\t\t\t\t]\n\t\t\t}\n\t\t);\n\n\t\treturn labelNode;\n\t}\n\n\tfunction getChecked( id ) {\n\t\tconst field = jQuery( '#' + id );\n\n\t\tif ( field.length === 0 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst checkbox = field.siblings( 'input[type=checkbox]' );\n\n\t\treturn checkbox.length && checkbox.prop( 'checked' );\n\t}\n\n\tfunction removeDropdownOpts( field ) {\n\t\tlet i;\n\t\tif ( typeof field.options === 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( i = field.options.length - 1; i >= 0; i-- ) {\n\t\t\tfield.remove( i );\n\t\t}\n\t}\n\n\t/**\n\t * Is the box checked to use separate values?\n\t */\n\tfunction usingSeparateValues( fieldId ) {\n\t\treturn isChecked( 'separate_value_' + fieldId );\n\t}\n\n\t/**\n\t * Is the box checked to use images as options?\n\t */\n\tfunction imagesAsOptions( fieldId ) {\n\t\tlet checked = false,\n\t\t\tfield = document.getElementsByName( 'field_options[image_options_' + fieldId + ']' );\n\n\t\tfor ( let i = 0; i < field.length; i++ ) {\n\t\t\tif ( field[ i ].checked ) {\n\t\t\t\tchecked = '0' !== field[ i ].value;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * @since 5.0.04\n\t\t */\n\t\treturn frmAdminBuild.hooks.applyFilters( 'frm_choice_field_images_as_options', checked, fieldId );\n\t}\n\n\tfunction showingLabelWithImage( fieldId ) {\n\t\tconst isShowing = ! isChecked( 'hide_image_text_' + fieldId );\n\n\t\t/**\n\t\t * @since 5.0.04\n\t\t */\n\t\treturn frmAdminBuild.hooks.applyFilters( 'frm_choice_field_showing_label_with_image', isShowing, fieldId );\n\t}\n\n\tfunction isChecked( id ) {\n\t\tconst field = document.getElementById( id );\n\t\tif ( field === null ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn field.checked;\n\t}\n\n\tfunction checkUniqueOpt( targetInput ) {\n\t\tconst settingsContainer = targetInput.closest( '.frm-single-settings' );\n\t\tconst fieldId = settingsContainer.getAttribute( 'data-fid' );\n\t\tconst areValuesSeparate = settingsContainer.querySelector( '[name=\"field_options[separate_value_' + fieldId + ']\"]' ).checked;\n\n\t\tif ( areValuesSeparate && ! targetInput.name.endsWith( '[value]' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst container = document.getElementById( 'frm_field_' + fieldId + '_opts' );\n\t\tconst conflicts = Array.from( container.querySelectorAll( 'input[type=\"text\"]' ) ).filter(\n\t\t\tinput => input.id !== targetInput.id &&\n\t\t\t\tareValuesSeparate === input.name.endsWith( '[value]' ) &&\n\t\t\t\tinput.value === targetInput.value\n\t\t);\n\n\t\tif ( conflicts.length ) {\n\t\t\t/* translators: %s: The detected option value. */\n\t\t\tinfoModal( sprintf( __( 'Duplicate option value \"%s\" detected', 'formidable' ), purifyHtml( targetInput.value ) ) );\n\t\t}\n\t}\n\n\tfunction getFieldValues() {\n\t\t/*jshint validthis:true */\n\t\tlet isTaxonomy,\n\t\t\tval = this.value;\n\n\t\tif ( val ) {\n\t\t\tconst parentIDs = this.parentNode.id.replace( 'frm_logic_', '' ).split( '_' );\n\t\t\tconst fieldID = parentIDs[ 0 ];\n\t\t\tconst metaKey = parentIDs[ 1 ];\n\t\t\tconst valueField = document.getElementById( 'frm_field_id_' + val );\n\t\t\tconst valueFieldType = valueField.getAttribute( 'data-ftype' );\n\t\t\tconst fill = document.getElementById( 'frm_show_selected_values_' + fieldID + '_' + metaKey );\n\t\t\tconst optionName = 'field_options[hide_opt_' + fieldID + '][]';\n\t\t\tconst optionID = 'frm_field_logic_opt_' + fieldID;\n\t\t\tlet input = false;\n\t\t\tlet showSelect = ( valueFieldType === 'select' || valueFieldType === 'checkbox' || valueFieldType === 'radio' );\n\t\t\tconst showText = ( valueFieldType === 'text' || valueFieldType === 'email' || valueFieldType === 'phone' || valueFieldType === 'url' || valueFieldType === 'number' );\n\n\t\t\tif ( showSelect ) {\n\t\t\t\tisTaxonomy = document.getElementById( 'frm_has_hidden_options_' + val );\n\t\t\t\tif ( isTaxonomy !== null ) {\n\t\t\t\t\t// get the category options with ajax\n\t\t\t\t\tshowSelect = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( showSelect || showText ) {\n\t\t\t\tconst comparison = document.querySelector( `#frm_logic_${ fieldID }_${ metaKey } [name=\"field_options[hide_field_cond_${ fieldID }][]\"]` ).value;\n\t\t\t\tfill.innerHTML = '';\n\t\t\t\tconst creatingValuesDropdown = showSelect && ! [ 'LIKE', 'not LIKE', 'LIKE%', '%LIKE' ].includes( comparison );\n\t\t\t\tif ( creatingValuesDropdown ) {\n\t\t\t\t\tinput = document.createElement( 'select' );\n\t\t\t\t} else {\n\t\t\t\t\tinput = document.createElement( 'input' );\n\t\t\t\t\tinput.type = 'text';\n\t\t\t\t}\n\t\t\t\tinput.name = optionName;\n\t\t\t\tinput.id = optionID + '_' + metaKey;\n\t\t\t\tfill.append( input );\n\n\t\t\t\tif ( creatingValuesDropdown ) {\n\t\t\t\t\tconst fillField = document.getElementById( input.id );\n\t\t\t\t\tfillDropdownOpts( fillField, {\n\t\t\t\t\t\tsourceID: val,\n\t\t\t\t\t\tplaceholder: '',\n\t\t\t\t\t\tother: true\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst thisType = this.getAttribute( 'data-type' );\n\t\t\t\tconst callback = () => {\n\t\t\t\t\tconst event = new CustomEvent( 'frm_logic_options_loaded' );\n\t\t\t\t\tevent.frmData = { valueFieldType, fieldID, metaKey };\n\t\t\t\t\tdocument.dispatchEvent( event );\n\t\t\t\t};\n\n\t\t\t\tfrmGetFieldValues( val, fieldID, metaKey, thisType, undefined, callback );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getFieldSelection() {\n\t\t/*jshint validthis:true */\n\t\tconst formId = this.value;\n\t\tif ( formId ) {\n\t\t\tconst fieldId = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' );\n\t\t\tgetTaxOrFieldSelection( formId, fieldId );\n\t\t}\n\t}\n\n\tfunction getTaxOrFieldSelection( formId, fieldId ) {\n\t\tif ( formId ) {\n\t\t\tjQuery.ajax( {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: ajaxurl,\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'frm_get_field_selection',\n\t\t\t\t\tfield_id: fieldId,\n\t\t\t\t\tform_id: formId,\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t},\n\t\t\t\tsuccess: function( msg ) {\n\t\t\t\t\tconst $selectedFields = jQuery( '#frm_show_selected_fields_' + fieldId );\n\t\t\t\t\t$selectedFields.toggleClass( 'frm6', ! msg.includes( 'frm-inline-message' ) );\n\t\t\t\t\t$selectedFields.html( msg ).show();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction updateFieldOrder() {\n\t\tlet self = this;\n\n\t\tthis.initOnceInAllInstances = function() {\n\t\t\tif ( 'undefined' !== typeof updateFieldOrder.prototype.orderFieldsObject ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// It will store the order input fields ( input[name=\"field_options[field_order_{fieldId}]\"] ).\n\t\t\t// It will help to reduce the DOM searches based on fieldId.\n\t\t\t// The same object data is used across all \"updateFieldOrder\" instances.\n\t\t\tupdateFieldOrder.prototype.orderFieldsObject = {};\n\n\t\t\t// Get the Form group that will handle the fields settings.\n\t\t\t// Perform a single DOM search and use it across all \"updateFieldOrder\" instances.\n\t\t\tupdateFieldOrder.prototype.fieldSettingsForm = document.getElementById( 'frm-end-form-marker' ).closest( 'form' );\n\t\t};\n\n\t\tthis.getFieldOrderInputById = function( fieldId, parent ) {\n\t\t\tlet field;\n\t\t\tconst orderFieldsObject = updateFieldOrder.prototype.orderFieldsObject;\n\t\t\tconst fieldSettingsForm = updateFieldOrder.prototype.fieldSettingsForm;\n\n\t\t\tif ( 'undefined' === typeof orderFieldsObject[ fieldId ] ) {\n\t\t\t\tfield = fieldSettingsForm.querySelector( 'input[name=\"field_options[field_order_' + fieldId + ']\"]' );\n\t\t\t\tif ( null === field ) {\n\t\t\t\t\tfield = parent.querySelector( 'input[name=\"field_options[field_order_' + fieldId + ']\"]' );\n\t\t\t\t}\n\t\t\t\torderFieldsObject[ fieldId ] = field;\n\t\t\t\treturn field;\n\t\t\t}\n\n\t\t\treturn orderFieldsObject[ fieldId ];\n\t\t};\n\n\t\tthis.initOnceInAllInstances();\n\t\trenumberPageBreaks();\n\n\t\treturn ( function() {\n\t\t\tlet fieldId, field, currentOrder, newOrder, i, singleField,\n\t\t\t\tmoveFieldsClass = new moveFieldSettings(),\n\t\t\t\tfields = jQuery( 'li.frm_field_box', jQuery( '#frm-show-fields' ) );\n\n\t\t\tfor ( i = 0; i < fields.length; i++ ) {\n\t\t\t\tfieldId = fields[ i ].getAttribute( 'data-fid' );\n\t\t\t\tfield = self.getFieldOrderInputById( fieldId, fields[ i ] );\n\n\t\t\t\t// get current field order, make sure we don't get the \"field\" reference as the \"field\" value will get updated later.\n\t\t\t\tcurrentOrder = null !== field ? Object.assign( {}, field.value )[ 0 ] : null;\n\t\t\t\tnewOrder = i + 1;\n\n\t\t\t\tif ( currentOrder != newOrder && null !== currentOrder ) {\n\t\t\t\t\tfield.value = newOrder;\n\t\t\t\t\tsingleField = fields[ i ].querySelector( '#frm-single-settings-' + fieldId );\n\n\t\t\t\t\t// add field that needs to be moved to \"updateFieldOrder.prototype.fieldSettingsForm\"\n\t\t\t\t\tmoveFieldsClass.append( singleField );\n\t\t\t\t\tfieldUpdated();\n\t\t\t\t}\n\t\t\t}\n\t\t\t// move all appended fields\n\t\t\tmoveFieldsClass.moveFields();\n\t\t}() );\n\t}\n\n\tfunction toggleSectionHolder() {\n\t\tdocument.querySelectorAll( '.start_divider' ).forEach(\n\t\t\tfunction( divider ) {\n\t\t\t\ttoggleOneSectionHolder( jQuery( divider ) );\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction toggleOneSectionHolder( $section ) {\n\t\tlet noSectionFields, $rows, length, index, sectionHasFields;\n\n\t\tif ( ! $section.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t$rows = $section.find( 'ul.frm_sorting' );\n\t\tsectionHasFields = false;\n\t\tlength = $rows.length;\n\t\tfor ( index = 0; index < length; ++index ) {\n\t\t\tif ( 0 !== getFieldsInRow( jQuery( $rows.get( index ) ) ).length ) {\n\t\t\t\tsectionHasFields = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tnoSectionFields = $section.parent().children( '.frm_no_section_fields' ).get( 0 );\n\t\tnoSectionFields.classList.toggle( 'frm_block', ! sectionHasFields );\n\t}\n\n\tfunction handleShowPasswordLiveUpdate() {\n\t\tfrmDom.util.documentOn( 'change', '.frm_show_password_setting_input', event => {\n\t\t\tconst fieldId = event.target.getAttribute( 'data-fid' );\n\t\t\tconst fieldEl = document.getElementById( 'frm_field_id_' + fieldId );\n\t\t\tif ( ! fieldEl ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfieldEl.classList.toggle( 'frm_disabled_show_password', ! event.target.checked );\n\t\t} );\n\t}\n\n\tfunction slideDown() {\n\t\t/*jshint validthis:true */\n\t\tconst id = jQuery( this ).data( 'slidedown' );\n\t\tconst $thisId = jQuery( document.getElementById( id ) );\n\t\tif ( $thisId.is( ':hidden' ) ) {\n\t\t\t$thisId.slideDown( 'fast' );\n\t\t\tthis.style.display = 'none';\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction slideUp() {\n\t\t/*jshint validthis:true */\n\t\tconst id = jQuery( this ).data( 'slideup' );\n\t\tconst $thisId = jQuery( document.getElementById( id ) );\n\t\t$thisId.slideUp( 'fast' );\n\t\t$thisId.siblings( 'a' ).show();\n\t\treturn false;\n\t}\n\n\tfunction adjustVisibilityValuesForEveryoneValues( element, option ) {\n\t\tif ( '' === option.getAttribute( 'value' ) ) {\n\t\t\tonEveryoneOptionSelected( jQuery( this ) );\n\t\t} else {\n\t\t\tunselectEveryoneOptionIfSelected( jQuery( this ) );\n\t\t}\n\t}\n\n\tfunction onEveryoneOptionSelected( $select ) {\n\t\t$select.val( '' );\n\t\t$select.next( '.btn-group' ).find( '.multiselect-container input[value!=\"\"]' ).prop( 'checked', false );\n\t}\n\n\tfunction unselectEveryoneOptionIfSelected( $select ) {\n\t\tlet selectedValues = $select.val(),\n\t\t\tindex;\n\n\t\tif ( selectedValues === null ) {\n\t\t\t$select.next( '.btn-group' ).find( '.multiselect-container input[value=\"\"]' ).prop( 'checked', true );\n\t\t\tonEveryoneOptionSelected( $select );\n\t\t\treturn;\n\t\t}\n\n\t\tindex = selectedValues.indexOf( '' );\n\t\tif ( index >= 0 ) {\n\t\t\tselectedValues.splice( index, 1 );\n\t\t\t$select.val( selectedValues );\n\t\t\t$select.next( '.btn-group' ).find( '.multiselect-container input[value=\"\"]' ).prop( 'checked', false );\n\t\t}\n\t}\n\n\t/**\n\t * Get rid of empty container that inserts extra space.\n\t */\n\tfunction hideEmptyEle() {\n\t\tjQuery( '.frm-hide-empty' ).each( function() {\n\t\t\tif ( jQuery( this ).text().trim().length === 0 ) {\n\t\t\t\tjQuery( this ).remove();\n\t\t\t}\n\t\t} );\n\t}\n\n\t/* Change the classes in the builder */\n\tfunction changeFieldClass( field, setting ) {\n\t\tlet classes, replace, alignField,\n\t\t\treplaceWith = ' ' + setting.value,\n\t\t\tfieldId = field.getAttribute( 'data-fid' );\n\n\t\t// Include classes from multiple settings.\n\t\tif ( typeof fieldId !== 'undefined' ) {\n\t\t\tif ( setting.classList.contains( 'field_options_align' ) ) {\n\t\t\t\treplaceWith += ' ' + document.getElementById( 'frm_classes_' + fieldId ).value;\n\t\t\t} else if ( setting.classList.contains( 'frm_classes' ) ) {\n\t\t\t\talignField = document.getElementById( 'field_options_align_' + fieldId );\n\t\t\t\tif ( alignField !== null ) {\n\t\t\t\t\treplaceWith += ' ' + alignField.value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treplaceWith += ' ';\n\n\t\t// Allow for the column number dropdown.\n\t\treplaceWith = replaceWith.replace( ' block ', ' vertical_radio ' ).replace( ' inline ', ' horizontal_radio ' );\n\n\t\tclasses = field.className.split( ' frmstart ' )[ 1 ];\n\t\tclasses = 0 === classes.indexOf( 'frmend ' ) ? '' : classes.split( ' frmend ' )[ 0 ];\n\n\t\tif ( classes.trim() === '' ) {\n\t\t\treplace = ' frmstart  frmend ';\n\t\t\tif ( -1 === field.className.indexOf( replace ) ) {\n\t\t\t\treplace = ' frmstart frmend ';\n\t\t\t}\n\t\t\treplaceWith = ' frmstart ' + replaceWith.trim() + ' frmend ';\n\t\t} else {\n\t\t\treplace = classes.trim();\n\t\t\treplaceWith = replaceWith.trim();\n\t\t}\n\n\t\tfield.className = field.className.replace( replace, replaceWith );\n\t}\n\n\tfunction maybeShowInlineModal( e ) {\n\t\t/*jshint validthis:true */\n\t\te.preventDefault();\n\t\tshowInlineModal( this, undefined, e );\n\t}\n\n\tfunction showInlineModal( icon, input, event ) {\n\t\tconst box = document.getElementById( icon.getAttribute( 'data-open' ) ),\n\t\t\tcontainer = jQuery( icon ).closest( 'p,ul' ),\n\t\t\tinputTrigger = ( typeof input !== 'undefined' );\n\n\t\tif ( container.hasClass( 'frm-open' ) ) {\n\t\t\tcontainer.removeClass( 'frm-open' );\n\t\t\tbox.classList.add( 'frm_hidden' );\n\t\t} else {\n\t\t\tif ( ! inputTrigger ) {\n\t\t\t\tinput = getInputForIcon( icon );\n\t\t\t}\n\t\t\tif ( input !== null ) {\n\t\t\t\tif ( ! inputTrigger ) {\n\t\t\t\t\tconst { key } = event;\n\t\t\t\t\tif ( key !== 'Enter' && key !== ' ' ) {\n\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontainer.after( box );\n\t\t\t\tbox.setAttribute( 'data-fills', input.id.replace( '-proxy-input', '' ) );\n\n\t\t\t\tif ( box.id.indexOf( 'frm-calc-box' ) === 0 ) {\n\t\t\t\t\tpopCalcFields( box, true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcontainer.addClass( 'frm-open' );\n\t\t\tbox.classList.remove( 'frm_hidden' );\n\n\t\t\t/**\n\t\t\t * @since 6.4.1\n\t\t\t */\n\t\t\twp.hooks.doAction( 'frm_show_inline_modal', box, icon );\n\t\t}\n\t}\n\n\tfunction dismissInlineModal( e ) {\n\t\t/*jshint validthis:true */\n\t\te.preventDefault();\n\t\tthis.parentNode.classList.add( 'frm_hidden' );\n\t\tjQuery( '.frm-open [data-open=\"' + this.parentNode.id + '\"]' ).closest( '.frm-open' ).removeClass( 'frm-open' );\n\t}\n\n\t/**\n\t * Close frm-modal-no-dismiss element when clicking outside of it\n\t *\n\t * @param {Event} event The click event\n\t */\n\tfunction closeModalOnOutsideClick( { target } ) {\n\t\tif (\n\t\t\ttarget.closest( '.frm-inline-modal.frm-modal-no-dismiss' ) ||\n\t\t\ttarget.closest( '.frm-show-inline-modal' ) ||\n\t\t\ttarget.closest( '#frm_adv_info' ) ||\n\t\t\ttarget.closest( '.frm-token-proxy-input' )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Close all inline modals (without close button) that are not hidden\n\t\tdocument.querySelectorAll( '.frm-inline-modal.frm-modal-no-dismiss:not(.frm_hidden)' ).forEach( modal => {\n\t\t\tmodal.classList.add( 'frm_hidden' );\n\t\t\tmodal.previousElementSibling.classList.remove( 'frm-open' );\n\t\t} );\n\t}\n\n\tfunction changeInputtedValue() {\n\t\t/*jshint validthis:true */\n\t\tlet i,\n\t\t\taction = this.getAttribute( 'data-frmchange' ).split( ',' );\n\n\t\tfor ( i = 0; i < action.length; i++ ) {\n\t\t\tif ( action[ i ] === 'updateOption' ) {\n\t\t\t\tchangeHiddenSeparateValue( this );\n\t\t\t} else if ( action[ i ] === 'updateDefault' ) {\n\t\t\t\tchangeDefaultRadioValue( this );\n\t\t\t} else if ( action[ i ] === 'checkUniqueOpt' ) {\n\t\t\t\tcheckUniqueOpt( this );\n\t\t\t} else {\n\t\t\t\tthis.value = this.value[ action[ i ] ]();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * When the saved value is changed, update the default value radio.\n\t */\n\tfunction changeDefaultRadioValue( input ) {\n\t\tconst parentLi = getOptionParent( input ),\n\t\t\tkey = parentLi.getAttribute( 'data-optkey' ),\n\t\t\tfieldId = getOptionFieldId( parentLi, key ),\n\t\t\tdefaultRadio = parentLi.querySelector( 'input[name=\"default_value_' + fieldId + '\"]' );\n\n\t\tif ( defaultRadio !== null ) {\n\t\t\tdefaultRadio.value = input.value;\n\t\t}\n\t}\n\n\t/**\n\t * If separate values are not enabled, change the saved value when\n\t * the displayed value is changed.\n\t */\n\tfunction changeHiddenSeparateValue( input ) {\n\t\tlet savedVal,\n\t\t\tparentLi = getOptionParent( input ),\n\t\t\tkey = parentLi.getAttribute( 'data-optkey' ),\n\t\t\tfieldId = getOptionFieldId( parentLi, key ),\n\t\t\tsep = document.getElementById( 'separate_value_' + fieldId );\n\n\t\tif ( sep !== null && sep.checked === false ) {\n\t\t\t// If separate values are not turned on.\n\t\t\tsavedVal = document.getElementById( 'field_key_' + fieldId + '-' + key );\n\t\t\tsavedVal.value = input.value;\n\t\t\tchangeDefaultRadioValue( savedVal );\n\t\t}\n\t}\n\n\tfunction getOptionParent( input ) {\n\t\tlet parentLi = input.parentNode;\n\t\tif ( parentLi.tagName !== 'LI' ) {\n\t\t\tparentLi = parentLi.parentNode;\n\t\t}\n\t\treturn parentLi;\n\t}\n\n\tfunction getOptionFieldId( li, key ) {\n\t\tconst liId = li.id;\n\n\t\treturn liId.replace( 'frm_delete_field_', '' ).replace( '-' + key + '_container', '' );\n\t}\n\n\tfunction submitBuild() {\n\t\t/*jshint validthis:true */\n\t\tconst $thisEle = this;\n\n\t\tif ( showNameYourFormModal() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tpreFormSave( this );\n\n\t\tconst $form = jQuery( builderForm );\n\t\tconst v = JSON.stringify( $form.serializeArray() );\n\n\t\tjQuery( document.getElementById( 'frm_compact_fields' ) ).val( v );\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: { action: 'frm_save_form', frm_compact_fields: v, nonce: frmGlobal.nonce },\n\t\t\tsuccess: function( msg ) {\n\t\t\t\tafterFormSave( $thisEle );\n\n\t\t\t\tconst $postStuff = document.getElementById( 'post-body-content' );\n\t\t\t\tconst $html = document.createElement( 'div' );\n\t\t\t\t$html.setAttribute( 'class', 'frm_updated_message' );\n\t\t\t\t$html.innerHTML = msg;\n\t\t\t\t$postStuff.insertBefore( $html, $postStuff.firstChild );\n\t\t\t\treloadIfAddonActivatedAjaxSubmitOnly();\n\t\t\t},\n\t\t\terror: function() {\n\t\t\t\ttriggerSubmit( document.getElementById( 'frm_js_build_form' ) );\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction triggerSubmit( form ) {\n\t\tconst button = form.ownerDocument.createElement( 'input' );\n\t\tbutton.style.display = 'none';\n\t\tbutton.type = 'submit';\n\t\tform.append( button );\n\t\tbutton.click();\n\t\tbutton.remove();\n\t}\n\n\tfunction triggerChange( element ) {\n\t\tjQuery( element ).trigger( 'change' );\n\t}\n\n\tfunction submitNoAjax() {\n\t\t/*jshint validthis:true */\n\t\tlet form;\n\n\t\tif ( showNameYourFormModal() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tpreFormSave( this );\n\t\tform = jQuery( builderForm );\n\t\tjQuery( document.getElementById( 'frm_compact_fields' ) ).val( JSON.stringify( form.serializeArray() ) );\n\t\ttriggerSubmit( document.getElementById( 'frm_js_build_form' ) );\n\t}\n\n\t/**\n\t * Display a modal dialog for naming a new form template, if applicable.\n\t *\n\t * @return {boolean} True if the modal is successfully initialized and displayed; false otherwise.\n\t */\n\tfunction showNameYourFormModal() {\n\t\t// Exit early if the 'new_template' URL parameter is not set to 'true'\n\t\tif ( ! shouldShowNameYourFormNameModal() ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst modalWidget = initModal( '#frm-form-templates-modal', '440px' );\n\t\tif ( ! modalWidget ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Set the vertical offset for the modal and open it\n\t\toffsetModalY( modalWidget, '72px' );\n\t\tmodalWidget.dialog( 'open' );\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns true if 'Name Your Form' modal should be displayed.\n\t *\n\t * @return {Boolean}\n\t */\n\tfunction shouldShowNameYourFormNameModal() {\n\t\tconst formNameInput = document.getElementById( 'frm_form_name' );\n\t\tif ( formNameInput && formNameInput.value.trim() !== '' ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn 'true' === urlParams.get( 'new_template' ) && document.querySelector( '#frm_top_bar #frm_bs_dropdown .frm_bstooltip' )?.textContent.trim() === frm_admin_js.noTitleText; // eslint-disable-line camelcase\n\t}\n\n\t/**\n\t * Manages event handling for the 'Name your form' modal.\n\t *\n\t * Attaches click and keydown event listeners to the save button and input field.\n\t *\n\t * @return {void}\n\t */\n\tfunction addFormNameModalEvents() {\n\t\tconst saveFormNameButton = document.getElementById( 'frm-save-form-name-button' );\n\t\tconst newFormNameInput = document.getElementById( 'frm_new_form_name_input' );\n\n\t\t// Attach click event listener\n\t\tonClickPreventDefault( saveFormNameButton, onSaveFormNameButton );\n\n\t\t// Attach keydown event listener\n\t\tnewFormNameInput.addEventListener( 'keydown', function( event ) {\n\t\t\tif ( event.key === 'Enter' ) {\n\t\t\t\tonSaveFormNameButton.call( this, event );\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Handles the click event on the save form name button.\n\t *\n\t * @param {Event} event The click event object.\n\t * @return {void}\n\t */\n\tconst onSaveFormNameButton = event => {\n\t\tconst newFormName = document.getElementById( 'frm_new_form_name_input' ).value.trim();\n\n\t\t// Prepare FormData for the POST request\n\t\tconst formData = new FormData();\n\t\tformData.append( 'form_id', urlParams.get( 'id' ) );\n\t\tformData.append( 'form_name', newFormName );\n\n\t\t// Perform the POST request\n\t\tdoJsonPost( 'rename_form', formData ).then( data => {\n\t\t\t// Remove the 'new_template' parameter from the URL and update the browser history\n\t\t\turlParams.delete( 'new_template' );\n\t\t\tcurrentURL.search = urlParams.toString();\n\t\t\thistory.replaceState( {}, '', currentURL.toString() );\n\n\t\t\tif ( null !== document.getElementById( 'frm_notification_settings' ) ) {\n\t\t\t\tdocument.getElementById( 'frm_form_name' ).value = newFormName;\n\t\t\t\tdocument.getElementById( 'frm_form_key' ).value = data.form_key;\n\t\t\t}\n\n\t\t\t// Trigger the 'Save' button click using jQuery\n\t\t\tjQuery( '#frm-publishing' ).find( '.frm_button_submit' ).trigger( 'click' );\n\t\t} );\n\t};\n\n\tfunction preFormSave( b ) {\n\t\tremoveWPUnload();\n\t\tif ( jQuery( 'form.inplace_form' ).length ) {\n\t\t\tjQuery( '.inplace_save, .postbox' ).trigger( 'click' );\n\t\t}\n\n\t\tif ( b.classList.contains( 'frm_button_submit' ) ) {\n\t\t\tb.classList.add( 'frm_loading_form' );\n\t\t} else {\n\t\t\tb.classList.add( 'frm_loading_button' );\n\t\t}\n\t\tb.setAttribute( 'aria-busy', 'true' );\n\n\t\tadjustFormatInputBeforeSave();\n\t}\n\n\t/**\n\t * Updates the format input based on the selected format type from dropdowns during the form save process.\n\t *\n\t * @since 6.9\n\t *\n\t * @return {void}\n\t */\n\tfunction adjustFormatInputBeforeSave() {\n\t\tconst formatTypes = document.querySelectorAll( '.frm_format_dropdown, .frm_phone_type_dropdown' );\n\t\tconst valueMap = {\n\t\t\tnone: '',\n\t\t\tinternational: 'international',\n\t\t\tcurrency: 'currency',\n\t\t\tnumber: 'number'\n\t\t};\n\n\t\tformatTypes.forEach( formatType => {\n\t\t\tconst value = formatType.value;\n\t\t\tif ( value in valueMap ) {\n\t\t\t\tconst formatInput = document.getElementById( `frm_format_${ formatType.dataset.fieldId }` );\n\t\t\t\tformatInput.value = valueMap[ value ];\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction afterFormSave( button ) {\n\t\tbutton.classList.remove( 'frm_loading_form' );\n\t\tbutton.classList.remove( 'frm_loading_button' );\n\t\tresetOptionTextDetails();\n\t\tfieldsUpdated = 0;\n\t\tbutton.setAttribute( 'aria-busy', 'false' );\n\n\t\tsetTimeout( function() {\n\t\t\tjQuery( '.frm_updated_message' ).fadeOut( 'slow', function() {\n\t\t\t\tthis.remove();\n\t\t\t} );\n\t\t}, 5000 );\n\t}\n\n\tfunction initUpgradeModal() {\n\t\tconst upgradePopup = require( './upgrade-popup' );\n\t\tupgradePopup.initUpgradeModal();\n\t}\n\n\tfunction addOneClick( element, type, upgradeLabel ) {\n\t\tconst upgradePopup = require( './upgrade-popup' );\n\t\tupgradePopup.addOneClick( element, type, upgradeLabel );\n\t}\n\n\t/**\n\t * Opens a basic modal with the given title and content.\n\t *\n\t * @param {Event} event The event object.\n\t * @return {void}\n\t */\n\tfunction showBasicModal( event ) {\n\t\tconst button = event.target.dataset?.modalTitle ? event.target : event.target.closest( '[data-modal-title]' );\n\t\tif ( ! button ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { modalTitle, modalContent } = button.dataset;\n\t\tif ( ! modalTitle || ! modalContent ) {\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\n\t\tfrmDom.modal.maybeCreateModal(\n\t\t\t'frmBasicModal',\n\t\t\t{\n\t\t\t\ttitle: modalTitle,\n\t\t\t\tcontent: div( {\n\t\t\t\t\tclassName: 'inside',\n\t\t\t\t\tchild: span( modalContent ),\n\t\t\t\t} ),\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction getRequiredLicenseFromTrigger( element ) {\n\t\tif ( element.dataset.requires ) {\n\t\t\treturn element.dataset.requires;\n\t\t}\n\t\treturn 'Pro';\n\t}\n\n\tfunction populateUpgradeTab( element ) {\n\t\tconst title = element.dataset.upgrade;\n\n\t\tconst tab = element.getAttribute( 'href' ).replace( '#', '' );\n\t\tconst container = document.querySelector( '.frm_' + tab ) || document.querySelector( '.' + tab );\n\n\t\tif ( ! container ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( container.querySelector( '.frm-upgrade-message' ) ) {\n\t\t\t// Tab has already been populated.\n\t\t\treturn;\n\t\t}\n\n\t\tconst h2 = container.querySelector( 'h2' );\n\t\th2.style.borderBottom = 'none';\n\n\t\t/* translators: %s: Form Setting section name (ie Form Permissions, Form Scheduling). */\n\t\th2.textContent = sprintf( __( '%s are not installed', 'formidable' ), title );\n\n\t\tcontainer.classList.add( 'frmcenter' );\n\n\t\tconst upgradeModal = document.getElementById( 'frm_upgrade_modal' );\n\t\tappendClonedModalElementToContainer( 'frm-oneclick' );\n\t\tappendClonedModalElementToContainer( 'frm-addon-status' );\n\n\t\t// Borrow the call to action from the Upgrade upgradeModal which should exist on the settings page (it is still used for other upgrades including Actions).\n\t\tconst upgradeModalLink = upgradeModal.querySelector( '.frm-upgrade-link' );\n\t\tif ( upgradeModalLink ) {\n\t\t\tlet upgradeButton;\n\t\t\tlet upgradeActions = upgradeModalLink.closest( '.frm-upgrade-modal-actions' );\n\t\t\tif ( upgradeActions ) {\n\t\t\t\tupgradeActions = upgradeActions.cloneNode( true );\n\t\t\t\tupgradeButton = upgradeActions.querySelector( '.frm-upgrade-link' );\n\t\t\t} else {\n\t\t\t\tupgradeButton = upgradeModalLink.cloneNode( true );\n\t\t\t}\n\t\t\tconst level = upgradeButton.querySelector( '.license-level' );\n\t\t\tif ( level ) {\n\t\t\t\tlevel.textContent = getRequiredLicenseFromTrigger( element );\n\t\t\t}\n\t\t\tcontainer.append( upgradeActions || upgradeButton );\n\n\t\t\t// Maybe append the secondary \"Already purchased?\" link from the upgradeModal as well.\n\t\t\tif ( upgradeModalLink.nextElementSibling && upgradeModalLink.nextElementSibling.querySelector( '.frm-link-secondary' ) ) {\n\t\t\t\tcontainer.append( upgradeModalLink.nextElementSibling.cloneNode( true ) );\n\t\t\t}\n\n\t\t\tappendClonedModalElementToContainer( 'frm-oneclick-button' );\n\t\t}\n\n\t\tappendClonedModalElementToContainer( 'frm-upgrade-message' );\n\n\t\tlet upgradeLabel = element.dataset.message;\n\n\t\tif ( upgradeLabel === undefined ) {\n\t\t\tupgradeLabel = element.dataset.upgrade;\n\t\t}\n\t\taddOneClick( element, 'tab', upgradeLabel );\n\n\t\tif ( element.dataset.screenshot ) {\n\t\t\tcontainer.append( getScreenshotWrapper( element.dataset.screenshot ) );\n\t\t}\n\n\t\tfunction appendClonedModalElementToContainer( className ) {\n\t\t\tcontainer.append( upgradeModal.querySelector( '.' + className ).cloneNode( true ) );\n\t\t}\n\t}\n\n\tfunction getScreenshotWrapper( screenshot ) {\n\t\tconst folderUrl = frmGlobal.url + '/images/screenshots/';\n\t\tconst wrapper = div( {\n\t\t\tclassName: 'frm-settings-screenshot-wrapper',\n\t\t\tchildren: [\n\t\t\t\tgetToolbar(),\n\t\t\t\tdiv( { child: img( { src: folderUrl + screenshot } ) } )\n\t\t\t]\n\t\t} );\n\n\t\tfunction getToolbar() {\n\t\t\tconst children = getColorIcons();\n\t\t\tchildren.push( img( { src: frmGlobal.url + '/images/tab.svg' } ) );\n\t\t\treturn div( {\n\t\t\t\tclassName: 'frm-settings-screenshot-toolbar',\n\t\t\t\tchildren\n\t\t\t} );\n\t\t}\n\n\t\tfunction getColorIcons() {\n\t\t\treturn [ '#ED8181', '#EDE06A', '#80BE30' ].map(\n\t\t\t\tcolor => {\n\t\t\t\t\tconst circle = div( { className: 'frm-minmax-icon' } );\n\t\t\t\t\tcircle.style.backgroundColor = color;\n\t\t\t\t\treturn circle;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn wrapper;\n\t}\n\n\t/* Form settings */\n\n\tfunction showInputIcon( parentClass ) {\n\t\tif ( typeof parentClass === 'undefined' ) {\n\t\t\tparentClass = '';\n\t\t}\n\t\tmaybeAddFieldSelection( parentClass );\n\t\tjQuery( parentClass + ' .frm_has_shortcodes:not(.frm-with-right-icon) input,' + parentClass + ' .frm_has_shortcodes:not(.frm-with-right-icon) textarea' ).wrap( '<span class=\"frm-with-right-icon\"></span>' ).before( '<svg class=\"frmsvg frm-show-box\"><use href=\"#frm_more_horiz_solid_icon\"/></svg>' );\n\t}\n\n\t/**\n\t * For reverse compatibility. Check for fields that were\n\t * using the old sidebar.\n\t */\n\tfunction maybeAddFieldSelection( parentClass ) {\n\t\tlet i,\n\t\t\tmissingClass = jQuery( parentClass + ' :not(.frm_has_shortcodes) .frm_not_email_message, ' + parentClass + ' :not(.frm_has_shortcodes) .frm_not_email_to, ' + parentClass + ' :not(.frm_has_shortcodes) .frm_not_email_subject' );\n\t\tfor ( i = 0; i < missingClass.length; i++ ) {\n\t\t\tmissingClass[ i ].parentNode.classList.add( 'frm_has_shortcodes' );\n\t\t}\n\t}\n\n\tfunction showSuccessOpt() {\n\t\t/*jshint validthis:true */\n\t\tlet c = 'success';\n\t\tif ( this.name === 'options[edit_action]' ) {\n\t\t\tc = 'edit';\n\t\t}\n\t\tconst v = jQuery( this ).val();\n\t\tjQuery( '.' + c + '_action_box' ).hide();\n\t\tif ( v === 'redirect' ) {\n\t\t\tjQuery( '.' + c + '_action_redirect_box.' + c + '_action_box' ).fadeIn( 'slow' );\n\t\t} else if ( v === 'page' ) {\n\t\t\tjQuery( '.' + c + '_action_page_box.' + c + '_action_box' ).fadeIn( 'slow' );\n\t\t} else {\n\t\t\tjQuery( '.' + c + '_action_message_box.' + c + '_action_box' ).fadeIn( 'slow' );\n\t\t}\n\t}\n\n\tfunction copyFormAction( event ) {\n\t\tif ( waitForActionToLoadBeforeCopy( event.target ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst targetSettings = event.target.closest( '.frm_form_action_settings' );\n\t\tconst wysiwygs = targetSettings.querySelectorAll( '.wp-editor-area' );\n\t\tif ( wysiwygs.length ) {\n\t\t\t// Temporary remove TinyMCE before cloning to avoid TinyMCE conflicts.\n\t\t\twysiwygs.forEach( wysiwyg => {\n\t\t\t\ttinymce.EditorManager.execCommand( 'mceRemoveEditor', true, wysiwyg.id );\n\t\t\t} );\n\t\t}\n\n\t\tconst $action = jQuery( targetSettings ).clone();\n\t\tconst currentID = $action.attr( 'id' ).replace( 'frm_form_action_', '' );\n\t\tconst newID = newActionId( currentID );\n\n\t\t$action.find( '.frm_action_id, .frm-btn-group' ).remove();\n\t\t$action.find( 'input[name$=\"[' + currentID + '][ID]\"]' ).val( '' );\n\t\t$action.find( '.widget-inside' ).hide();\n\n\t\t// the .html() gets original values, so they need to be set\n\t\t$action.find( 'input[type=text], textarea, input[type=number]' ).prop( 'defaultValue', function() {\n\t\t\treturn this.value;\n\t\t} );\n\n\t\t$action.find( 'input[type=checkbox], input[type=radio]' ).prop( 'defaultChecked', function() {\n\t\t\treturn this.checked;\n\t\t} );\n\n\t\tconst rename = new RegExp( '\\\\[' + currentID + '\\\\]', 'g' );\n\t\tconst reid = new RegExp( '_' + currentID + '\"', 'g' );\n\t\tconst reclass = new RegExp( '-' + currentID + '\"', 'g' );\n\t\tconst revalue = new RegExp( '\"' + currentID + '\"', 'g' ); // if a field id matches, this could cause trouble\n\n\t\tlet html = $action.html().replace( rename, '[' + newID + ']' ).replace( reid, '_' + newID + '\"' );\n\t\thtml = html.replace( reclass, '-' + newID + '\"' ).replace( revalue, '\"' + newID + '\"' );\n\n\t\tconst newAction = div( {\n\t\t\tid: 'frm_form_action_' + newID,\n\t\t\tclassName: $action.get( 0 ).className\n\t\t} );\n\t\tnewAction.setAttribute( 'data-actionkey', newID );\n\t\tnewAction.innerHTML = html;\n\t\tnewAction.querySelectorAll( '.wp-editor-wrap, .wp-editor-wrap *' ).forEach(\n\t\t\telement => {\n\t\t\t\tif ( 'string' === typeof element.className ) {\n\t\t\t\t\telement.className = element.className.replace( currentID, newID );\n\t\t\t\t}\n\t\t\t\telement.id = element.id.replace( currentID, newID );\n\t\t\t}\n\t\t);\n\t\tnewAction.classList.remove( 'open' );\n\t\tdocument.getElementById( 'frm_notification_settings' ).append( newAction );\n\n\t\tif ( wysiwygs.length ) {\n\t\t\t// Re-initialize the original wysiwyg which was removed before cloning.\n\t\t\twysiwygs.forEach( wysiwyg => {\n\t\t\t\tfrmDom.wysiwyg.init( wysiwyg );\n\t\t\t} );\n\n\t\t\tnewAction.querySelectorAll( '.wp-editor-area' ).forEach( wysiwyg => {\n\t\t\t\tfrmDom.wysiwyg.init( wysiwyg );\n\t\t\t} );\n\t\t}\n\n\t\tif ( newAction.classList.contains( 'frm_single_on_submit_settings' ) ) {\n\t\t\tconst autocompleteInput = newAction.querySelector( 'input.frm-page-search' );\n\t\t\tif ( autocompleteInput ) {\n\t\t\t\tinitAutocomplete( newAction );\n\t\t\t}\n\t\t}\n\n\t\tinitiateMultiselect();\n\n\t\tconst hookName = 'frm_after_duplicate_action';\n\t\twp.hooks.doAction( hookName, newAction );\n\t}\n\n\tfunction waitForActionToLoadBeforeCopy( element ) {\n\t\tlet $trigger = jQuery( element ),\n\t\t\t$original = $trigger.closest( '.frm_form_action_settings' ),\n\t\t\t$inside = $original.find( '.widget-inside' ),\n\t\t\t$top;\n\n\t\tif ( $inside.find( 'p, div, table' ).length ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t$top = $original.find( '.widget-top' );\n\t\t$top.on( 'frm-action-loaded', function() {\n\t\t\t$trigger.trigger( 'click' );\n\t\t\t$original.removeClass( 'open' );\n\t\t\t$inside.hide();\n\t\t} );\n\t\t$top.trigger( 'click' );\n\t\treturn true;\n\t}\n\n\tfunction newActionId( currentID ) {\n\t\tlet newID = parseInt( currentID, 10 ) + 11;\n\t\tconst exists = document.getElementById( 'frm_form_action_' + newID );\n\t\tif ( exists !== null ) {\n\t\t\tnewID++;\n\t\t\tnewID = newActionId( newID );\n\t\t}\n\t\treturn newID;\n\t}\n\n\tfunction addFormAction() {\n\t\t/*jshint validthis:true */\n\t\tconst type = jQuery( this ).data( 'actiontype' );\n\n\t\tif ( isAtLimitForActionType( type ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst actionId = getNewActionId();\n\t\tconst formId = thisFormId;\n\n\t\tconst placeholderSetting = document.createElement( 'div' );\n\t\tplaceholderSetting.classList.add( 'frm_single_' + type + '_settings' );\n\n\t\tconst actionsList = document.getElementById( 'frm_notification_settings' );\n\t\tactionsList.append( placeholderSetting );\n\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_add_form_action',\n\t\t\t\ttype: type,\n\t\t\t\tlist_id: actionId,\n\t\t\t\tform_id: formId,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: handleAddFormActionSuccess\n\t\t} );\n\n\t\tfunction handleAddFormActionSuccess( html ) {\n\t\t\tfieldUpdated();\n\t\t\tplaceholderSetting.remove();\n\n\t\t\tcloseOpenActions();\n\n\t\t\tconst newActionContainer = div();\n\t\t\tnewActionContainer.innerHTML = html;\n\n\t\t\tconst widgetTop = newActionContainer.querySelector( '.widget-top' );\n\t\t\tArray.from( newActionContainer.children ).forEach( child => actionsList.append( child ) );\n\n\t\t\tjQuery( '.frm_form_action_settings' ).fadeIn( 'slow' );\n\n\t\t\tconst newAction = document.getElementById( 'frm_form_action_' + actionId );\n\n\t\t\tnewAction.classList.add( 'open' );\n\t\t\tdocument.getElementById( 'post-body-content' ).scroll( {\n\t\t\t\ttop: newAction.offsetTop + 10,\n\t\t\t\tleft: 0,\n\t\t\t\tbehavior: 'smooth'\n\t\t\t} );\n\n\t\t\t// Check if icon should be active\n\t\t\tcheckActiveAction( type );\n\t\t\tshowInputIcon( '#frm_form_action_' + actionId );\n\n\t\t\tinitiateMultiselect();\n\t\t\tinitAutocomplete( newAction );\n\n\t\t\tif ( widgetTop ) {\n\t\t\t\tjQuery( widgetTop ).trigger( 'frm-action-loaded' );\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Fires after added a new form action.\n\t\t\t *\n\t\t\t * @since 5.5.4\n\t\t\t *\n\t\t\t * @param {HTMLElement} formAction Form action element.\n\t\t\t */\n\t\t\tfrmAdminBuild.hooks.doAction( 'frm_added_form_action', newAction );\n\t\t}\n\t}\n\n\tfunction closeOpenActions() {\n\t\tdocument.querySelectorAll( '.frm_form_action_settings.open' ).forEach(\n\t\t\tsetting => setting.classList.remove( 'open' )\n\t\t);\n\t}\n\n\tfunction toggleActionGroups() {\n\t\t/*jshint validthis:true */\n\t\tconst actions = document.getElementById( 'frm_email_addon_menu' ).classList,\n\t\t\tsearch = document.getElementById( 'actions-search-input' );\n\n\t\tif ( actions.contains( 'frm-all-actions' ) ) {\n\t\t\tactions.remove( 'frm-all-actions' );\n\t\t\tactions.add( 'frm-limited-actions' );\n\t\t} else {\n\t\t\tactions.add( 'frm-all-actions' );\n\t\t\tactions.remove( 'frm-limited-actions' );\n\t\t}\n\n\t\t// Reset search.\n\t\tsearch.value = '';\n\t\ttriggerEvent( search, 'input' );\n\t}\n\n\tfunction getNewActionId() {\n\t\tlet actionSettings = document.querySelectorAll( '.frm_form_action_settings' ),\n\t\t\tlen = getNewRowId( actionSettings, 'frm_form_action_' );\n\t\tif ( typeof document.getElementById( 'frm_form_action_' + len ) !== 'undefined' ) {\n\t\t\tlen = len + 100;\n\t\t}\n\t\tif ( lastNewActionIdReturned >= len ) {\n\t\t\tlen = lastNewActionIdReturned + 1;\n\t\t}\n\t\tlastNewActionIdReturned = len;\n\t\treturn len;\n\t}\n\n\tfunction clickAction( obj ) {\n\t\tconst $thisobj = jQuery( obj );\n\n\t\tif ( obj.className.includes( 'selected' ) ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( obj.className.includes( 'edit_field_type_end_divider' ) && $thisobj.closest( '.edit_field_type_divider' ).hasClass( 'no_repeat_section' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdeselectFields();\n\t\t$thisobj.addClass( 'selected' );\n\t\tshowFieldOptions( obj );\n\t}\n\n\t/**\n\t * When a field is selected, show the field settings in the sidebar.\n\t */\n\tfunction showFieldOptions( obj ) {\n\t\tlet i, singleField,\n\t\t\tfieldId = obj.getAttribute( 'data-fid' ),\n\t\t\tfieldType = obj.getAttribute( 'data-type' ),\n\t\t\tallFieldSettings = document.querySelectorAll( '.frm-single-settings:not(.frm_hidden)' );\n\n\t\tfor ( i = 0; i < allFieldSettings.length; i++ ) {\n\t\t\tallFieldSettings[ i ].classList.add( 'frm_hidden' );\n\t\t}\n\n\t\tsingleField = document.getElementById( 'frm-single-settings-' + fieldId );\n\t\tmoveFieldSettings( singleField );\n\n\t\tif ( fieldType && 'quantity' === fieldType ) {\n\t\t\tpopProductFields( jQuery( singleField ).find( '.frmjs_prod_field_opt' )[ 0 ] );\n\t\t}\n\n\t\t// Scroll settings panel to top\n\t\tdocument.querySelector( '.frm-settings-panel.frm-scrollbar-wrapper' )?.scrollTo( {\n\t\t\ttop: 0,\n\t\t\tbehavior: 'instant'\n\t\t} );\n\n\t\tsingleField.classList.remove( 'frm_hidden' );\n\t\tdocument.getElementById( 'frm-options-panel-tab' ).click();\n\n\t\tconst editor = singleField.querySelector( '.wp-editor-area' );\n\t\tif ( editor ) {\n\t\t\tfrmDom.wysiwyg.init(\n\t\t\t\teditor,\n\t\t\t\t{ setupCallback: setupTinyMceEventHandlers }\n\t\t\t);\n\t\t}\n\n\t\twp.hooks.doAction( 'frmShowedFieldSettings', obj, singleField );\n\t\tmaybeAddShortcodesModalTriggerIcon( fieldType, fieldId, singleField );\n\t}\n\n\tfunction maybeAddShortcodesModalTriggerIcon( fieldType, fieldId, singleField ) {\n\t\tif ( ! shouldAddShortcodesModalTriggerIcon( fieldType ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst fieldSettingsSelector = '#frm-single-settings-' + fieldId;\n\t\tif ( document.querySelector( fieldSettingsSelector + ' .frm-show-box' ) ) {\n\t\t\treturn;\n\t\t}\n\t\tsingleField.querySelector( '.wp-editor-container' )?.classList.add( 'frm_has_shortcodes' );\n\n\t\tconst wrapTextareaWithIconContainer = () => {\n\t\t\tconst textareas = document.querySelectorAll( fieldSettingsSelector + ' .frm_has_shortcodes textarea' );\n\t\t\ttextareas.forEach( textarea => {\n\t\t\t\tconst wrapperSpan = span( { className: 'frm-with-right-icon' } );\n\t\t\t\ttextarea.parentNode.insertBefore( wrapperSpan, textarea );\n\t\t\t\twrapperSpan.append( createModalTriggerIcon() );\n\t\t\t\twrapperSpan.append( textarea );\n\t\t\t} );\n\t\t};\n\n\t\tconst createModalTriggerIcon = () => {\n\t\t\treturn frmDom.svg( { href: '#frm_more_horiz_solid_icon', classList: [ 'frm-show-box' ] } );\n\t\t};\n\n\t\twrapTextareaWithIconContainer();\n\t}\n\n\tfunction shouldAddShortcodesModalTriggerIcon( fieldType ) {\n\t\tconst fieldsWithShortcodesBox = wp.hooks.applyFilters( 'frm_fields_with_shortcode_popup', [ 'html' ] );\n\n\t\treturn fieldsWithShortcodesBox.includes( fieldType );\n\t}\n\n\tfunction setupTinyMceEventHandlers( editor ) {\n\t\teditor.on( 'Change', function() {\n\t\t\thandleTinyMceChange( editor );\n\t\t} );\n\t}\n\n\tfunction handleTinyMceChange( editor ) {\n\t\tif ( ! isTinyMceActive() || tinyMCE.activeEditor.isHidden() ) {\n\t\t\treturn;\n\t\t}\n\n\t\teditor.targetElm.value = editor.getContent();\n\t\tjQuery( editor.targetElm ).trigger( 'change' );\n\t}\n\n\tfunction isTinyMceActive() {\n\t\tlet activeSettings, wrapper;\n\n\t\tactiveSettings = document.querySelector( '.frm-single-settings:not(.frm_hidden)' );\n\t\tif ( ! activeSettings ) {\n\t\t\treturn false;\n\t\t}\n\n\t\twrapper = activeSettings.querySelector( '.wp-editor-wrap' );\n\t\treturn null !== wrapper && wrapper.classList.contains( 'tmce-active' );\n\t}\n\n\t/**\n\t * Move the settings to the sidebar the first time they are changed or selected.\n\t * Keep the end marker at the end of the form.\n\t */\n\tfunction moveFieldSettings( singleField ) {\n\t\tlet self = this;\n\n\t\tif ( singleField === null ) {\n\t\t\t// The field may have not been loaded yet via ajax.\n\t\t\treturn;\n\t\t}\n\n\t\tthis.fragment = document.createDocumentFragment();\n\n\t\tthis.initOnceInAllInstances = function() {\n\t\t\tif ( 'undefined' !== typeof moveFieldSettings.prototype.endMarker ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// perform a single search in the DOM and use it across all moveFieldSettings instances\n\t\t\tmoveFieldSettings.prototype.endMarker = document.getElementById( 'frm-end-form-marker' );\n\t\t};\n\n\t\tthis.append = function( field ) {\n\t\t\tconst classname = null !== field ? field.parentElement.classList : '';\n\t\t\tif ( null === field || ( ! classname.contains( 'frm_field_box' ) && ! classname.contains( 'divider_section_only' ) ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tself.fragment.append( field );\n\t\t};\n\n\t\tthis.moveFields = function() {\n\t\t\tbuilderForm.insertBefore( self.fragment, moveFieldSettings.prototype.endMarker );\n\t\t};\n\n\t\tthis.initOnceInAllInstances();\n\n\t\t// Move the field if function is called as function with a singleField passed as arg.\n\t\t// In this particular case only 1 field is needed to be moved so the field will get instantly moved.\n\t\t// \"singleField\" may be undefined when it's called as a constructor instead of a function. Use the constructor to add multiple fields which are passed through \"append\" and move these all at once via \"moveFields\".\n\t\tif ( 'undefined' !== typeof singleField ) {\n\t\t\tthis.append( singleField );\n\t\t\tthis.moveFields();\n\t\t\treturn;\n\t\t}\n\n\t\treturn {\n\t\t\tappend: this.append,\n\t\t\tmoveFields: this.moveFields\n\t\t};\n\t}\n\n\tfunction showEmailRow() {\n\t\t/*jshint validthis:true */\n\t\tconst actionKey = jQuery( this ).closest( '.frm_form_action_settings' ).data( 'actionkey' );\n\t\tconst rowType = this.getAttribute( 'data-emailrow' );\n\n\t\tjQuery( '#frm_form_action_' + actionKey + ' .frm_' + rowType + '_row' ).fadeIn( 'slow' );\n\t\tjQuery( this ).fadeOut( 'slow' );\n\t}\n\n\tfunction hideEmailRow() {\n\t\t/*jshint validthis:true */\n\t\tconst actionBox = jQuery( this ).closest( '.frm_form_action_settings' ),\n\t\t\trowType = this.getAttribute( 'data-emailrow' ),\n\t\t\temailRowSelector = '.frm_' + rowType + '_row',\n\t\t\temailButtonSelector = '.frm_' + rowType + '_button';\n\n\t\tjQuery( actionBox ).find( emailButtonSelector ).fadeIn( 'slow' );\n\t\tjQuery( actionBox ).find( emailRowSelector ).fadeOut( 'slow', function() {\n\t\t\tjQuery( actionBox ).find( emailRowSelector + ' input' ).val( '' );\n\t\t} );\n\t}\n\n\tfunction showEmailWarning() {\n\t\t/*jshint validthis:true */\n\t\tconst actionBox = jQuery( this ).closest( '.frm_form_action_settings' ),\n\t\t\temailRowSelector = '.frm_from_to_match_row',\n\t\t\tfromVal = actionBox.find( 'input[name$=\"[post_content][from]\"]' ).val(),\n\t\t\ttoVal = actionBox.find( 'input[name$=\"[post_content][email_to]\"]' ).val();\n\n\t\tif ( fromVal === toVal ) {\n\t\t\tjQuery( actionBox ).find( emailRowSelector ).fadeIn( 'slow' );\n\t\t} else {\n\t\t\tjQuery( actionBox ).find( emailRowSelector ).fadeOut( 'slow' );\n\t\t}\n\t}\n\n\tfunction checkActiveAction( type ) {\n\t\tconst actionTriggers = document.querySelectorAll( '.frm_' + type + '_action' );\n\n\t\tif ( isAtLimitForActionType( type ) ) {\n\t\t\tconst addAlreadyUsedClass = getLimitForActionType( type ) > 0;\n\t\t\tmarkActionTriggersInactive( actionTriggers, addAlreadyUsedClass );\n\t\t\treturn;\n\t\t}\n\n\t\tmarkActionTriggersActive( actionTriggers );\n\t}\n\n\tfunction markActionTriggersActive( triggers ) {\n\t\ttriggers.forEach(\n\t\t\ttrigger => {\n\t\t\t\tif ( trigger.querySelector( '.frm_show_upgrade' ) ) {\n\t\t\t\t\t// Prevent disabled action becoming active.\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttrigger.classList.remove( 'frm_inactive_action', 'frm_already_used' );\n\t\t\t\ttrigger.classList.add( 'frm_active_action' );\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction markActionTriggersInactive( triggers, addAlreadyUsedClass ) {\n\t\ttriggers.forEach(\n\t\t\ttrigger => {\n\t\t\t\ttrigger.classList.remove( 'frm_active_action' );\n\t\t\t\ttrigger.classList.add( 'frm_inactive_action' );\n\t\t\t\tif ( addAlreadyUsedClass ) {\n\t\t\t\t\ttrigger.classList.add( 'frm_already_used' );\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction isAtLimitForActionType( type ) {\n\t\tlet atLimit = getNumberOfActionsForType( type ) >= getLimitForActionType( type );\n\n\t\tconst hookName = 'frm_action_at_limit';\n\t\tconst hookArgs = { type };\n\t\tatLimit = wp.hooks.applyFilters( hookName, atLimit, hookArgs );\n\n\t\treturn atLimit;\n\t}\n\n\tfunction getLimitForActionType( type ) {\n\t\treturn parseInt( jQuery( '.frm_' + type + '_action' ).data( 'limit' ), 10 );\n\t}\n\n\tfunction getNumberOfActionsForType( type ) {\n\t\treturn jQuery( '.frm_single_' + type + '_settings' ).length;\n\t}\n\n\tfunction actionLimitMessage() {\n\t\tlet message = frmAdminJs.only_one_action;\n\t\tlet limit = this.dataset.limit;\n\n\t\tif ( 'undefined' !== typeof limit ) {\n\t\t\tlimit = parseInt( limit );\n\t\t\tif ( limit > 1 ) {\n\t\t\t\tmessage = message.replace( 1, limit ).trim();\n\t\t\t} else {\n\t\t\t\tmessage += ' ' + frmAdminJs.edit_action_text;\n\t\t\t}\n\t\t}\n\n\t\tinfoModal( message );\n\t}\n\n\tfunction addFormLogicRow() {\n\t\t/*jshint validthis:true */\n\t\tconst id = jQuery( this ).data( 'emailkey' );\n\t\tconst type = jQuery( this ).closest( '.frm_form_action_settings' ).find( '.frm_action_name' ).val();\n\t\tconst formId = document.getElementById( 'form_id' ).value;\n\t\tconst logicRowsContainer = document.getElementById( 'frm_logic_row_' + id );\n\t\tconst logicRows = logicRowsContainer.querySelectorAll( '.frm_logic_row' );\n\t\tconst newRowID = getNewRowId( logicRows, 'frm_logic_' + id + '_' );\n\t\tconst placeholder = div( {\n\t\t\tid: 'frm_logic_' + id + '_' + newRowID,\n\t\t\tclassName: 'frm_logic_row frm_hidden'\n\t\t} );\n\n\t\tlogicRowsContainer.append( placeholder );\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST', url: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_add_form_logic_row',\n\t\t\t\temail_id: id,\n\t\t\t\tform_id: formId,\n\t\t\t\tmeta_name: newRowID,\n\t\t\t\ttype: type,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: function( html ) {\n\t\t\t\tjQuery( document.getElementById( 'logic_link_' + id ) ).fadeOut( 'slow', () => {\n\t\t\t\t\tplaceholder.insertAdjacentHTML( 'beforebegin', html );\n\t\t\t\t\tplaceholder.remove();\n\n\t\t\t\t\t// Show conditional logic options after \"Add Conditional Logic\" is clicked.\n\t\t\t\t\tjQuery( logicRowsContainer ).parent( '.frm_logic_rows' ).fadeIn( 'slow' );\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t\treturn false;\n\t}\n\n\tfunction checkDupPost() {\n\t\t/*jshint validthis:true */\n\t\tconst postField = jQuery( 'select.frm_single_post_field' );\n\t\tpostField.css( 'border-color', '' );\n\t\tconst $t = this;\n\t\tconst v = jQuery( $t ).val();\n\t\tif ( v === '' || v === 'checkbox' ) {\n\t\t\treturn false;\n\t\t}\n\t\tpostField.each( function() {\n\t\t\tif ( jQuery( this ).val() === v && this.name !== $t.name ) {\n\t\t\t\tthis.style.borderColor = 'red';\n\t\t\t\tjQuery( $t ).val( '' );\n\t\t\t\tinfoModal( frmAdminJs.field_already_used );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction togglePostContent() {\n\t\t/*jshint validthis:true */\n\t\tconst v = jQuery( this ).val();\n\t\tif ( '' === v ) {\n\t\t\tjQuery( '.frm_post_content_opt, select.frm_dyncontent_opt' ).hide().val( '' );\n\t\t\tjQuery( '.frm_dyncontent_opt' ).hide();\n\t\t} else if ( 'post_content' === v ) {\n\t\t\tjQuery( '.frm_post_content_opt' ).show();\n\t\t\tjQuery( '.frm_dyncontent_opt' ).hide();\n\t\t\tjQuery( 'select.frm_dyncontent_opt' ).val( '' );\n\t\t} else {\n\t\t\tjQuery( '.frm_post_content_opt' ).hide().val( '' );\n\t\t\tjQuery( 'select.frm_dyncontent_opt, .frm_form_field.frm_dyncontent_opt' ).show();\n\t\t}\n\t}\n\n\tfunction fillDyncontent() {\n\t\t/*jshint validthis:true */\n\t\tconst v = jQuery( this ).val();\n\t\tconst $dyn = jQuery( document.getElementById( 'frm_dyncontent' ) );\n\t\tif ( '' === v || 'new' === v ) {\n\t\t\t$dyn.val( '' );\n\t\t\tjQuery( '.frm_dyncontent_opt' ).show();\n\t\t} else {\n\t\t\tjQuery.ajax( {\n\t\t\t\ttype: 'POST', url: ajaxurl,\n\t\t\t\tdata: { action: 'frm_display_get_content', id: v, nonce: frmGlobal.nonce },\n\t\t\t\tsuccess: function( val ) {\n\t\t\t\t\t$dyn.val( val );\n\t\t\t\t\tjQuery( '.frm_dyncontent_opt' ).show();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction switchPostType() {\n\t\t/*jshint validthis:true */\n\t\t// update all rows of categories/taxonomies\n\t\tlet curSelect, newSelect,\n\t\t\tcatRows = document.getElementById( 'frm_posttax_rows' ).childNodes,\n\t\t\tpostParentField = document.querySelector( '.frm_post_parent_field' ),\n\t\t\tpostMenuOrderField = document.querySelector( '.frm_post_menu_order_field' ),\n\t\t\tpostType = this.value;\n\n\t\t// Get new category/taxonomy options\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_replace_posttax_options',\n\t\t\t\tpost_type: postType,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: function( html ) {\n\t\t\t\t// Loop through each category row, and replace the first dropdown\n\t\t\t\tfor ( let i = 0; i < catRows.length; i++ ) {\n\t\t\t\t\t// Check if current element is a div\n\t\t\t\t\tif ( catRows[ i ].tagName !== 'DIV' ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Get current category select\n\t\t\t\t\tcurSelect = catRows[ i ].getElementsByTagName( 'select' )[ 0 ];\n\n\t\t\t\t\t// Set up new select\n\t\t\t\t\tnewSelect = document.createElement( 'select' );\n\t\t\t\t\tnewSelect.innerHTML = html;\n\t\t\t\t\tnewSelect.className = curSelect.className;\n\t\t\t\t\tnewSelect.name = curSelect.name;\n\n\t\t\t\t\t// Replace the old select with the new select\n\t\t\t\t\tcatRows[ i ].replaceChild( newSelect, curSelect );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\t// Get new post parent option.\n\t\tif ( postParentField ) {\n\t\t\tgetActionOption(\n\t\t\t\tpostParentField,\n\t\t\t\tpostType,\n\t\t\t\t'frm_get_post_parent_option',\n\t\t\t\tfunction( response, optName ) {\n\t\t\t\t\t// The replaced string is declared in FrmProFormActionController::ajax_get_post_menu_order_option() in the pro version.\n\t\t\t\t\tpostParentField.querySelector( '.frm_post_parent_opt_wrapper' ).innerHTML = response.replaceAll( 'REPLACETHISNAME', optName );\n\t\t\t\t\tinitAutocomplete( postParentField );\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif ( postMenuOrderField ) {\n\t\t\tgetActionOption( postMenuOrderField, postType, 'frm_should_use_post_menu_order_option' );\n\t\t}\n\t}\n\n\tfunction getActionOption( field, postType, action, successHandler ) {\n\t\tconst opt = field.querySelector( '.frm_autocomplete_value_input' ) || field.querySelector( 'select' ),\n\t\t\toptName = opt.getAttribute( 'name' );\n\n\t\tjQuery.ajax( {\n\t\t\turl: ajaxurl,\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\taction: action,\n\t\t\t\tpost_type: postType,\n\t\t\t\t_wpnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: response => {\n\t\t\t\tif ( 'string' !== typeof response ) {\n\t\t\t\t\tconsole.error( response );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( '0' === response ) {\n\t\t\t\t\t// This post type does not support this field.\n\t\t\t\t\tfield.classList.add( 'frm_hidden' );\n\t\t\t\t\tfield.value = '';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfield.classList.remove( 'frm_hidden' );\n\n\t\t\t\tif ( 'function' === typeof successHandler ) {\n\t\t\t\t\tsuccessHandler( response, optName );\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: response => console.error( response )\n\t\t} );\n\t}\n\n\tfunction addPosttaxRow() {\n\t\t/*jshint validthis:true */\n\t\taddPostRow( 'tax', this );\n\t}\n\n\tfunction addPostmetaRow() {\n\t\t/*jshint validthis:true */\n\t\taddPostRow( 'meta', this );\n\t}\n\n\tfunction addPostRow( type, button ) {\n\t\tlet name,\n\t\t\tid = jQuery( 'input[name=\"id\"]' ).val(),\n\t\t\tsettings = jQuery( button ).closest( '.frm_form_action_settings' ),\n\t\t\tkey = settings.data( 'actionkey' ),\n\t\t\tpostType = settings.find( '.frm_post_type' ).val(),\n\t\t\tmetaName = 0,\n\t\t\tpostTypeRows = document.querySelectorAll( '.frm_post' + type + '_row' );\n\n\t\tif ( postTypeRows.length ) {\n\t\t\tname = postTypeRows[ postTypeRows.length - 1 ].id.replace( 'frm_post' + type + '_', '' );\n\t\t\tif ( isNumeric( name ) ) {\n\t\t\t\tmetaName = 1 + parseInt( name, 10 );\n\t\t\t} else {\n\t\t\t\tmetaName = 1;\n\t\t\t}\n\t\t}\n\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST', url: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_add_post' + type + '_row',\n\t\t\t\tform_id: id,\n\t\t\t\tmeta_name: metaName,\n\t\t\t\ttax_key: metaName,\n\t\t\t\tpost_type: postType,\n\t\t\t\taction_key: key,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: function( html ) {\n\t\t\t\tlet cfOpts, optIndex;\n\t\t\t\tjQuery( document.getElementById( 'frm_post' + type + '_rows' ) ).append( html );\n\t\t\t\tjQuery( '.frm_add_post' + type + '_row.button' ).hide();\n\n\t\t\t\tif ( type === 'meta' ) {\n\t\t\t\t\tjQuery( '.frm_name_value' ).show();\n\t\t\t\t\tcfOpts = document.querySelectorAll( '.frm_toggle_cf_opts' );\n\t\t\t\t\tfor ( optIndex = 0; optIndex < cfOpts.length - 1; ++optIndex ) {\n\t\t\t\t\t\tcfOpts[ optIndex ].style.display = 'none';\n\t\t\t\t\t}\n\t\t\t\t} else if ( type === 'tax' ) {\n\t\t\t\t\tjQuery( '.frm_posttax_labels' ).show();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction isNumeric( value ) {\n\t\treturn ! isNaN( parseFloat( value ) ) && isFinite( value );\n\t}\n\n\tfunction changePosttaxRow() {\n\t\t/*jshint validthis:true */\n\t\tif ( ! jQuery( this ).closest( '.frm_posttax_row' ).find( '.frm_posttax_opt_list' ).length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tjQuery( this ).closest( '.frm_posttax_row' ).find( '.frm_posttax_opt_list' ).html( '<div class=\"spinner frm_spinner\" style=\"display:block\"></div>' );\n\n\t\tconst postType = jQuery( this ).closest( '.frm_form_action_settings' ).find( 'select[name$=\"[post_content][post_type]\"]' ).val(),\n\t\t\tactionKey = jQuery( this ).closest( '.frm_form_action_settings' ).data( 'actionkey' ),\n\t\t\ttaxKey = jQuery( this ).closest( '.frm_posttax_row' ).attr( 'id' ).replace( 'frm_posttax_', '' ),\n\t\t\tmetaName = jQuery( this ).val(),\n\t\t\tshowExclude = jQuery( document.getElementById( taxKey + '_show_exclude' ) ).is( ':checked' ) ? 1 : 0,\n\t\t\tfieldId = jQuery( 'select[name$=\"[post_category][' + taxKey + '][field_id]\"]' ).val(),\n\t\t\tid = jQuery( 'input[name=\"id\"]' ).val();\n\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_add_posttax_row',\n\t\t\t\tform_id: id,\n\t\t\t\tpost_type: postType,\n\t\t\t\ttax_key: taxKey,\n\t\t\t\taction_key: actionKey,\n\t\t\t\tmeta_name: metaName,\n\t\t\t\tfield_id: fieldId,\n\t\t\t\tshow_exclude: showExclude,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: function( html ) {\n\t\t\t\tconst $tax = jQuery( document.getElementById( 'frm_posttax_' + taxKey ) );\n\t\t\t\t$tax.replaceWith( html );\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction toggleCfOpts() {\n\t\t/*jshint validthis:true */\n\t\tconst row = jQuery( this ).closest( '.frm_postmeta_row' );\n\t\tconst cancel = row.find( '.frm_cancelnew' );\n\t\tconst select = row.find( '.frm_enternew' );\n\t\tif ( row.find( 'select.frm_cancelnew' ).is( ':visible' ) ) {\n\t\t\tcancel.hide();\n\t\t\tselect.show();\n\t\t} else {\n\t\t\tcancel.show();\n\t\t\tselect.hide();\n\t\t}\n\n\t\trow.find( 'input.frm_enternew, select.frm_cancelnew' ).val( '' );\n\t\treturn false;\n\t}\n\n\tfunction toggleFormOpts() {\n\t\t/*jshint validthis:true */\n\t\tconst changedOpt = jQuery( this );\n\t\tlet val = changedOpt.val();\n\t\tif ( changedOpt.attr( 'type' ) === 'checkbox' ) {\n\t\t\tif ( this.checked === false ) {\n\t\t\t\tval = '';\n\t\t\t}\n\t\t}\n\n\t\tconst toggleClass = changedOpt.data( 'toggleclass' );\n\t\tif ( val === '' ) {\n\t\t\tjQuery( '.' + toggleClass ).hide();\n\t\t} else {\n\t\t\tjQuery( '.' + toggleClass ).show();\n\t\t\tjQuery( '.hide_' + toggleClass + '_' + val ).hide();\n\t\t}\n\t}\n\n\tfunction submitSettings() {\n\t\tif ( showNameYourFormModal() ) {\n\t\t\treturn;\n\t\t}\n\n\t\t/*jshint validthis:true */\n\t\tpreFormSave( this );\n\t\ttriggerSubmit( document.querySelector( '.frm_form_settings' ) );\n\t}\n\n\t/* Customization Panel */\n\tfunction insertCode( e ) {\n\t\t/*jshint validthis:true */\n\t\te.preventDefault();\n\t\tinsertFieldCode( jQuery( this ), this.getAttribute( 'data-code' ) );\n\t\treturn false;\n\t}\n\n\tfunction insertFieldCode( element, variable ) {\n\t\tlet rich = false,\n\t\t\telementId = element;\n\t\tif ( typeof element === 'object' ) {\n\t\t\tif ( element.hasClass( 'frm_noallow' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\telementId = jQuery( element ).closest( '[data-fills]' ).attr( 'data-fills' );\n\t\t\tif ( typeof elementId === 'undefined' ) {\n\t\t\t\telementId = element.closest( 'div' ).attr( 'class' );\n\t\t\t\tif ( typeof elementId !== 'undefined' ) {\n\t\t\t\t\telementId = elementId.split( ' ' )[ 1 ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( typeof elementId === 'undefined' ) {\n\t\t\tlet active = document.activeElement;\n\t\t\tif ( active.type === 'search' ) {\n\t\t\t\t// If the search field has focus, find the correct field.\n\t\t\t\telementId = active.id.replace( '-search-input', '' );\n\t\t\t\tif ( elementId.match( /\\d/gi ) === null ) {\n\t\t\t\t\tactive = jQuery( '.frm-single-settings:visible .' + elementId );\n\t\t\t\t\telementId = active.attr( 'id' );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\telementId = active.id;\n\t\t\t}\n\t\t}\n\n\t\tif ( elementId ) {\n\t\t\trich = jQuery( '#wp-' + elementId + '-wrap.wp-editor-wrap' ).length > 0;\n\t\t}\n\n\t\tconst contentBox = jQuery( document.getElementById( elementId ) );\n\t\tif ( typeof element.attr( 'data-shortcode' ) === 'undefined' && ( ! contentBox.length || typeof contentBox.attr( 'data-shortcode' ) === 'undefined' ) ) {\n\t\t\t// this helps to exclude those that don't want shortcode-like inserted content e.g. frm-pro's summary field\n\t\t\tconst doShortcode = element.parents( 'ul.frm_code_list' ).attr( 'data-shortcode' );\n\t\t\tif ( doShortcode === 'undefined' || doShortcode !== 'no' ) {\n\t\t\t\tvariable = '[' + variable + ']';\n\t\t\t}\n\t\t}\n\n\t\tif ( rich ) {\n\t\t\twpActiveEditor = elementId;\n\t\t}\n\n\t\tif ( ! contentBox.length ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( variable === '[default-html]' || variable === '[default-plain]' ) {\n\t\t\tlet p = 0;\n\t\t\tif ( variable === '[default-plain]' ) {\n\t\t\t\tp = 1;\n\t\t\t}\n\t\t\tjQuery.ajax( {\n\t\t\t\ttype: 'POST', url: ajaxurl,\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'frm_get_default_html',\n\t\t\t\t\tform_id: jQuery( 'input[name=\"id\"]' ).val(),\n\t\t\t\t\tplain_text: p,\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t},\n\t\t\t\telementId: elementId,\n\t\t\t\tsuccess: function( msg ) {\n\t\t\t\t\tif ( rich ) {\n\t\t\t\t\t\tconst p = document.createElement( 'p' );\n\t\t\t\t\t\tp.innerText = msg;\n\t\t\t\t\t\tsend_to_editor( p.innerHTML );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinsertContent( contentBox, msg );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\tvariable = maybeAddSanitizeUrlToShortcodeVariable( variable, element, contentBox );\n\t\t\tif ( rich ) {\n\t\t\t\tsend_to_editor( variable );\n\t\t\t} else {\n\t\t\t\tinsertContent( contentBox, variable );\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction maybeAddSanitizeUrlToShortcodeVariable( variable, element, contentBox ) {\n\t\tif ( 'object' !== typeof element || ! ( element instanceof jQuery ) || 0 !== contentBox[ 0 ].id.indexOf( 'success_url_' ) ) {\n\t\t\treturn variable;\n\t\t}\n\n\t\telement = element[ 0 ];\n\t\tif ( ! element.closest( '#frm-insert-fields-box' ) ) {\n\t\t\t// Only add sanitize_url=1 to field shortcodes.\n\t\t\treturn variable;\n\t\t}\n\n\t\tif ( ! element.parentNode.classList.contains( 'frm_insert_url' ) ) {\n\t\t\tvariable = variable.replace( ']', ' sanitize_url=1]' );\n\t\t}\n\n\t\treturn variable;\n\t}\n\n\tfunction insertContent( contentBox, variable ) {\n\t\tif ( document.selection ) {\n\t\t\tcontentBox[ 0 ].focus();\n\t\t\tdocument.selection.createRange().text = variable;\n\t\t} else {\n\t\t\tconst obj = contentBox[ 0 ];\n\t\t\tconst e = obj.selectionEnd;\n\n\t\t\tvariable = maybeFormatInsertedContent( contentBox, variable, obj.selectionStart, e );\n\n\t\t\tobj.value = obj.value.substr( 0, obj.selectionStart ) + variable + obj.value.substr( obj.selectionEnd, obj.value.length );\n\n\t\t\tconst s = e + variable.length;\n\n\t\t\tmaybeRemoveLayoutClasses( obj, variable );\n\n\t\t\tobj.focus();\n\t\t\tobj.setSelectionRange( s, s );\n\t\t}\n\t\ttriggerChange( contentBox );\n\t}\n\n\t/**\n\t * When a layout class is added, remove any previous layout classes to avoid conflicts.\n\t * We only expect one layout class to exist for a given field.\n\t * For example, if a field has frm_half and we set it to frm_third, frm_half will be removed.\n\t *\n\t * @since 6.11\n\t *\n\t * @param {HTMLElement} obj\n\t * @param {string}      variable\n\t * @return {void}\n\t */\n\tfunction maybeRemoveLayoutClasses( obj, variable ) {\n\t\tif ( ! obj.classList.contains( 'frm_classes' ) || ! isALayoutClass( variable ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst removeClasses = obj.value.split( ' ' ).filter( isALayoutClass );\n\t\tif ( removeClasses.length ) {\n\t\t\tobj.value = maybeRemoveClasses( obj.value, removeClasses, variable.trim() );\n\t\t}\n\t}\n\n\t/**\n\t * Check if a given class is a layout class.\n\t *\n\t * @since 6.11\n\t *\n\t * @param {string} className\n\t * @return {boolean}\n\t */\n\tfunction isALayoutClass( className ) {\n\t\tlet layoutClasses = [ 'frm_half', 'frm_third', 'frm_two_thirds', 'frm_fourth', 'frm_three_fourths', 'frm_fifth', 'frm_sixth', 'frm2', 'frm3', 'frm4', 'frm6', 'frm8', 'frm9', 'frm10', 'frm12' ];\n\t\treturn layoutClasses.includes( className.trim() );\n\t}\n\n\t/**\n\t * @since 6.11\n\t *\n\t * @param {string} beforeValue\n\t * @param {Array}  removeClasses\n\t * @param {string} variable\n\t * @return {string}\n\t */\n\tfunction maybeRemoveClasses( beforeValue, removeClasses, variable ) {\n\t\tconst currentClasses = beforeValue.split( ' ' ).filter(\n\t\t\tcurrentClass => {\n\t\t\t\tcurrentClass = currentClass.trim();\n\t\t\t\treturn currentClass.length && ! removeClasses.includes( currentClass );\n\t\t\t}\n\t\t);\n\t\tif ( ! currentClasses.includes( variable ) ) {\n\t\t\tcurrentClasses.push( variable );\n\t\t}\n\t\treturn currentClasses.join( ' ' );\n\t}\n\n\tfunction maybeFormatInsertedContent( input, textToInsert, selectionStart, selectionEnd ) {\n\t\tconst separator = input.data( 'sep' );\n\t\tif ( undefined === separator ) {\n\t\t\treturn textToInsert;\n\t\t}\n\n\t\tconst value = input.val();\n\n\t\tif ( ! value.trim().length ) {\n\t\t\treturn textToInsert;\n\t\t}\n\n\t\tconst startPattern = new RegExp( separator + '\\\\s*$' );\n\t\tconst endPattern = new RegExp( '^\\\\s*' + separator );\n\n\t\tif ( value.substr( 0, selectionStart ).trim().length && false === startPattern.test( value.substr( 0, selectionStart ) ) ) {\n\t\t\ttextToInsert = separator + textToInsert;\n\t\t}\n\n\t\tif ( value.substr( selectionEnd, value.length ).trim().length && false === endPattern.test( value.substr( selectionEnd, value.length ) ) ) {\n\t\t\ttextToInsert += separator;\n\t\t}\n\n\t\treturn textToInsert;\n\t}\n\n\tfunction resetLogicBuilder() {\n\t\t/*jshint validthis:true */\n\t\tconst id = document.getElementById( 'frm-id-condition' ),\n\t\t\tkey = document.getElementById( 'frm-key-condition' );\n\n\t\tif ( this.value === 'id' ) {\n\t\t\tid.classList.remove( 'frm_hidden' );\n\t\t\tkey.classList.add( 'frm_hidden' );\n\t\t\ttriggerEvent( key, 'change' );\n\t\t} else {\n\t\t\tid.classList.add( 'frm_hidden' );\n\t\t\tkey.classList.remove( 'frm_hidden' );\n\t\t\ttriggerEvent( id, 'change' );\n\t\t}\n\t}\n\n\tfunction setLogicExample() {\n\t\tlet field, code,\n\t\t\tidKey = document.getElementById( 'frm-id-key-condition-id' ).checked ? 'frm-id-condition' : 'frm-key-condition',\n\t\t\tis = document.getElementById( 'frm-is-condition' ).value,\n\t\t\ttext = document.getElementById( 'frm-text-condition' ).value,\n\t\t\tresult = document.getElementById( 'frm-insert-condition' );\n\n\t\tidKey = document.getElementById( idKey );\n\t\tfield = idKey.options[ idKey.selectedIndex ].value;\n\t\tcode = 'if ' + field + ' ' + is + '=\"' + text + '\"]';\n\t\tresult.setAttribute( 'data-code', code + frmAdminJs.conditional_text + '[/if ' + field );\n\t\tresult.innerHTML = '[' + code + '[/if ' + field + ']';\n\t}\n\n\t/**\n\t * Gets data from href or xlink:href of the given element.\n\t *\n\t * @param {HTMLElement} element HTML element.\n\t *\n\t * @return {String}\n\t */\n\tfunction getSVGHref( element ) {\n\t\treturn element.getAttribute( 'href' ) || element.getAttributeNS( 'http://www.w3.org/1999/xlink', 'href' );\n\t}\n\n\tfunction maybeShowModal( input ) {\n\t\tlet moreIcon;\n\t\tif ( input.parentNode.parentNode.classList.contains( 'frm_has_shortcodes' ) ) {\n\t\t\thideShortcodes();\n\t\t\tmoreIcon = getIconForInput( input );\n\t\t\tif ( moreIcon.tagName === 'use' ) {\n\t\t\t\tmoreIcon = moreIcon.firstElementChild;\n\n\t\t\t\tif ( ! getSVGHref( moreIcon ).includes( 'frm_close_icon' ) ) {\n\t\t\t\t\tshowShortcodeBox( moreIcon, 'nofocus' );\n\t\t\t\t}\n\t\t\t} else if ( ! moreIcon.classList.contains( 'frm_close_icon' ) ) {\n\t\t\t\tshowShortcodeBox( moreIcon, 'nofocus' );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction showShortcodes( e ) {\n\t\t/*jshint validthis:true */\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tshowShortcodeBox( this );\n\t}\n\n\t/**\n\t * Handles 'change' event on the document.\n\t *\n\t * @since 6.16.3\n\t *\n\t * @param {Event} event\n\t * @return {void}\n\t */\n\tfunction handleBuilderChangeEvent( event ) {\n\t\tmaybeShowSaveAndReloadModal( event.target );\n\t}\n\n\t/**\n\t * Shows 'Save and Reload' modal if the target field's type is changed.\n\t *\n\t * @since 6.16.3\n\t *\n\t * @param {HTMLElement} target\n\t * @return {void}\n\t */\n\tfunction maybeShowSaveAndReloadModal( target ) {\n\t\tif ( ! target.id.startsWith( 'field_options_type_' ) ) {\n\t\t\treturn;\n\t\t}\n\t\tconst idParts = target.id.split( '_' );\n\t\tconst fieldId = idParts.length && idParts[ idParts.length - 1 ];\n\n\t\tif ( document.querySelector( `#frm-single-settings-${ fieldId }` )?.classList.contains( `frm-type-${ target.value }` ) ) {\n\t\t\t// Do not show modal if the field type is reverted back to the original type when builder is loaded.\n\t\t\treturn;\n\t\t}\n\t\tshowSaveAndReloadModal();\n\t}\n\n\t/**\n\t * Shows 'Save and Reload' modal with the given message.\n\t *\n\t * @since 6.16.3\n\t *\n\t * @param {string} message\n\t * @return {void}\n\t */\n\tfunction showSaveAndReloadModal( message ) {\n\t\tif ( 'undefined' === typeof message ) {\n\t\t\tmessage = __( 'You are changing the field type. Not all field settings will appear as expected until you reload the page. Would you like to reload the page now?', 'formidable' );\n\t\t}\n\t\tfrmDom.modal.maybeCreateModal(\n\t\t\t'frmSaveAndReloadModal',\n\t\t\t{\n\t\t\t\ttitle: __( 'Save and Reload?', 'formidable' ),\n\t\t\t\tcontent: getModalContent(),\n\t\t\t\tfooter: getModalFooter()\n\t\t\t}\n\t\t);\n\n\t\tfunction getModalContent() {\n\t\t\tconst modalContent = div( message );\n\t\t\tmodalContent.style.padding = 'var(--gap-md)';\n\t\t\treturn modalContent;\n\t\t}\n\n\t\tfunction getModalFooter() {\n\t\t\tconst continueButton = frmDom.modal.footerButton( {\n\t\t\t\ttext: __( 'Save and Reload', 'formidable' ),\n\t\t\t\tbuttonType: 'primary'\n\t\t\t} );\n\n\t\t\tonClickPreventDefault( continueButton, () => {\n\t\t\t\tsaveAndReloadFormBuilder();\n\t\t\t} );\n\n\t\t\tconst cancelButton = frmDom.modal.footerButton( {\n\t\t\t\ttext: __( 'Cancel', 'formidable' ),\n\t\t\t\tbuttonType: 'cancel'\n\t\t\t} );\n\t\t\tcancelButton.classList.add( 'dismiss' );\n\n\t\t\treturn frmDom.div( {\n\t\t\t\tchildren: [ cancelButton, continueButton ]\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction updateShortcodesPopupPosition( target ) {\n\t\tlet moreIcon;\n\t\tif ( target instanceof Event ) {\n\t\t\tconst useElements = document.querySelectorAll( '.frm-single-settings .frm-show-box.frmsvg use' );\n\t\t\tconst openTrigger = Array.from( useElements ).find( use => use.getAttribute( 'href' ) === '#frm_close_icon' );\n\t\t\tif ( 'undefined' === typeof openTrigger ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tmoreIcon = openTrigger.parentElement;\n\t\t} else {\n\t\t\tmoreIcon = target;\n\t\t}\n\n\t\tconst moreIconPosition = moreIcon.getBoundingClientRect();\n\t\tconst shortCodesPopup = document.getElementById( 'frm_adv_info' );\n\t\tconst parentPos = shortCodesPopup.parentElement.getBoundingClientRect();\n\n\t\tshortCodesPopup.style.top = ( moreIconPosition.top - parentPos.top + 32 ) + 'px';\n\t\tshortCodesPopup.style.left = ( moreIconPosition.left - parentPos.left - 280 ) + 'px';\n\t}\n\n\tfunction showShortcodeBox( moreIcon, shouldFocus ) {\n\t\tlet input = getInputForIcon( moreIcon ),\n\t\t\tbox = document.getElementById( 'frm_adv_info' ),\n\t\t\tclasses = moreIcon.className;\n\n\t\tif ( moreIcon.tagName === 'svg' ) {\n\t\t\tmoreIcon = moreIcon.firstElementChild;\n\t\t}\n\t\tif ( moreIcon.tagName === 'use' ) {\n\t\t\tclasses = getSVGHref( moreIcon );\n\t\t}\n\n\t\tif ( classes.includes( 'frm_close_icon' ) ) {\n\t\t\thideShortcodes( box );\n\t\t} else {\n\t\t\tupdateShortcodesPopupPosition( moreIcon );\n\n\t\t\tjQuery( '.frm_code_list a' ).removeClass( 'frm_noallow' );\n\t\t\tif ( input.classList.contains( 'frm_not_email_to' ) ) {\n\t\t\t\tjQuery( '#frm-insert-fields-box .frm_code_list li:not(.show_frm_not_email_to) a' ).addClass( 'frm_noallow' );\n\t\t\t} else if ( input.classList.contains( 'frm_not_email_subject' ) ) {\n\t\t\t\tjQuery( '.frm_code_list li.hide_frm_not_email_subject a' ).addClass( 'frm_noallow' );\n\t\t\t}\n\n\t\t\tbox.setAttribute( 'data-fills', input.id );\n\t\t\tbox.style.display = 'block';\n\n\t\t\tif ( moreIcon.tagName === 'use' ) {\n\t\t\t\tif ( moreIcon.hasAttributeNS( 'http://www.w3.org/1999/xlink', 'href' ) ) {\n\t\t\t\t\tmoreIcon.setAttributeNS( 'http://www.w3.org/1999/xlink', 'href', '#frm_close_icon' );\n\t\t\t\t} else {\n\t\t\t\t\tconst newMoreIcon = document.createElementNS( 'http://www.w3.org/2000/svg', 'use' );\n\t\t\t\t\tnewMoreIcon.setAttributeNS( 'http://www.w3.org/1999/xlink', 'href', '#frm_close_icon' );\n\t\t\t\t\tmoreIcon.parentNode.replaceChild( newMoreIcon, moreIcon );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmoreIcon.className = classes.replace( 'frm_more_horiz_solid_icon', 'frm_close_icon' );\n\t\t\t}\n\n\t\t\tif ( shouldFocus !== 'nofocus' ) {\n\t\t\t\tif ( 'none' !== input.style.display ) {\n\t\t\t\t\tinput.focus();\n\t\t\t\t} else {\n\t\t\t\t\tjQuery( tinymce.get( input.id ) ).trigger( 'focus' );\n\t\t\t\t}\n\t\t\t}\n\t\t\tshowOrHideContextualShortcodes( input );\n\t\t}\n\t}\n\n\t/**\n\t * Returns true if a shortcode could be shown in the search result.\n\t *\n\t * @since 6.16.3\n\t *\n\t * @param {HTMLElement} item\n\t * @return {Boolean}\n\t */\n\tfunction checkContextualShortcode( item ) {\n\t\tif ( frmAdminJs.contextualShortcodes.length === 0 ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn ! isContextualShortcode( item ) || canShowContextualShortcode( item );\n\t}\n\n\t/**\n\t * Returns true if a shortcode is contextual to fields.\n\t *\n\t * @since 6.16.3\n\t *\n\t * @param {HTMLElement} item\n\t * @return {Boolean}\n\t */\n\tfunction isContextualShortcode( item ) {\n\t\tconst anchor = item.querySelector( 'a' );\n\t\tif ( ! anchor ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst shortcode = anchor.dataset.code;\n\t\treturn frmAdminJs.contextualShortcodes.address.includes( shortcode ) || frmAdminJs.contextualShortcodes.body.includes( shortcode );\n\t}\n\n\t/**\n\t * @since 6.16.3\n\t *\n\t * @param {HTMLElement} item\n\t * @return {Boolean}\n\t */\n\tfunction canShowContextualShortcode( item ) {\n\t\tconst shortcode = item.querySelector( 'a' ).dataset.code;\n\t\tconst inputId = document.getElementById( 'frm_adv_info' ).dataset.fills;\n\t\tconst input = document.getElementById( inputId );\n\t\tconst contextualShortcodes = frmAdminJs.contextualShortcodes;\n\t\tif ( contextualShortcodes.address.includes( shortcode ) ) {\n\t\t\treturn input.matches( contextualShortcodes.addressSelector );\n\t\t}\n\t\treturn input.matches( contextualShortcodes.bodySelector );\n\t}\n\n\t/**\n\t * @since 6.16.3\n\t *\n\t * @param {HTMLElement} input\n\t * @return {void}\n\t */\n\tfunction showOrHideContextualShortcodes( input ) {\n\t\t[ 'address', 'body' ].forEach( type => {\n\t\t\ttoggleContextualShortcodes( input, type );\n\t\t} );\n\t}\n\n\t/**\n\t * @since 6.16.3\n\t *\n\t * @param {HTMLElement} input\n\t * @param {string}      type\n\t *\n\t * @return {void}\n\t */\n\tfunction toggleContextualShortcodes( input, type ) {\n\t\tlet selector, contextualShortcodes;\n\t\tselector = frmAdminJs.contextualShortcodes[ type + 'Selector' ];\n\t\tcontextualShortcodes = frmAdminJs.contextualShortcodes[ type ];\n\t\tlet shouldShowShortcodes = input.matches( selector );\n\t\tfor ( let shortcode of contextualShortcodes ) {\n\t\t\tconst shortcodeLi = document.querySelector( '#frm-adv-info-tab .frm_code_list [data-code=\"' + shortcode + '\"]' )?.closest( 'li' );\n\t\t\tshortcodeLi?.classList.toggle( 'frm_hidden', ! shouldShowShortcodes );\n\t\t}\n\t}\n\n\t/**\n\t * Returns shortcodes that are contextual to the current input field.\n\t *\n\t * @since 6.16.3\n\t *\n\t * @return {Array}\n\t */\n\tfunction getContextualShortcodes() {\n\t\tlet contextualShortcodes = document.getElementById( 'frm_adv_info' )?.dataset.contextualShortcodes;\n\t\tif ( ! contextualShortcodes ) {\n\t\t\treturn [];\n\t\t}\n\t\tcontextualShortcodes = JSON.parse( contextualShortcodes );\n\t\tcontextualShortcodes.addressSelector = '[id^=email_to], [id^=from_], [id^=cc], [id^=bcc]';\n\t\tcontextualShortcodes.bodySelector = '[id^=email_message_]';\n\t\treturn contextualShortcodes;\n\t}\n\n\tfunction fieldUpdated() {\n\t\tif ( ! fieldsUpdated ) {\n\t\t\tfieldsUpdated = 1;\n\t\t\twindow.addEventListener( 'beforeunload', confirmExit );\n\t\t}\n\t}\n\n\tfunction buildSubmittedNoAjax() {\n\t\t// set fieldsUpdated to 0 to avoid the unsaved changes pop up\n\t\tfieldsUpdated = 0;\n\t}\n\n\tfunction settingsSubmitted() {\n\t\t// set fieldsUpdated to 0 to avoid the unsaved changes pop up\n\t\tfieldsUpdated = 0;\n\t}\n\n\tfunction resetFieldsUpdated() {\n\t\tfieldsUpdated = 0;\n\t}\n\n\tfunction reloadIfAddonActivatedAjaxSubmitOnly() {\n\t\tconst submitButton = document.getElementById( 'frm_submit_side_top' );\n\t\tif ( submitButton.hasAttribute( 'data-new-addon-installed' ) && 'true' === submitButton.getAttribute( 'data-new-addon-installed' ) ) {\n\t\t\tsubmitButton.removeAttribute( 'data-new-addon-installed' );\n\t\t\twindow.location.reload();\n\t\t}\n\t}\n\n\tfunction saveAndReloadFormBuilder() {\n\t\tconst submitButton = document.getElementById( 'frm_submit_side_top' );\n\t\tif ( submitButton.classList.contains( 'frm_submit_ajax' ) ) {\n\t\t\tsubmitButton.setAttribute( 'data-new-addon-installed', true );\n\t\t}\n\t\tsubmitButton.click();\n\t}\n\n\tfunction confirmExit( event ) {\n\t\tif ( fieldsUpdated ) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.returnValue = '';\n\t\t}\n\t}\n\n\tfunction offsetModalY( $modal, amount ) {\n\t\tconst position = {\n\t\t\tmy: 'top',\n\t\t\tat: 'top+' + amount,\n\t\t\tof: window\n\t\t};\n\t\t$modal.dialog( 'option', 'position', position );\n\t}\n\n\t/**\n\t * Get the input box for the selected icon or calculation field.\n\t *\n\t * @param {Element} moreIcon The icon element\n\t * @return {Element} The associated input or textarea\n\t */\n\tfunction getInputForIcon( moreIcon ) {\n\t\tif ( moreIcon.classList.contains( 'frm-input-icon' ) ) {\n\t\t\treturn moreIcon.previousElementSibling;\n\t\t}\n\n\t\t// For regular fields\n\t\tlet input = moreIcon.nextElementSibling;\n\t\twhile ( input !== null && (\n\t\t\t( input.tagName !== 'INPUT' && input.tagName !== 'TEXTAREA' ) || input.classList.contains( 'frm-token-input-field' )\n\t\t) ) {\n\t\t\tinput = getInputForIcon( input );\n\t\t}\n\n\t\t// For calculation fields\n\t\tif ( ! input ) {\n\t\t\tinput = moreIcon.closest( '.frm-field-formula' )?.querySelector( '.frm-calc-field' );\n\t\t}\n\n\t\treturn input;\n\t}\n\n\t/**\n\t * Get the ... icon for the selected input box.\n\t */\n\tfunction getIconForInput( input ) {\n\t\tif ( input.nextElementSibling?.classList.contains( 'frm-input-icon' ) ) {\n\t\t\treturn input.nextElementSibling;\n\t\t}\n\n\t\tlet moreIcon = input.previousElementSibling;\n\n\t\twhile ( moreIcon !== null && moreIcon.tagName !== 'I' && moreIcon.tagName !== 'svg' ) {\n\t\t\tmoreIcon = getIconForInput( moreIcon );\n\t\t}\n\n\t\treturn moreIcon;\n\t}\n\n\tfunction hideShortcodes( box ) {\n\t\tlet i, u, closeIcons, closeSvg;\n\t\tif ( typeof box === 'undefined' ) {\n\t\t\tbox = document.getElementById( 'frm_adv_info' );\n\t\t\tif ( box === null ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif ( document.getElementById( 'frm_dyncontent' ) !== null ) {\n\t\t\t// Don't run when in the sidebar.\n\t\t\treturn;\n\t\t}\n\n\t\tbox.style.display = 'none';\n\n\t\tcloseIcons = document.querySelectorAll( '.frm-show-box.frm_close_icon' );\n\t\tfor ( i = 0; i < closeIcons.length; i++ ) {\n\t\t\tcloseIcons[ i ].classList.remove( 'frm_close_icon' );\n\t\t\tcloseIcons[ i ].classList.add( 'frm_more_horiz_solid_icon' );\n\t\t}\n\n\t\tcloseSvg = document.querySelectorAll( '.frm_has_shortcodes use' );\n\t\tfor ( u = 0; u < closeSvg.length; u++ ) {\n\t\t\tif ( getSVGHref( closeSvg[ u ] ) === '#frm_close_icon' ) {\n\t\t\t\tif ( closeSvg[ u ].closest( '.frm_remove_field' ) ) {\n\t\t\t\t\t// Don't change the icon for the email fields remove button.\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcloseSvg[ u ].setAttributeNS( 'http://www.w3.org/1999/xlink', 'href', '#frm_more_horiz_solid_icon' );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction toggleAllowedHTML( input ) {\n\t\tlet b,\n\t\t\tid = input.id;\n\t\tif ( typeof id === 'undefined' || id.includes( '-search-input' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tjQuery( '#frm-adv-info-tab' ).attr( 'data-fills', id.trim() );\n\t\tif ( input.classList.contains( 'field_custom_html' ) ) {\n\t\t\tid = 'field_custom_html';\n\t\t}\n\n\t\tb = [ 'after_html', 'before_html', 'submit_html', 'field_custom_html' ];\n\t\tif ( jQuery.inArray( id, b ) >= 0 ) {\n\t\t\tjQuery( '.frm_code_list li:not(.show_' + id + ')' ).addClass( 'frm_hidden' );\n\t\t\tjQuery( '.frm_code_list li.show_' + id ).removeClass( 'frm_hidden' );\n\t\t}\n\t}\n\n\tfunction toggleKeyID( switchTo, e ) {\n\t\te.stopPropagation();\n\t\tjQuery( '.frm_code_list .frmids, .frm_code_list .frmkeys' ).addClass( 'frm_hidden' );\n\t\tjQuery( '.frm_code_list .' + switchTo ).removeClass( 'frm_hidden' );\n\t\tjQuery( '.frmids, .frmkeys' ).removeClass( 'current' );\n\t\tjQuery( '.' + switchTo ).addClass( 'current' );\n\t}\n\n\tfunction onActionLoaded( event ) {\n\t\tconst settings = event.target.closest( '.frm_form_action_settings' );\n\t\tif ( settings && ( settings.classList.contains( 'frm_single_email_settings' ) || settings.classList.contains( 'frm_single_on_submit_settings' ) ) ) {\n\t\t\tinitWysiwygOnActionLoaded( settings );\n\t\t}\n\t}\n\n\tfunction initWysiwygOnActionLoaded( settings ) {\n\t\tsettings.querySelectorAll( '.wp-editor-area' ).forEach( wysiwyg => {\n\t\t\tfrmDom.wysiwyg.init(\n\t\t\t\twysiwyg,\n\t\t\t\t{ height: 160, addFocusEvents: true }\n\t\t\t);\n\t\t} );\n\t}\n\n\t/* Global settings page */\n\tfunction loadSettingsTab( anchor ) {\n\t\tconst holder = anchor.replace( '#', '' );\n\t\tconst holderContainer = jQuery( '.frm_' + holder + '_ajax' );\n\t\tif ( holderContainer.length ) {\n\t\t\tjQuery.ajax( {\n\t\t\t\ttype: 'POST', url: ajaxurl,\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'frm_settings_tab',\n\t\t\t\t\ttab: holder.replace( '_settings', '' ),\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t},\n\t\t\t\tsuccess: function( html ) {\n\t\t\t\t\tholderContainer.replaceWith( html );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction uninstallNow() {\n\t\t/*jshint validthis:true */\n\t\tif ( confirmLinkClick( this ) === true ) {\n\t\t\tjQuery( '.frm_uninstall .frm-wait' ).css( 'visibility', 'visible' );\n\t\t\tjQuery.ajax( {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: ajaxurl,\n\t\t\t\tdata: 'action=frm_uninstall&nonce=' + frmGlobal.nonce,\n\t\t\t\tsuccess: function( msg ) {\n\t\t\t\t\tjQuery( '.frm_uninstall' ).fadeOut( 'slow' );\n\t\t\t\t\twindow.location = msg;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction saveAddonLicense() {\n\t\t/*jshint validthis:true */\n\t\tconst button = jQuery( this );\n\t\tconst buttonName = this.name;\n\t\tconst pluginSlug = this.getAttribute( 'data-plugin' );\n\t\tconst action = buttonName.replace( 'edd_' + pluginSlug + '_license_', '' );\n\t\tlet license = document.getElementById( 'edd_' + pluginSlug + '_license_key' ).value;\n\t\tbutton.get( 0 ).disabled = true;\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST', url: ajaxurl, dataType: 'json',\n\t\t\tdata: { action: 'frm_addon_' + action, license: license, plugin: pluginSlug, nonce: frmGlobal.nonce },\n\t\t\tsuccess: function( msg ) {\n\t\t\t\tbutton.get( 0 ).disabled = false;\n\t\t\t\tconst thisRow = button.closest( '.edd_frm_license_row' );\n\t\t\t\tif ( action === 'deactivate' ) {\n\t\t\t\t\tlicense = '';\n\t\t\t\t\tdocument.getElementById( 'edd_' + pluginSlug + '_license_key' ).value = '';\n\t\t\t\t}\n\t\t\t\tthisRow.find( '.edd_frm_license' ).html( license );\n\t\t\t\tconst eddWrapper = button.get( 0 ).closest( '.frm_form_field' );\n\t\t\t\tconst actionIsSuccess = msg.success === true;\n\t\t\t\teddWrapper.querySelector( `.frm_icon_font.frm_action_success` ).classList.toggle( 'frm_hidden', ! actionIsSuccess || action === 'deactivate' );\n\t\t\t\teddWrapper.querySelector( `.frm_icon_font.frm_action_error` ).classList.toggle( 'frm_hidden', actionIsSuccess );\n\n\t\t\t\tconst messageBox = thisRow.find( '.frm_license_msg' );\n\t\t\t\tmessageBox.html( msg.message );\n\t\t\t\tif ( msg.message !== '' ) {\n\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\tmessageBox.html( '' );\n\t\t\t\t\t\tthisRow.find( '.frm_icon_font' ).addClass( 'frm_hidden' );\n\t\t\t\t\t\tif ( actionIsSuccess ) {\n\t\t\t\t\t\t\tconst actionIsActivate = action === 'activate';\n\t\t\t\t\t\t\tthisRow.get( 0 ).querySelector( '.edd_frm_unauthorized' ).classList.toggle( 'frm_hidden', actionIsActivate );\n\t\t\t\t\t\t\tthisRow.get( 0 ).querySelector( '.edd_frm_authorized' ).classList.toggle( 'frm_hidden', ! actionIsActivate );\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 2000 );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/* Import/Export page */\n\n\tfunction startFormMigration( event ) {\n\t\tevent.preventDefault();\n\n\t\tconst checkedBoxes = jQuery( event.target ).find( 'input:checked' );\n\t\tif ( ! checkedBoxes.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst ids = [];\n\t\tcheckedBoxes.each( function( i ) {\n\t\t\tids[ i ] = this.value;\n\t\t} );\n\n\t\t// Begin the import process.\n\t\timportForms( ids, event.target );\n\t}\n\n\t/**\n\t * Begins the process of importing the forms.\n\t */\n\tfunction importForms( forms, targetForm ) {\n\t\t// Hide the form select section.\n\t\tconst $form = jQuery( targetForm ),\n\t\t\t$processSettings = $form.next( '.frm-importer-process' );\n\n\t\t// Display total number of forms we have to import.\n\t\t$processSettings.find( '.form-total' ).text( forms.length );\n\t\t$processSettings.find( '.form-current' ).text( '1' );\n\n\t\t$form.hide();\n\n\t\t// Show processing status.\n\t\t// '.process-completed' might have been shown earlier during a previous import, so hide now.\n\t\t$processSettings.find( '.process-completed' ).hide();\n\t\t$processSettings.show();\n\n\t\t// Create global import queue.\n\t\ts.importQueue = forms;\n\t\ts.imported = 0;\n\n\t\t// Import the first form in the queue.\n\t\timportForm( $processSettings );\n\t}\n\n\t/**\n\t * Imports a single form from the import queue.\n\t */\n\tfunction importForm( $processSettings ) {\n\t\tconst formID = s.importQueue[ 0 ],\n\t\t\tprovider = jQuery( '#welcome-panel' ).find( 'input[name=\"slug\"]' ).val(),\n\t\t\tdata = {\n\t\t\t\taction: 'frm_import_' + provider,\n\t\t\t\tform_id: formID,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t};\n\n\t\t// Trigger AJAX import for this form.\n\t\tjQuery.post( ajaxurl, data, function( res ) {\n\t\t\tif ( res.success ) {\n\t\t\t\tlet statusUpdate;\n\n\t\t\t\tif ( res.data.error ) {\n\t\t\t\t\tstatusUpdate = '<p>' + res.data.name + ': ' + res.data.msg + '</p>';\n\t\t\t\t} else {\n\t\t\t\t\tstatusUpdate = '<p>Imported <a href=\"' + res.data.link + '\" target=\"_blank\">' + res.data.name + '</a></p>';\n\t\t\t\t}\n\n\t\t\t\t$processSettings.find( '.status' ).prepend( statusUpdate );\n\t\t\t\t$processSettings.find( '.status' ).show();\n\n\t\t\t\t// Remove this form ID from the queue.\n\t\t\t\ts.importQueue = jQuery.grep( s.importQueue, function( value ) {\n\t\t\t\t\treturn value != formID;\n\t\t\t\t} );\n\t\t\t\ts.imported++;\n\n\t\t\t\tif ( s.importQueue.length === 0 ) {\n\t\t\t\t\t$processSettings.find( '.process-count' ).hide();\n\t\t\t\t\t$processSettings.find( '.forms-completed' ).text( s.imported );\n\t\t\t\t\t$processSettings.find( '.process-completed' ).show();\n\t\t\t\t} else {\n\t\t\t\t\t// Import next form in the queue.\n\t\t\t\t\t$processSettings.find( '.form-current' ).text( s.imported + 1 );\n\t\t\t\t\timportForm( $processSettings );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction validateExport( e ) {\n\t\t/*jshint validthis:true */\n\t\te.preventDefault();\n\n\t\tlet s = false;\n\t\tconst $exportForms = jQuery( 'input[name=\"frm_export_forms[]\"]' );\n\n\t\tif ( ! jQuery( 'input[name=\"frm_export_forms[]\"]:checked' ).val() ) {\n\t\t\t$exportForms.closest( '.frm-table-box' ).addClass( 'frm_blank_field' );\n\t\t\ts = 'stop';\n\t\t}\n\n\t\tconst $exportType = jQuery( 'input[name=\"type[]\"]' );\n\t\tif ( ! jQuery( 'input[name=\"type[]\"]:checked' ).val() && $exportType.attr( 'type' ) === 'checkbox' ) {\n\t\t\t$exportType.closest( 'p' ).addClass( 'frm_blank_field' );\n\t\t\ts = 'stop';\n\t\t}\n\n\t\tif ( s === 'stop' ) {\n\t\t\treturn false;\n\t\t}\n\n\t\te.stopPropagation();\n\t\tthis.submit();\n\t}\n\n\tfunction removeExportError() {\n\t\t/*jshint validthis:true */\n\t\tconst t = jQuery( this ).closest( '.frm_blank_field' );\n\t\tif ( typeof t === 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst $thisName = this.name;\n\t\tif ( $thisName === 'type[]' && jQuery( 'input[name=\"type[]\"]:checked' ).val() ) {\n\t\t\tt.removeClass( 'frm_blank_field' );\n\t\t} else if ( $thisName === 'frm_export_forms[]' && jQuery( this ).val() ) {\n\t\t\tt.removeClass( 'frm_blank_field' );\n\t\t}\n\t}\n\n\tfunction checkCSVExtension() {\n\t\t/*jshint validthis:true */\n\t\tconst f = jQuery( this ).val();\n\t\tconst re = /\\.csv$/i;\n\t\tif ( f.match( re ) !== null ) {\n\t\t\tjQuery( '.show_csv' ).fadeIn();\n\t\t} else {\n\t\t\tjQuery( '.show_csv' ).fadeOut();\n\t\t}\n\t}\n\n\tfunction getExportOption() {\n\t\tconst exportFormatSelect = document.querySelector( 'select[name=\"format\"]' );\n\t\tif ( exportFormatSelect ) {\n\t\t\treturn exportFormatSelect.value;\n\t\t}\n\t\treturn '';\n\t}\n\n\tfunction exportTypeChanged( event ) {\n\t\tconst value = event.target.value;\n\t\tshowOrHideRepeaters( value );\n\t\tcheckExportTypes.call( event.target );\n\t\tcheckSelectedAllFormsCheckbox( value );\n\t}\n\n\tfunction checkSelectedAllFormsCheckbox( exportType ) {\n\t\tconst selectAllCheckbox = document.getElementById( 'frm-export-select-all' );\n\t\tif ( exportType === 'csv' ) {\n\t\t\tselectAllCheckbox.checked = false;\n\t\t\tselectAllCheckbox.disabled = true;\n\t\t} else {\n\t\t\tselectAllCheckbox.disabled = false;\n\t\t}\n\t}\n\n\tfunction checkExportTypes() {\n\t\t/*jshint validthis:true */\n\t\tconst $dropdown = jQuery( this );\n\t\tconst $selected = $dropdown.find( ':selected' );\n\t\tconst s = $selected.data( 'support' );\n\n\t\tconst multiple = s.indexOf( '|' );\n\t\tjQuery( 'input[name=\"type[]\"]' ).each( function() {\n\t\t\tthis.checked = false;\n\t\t\tif ( s.includes( this.value ) ) {\n\t\t\t\tthis.disabled = false;\n\t\t\t\tif ( multiple === -1 ) {\n\t\t\t\t\tthis.checked = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.disabled = true;\n\t\t\t}\n\t\t} );\n\n\t\tif ( $dropdown.val() === 'csv' ) {\n\t\t\tjQuery( '.csv_opts' ).show();\n\t\t\tjQuery( '.xml_opts' ).hide();\n\t\t} else {\n\t\t\tjQuery( '.csv_opts' ).hide();\n\t\t\tjQuery( '.xml_opts' ).show();\n\t\t}\n\n\t\tconst c = $selected.data( 'count' );\n\t\tconst exportField = jQuery( 'input[name=\"frm_export_forms[]\"]' );\n\t\tif ( c === 'single' ) {\n\t\t\texportField.prop( 'multiple', false );\n\t\t\texportField.prop( 'checked', false );\n\t\t} else {\n\t\t\texportField.prop( 'multiple', true );\n\t\t\texportField.prop( 'disabled', false );\n\t\t}\n\t\t$dropdown.trigger( 'change' );\n\t}\n\n\tfunction showOrHideRepeaters( exportOption ) {\n\t\tif ( exportOption === '' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst repeaters = document.querySelectorAll( '.frm-is-repeater' );\n\t\tif ( ! repeaters.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( exportOption === 'csv' ) {\n\t\t\trepeaters.forEach( form => {\n\t\t\t\tform.classList.remove( 'frm_hidden' );\n\t\t\t} );\n\t\t} else {\n\t\t\trepeaters.forEach( form => {\n\t\t\t\tform.classList.add( 'frm_hidden' );\n\t\t\t} );\n\t\t}\n\n\t\tsearchContent.call( document.querySelector( '.frm-auto-search' ) );\n\t}\n\n\tfunction preventMultipleExport() {\n\t\tconst type = jQuery( 'select[name=format]' ),\n\t\t\tselected = type.find( ':selected' ),\n\t\t\tcount = selected.data( 'count' ),\n\t\t\texportField = jQuery( 'input[name=\"frm_export_forms[]\"]' );\n\n\t\tif ( count === 'single' ) {\n\t\t\t// Disable all other fields to prevent multiple selections.\n\t\t\tif ( this.checked ) {\n\t\t\t\texportField.prop( 'disabled', true );\n\t\t\t\tthis.removeAttribute( 'disabled' );\n\t\t\t} else {\n\t\t\t\texportField.prop( 'disabled', false );\n\t\t\t}\n\t\t} else {\n\t\t\texportField.prop( 'disabled', false );\n\t\t}\n\t}\n\n\tfunction initiateMultiselect() {\n\t\tjQuery( '.frm_multiselect' ).hide().each( frmDom.bootstrap.multiselect.init );\n\t}\n\n\t/* Addons page */\n\tfunction installMultipleAddons( e ) {\n\t\te.preventDefault();\n\t\ttoggleAddonState( this, 'frm_multiple_addons' );\n\t}\n\n\tfunction activateAddon( e ) {\n\t\te.preventDefault();\n\t\ttoggleAddonState( this, 'frm_activate_addon' );\n\t}\n\n\tfunction installAddon( e ) {\n\t\te.preventDefault();\n\t\ttoggleAddonState( this, 'frm_install_addon' );\n\t}\n\n\tfunction toggleAddonState( clicked, action ) {\n\t\tconst addonState = require( './addon-state' );\n\t\taddonState.toggleAddonState( clicked, action );\n\t}\n\n\tfunction installAddonWithCreds( e ) {\n\t\t// Prevent the default action, let the user know we are attempting to install again and go with it.\n\t\te.preventDefault();\n\n\t\t// Now let's make another Ajax request once the user has submitted their credentials.\n\t\tconst proceed = jQuery( this );\n\t\tconst el = proceed.parent().parent();\n\t\tconst plugin = proceed.attr( 'rel' );\n\n\t\tproceed.addClass( 'frm_loading_button' );\n\n\t\tjQuery.ajax( {\n\t\t\turl: ajaxurl,\n\t\t\ttype: 'POST',\n\t\t\tasync: true,\n\t\t\tcache: false,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\taction: 'frm_install_addon',\n\t\t\t\tnonce: frmAdminJs.nonce,\n\t\t\t\tplugin: plugin,\n\t\t\t\thostname: el.find( '#hostname' ).val(),\n\t\t\t\tusername: el.find( '#username' ).val(),\n\t\t\t\tpassword: el.find( '#password' ).val()\n\t\t\t},\n\t\t\tsuccess: function( response ) {\n\t\t\t\tresponse = response?.data ?? response;\n\n\t\t\t\tconst error = extractErrorFromAddOnResponse( response );\n\t\t\t\tif ( error ) {\n\t\t\t\t\taddonError( error, el, proceed );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tafterAddonInstall( response, proceed, message, el );\n\t\t\t},\n\t\t\terror: function() {\n\t\t\t\tproceed.removeClass( 'frm_loading_button' );\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction afterAddonInstall( response, button, message, el, saveAndReload, action = 'frm_activate_addon' ) {\n\t\tconst addonState = require( './addon-state' );\n\t\taddonState.afterAddonInstall( response, button, message, el, saveAndReload, action );\n\t}\n\n\tfunction extractErrorFromAddOnResponse( response ) {\n\t\tconst addonState = require( './addon-state' );\n\t\treturn addonState.extractErrorFromAddOnResponse( response );\n\t}\n\n\tfunction addonError( response, el, button ) {\n\t\tconst addonState = require( './addon-state' );\n\t\taddonState.addonError( response, el, button );\n\t}\n\n\t/* Templates */\n\tfunction showActiveCampaignForm() {\n\t\tloadApiEmailForm();\n\t}\n\n\tfunction handleApiFormError( inputId, errorId, type, message ) {\n\t\tconst $error = jQuery( errorId );\n\t\t$error.removeClass( 'frm_hidden' ).attr( 'frm-error', type );\n\n\t\tif ( typeof message !== 'undefined' ) {\n\t\t\t$error.find( 'span[frm-error=\"' + type + '\"]' ).text( message );\n\t\t}\n\n\t\tjQuery( inputId ).one( 'keyup', function() {\n\t\t\t$error.addClass( 'frm_hidden' );\n\t\t} );\n\t}\n\n\tfunction handleEmailAddressError( type ) {\n\t\thandleApiFormError( '#frm_leave_email', '#frm_leave_email_error', type );\n\t}\n\n\tfunction loadApiEmailForm() {\n\t\tconst formContainer = document.getElementById( 'frmapi-email-form' );\n\t\tjQuery.ajax( {\n\t\t\tdataType: 'json',\n\t\t\turl: formContainer.getAttribute( 'data-url' ),\n\t\t\tsuccess: function( json ) {\n\t\t\t\tlet form = json.renderedHtml;\n\t\t\t\tform = form.replace( /<link\\b[^>]*(formidableforms.css|action=frmpro_css)[^>]*>/gi, '' );\n\t\t\t\tformContainer.innerHTML = form;\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction initAutocomplete( container ) {\n\t\tfrmDom.autocomplete.initSelectionAutocomplete( container );\n\t}\n\n\tfunction nextInstallStep( thisStep ) {\n\t\tthisStep.classList.add( 'frm_grey' );\n\t\tthisStep.nextElementSibling.classList.remove( 'frm_grey' );\n\t}\n\n\tfunction installTemplateFieldset( e ) {\n\t\t/*jshint validthis:true */\n\t\tconst fieldset = this.parentNode.parentNode,\n\t\t\taction = fieldset.elements.type.value,\n\t\t\tbutton = this;\n\t\te.preventDefault();\n\t\tbutton.classList.add( 'frm_loading_button' );\n\t\tinstallNewForm( fieldset, action, button );\n\t}\n\n\tfunction installTemplate( e ) {\n\t\t/*jshint validthis:true */\n\t\tconst action = this.elements.type.value,\n\t\t\tbutton = this.querySelector( 'button' );\n\t\te.preventDefault();\n\t\tbutton.classList.add( 'frm_loading_button' );\n\t\tinstallNewForm( this, action, button );\n\t}\n\n\tfunction installNewForm( form, action, button ) {\n\t\tconst formData = formToData( form );\n\t\tconst formName = formData.template_name;\n\t\tconst formDesc = formData.template_desc;\n\t\tconst link = form.elements.link.value;\n\n\t\tlet data = {\n\t\t\taction: action,\n\t\t\txml: link,\n\t\t\tname: formName,\n\t\t\tdesc: formDesc,\n\t\t\tform: JSON.stringify( formData ),\n\t\t\tnonce: frmGlobal.nonce\n\t\t};\n\n\t\tconst hookName = 'frm_before_install_new_form';\n\t\tconst filterArgs = { formData };\n\t\tdata = wp.hooks.applyFilters( hookName, data, filterArgs );\n\n\t\tpostAjax( data, function( response ) {\n\t\t\tif ( typeof response.redirect !== 'undefined' ) {\n\t\t\t\tconst redirect = response.redirect;\n\t\t\t\tif ( typeof form.elements.redirect === 'undefined' ) {\n\t\t\t\t\twindow.location = redirect;\n\t\t\t\t} else {\n\t\t\t\t\tconst href = document.getElementById( 'frm-redirect-link' );\n\t\t\t\t\tif ( typeof link !== 'undefined' && href !== null ) {\n\t\t\t\t\t\t// Show the next installation step.\n\t\t\t\t\t\thref.setAttribute( 'href', redirect );\n\t\t\t\t\t\thref.classList.remove( 'frm_grey', 'disabled' );\n\t\t\t\t\t\tnextInstallStep( form.parentNode.parentNode );\n\t\t\t\t\t\tbutton.classList.add( 'frm_grey', 'disabled' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tjQuery( '.spinner' ).css( 'visibility', 'hidden' );\n\n\t\t\t\t// Show response.message\n\t\t\t\tif ( 'string' === typeof response.message ) {\n\t\t\t\t\tshowInstallFormErrorModal( response.message );\n\t\t\t\t}\n\t\t\t}\n\t\t\tbutton.classList.remove( 'frm_loading_button' );\n\t\t} );\n\t}\n\n\tfunction showInstallFormErrorModal( message ) {\n\t\tconst modalContent = div( message );\n\t\tmodalContent.style.padding = '20px 40px';\n\t\tconst modal = frmDom.modal.maybeCreateModal(\n\t\t\t'frmInstallFormErrorModal',\n\t\t\t{\n\t\t\t\ttitle: __( 'Unable to install template', 'formidable' ),\n\t\t\t\tcontent: modalContent\n\t\t\t}\n\t\t);\n\t\tmodal.classList.add( 'frm_common_modal' );\n\t}\n\n\tfunction handleCaptchaTypeChange( e ) {\n\t\tconst thresholdContainer = document.getElementById( 'frm_captcha_threshold_container' );\n\t\tif ( thresholdContainer ) {\n\t\t\tthresholdContainer.classList.toggle( 'frm_hidden', 'v3' !== e.target.value );\n\t\t}\n\t}\n\n\tfunction trashTemplate( e ) {\n\t\t/*jshint validthis:true */\n\t\tconst id = this.getAttribute( 'data-id' );\n\t\te.preventDefault();\n\n\t\tconst data = {\n\t\t\taction: 'frm_forms_trash',\n\t\t\tid: id,\n\t\t\tnonce: frmGlobal.nonce\n\t\t};\n\t\tpostAjax( data, function() {\n\t\t\tconst card = document.getElementById( 'frm-template-custom-' + id );\n\t\t\tfadeOut( card, function() {\n\t\t\t\tcard.remove();\n\t\t\t} );\n\t\t} );\n\t}\n\n\tfunction searchContent() {\n\t\t/*jshint validthis:true */\n\t\tlet i,\n\t\t\tregEx = false,\n\t\t\tsearchText = this.value.toLowerCase(),\n\t\t\ttoSearch = this.getAttribute( 'data-tosearch' ),\n\t\t\titems = document.getElementsByClassName( toSearch );\n\n\t\tif ( this.tagName === 'SELECT' ) {\n\t\t\tsearchText = selectedOptions( this );\n\t\t\tsearchText = searchText.join( '|' ).toLowerCase();\n\t\t\tregEx = true;\n\t\t}\n\n\t\tif ( toSearch === 'frm-action' && searchText !== '' ) {\n\t\t\tconst addons = document.getElementById( 'frm_email_addon_menu' ).classList;\n\t\t\taddons.remove( 'frm-all-actions' );\n\t\t\taddons.add( 'frm-limited-actions' );\n\t\t}\n\n\t\tfor ( i = 0; i < items.length; i++ ) {\n\t\t\tconst innerText = items[ i ].innerText.toLowerCase();\n\n\t\t\tconst itemCanBeShown = ! ( getExportOption() === 'xml' && items[ i ].classList.contains( 'frm-is-repeater' ) );\n\t\t\tif ( searchText === '' ) {\n\t\t\t\tif ( itemCanBeShown && checkContextualShortcode( items[ i ] ) ) {\n\t\t\t\t\titems[ i ].classList.remove( 'frm_hidden' );\n\t\t\t\t}\n\t\t\t\titems[ i ].classList.remove( 'frm-search-result' );\n\t\t\t} else if ( ( regEx && new RegExp( searchText ).test( innerText ) ) || innerText.includes( searchText ) || textMatchesPlural( innerText, searchText ) ) {\n\t\t\t\tif ( itemCanBeShown && checkContextualShortcode( items[ i ] ) ) {\n\t\t\t\t\titems[ i ].classList.remove( 'frm_hidden' );\n\t\t\t\t}\n\t\t\t\titems[ i ].classList.add( 'frm-search-result' );\n\t\t\t} else {\n\t\t\t\titems[ i ].classList.add( 'frm_hidden' );\n\t\t\t\titems[ i ].classList.remove( 'frm-search-result' );\n\t\t\t}\n\t\t}\n\n\t\t// Updates the visibility of category headings based on search results.\n\t\tupdateCatHeadingVisibility();\n\n\t\tjQuery( this ).trigger( 'frmAfterSearch' );\n\t}\n\n\t/**\n\t * Allow a search for \"signatures\" to still match \"signature\" for example when searching fields.\n\t *\n\t * @since 6.15\n\t *\n\t * @param {string} text       The text in the element we are checking for a match.\n\t * @param {string} searchText The text value that is being searched.\n\t * @return {boolean}\n\t */\n\tfunction textMatchesPlural( text, searchText ) {\n\t\tif ( searchText === 's' ) {\n\t\t\t// Don't match everything when just \"s\" is searched.\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( text[ text.length - 1 ] === 's' ) {\n\t\t\t// Do not match something with double s if the text already ends in s.\n\t\t\treturn false;\n\t\t}\n\n\t\treturn ( text + 's' ).includes( searchText );\n\t}\n\n\t/**\n\t * Updates the visibility of category headings based on search results.\n\t * If all associated fields are hidden (indicating no search matches),\n\t * the heading is hidden.\n\t *\n\t * @since 6.4.1\n\t */\n\tfunction updateCatHeadingVisibility() {\n\t\tconst insertFieldsElement = document.querySelector( '#frm-insert-fields' );\n\t\tif ( ! insertFieldsElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst headingElements = insertFieldsElement.querySelectorAll( ':scope > .frm-with-line' );\n\t\theadingElements.forEach( heading => {\n\t\t\tconst fieldsListElement = heading.nextElementSibling;\n\t\t\tif ( ! fieldsListElement ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst listItemElements = fieldsListElement.querySelectorAll( ':scope > li.frmbutton' );\n\t\t\tconst allHidden = Array.from( listItemElements ).every( li => li.classList.contains( 'frm_hidden' ) );\n\n\t\t\t// Add or remove class based on `allHidden` condition\n\t\t\theading.classList.toggle( 'frm_hidden', allHidden );\n\t\t} );\n\t}\n\n\tfunction stopPropagation( e ) {\n\t\te.stopPropagation();\n\t}\n\n\t/* Helpers */\n\n\tfunction selectedOptions( select ) {\n\t\tlet opt,\n\t\t\tresult = [],\n\t\t\toptions = select && select.options;\n\n\t\tfor ( let i = 0, iLen = options.length; i < iLen; i++ ) {\n\t\t\topt = options[ i ];\n\n\t\t\tif ( opt.selected ) {\n\t\t\t\tresult.push( opt.value );\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction triggerEvent( element, event ) {\n\t\tconst evt = document.createEvent( 'HTMLEvents' );\n\t\tevt.initEvent( event, false, true );\n\t\telement.dispatchEvent( evt );\n\t}\n\n\tfunction postAjax( data, success ) {\n\t\tlet response;\n\n\t\tconst xmlHttp = new XMLHttpRequest();\n\t\tconst params = typeof data === 'string' ? data : Object.keys( data ).map(\n\t\t\tfunction( k ) {\n\t\t\t\treturn encodeURIComponent( k ) + '=' + encodeURIComponent( data[ k ] );\n\t\t\t}\n\t\t).join( '&' );\n\n\t\txmlHttp.open( 'post', ajaxurl, true );\n\t\txmlHttp.onreadystatechange = function() {\n\t\t\tif ( xmlHttp.readyState > 3 && xmlHttp.status == 200 ) {\n\t\t\t\tresponse = xmlHttp.responseText;\n\t\t\t\ttry {\n\t\t\t\t\tresponse = JSON.parse( response );\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\t// The response may not be JSON, so just return it.\n\t\t\t\t}\n\t\t\t\tsuccess( response );\n\t\t\t}\n\t\t};\n\t\txmlHttp.setRequestHeader( 'X-Requested-With', 'XMLHttpRequest' );\n\t\txmlHttp.setRequestHeader( 'Content-type', 'application/x-www-form-urlencoded' );\n\t\txmlHttp.send( params );\n\t\treturn xmlHttp;\n\t}\n\n\tfunction fadeOut( element, success ) {\n\t\telement.classList.add( 'frm-fade' );\n\t\tsetTimeout( success, 1000 );\n\t}\n\n\tfunction invisible( classes ) {\n\t\tjQuery( classes ).css( 'visibility', 'hidden' );\n\t}\n\n\tfunction visible( classes ) {\n\t\tjQuery( classes ).css( 'visibility', 'visible' );\n\t}\n\n\tfunction initModal( id, width ) {\n\t\tconst upgradePopup = require( './upgrade-popup' );\n\t\treturn upgradePopup.initModal( id, width );\n\t}\n\n\tfunction toggle( cname, id ) {\n\t\tif ( id === '#' ) {\n\t\t\tconst cont = document.getElementById( cname );\n\t\t\tconst hidden = cont.style.display;\n\t\t\tif ( hidden === 'none' ) {\n\t\t\t\tcont.style.display = 'block';\n\t\t\t} else {\n\t\t\t\tcont.style.display = 'none';\n\t\t\t}\n\t\t} else {\n\t\t\tconst vis = cname.is( ':visible' );\n\t\t\tif ( vis ) {\n\t\t\t\tcname.hide();\n\t\t\t} else {\n\t\t\t\tcname.show();\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction removeWPUnload() {\n\t\twindow.onbeforeunload = null;\n\t\tconst w = jQuery( window );\n\t\tw.off( 'beforeunload.widgets' );\n\t\tw.off( 'beforeunload.edit-post' );\n\t}\n\n\tfunction addMultiselectLabelListener() {\n\t\tconst clickListener = e => {\n\t\t\tif ( 'LABEL' !== e.target.nodeName ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst labelFor = e.target.getAttribute( 'for' );\n\t\t\tif ( ! labelFor ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst input = document.getElementById( labelFor );\n\t\t\tif ( ! input || ! input.nextElementSibling ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst buttonToggle = input.nextElementSibling.querySelector( 'button.dropdown-toggle.multiselect' );\n\t\t\tif ( ! buttonToggle ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst triggerMultiselectClick = () => buttonToggle.click();\n\t\t\tsetTimeout( triggerMultiselectClick, 0 );\n\t\t};\n\t\tdocument.addEventListener( 'click', clickListener );\n\t}\n\n\tfunction maybeChangeEmbedFormMsg() {\n\t\tconst fieldId = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' );\n\t\tlet fieldItem = document.getElementById( 'frm_field_id_' + fieldId );\n\t\tif ( null === fieldItem || 'form' !== fieldItem.dataset.type ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfieldItem = jQuery( fieldItem );\n\n\t\tif ( this.options[ this.selectedIndex ].value ) {\n\t\t\tfieldItem.find( '.frm-not-set' )[ 0 ].classList.add( 'frm_hidden' );\n\t\t\tconst embedMsg = fieldItem.find( '.frm-embed-message' );\n\t\t\tembedMsg.html( embedMsg.data( 'embedmsg' ) + this.options[ this.selectedIndex ].text );\n\t\t\tfieldItem.find( '.frm-embed-field-placeholder' )[ 0 ].classList.remove( 'frm_hidden' );\n\t\t} else {\n\t\t\tfieldItem.find( '.frm-not-set' )[ 0 ].classList.remove( 'frm_hidden' );\n\t\t\tfieldItem.find( '.frm-embed-field-placeholder' )[ 0 ].classList.add( 'frm_hidden' );\n\t\t}\n\t}\n\n\tfunction toggleProductType() {\n\t\tconst settings = jQuery( this ).closest( '.frm-single-settings' ),\n\t\t\tcontainer = settings.find( '.frmjs_product_choices' ),\n\t\t\theading = settings.find( '.frm_prod_options_heading' ),\n\t\t\tcurrentVal = this.options[ this.selectedIndex ].value;\n\n\t\tcontainer.removeClass( 'frm_prod_type_single frm_prod_type_user_def' );\n\t\theading.removeClass( 'frm_prod_user_def' );\n\n\t\tif ( 'single' === currentVal ) {\n\t\t\tcontainer.addClass( 'frm_prod_type_single' );\n\t\t} else if ( 'user_def' === currentVal ) {\n\t\t\tcontainer.addClass( 'frm_prod_type_user_def' );\n\t\t\theading.addClass( 'frm_prod_user_def' );\n\t\t}\n\t}\n\n\t/**\n\t * @param {Number | string} fieldId\n\t * @return {boolean} True if the field is a product field.\n\t */\n\tfunction isProductField( fieldId ) {\n\t\tconst field = document.getElementById( 'frm_field_id_' + fieldId );\n\t\tif ( field === null ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn 'product' === field.getAttribute( 'data-type' );\n\t}\n\n\t/**\n\t * Serialize form data with vanilla JS.\n\t */\n\tfunction formToData( form ) {\n\t\tlet subKey, i,\n\t\t\tobject = {},\n\t\t\tformData = form.elements;\n\n\t\tfor ( i = 0; i < formData.length; i++ ) {\n\t\t\tlet input = formData[ i ],\n\t\t\t\tkey = input.name,\n\t\t\t\tvalue = input.value,\n\t\t\t\tnames = key.match( /(.*)\\[(.*)\\]/ );\n\n\t\t\tif ( ( input.type === 'radio' || input.type === 'checkbox' ) && ! input.checked ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( names !== null ) {\n\t\t\t\tkey = names[ 1 ];\n\t\t\t\tsubKey = names[ 2 ];\n\t\t\t\tif ( ! Reflect.has( object, key ) ) {\n\t\t\t\t\tobject[ key ] = {};\n\t\t\t\t}\n\t\t\t\tobject[ key ][ subKey ] = value;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Reflect.has in favor of: object.hasOwnProperty(key)\n\t\t\tif ( ! Reflect.has( object, key ) ) {\n\t\t\t\tobject[ key ] = value;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ( ! Array.isArray( object[ key ] ) ) {\n\t\t\t\tobject[ key ] = [ object[ key ] ];\n\t\t\t}\n\t\t\tobject[ key ].push( value );\n\t\t}\n\n\t\treturn object;\n\t}\n\n\t/**\n\t * Show, hide, and sort subfields of Name field on form builder.\n\t *\n\t * @since 4.11\n\t */\n\tfunction handleNameFieldOnFormBuilder() {\n\t\t/**\n\t\t * Gets subfield element from cache.\n\t\t *\n\t\t * @param {string} fieldId Field ID.\n\t\t * @param {string} key     Cache key.\n\t\t * @return {HTMLElement|undefined} Return the element from cache or undefined if not found.\n\t\t */\n\t\tconst getSubFieldElFromCache = ( fieldId, key ) => {\n\t\t\twindow.frmCachedSubFields = window.frmCachedSubFields || {};\n\t\t\twindow.frmCachedSubFields[ fieldId ] = window.frmCachedSubFields[ fieldId ] || {};\n\t\t\treturn window.frmCachedSubFields[ fieldId ][ key ];\n\t\t};\n\n\t\t/**\n\t\t * Sets subfield element to cache.\n\t\t *\n\t\t * @param {string}      fieldId Field ID.\n\t\t * @param {string}      key     Cache key.\n\t\t * @param {HTMLElement} el      Element.\n\t\t */\n\t\tconst setSubFieldElToCache = ( fieldId, key, el ) => {\n\t\t\twindow.frmCachedSubFields = window.frmCachedSubFields || {};\n\t\t\twindow.frmCachedSubFields[ fieldId ] = window.frmCachedSubFields[ fieldId ] || {};\n\t\t\twindow.frmCachedSubFields[ fieldId ][ key ] = el;\n\t\t};\n\n\t\t/**\n\t\t * Gets column class from the number of columns.\n\t\t *\n\t\t * @param {Number} colCount Number of columns.\n\t\t * @return {string}\n\t\t */\n\t\tconst getColClass = colCount => 'frm' + parseInt( 12 / colCount );\n\n\t\tconst colClasses = [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12 ].map( num => 'frm' + num );\n\n\t\tconst allSubFieldNames = [ 'first', 'middle', 'last' ];\n\n\t\t/**\n\t\t * Handles name layout change.\n\t\t *\n\t\t * @param {Event} event Event object.\n\t\t */\n\t\tconst onChangeLayout = event => {\n\t\t\tconst value = event.target.value;\n\t\t\tconst subFieldNames = value.split( '_' );\n\t\t\tconst fieldId = event.target.dataset.fieldId;\n\n\t\t\t/*\n\t\t\t * Live update form on the form builder.\n\t\t\t */\n\t\t\tconst container = document.querySelector( '#field_' + fieldId + '_inner_container .frm_combo_inputs_container' );\n\t\t\tconst newColClass = getColClass( subFieldNames.length );\n\n\t\t\t// Set all sub field elements to cache and hide all of them first.\n\t\t\tallSubFieldNames.forEach( name => {\n\t\t\t\tconst subFieldEl = container.querySelector( '[data-sub-field-name=\"' + name + '\"]' );\n\t\t\t\tif ( subFieldEl ) {\n\t\t\t\t\tsubFieldEl.classList.add( 'frm_hidden' );\n\t\t\t\t\tsubFieldEl.classList.remove( ...colClasses );\n\t\t\t\t\tsetSubFieldElToCache( fieldId, name, subFieldEl );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tsubFieldNames.forEach( subFieldName => {\n\t\t\t\tconst subFieldEl = getSubFieldElFromCache( fieldId, subFieldName );\n\t\t\t\tif ( ! subFieldEl ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsubFieldEl.classList.remove( 'frm_hidden' );\n\t\t\t\tsubFieldEl.classList.add( newColClass );\n\n\t\t\t\tcontainer.append( subFieldEl );\n\t\t\t} );\n\n\t\t\t/*\n\t\t\t * Live update subfield options.\n\t\t\t */\n\t\t\t// Hide all subfield options.\n\t\t\tallSubFieldNames.forEach( name => {\n\t\t\t\tconst optionsEl = document.querySelector( '.frm_sub_field_options-' + name + '[data-field-id=\"' + fieldId + '\"]' );\n\t\t\t\tif ( optionsEl ) {\n\t\t\t\t\toptionsEl.classList.add( 'frm_hidden' );\n\t\t\t\t\tsetSubFieldElToCache( fieldId, name + '_options', optionsEl );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tsubFieldNames.forEach( subFieldName => {\n\t\t\t\tconst optionsEl = getSubFieldElFromCache( fieldId, subFieldName + '_options' );\n\t\t\t\tif ( ! optionsEl ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\toptionsEl.classList.remove( 'frm_hidden' );\n\t\t\t} );\n\t\t};\n\n\t\tconst dropdownSelector = '.frm_name_layout_dropdown';\n\t\tdocument.addEventListener( 'change', event => {\n\t\t\tif ( event.target.matches( dropdownSelector ) ) {\n\t\t\t\tonChangeLayout( event );\n\t\t\t}\n\t\t}, false );\n\t}\n\n\tfunction debounce( func, wait = 100 ) {\n\t\treturn frmDom.util.debounce( func, wait );\n\t}\n\n\tfunction addSaveAndDragIconsToOption( fieldId, liObject ) {\n\t\tlet li, useTag, useTagHref;\n\t\tlet hasDragIcon = false;\n\t\tlet hasSaveIcon = false;\n\n\t\tif ( liObject.newOption ) {\n\t\t\tconst parser = new DOMParser();\n\t\t\tli = parser.parseFromString( liObject.newOption, 'text/html' ).body.childNodes[ 0 ];\n\t\t} else {\n\t\t\tli = liObject;\n\t\t}\n\n\t\tconst liIcons = li.querySelectorAll( 'svg' );\n\n\t\tliIcons.forEach( ( svg, key ) => {\n\t\t\tuseTag = svg.getElementsByTagNameNS( 'http://www.w3.org/2000/svg', 'use' )[ 0 ];\n\t\t\tif ( ! useTag ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tuseTagHref = getSVGHref( useTag );\n\n\t\t\tif ( useTagHref === '#frm_drag_icon' ) {\n\t\t\t\thasDragIcon = true;\n\t\t\t}\n\n\t\t\tif ( useTagHref === '#frm_save_icon' ) {\n\t\t\t\thasSaveIcon = true;\n\t\t\t}\n\t\t} );\n\n\t\tif ( ! hasDragIcon ) {\n\t\t\tli.prepend( icons.drag.cloneNode( true ) );\n\t\t}\n\n\t\tif ( li.querySelector( `[id^=field_key_${ fieldId }-]` ) && ! hasSaveIcon ) {\n\t\t\tli.querySelector( `[id^=field_key_${ fieldId }-]` ).after( icons.save.cloneNode( true ) );\n\t\t}\n\n\t\tif ( liObject.newOption ) {\n\t\t\tliObject.newOption = li;\n\t\t}\n\t}\n\n\tfunction maybeAddSaveAndDragIcons( fieldId ) {\n\t\tconst fieldOptions = document.querySelectorAll( `[id^=frm_delete_field_${ fieldId }-]` );\n\t\t// return if there are no options.\n\t\tif ( fieldOptions.length < 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst options = [ ...fieldOptions ].slice( 1 );\n\t\toptions.forEach( ( li, _key ) => {\n\t\t\tif ( li.classList.contains( 'frm_other_option' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\taddSaveAndDragIconsToOption( fieldId, li );\n\t\t} );\n\t}\n\n\t/**\n\t * Enforce the maximum number of entries list columns dynamically.\n\t *\n\t * @since 6.24\n\t *\n\t * @return {void}\n\t */\n\tfunction maybeInitEntriesListPage() {\n\t\tif ( ! document.body.classList.contains( 'frm-admin-page-entries' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst screenOptionsWrapper = document.getElementById( 'screen-options-wrap' );\n\t\tif ( ! screenOptionsWrapper ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst maxSelectionsNote = div( {\n\t\t\tclassName: 'frm_warning_style',\n\t\t\ttext: __( 'Only 10 columns can be selected at a time.', 'formidable' ),\n\t\t} );\n\t\tmaxSelectionsNote.style.margin = 0;\n\n\t\tconst legend = screenOptionsWrapper.querySelector( 'legend' );\n\t\tlegend.parentNode.insertBefore( maxSelectionsNote, legend.nextElementSibling );\n\n\t\tconst checkboxes = Array.from( screenOptionsWrapper.querySelectorAll( 'input[type=\"checkbox\"]' ) );\n\t\tconst maximumColumns = 10;\n\t\tconst getSelectedCount = () => {\n\t\t\treturn checkboxes.reduce( ( count, checkbox ) => {\n\t\t\t\treturn checkbox.checked ? count + 1 : count;\n\t\t\t}, 0 );\n\t\t};\n\t\tconst disableCheckboxesIfAtMax = () => {\n\t\t\tif ( getSelectedCount() >= maximumColumns ) {\n\t\t\t\tmaxSelectionsNote.classList.remove( 'frm_hidden' );\n\t\t\t\tcheckboxes.forEach( checkbox => {\n\t\t\t\t\tif ( ! checkbox.checked ) {\n\t\t\t\t\t\tcheckbox.parentNode.classList.add( 'frm_noallow' );\n\t\t\t\t\t\tcheckbox.disabled = true;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tmaxSelectionsNote.classList.add( 'frm_hidden' );\n\t\t\t}\n\t\t};\n\t\tconst addCheckboxListeners = () => {\n\t\t\tcheckboxes.forEach(\n\t\t\t\tcheckbox => {\n\t\t\t\t\tcheckbox.addEventListener(\n\t\t\t\t\t\t'change',\n\t\t\t\t\t\tevent => {\n\t\t\t\t\t\t\tif ( event.target.checked ) {\n\t\t\t\t\t\t\t\tdisableCheckboxesIfAtMax();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmaxSelectionsNote.classList.add( 'frm_hidden' );\n\n\t\t\t\t\t\t\t\t// Enable all checkboxes when a checkbox is unchecked.\n\t\t\t\t\t\t\t\tcheckboxes.forEach(\n\t\t\t\t\t\t\t\t\tcheckbox => {\n\t\t\t\t\t\t\t\t\t\tcheckbox.parentNode.classList.remove( 'frm_noallow' );\n\t\t\t\t\t\t\t\t\t\tcheckbox.disabled = false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t};\n\n\t\tdisableCheckboxesIfAtMax();\n\t\taddCheckboxListeners();\n\t}\n\n\tfunction initOnSubmitAction() {\n\t\tconst onChangeType = event => {\n\t\t\tif ( ! event.target.checked ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst actionEl = event.target.closest( '.frm_form_action_settings' );\n\t\t\tactionEl.querySelectorAll( '.frm_on_submit_dependent_setting:not(.frm_hidden)' ).forEach( el => {\n\t\t\t\tel.classList.add( 'frm_hidden' );\n\t\t\t} );\n\n\t\t\tconst activeEls = actionEl.querySelectorAll( '.frm_on_submit_dependent_setting[data-show-if-' + event.target.value + ']' );\n\t\t\tactiveEls.forEach( activeEl => {\n\t\t\t\tactiveEl.classList.remove( 'frm_hidden' );\n\t\t\t} );\n\n\t\t\tactionEl.setAttribute( 'data-on-submit-type', event.target.value );\n\t\t};\n\n\t\tfrmDom.util.documentOn( 'change', '.frm_on_submit_type input[type=\"radio\"]', onChangeType );\n\t}\n\n\t/**\n\t * Listen for click events for an API-loaded email collection form.\n\t *\n\t * This is used for the Active Campaign sign-up form in the inbox page (when there are no messages).\n\t */\n\tfunction initAddMyEmailAddress() {\n\t\tjQuery( document ).on(\n\t\t\t'click',\n\t\t\t'#frm-add-my-email-address',\n\t\t\tevent => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\taddMyEmailAddress();\n\t\t\t}\n\t\t);\n\n\t\tconst emptyInbox = document.getElementById( 'frm_empty_inbox' );\n\t\tconst leaveEmailInput = document.getElementById( 'frm_leave_email' );\n\n\t\tif ( emptyInbox && leaveEmailInput ) {\n\t\t\tconst leaveEmailModal = document.getElementById( 'frm-leave-email-modal' );\n\t\t\tleaveEmailModal.classList.remove( 'frm_hidden' );\n\t\t\tleaveEmailModal.querySelector( '.frm_modal_footer' ).classList.add( 'frm_hidden' );\n\n\t\t\tleaveEmailInput.addEventListener(\n\t\t\t\t'keyup',\n\t\t\t\tevent => {\n\t\t\t\t\tif ( 'Enter' === event.key ) {\n\t\t\t\t\t\tconst button = document.getElementById( 'frm-add-my-email-address' );\n\t\t\t\t\t\tif ( button ) {\n\t\t\t\t\t\t\tbutton.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction addMyEmailAddress() {\n\t\tconst email = document.getElementById( 'frm_leave_email' ).value.trim();\n\t\tif ( '' === email ) {\n\t\t\thandleEmailAddressError( 'empty' );\n\t\t\treturn;\n\t\t}\n\n\t\tconst regex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/i;\n\t\tif ( regex.test( email ) === false ) {\n\t\t\thandleEmailAddressError( 'invalid' );\n\t\t\treturn;\n\t\t}\n\n\t\tconst $hiddenForm = jQuery( '#frmapi-email-form' ).find( 'form' );\n\t\tconst $hiddenEmailField = $hiddenForm.find( '[type=\"email\"]' ).not( '.frm_verify' );\n\t\tif ( ! $hiddenEmailField.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst emptyInbox = document.getElementById( 'frm_empty_inbox' );\n\t\tif ( emptyInbox ) {\n\t\t\tdocument.getElementById( 'frm-add-my-email-address' ).remove();\n\n\t\t\tconst emailWrapper = document.getElementById( 'frm_leave_email_wrapper' );\n\t\t\tif ( emailWrapper ) {\n\t\t\t\temailWrapper.classList.add( 'frm_hidden' );\n\t\t\t\tconst spinner = span( { className: 'frm-wait frm_spinner' } );\n\t\t\t\tspinner.style.visibility = 'visible';\n\t\t\t\tspinner.style.float = 'none';\n\t\t\t\tspinner.style.width = 'unset';\n\t\t\t\temailWrapper.parentElement.insertBefore(\n\t\t\t\t\tspinner,\n\t\t\t\t\temailWrapper.nextElementSibling\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t$hiddenEmailField.val( email );\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: $hiddenForm.attr( 'action' ),\n\t\t\tdata: $hiddenForm.serialize() + '&action=frm_forms_preview'\n\t\t} ).done( function( data ) {\n\t\t\tconst message = jQuery( data ).find( '.frm_message' ).text().trim();\n\t\t\tif ( ! message.includes( 'Thanks!' ) ) {\n\t\t\t\thandleEmailAddressError( 'invalid' );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst apiForm = document.getElementById( 'frmapi-email-form' );\n\t\t\tconst spinner = apiForm.parentElement.querySelector( '.frm_spinner' );\n\t\t\tif ( spinner ) {\n\t\t\t\tspinner.remove();\n\t\t\t}\n\n\t\t\tconst showSuccessMessage = wp.hooks.applyFilters( 'frm_thank_you_on_signup', true );\n\t\t\tif ( showSuccessMessage ) {\n\t\t\t\t// Handle successful form submission.\n\t\t\t\t// handle the Active Campaign form on the inbox page.\n\t\t\t\tdocument.getElementById( 'frm_leave_email_wrapper' ).replaceWith(\n\t\t\t\t\tspan( __( 'Thank you for signing up!', 'formidable' ) )\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Adds footer links to the admin body content.\n\t *\n\t * @return {void}\n\t */\n\tfunction addAdminFooterLinks() {\n\t\tconst footerLinks = document.querySelector( '.frm-admin-footer-links' );\n\t\tconst container = document.querySelector( '.frm_page_container' ) ?? document.getElementById( 'wpbody-content' );\n\n\t\tif ( ! footerLinks || ! container ) {\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.append( footerLinks );\n\t\tfooterLinks.classList.remove( 'frm_hidden' );\n\t}\n\n\t/**\n\t * Apply zebra striping to a table while ignoring empty rows.\n\t *\n\t * @param {string} tableSelector The CSS selector for the table.\n\t * @param {string} emptyRowClass The class name used to identify empty rows.\n\t */\n\tfunction applyZebraStriping( tableSelector, emptyRowClass ) {\n\t\t// Get all non-empty table rows within the specified table\n\t\tconst rows = document.querySelectorAll( `${ tableSelector } tr${ emptyRowClass ? `:not(.${ emptyRowClass })` : '' }` );\n\t\tif ( rows.length < 1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet isOdd = true;\n\t\trows.forEach( row => {\n\t\t\t// Clean old \"frm-odd\" or \"frm-even\" classes and add the appropriate new class\n\t\t\trow.classList.remove( 'frm-odd', 'frm-even' );\n\t\t\trow.classList.add( isOdd ? 'frm-odd' : 'frm-even' );\n\n\t\t\tisOdd = ! isOdd;\n\t\t} );\n\n\t\tconst tables = document.querySelectorAll( tableSelector );\n\t\ttables.forEach( table => table.classList.add( 'frm-zebra-striping' ) );\n\t}\n\n\tfunction maybeHideShortcodes( e ) {\n\t\tif ( ! builderPage ) {\n\t\t\te.stopPropagation();\n\t\t}\n\n\t\tif ( e.target.classList.contains( 'frm-show-box' ) || ( e.target.parentElement && e.target.parentElement.classList.contains( 'frm-show-box' ) ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst sidebar = document.getElementById( 'frm_adv_info' );\n\t\tif ( ! sidebar ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( sidebar.dataset.fills === e.target.id && typeof e.target.id !== 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isChild = e.target.closest( '#frm_adv_info' );\n\n\t\tif ( ! isChild && sidebar.style.display !== 'none' ) {\n\t\t\thideShortcodes( sidebar );\n\t\t}\n\t}\n\n\t/**\n\t * Initializes and manages the visibility of dependent elements based on the selected options in dropdowns with the 'frm_select_with_dependency' class.\n\t * It sets up initial visibility at page load and updates it on each dropdown change.\n\t *\n\t * @since 6.9\n\t *\n\t * @return {void}\n\t */\n\tfunction initSelectDependencies() {\n\t\tconst selects = document.querySelectorAll( 'select.frm_select_with_dependency' );\n\n\t\t/**\n\t\t * Toggles the visibility of dependent elements associated with a select element based on its current selection.\n\t\t *\n\t\t * @since 6.9\n\t\t *\n\t\t * @param {HTMLElement} select The select element whose dependencies need to be managed.\n\t\t * @return {void}\n\t\t */\n\t\tfunction toggleDependencyVisibility( select ) {\n\t\t\tconst selectedOption = select.options[ select.selectedIndex ];\n\t\t\tselect.querySelectorAll( 'option[data-dependency]:not([data-dependency-skip])' ).forEach( option => {\n\t\t\t\tconst dependencyElement = document.querySelector( option.dataset.dependency );\n\t\t\t\tdependencyElement?.classList.toggle( 'frm_hidden', selectedOption !== option );\n\t\t\t} );\n\t\t}\n\n\t\t// Initial setup: Show dependencies based on the current selection in each dropdown\n\t\tselects.forEach( toggleDependencyVisibility );\n\n\t\t// Update dependencies visibility on dropdown change\n\t\tfrmDom.util.documentOn( 'change', 'select.frm_select_with_dependency', event => toggleDependencyVisibility( event.target ) );\n\t}\n\n\t/**\n\t * Moves the focus to the next single option input field in the list and positions the cursor at the end of the text.\n\t *\n\t * @param {HTMLElement} currentInput The currently focused input element.\n\t */\n\tfunction focusNextSingleOptionInput( currentInput ) {\n\t\tconst optionsList = currentInput.closest( '.frm_single_option' ).parentElement;\n\t\tconst inputs = optionsList.querySelectorAll( '.frm_single_option input[name^=\"field_options[\" ], .frm_single_option input[name^=\"rows_\"]' );\n\t\tconst inputsArray = Array.from( inputs );\n\n\t\t// Find the index of the currently focused input\n\t\tconst currentIndex = inputsArray.indexOf( currentInput );\n\n\t\tif ( currentIndex < 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Find the next visible input field\n\t\tconst nextInput = inputsArray.slice( currentIndex + 1 ).find( input => input.offsetParent !== null );\n\n\t\tif ( nextInput ) {\n\t\t\tnextInput.focus();\n\n\t\t\t// Move the cursor to the end of the text in the next input field\n\t\t\tconst textLength = nextInput.value.length;\n\t\t\tnextInput.setSelectionRange( textLength, textLength );\n\t\t}\n\t}\n\n\treturn {\n\t\tinit: function() {\n\t\t\tinitAddMyEmailAddress();\n\t\t\taddAdminFooterLinks();\n\n\t\t\tdocument.addEventListener( 'show.bs.dropdown', function() {\n\t\t\t\t// Fixes issues with tooltips lingering after a dropdown is shown.\n\t\t\t\tdeleteTooltips();\n\t\t\t} );\n\n\t\t\ts = {};\n\n\t\t\t// Bootstrap dropdown button\n\t\t\tjQuery( '.wp-admin' ).on( 'click', function( e ) {\n\t\t\t\tconst t = jQuery( e.target );\n\t\t\t\tconst $openDrop = jQuery( '.dropdown.open' );\n\t\t\t\tif ( $openDrop.length && ! t.hasClass( 'dropdown' ) && ! t.closest( '.dropdown' ).length ) {\n\t\t\t\t\t$openDrop.removeClass( 'open' );\n\t\t\t\t}\n\t\t\t} );\n\t\t\tjQuery( '#frm_bs_dropdown:not(.open) a' ).on( 'click', focusSearchBox );\n\n\t\t\tif ( typeof thisFormId === 'undefined' ) {\n\t\t\t\tthisFormId = jQuery( document.getElementById( 'form_id' ) ).val();\n\t\t\t}\n\n\t\t\t// Add event listener for dismissible warning messages.\n\t\t\tdocument.querySelectorAll( '.frm-warning-dismiss' ).forEach( dismissIcon => {\n\t\t\t\tonClickPreventDefault( dismissIcon, dismissWarningMessage );\n\t\t\t} );\n\n\t\t\tfrmAdminBuild.inboxBannerInit();\n\n\t\t\tif ( $newFields.length > 0 ) {\n\t\t\t\t// only load this on the form builder page\n\t\t\t\tfrmAdminBuild.buildInit();\n\t\t\t} else if ( document.getElementById( 'frm_notification_settings' ) !== null ) {\n\t\t\t\t// only load on form settings page\n\t\t\t\tfrmAdminBuild.settingsInit();\n\t\t\t} else if ( document.getElementById( 'frm_styling_form' ) !== null ) {\n\t\t\t\t// load styling settings js\n\t\t\t\tfrmAdminBuild.styleInit();\n\t\t\t} else if ( document.getElementById( 'form_global_settings' ) !== null ) {\n\t\t\t\t// global settings page\n\t\t\t\tfrmAdminBuild.globalSettingsInit();\n\t\t\t} else if ( document.getElementById( 'frm_export_xml' ) !== null ) {\n\t\t\t\t// import/export page\n\t\t\t\tfrmAdminBuild.exportInit();\n\t\t\t} else if ( null !== document.querySelector( '.frm-inbox-wrapper' ) ) {\n\t\t\t\t// Dashboard page inbox.\n\t\t\t\tfrmAdminBuild.inboxInit();\n\t\t\t} else if ( document.getElementById( 'frm-welcome' ) !== null ) {\n\t\t\t\t// Solution install page\n\t\t\t\tfrmAdminBuild.solutionInit();\n\t\t\t} else {\n\t\t\t\tmaybeInitEntriesListPage();\n\n\t\t\t\tinitAutocomplete();\n\n\t\t\t\tjQuery( '[data-frmprint]' ).on( 'click', function() {\n\t\t\t\t\twindow.print();\n\t\t\t\t\treturn false;\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tjQuery( document ).on( 'change', 'select[data-toggleclass], input[data-toggleclass]', toggleFormOpts );\n\t\t\tinitSelectDependencies();\n\n\t\t\tconst $advInfo = jQuery( document.getElementById( 'frm_adv_info' ) );\n\t\t\tif ( $advInfo.length > 0 || jQuery( '.frm_field_list' ).length > 0 ) {\n\t\t\t\t// only load on the form, form settings, and view settings pages\n\t\t\t\tfrmAdminBuild.panelInit();\n\t\t\t}\n\n\t\t\tloadTooltips();\n\t\t\tinitUpgradeModal();\n\t\t\tfrmDom.util.documentOn( 'click', '[data-modal-title]', showBasicModal );\n\n\t\t\t// used on build, form settings, and view settings\n\t\t\tconst $shortCodeDiv = jQuery( document.getElementById( 'frm_shortcodediv' ) );\n\t\t\tif ( $shortCodeDiv.length > 0 ) {\n\t\t\t\tjQuery( 'a.edit-frm_shortcode' ).on( 'click', function() {\n\t\t\t\t\tif ( $shortCodeDiv.is( ':hidden' ) ) {\n\t\t\t\t\t\t$shortCodeDiv.slideDown( 'fast' );\n\t\t\t\t\t\tthis.style.display = 'none';\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t} );\n\n\t\t\t\tjQuery( '.cancel-frm_shortcode', '#frm_shortcodediv' ).on( 'click', function() {\n\t\t\t\t\t$shortCodeDiv.slideUp( 'fast' );\n\t\t\t\t\t$shortCodeDiv.siblings( 'a.edit-frm_shortcode' ).show();\n\t\t\t\t\treturn false;\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// tabs\n\t\t\tjQuery( document ).on( 'click', '#frm-nav-tabs a', clickNewTab );\n\t\t\tjQuery( '.post-type-frm_display .frm-nav-tabs a, .frm-category-tabs a' ).on( 'click', function() {\n\t\t\t\tconst showUpgradeTab = this.classList.contains( 'frm_show_upgrade_tab' );\n\t\t\t\tif ( this.classList.contains( 'frm_noallow' ) && ! showUpgradeTab ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( showUpgradeTab ) {\n\t\t\t\t\tpopulateUpgradeTab( this );\n\t\t\t\t}\n\n\t\t\t\tclickTab( this );\n\t\t\t\treturn false;\n\t\t\t} );\n\t\t\tclickTab( jQuery( '.starttab a' ), 'auto' );\n\n\t\t\t// submit the search form with dropdown\n\t\t\tjQuery( document ).on( 'click', '#frm-fid-search-menu a', function() {\n\t\t\t\tconst val = this.id.replace( 'fid-', '' );\n\t\t\t\tjQuery( 'select[name=\"fid\"]' ).val( val );\n\t\t\t\ttriggerSubmit( document.getElementById( 'posts-filter' ) );\n\t\t\t\treturn false;\n\t\t\t} );\n\n\t\t\tjQuery( '.frm_select_box' ).on( 'click focus', function() {\n\t\t\t\tthis.select();\n\t\t\t} );\n\n\t\t\tjQuery( document ).on( 'input search change', '.frm-auto-search:not(#frm-form-templates-page #template-search-input)', searchContent );\n\t\t\tjQuery( document ).on( 'focusin click', '.frm-auto-search', stopPropagation );\n\t\t\tconst autoSearch = jQuery( '.frm-auto-search' );\n\t\t\tif ( autoSearch.val() !== '' ) {\n\t\t\t\tautoSearch.trigger( 'keyup' );\n\t\t\t}\n\n\t\t\t// Initialize Formidable Connection.\n\t\t\tFrmFormsConnect.init();\n\n\t\t\tjQuery( document ).on( 'click', '.frm-install-addon', installAddon );\n\t\t\tjQuery( document ).on( 'click', '.frm-activate-addon', activateAddon );\n\t\t\tjQuery( document ).on( 'click', '.frm-solution-multiple', installMultipleAddons );\n\n\t\t\t// prevent annoying confirmation message from WordPress\n\t\t\tjQuery( 'button, input[type=submit]' ).on( 'click', removeWPUnload );\n\n\t\t\taddMultiselectLabelListener();\n\n\t\t\tfrmAdminBuild.hooks.addFilter(\n\t\t\t\t'frm_before_embed_modal',\n\t\t\t\t( ids, { element, type } ) => {\n\t\t\t\t\tif ( 'form' !== type ) {\n\t\t\t\t\t\treturn ids;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet formId, formKey;\n\t\t\t\t\tconst row = element.closest( 'tr' );\n\n\t\t\t\t\tif ( row ) {\n\t\t\t\t\t\t// Embed icon on form index.\n\t\t\t\t\t\tformId = parseInt( row.querySelector( '.column-id' ).textContent );\n\t\t\t\t\t\tformKey = row.querySelector( '.column-form_key' ).textContent;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Embed button in form builder / form settings.\n\t\t\t\t\t\tformId = document.getElementById( 'form_id' ).value;\n\n\t\t\t\t\t\tconst formKeyInput = document.getElementById( 'frm_form_key' );\n\t\t\t\t\t\tif ( formKeyInput ) {\n\t\t\t\t\t\t\tformKey = formKeyInput.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst previewDrop = document.getElementById( 'frm-previewDrop' );\n\t\t\t\t\t\t\tif ( previewDrop ) {\n\t\t\t\t\t\t\t\tformKey = previewDrop.nextElementSibling.querySelector( '.dropdown-item a' ).getAttribute( 'href' ).split( 'form=' )[ 1 ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn [ formId, formKey ];\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tdocument.querySelectorAll( '#frm-show-fields > li, .frm_grid_container li' ).forEach( ( el, _key ) => {\n\t\t\t\tel.addEventListener( 'click', function() {\n\t\t\t\t\tconst fieldId = this.querySelector( 'li' )?.dataset.fid || this.dataset.fid;\n\t\t\t\t\tmaybeAddSaveAndDragIcons( fieldId );\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\tconst smallScreenProceedButton = document.getElementById( 'frm_small_screen_proceed_button' );\n\t\t\tif ( smallScreenProceedButton ) {\n\t\t\t\tonClickPreventDefault( smallScreenProceedButton, () => {\n\t\t\t\t\tdocument.getElementById( 'frm_small_device_message_container' )?.remove();\n\t\t\t\t\tdoJsonPost( 'small_screen_proceed', new FormData() );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tconst saleBanner = document.getElementById( 'frm_sale_banner' );\n\t\t\tconst saleDismiss = saleBanner?.querySelector( '.dismiss' );\n\t\t\tif ( saleBanner ) {\n\t\t\t\tonClickPreventDefault( saleBanner, event => {\n\t\t\t\t\tconst target = event.target;\n\t\t\t\t\tif ( target.closest( '.dismiss' ) ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\twindow.location.href = saleBanner.getAttribute( 'data-url' );\n\t\t\t\t} );\n\n\t\t\t\tif ( saleDismiss ) {\n\t\t\t\t\tonClickPreventDefault( saleDismiss, () => {\n\t\t\t\t\t\tsaleBanner.remove();\n\n\t\t\t\t\t\tconst formData = new FormData();\n\t\t\t\t\t\tdoJsonPost( 'sale_banner_dismiss', formData );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tbuildInit: function() {\n\t\t\tjQuery( '#frm_builder_page' ).on( 'mouseup', '*:not(.frm-show-box)', maybeHideShortcodes );\n\n\t\t\tlet loadFieldId, $builderForm, builderArea;\n\n\t\t\tdebouncedSyncAfterDragAndDrop = debounce( syncAfterDragAndDrop, 10 );\n\t\t\tpostBodyContent = document.getElementById( 'post-body-content' );\n\t\t\t$postBodyContent = jQuery( postBodyContent );\n\n\t\t\tif ( jQuery( '.frm_field_loading' ).length ) {\n\t\t\t\tloadFieldId = jQuery( '.frm_field_loading' ).first().attr( 'id' );\n\t\t\t\tloadFields( loadFieldId );\n\t\t\t}\n\n\t\t\tsetupSortable( 'ul.frm_sorting' );\n\n\t\t\tdocument.querySelectorAll( '.field_type_list > li:not(.frm_show_upgrade)' ).forEach( makeDraggable );\n\n\t\t\tjQuery( 'ul.field_type_list, .field_type_list li, ul.frm_code_list, .frm_code_list li, .frm_code_list li a, #frm_adv_info #category-tabs li, #frm_adv_info #category-tabs li a' ).disableSelection();\n\n\t\t\tjQuery( '.frm_submit_ajax' ).on( 'click', submitBuild );\n\t\t\tjQuery( '.frm_submit_no_ajax' ).on( 'click', submitNoAjax );\n\n\t\t\taddFormNameModalEvents();\n\n\t\t\tjQuery( 'a.edit-form-status' ).on( 'click', slideDown );\n\t\t\tjQuery( '.cancel-form-status' ).on( 'click', slideUp );\n\t\t\tjQuery( '.save-form-status' ).on( 'click', function() {\n\t\t\t\tconst newStatus = jQuery( document.getElementById( 'form_change_status' ) ).val();\n\t\t\t\tjQuery( 'input[name=\"new_status\"]' ).val( newStatus );\n\t\t\t\tjQuery( document.getElementById( 'form-status-display' ) ).html( newStatus );\n\t\t\t\tjQuery( '.cancel-form-status' ).trigger( 'click' );\n\t\t\t\treturn false;\n\t\t\t} );\n\n\t\t\tjQuery( '.frm_form_builder form' ).first().on( 'submit', function() {\n\t\t\t\tjQuery( '.inplace_field' ).trigger( 'blur' );\n\t\t\t} );\n\n\t\t\tinitiateMultiselect();\n\t\t\trenumberPageBreaks();\n\n\t\t\t$builderForm = jQuery( builderForm );\n\t\t\tbuilderArea = document.getElementById( 'frm_form_editor_container' );\n\t\t\t$builderForm.on( 'click', '.frm_add_logic_row', addFieldLogicRow );\n\t\t\t$builderForm.on( 'click', '.frm_add_watch_lookup_row', addWatchLookupRow );\n\t\t\t$builderForm.on( 'change', '.frm_get_values_form', updateGetValueFieldSelection );\n\t\t\t$builderForm.on( 'change', '.frm_logic_field_opts', getFieldValues );\n\t\t\t$builderForm.on( 'frm-multiselect-changed', 'select[name^=\"field_options[admin_only_\"]', adjustVisibilityValuesForEveryoneValues );\n\n\t\t\tjQuery( document.getElementById( 'frm-insert-fields' ) ).on( 'click', '.frm_add_field', addFieldClick );\n\t\t\t$newFields.on( 'click', '.frm_clone_field', duplicateField );\n\t\t\t$builderForm.on( 'blur', 'input[id^=\"frm_calc\"]', checkCalculationCreatedByUser );\n\t\t\t$builderForm.on( 'change', 'input.frm_format_opt, input.frm_max_length_opt', toggleInvalidMsg );\n\t\t\t$builderForm.on( 'change click', '[data-changeme]', liveChanges );\n\t\t\t$builderForm.on( 'click', 'input.frm_req_field', markRequired );\n\t\t\t$builderForm.on( 'click', '.frm_mark_unique', markUnique );\n\n\t\t\t$builderForm.on( 'change', '.frm_repeat_format', toggleRepeatButtons );\n\t\t\t$builderForm.on( 'change', '.frm_repeat_limit', checkRepeatLimit );\n\t\t\t$builderForm.on( 'change', '.frm_js_checkbox_limit', checkCheckboxSelectionsLimit );\n\t\t\t$builderForm.on( 'input', 'input[name^=\"field_options[add_label_\"]', function() {\n\t\t\t\tupdateRepeatText( this, 'add' );\n\t\t\t} );\n\t\t\t$builderForm.on( 'input', 'input[name^=\"field_options[remove_label_\"]', function() {\n\t\t\t\tupdateRepeatText( this, 'remove' );\n\t\t\t} );\n\t\t\t$builderForm.on( 'change', 'select[name^=\"field_options[data_type_\"]', maybeClearWatchFields );\n\t\t\tjQuery( builderArea ).on( 'click', '.frm-collapse-page', maybeCollapsePage );\n\t\t\tjQuery( builderArea ).on( 'click', '.frm-collapse-section', maybeCollapseSection );\n\t\t\t$builderForm.on( 'click', '.frm-single-settings h3, .frm-single-settings h4.frm-collapsible', maybeCollapseSettings );\n\t\t\t$builderForm.on( 'keydown', '.frm-single-settings h3, .frm-single-settings h4.frm-collapsible', function( event ) {\n\t\t\t\t// If so, only proceed if the key pressed was 'Enter' or 'Space'\n\t\t\t\tif ( event.key === 'Enter' || event.key === ' ' ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tmaybeCollapseSettings.call( this, event );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tjQuery( builderArea ).on( 'show.bs.dropdown hide.bs.dropdown', changeSectionStyle );\n\n\t\t\t$builderForm.on( 'click', '.frm_toggle_sep_values', toggleSepValues );\n\t\t\t$builderForm.on( 'click', '.frm_toggle_image_options', toggleImageOptions );\n\t\t\t$builderForm.on( 'click', '.frm_remove_image_option', removeImageFromOption );\n\t\t\t$builderForm.on( 'click', '.frm_choose_image_box', addImageToOption );\n\t\t\t$builderForm.on( 'change', '.frm_hide_image_text', refreshOptionDisplay );\n\t\t\t$builderForm.on( 'change', '.frm_field_options_image_size', setImageSize );\n\t\t\t$builderForm.on( 'click', '.frm_multiselect_opt', toggleMultiselect );\n\t\t\t$newFields.on( 'mousedown', 'input, textarea, select', stopFieldFocus );\n\t\t\t$newFields.on( 'click', 'input[type=radio], input[type=checkbox]', stopFieldFocus );\n\t\t\t$newFields.on( 'click', '.frm_delete_field', clickDeleteField );\n\t\t\t$newFields.on( 'click', '.frm_select_field', clickSelectField );\n\t\t\tjQuery( document ).on( 'click', '.frm_delete_field_group', clickDeleteFieldGroup );\n\t\t\tjQuery( document ).on( 'click', '.frm_clone_field_group', duplicateFieldGroup );\n\t\t\tjQuery( document ).on( 'click', '#frm_field_group_controls > span:first-child', clickFieldGroupLayout );\n\t\t\tjQuery( document ).on( 'click', '.frm-row-layout-option', handleFieldGroupLayoutOptionClick );\n\t\t\tjQuery( document ).on( 'click', '.frm-merge-fields-into-row .frm-row-layout-option', handleFieldGroupLayoutOptionInsideMergeClick );\n\t\t\tjQuery( document ).on( 'click', '.frm-custom-field-group-layout', customFieldGroupLayoutClick );\n\t\t\tjQuery( document ).on( 'click', '.frm-merge-fields-into-row .frm-custom-field-group-layout', customFieldGroupLayoutInsideMergeClick );\n\t\t\tjQuery( document ).on( 'click', '.frm-break-field-group', breakFieldGroupClick );\n\t\t\t$newFields.on( 'click', '#frm_field_group_popup .frm_grid_container input', focusFieldGroupInputOnClick );\n\t\t\tjQuery( document ).on( 'click', '.frm-cancel-custom-field-group-layout', cancelCustomFieldGroupClick );\n\t\t\tjQuery( document ).on( 'click', '.frm-save-custom-field-group-layout', saveCustomFieldGroupClick );\n\t\t\t$newFields.on( 'click', 'ul.frm_sorting', fieldGroupClick );\n\t\t\tjQuery( document ).on( 'click', '.frm-merge-fields-into-row', mergeFieldsIntoRowClick );\n\t\t\tjQuery( document ).on( 'click', '.frm-delete-field-groups', deleteFieldGroupsClick );\n\t\t\t$newFields.on( 'click', '.frm-field-action-icons [data-toggle=\"dropdown\"]', function() {\n\t\t\t\tthis.closest( 'li.form-field' ).classList.add( 'frm-field-settings-open' );\n\t\t\t\tjQuery( document ).on( 'click', '#frm_builder_page', handleClickOutsideOfFieldSettings );\n\t\t\t} );\n\t\t\t$newFields.on( 'mousemove', 'ul.frm_sorting', checkForMultiselectKeysOnMouseMove );\n\t\t\t$newFields.on( 'show.bs.dropdown', '.frm-field-action-icons', onFieldActionDropdownShow );\n\t\t\tjQuery( document ).on( 'show.bs.dropdown', '#frm_field_group_controls', onFieldGroupActionDropdownShow );\n\t\t\t$builderForm.on( 'click', '.frm_single_option a[data-removeid]', deleteFieldOption );\n\t\t\t$builderForm.on( 'mousedown', '.frm_single_option input[type=radio]', maybeUncheckRadio );\n\t\t\t$builderForm.on( 'focusin', '.frm_single_option input[type=text]', maybeClearOptText );\n\t\t\t$builderForm.on( 'click', '.frm_add_opt', addFieldOption );\n\t\t\t$builderForm.on( 'change', '.frm_single_option input', resetOptOnChange );\n\t\t\t$builderForm.on( 'change', '.frm_image_id', resetOptOnChange );\n\t\t\t$builderForm.on( 'change', '.frm_toggle_mult_sel', toggleMultSel );\n\n\t\t\t$newFields.on( 'click', '.frm_primary_label', clickLabel );\n\t\t\t$newFields.on( 'click', '.frm_description', clickDescription );\n\t\t\t$newFields.on( 'click', 'li.ui-state-default:not(.frm_noallow)', clickVis );\n\t\t\t$newFields.on( 'dblclick', 'li.ui-state-default', openAdvanced );\n\t\t\t$builderForm.on( 'change', '.frm_tax_form_select', toggleFormTax );\n\t\t\t$builderForm.on( 'change', 'select.conf_field', addConf );\n\n\t\t\t$builderForm.on( 'change', '.frm_get_field_selection', getFieldSelection );\n\n\t\t\t$builderForm.on( 'click', '.frm-show-inline-modal', maybeShowInlineModal );\n\t\t\t$builderForm.on( 'keydown', '.frm-show-inline-modal', function( event ) {\n\t\t\t\tconst { key } = event;\n\t\t\t\tif ( key === 'Enter' || key === ' ' ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tmaybeShowInlineModal.call( this, event );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$builderForm.on( 'click', '.frm-inline-modal .dismiss', dismissInlineModal );\n\t\t\tjQuery( document ).on( 'change', '[data-frmchange]', changeInputtedValue );\n\n\t\t\tdocument.addEventListener( 'click', closeModalOnOutsideClick );\n\n\t\t\t$builderForm.on( 'change', '.frm_include_extras_field', rePopCalcFieldsForSummary );\n\t\t\t$builderForm.on( 'change', 'select[name^=\"field_options[form_select_\"]', maybeChangeEmbedFormMsg );\n\n\t\t\tjQuery( document ).on( 'submit', '#frm_js_build_form', buildSubmittedNoAjax );\n\t\t\tjQuery( document ).on( 'change', '#frm_builder_page input:not(.frm-search-input):not(.frm-custom-grid-size-input), #frm_builder_page select, #frm_builder_page textarea', fieldUpdated );\n\n\t\t\tpopAllProductFields();\n\n\t\t\tjQuery( document ).on( 'change', '.frmjs_prod_data_type_opt', toggleProductType );\n\n\t\t\tjQuery( document ).on( 'focus', '.frm-single-settings ul input[type=\"text\"][name^=\"field_options[options_\"]', onOptionTextFocus );\n\t\t\tjQuery( document ).on( 'blur', '.frm-single-settings ul input[type=\"text\"][name^=\"field_options[options_\"]', onOptionTextBlur );\n\n\t\t\tfrmDom.util.documentOn( 'click', '.frm-show-field-settings', clickVis );\n\t\t\tfrmDom.util.documentOn( 'change', 'select.frm_format_dropdown, select.frm_phone_type_dropdown', maybeUpdateFormatInput );\n\n\t\t\t// Navigate to the next input field on pressing Enter in a single option field\n\t\t\t$builderForm.on( 'keydown', '.frm_single_option input[name^=\"field_options[\"], .frm_single_option input[name^=\"rows_\"]', event => {\n\t\t\t\tif ( 'Enter' === event.key ) {\n\t\t\t\t\tfocusNextSingleOptionInput( event.currentTarget );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tinitBulkOptionsOverlay();\n\t\t\thideEmptyEle();\n\t\t\tdocument.addEventListener( 'frm_added_field', hideEmptyEle );\n\t\t\tmaybeHideQuantityProductFieldOption();\n\t\t\thandleNameFieldOnFormBuilder();\n\t\t\ttoggleSectionHolder();\n\t\t\thandleShowPasswordLiveUpdate();\n\t\t\tdocument.addEventListener( 'scroll', updateShortcodesPopupPosition, true );\n\t\t\tdocument.addEventListener( 'change', handleBuilderChangeEvent );\n\t\t\tdocument.querySelector( '.frm_form_builder' ).addEventListener( 'mousedown', event => {\n\t\t\t\tif ( event.shiftKey ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t} );\n\t\t\twp.hooks.addAction( 'frmShowedFieldSettings', 'formidableAdmin', ( showBtn, fieldSettingsEl ) => {\n\t\t\t\tfieldSettingsEl.querySelectorAll( '.frm-collapse-me' ).forEach( addSlideAnimationCssVars );\n\t\t\t}, 9999 );\n\t\t},\n\n\t\tsettingsInit: function() {\n\t\t\tconst $formActions = jQuery( document.getElementById( 'frm_notification_settings' ) );\n\n\t\t\tlet formSettings, $loggedIn, $cookieExp, $editable;\n\n\t\t\t// BCC, CC, and Reply To button functionality\n\t\t\t$formActions.on( 'click', '.frm_email_buttons', showEmailRow );\n\t\t\t$formActions.on( 'click', '.frm_remove_field', hideEmailRow );\n\t\t\t$formActions.on( 'change', '.frm_to_row, .frm_from_row', showEmailWarning );\n\t\t\t$formActions.on( 'change', '.frm_tax_selector', changePosttaxRow );\n\t\t\t$formActions.on( 'change', 'select.frm_single_post_field', checkDupPost );\n\t\t\t$formActions.on( 'change', 'select.frm_toggle_post_content', togglePostContent );\n\t\t\t$formActions.on( 'change', 'select.frm_dyncontent_opt', fillDyncontent );\n\t\t\t$formActions.on( 'change', '.frm_post_type', switchPostType );\n\t\t\t$formActions.on( 'click', '.frm_add_postmeta_row', addPostmetaRow );\n\t\t\t$formActions.on( 'click', '.frm_add_posttax_row', addPosttaxRow );\n\t\t\t$formActions.on( 'click', '.frm_toggle_cf_opts', toggleCfOpts );\n\t\t\t$formActions.on( 'click', '.frm_duplicate_form_action', copyFormAction );\n\t\t\tjQuery( '.frm_actions_list' ).on( 'click', '.frm_active_action', addFormAction );\n\t\t\tjQuery( '#frm-show-groups, #frm-hide-groups' ).on( 'click', toggleActionGroups );\n\t\t\tinitiateMultiselect();\n\n\t\t\t//set actions icons to inactive\n\t\t\tjQuery( 'ul.frm_actions_list li' ).each( function() {\n\t\t\t\tcheckActiveAction( jQuery( this ).children( 'a' ).data( 'actiontype' ) );\n\n\t\t\t\t// If the icon is a background image, don't add BG color.\n\t\t\t\tconst icon = jQuery( this ).find( 'i' );\n\t\t\t\tif ( icon.css( 'background-image' ) !== 'none' ) {\n\t\t\t\t\ticon.addClass( 'frm-inverse' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tjQuery( '.frm_submit_settings_btn' ).on( 'click', submitSettings );\n\n\t\t\taddFormNameModalEvents();\n\n\t\t\tformSettings = jQuery( '.frm_form_settings' );\n\t\t\tformSettings.on( 'click', '.frm_add_form_logic', addFormLogicRow );\n\t\t\tformSettings.on( 'click', '.frm_already_used', actionLimitMessage );\n\n\t\t\tdocument.addEventListener(\n\t\t\t\t'click',\n\t\t\t\tfunction handleImageUploadClickEvents( event ) {\n\t\t\t\t\tconst { target } = event;\n\n\t\t\t\t\tif ( ! target.closest( '.frm_image_preview_wrapper' ) ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( target.closest( '.frm_choose_image_box' ) ) {\n\t\t\t\t\t\taddImageToOption.bind( target )( event );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( target.closest( '.frm_remove_image_option' ) ) {\n\t\t\t\t\t\tremoveImageFromOption.bind( target )( event );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t// Close shortcode modal on click.\n\t\t\tformSettings.on( 'mouseup', '*:not(.frm-show-box)', maybeHideShortcodes );\n\n\t\t\t//Warning when user selects \"Do not store entries ...\"\n\t\t\tjQuery( document.getElementById( 'no_save' ) ).on( 'change', function() {\n\t\t\t\tif ( this.checked ) {\n\t\t\t\t\tif ( confirm( frmAdminJs.no_save_warning ) !== true ) {\n\t\t\t\t\t\t// Uncheck box if user hits \"Cancel\"\n\t\t\t\t\t\tjQuery( this ).attr( 'checked', false );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tjQuery( 'select[name=\"options[edit_action]\"]' ).on( 'change', showSuccessOpt );\n\n\t\t\t$loggedIn = document.getElementById( 'logged_in' );\n\t\t\tjQuery( $loggedIn ).on( 'change', function() {\n\t\t\t\tif ( this.checked ) {\n\t\t\t\t\tvisible( '.hide_logged_in' );\n\t\t\t\t} else {\n\t\t\t\t\tinvisible( '.hide_logged_in' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$cookieExp = jQuery( document.getElementById( 'frm_cookie_expiration' ) );\n\t\t\tjQuery( document.getElementById( 'frm_single_entry_type' ) ).on( 'change', function() {\n\t\t\t\tif ( this.value === 'cookie' ) {\n\t\t\t\t\t$cookieExp.fadeIn( 'slow' );\n\t\t\t\t} else {\n\t\t\t\t\t$cookieExp.fadeOut( 'slow' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tconst $singleEntry = document.getElementById( 'single_entry' );\n\t\t\tjQuery( $singleEntry ).on( 'change', function() {\n\t\t\t\tif ( this.checked ) {\n\t\t\t\t\tvisible( '.hide_single_entry' );\n\t\t\t\t} else {\n\t\t\t\t\tinvisible( '.hide_single_entry' );\n\t\t\t\t}\n\n\t\t\t\tif ( this.checked && jQuery( document.getElementById( 'frm_single_entry_type' ) ).val() === 'cookie' ) {\n\t\t\t\t\t$cookieExp.fadeIn( 'slow' );\n\t\t\t\t} else {\n\t\t\t\t\t$cookieExp.fadeOut( 'slow' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tjQuery( '.hide_save_draft' ).hide();\n\n\t\t\tconst $saveDraft = jQuery( document.getElementById( 'save_draft' ) );\n\t\t\t$saveDraft.on( 'change', function() {\n\t\t\t\tif ( this.checked ) {\n\t\t\t\t\tjQuery( '.hide_save_draft' ).fadeIn( 'slow' );\n\t\t\t\t} else {\n\t\t\t\t\tjQuery( '.hide_save_draft' ).fadeOut( 'slow' );\n\t\t\t\t}\n\t\t\t} );\n\t\t\ttriggerChange( $saveDraft );\n\n\t\t\t//If Allow editing is checked/unchecked\n\t\t\t$editable = document.getElementById( 'editable' );\n\t\t\tjQuery( $editable ).on( 'change', function() {\n\t\t\t\tif ( this.checked ) {\n\t\t\t\t\tjQuery( '.hide_editable' ).fadeIn( 'slow' );\n\t\t\t\t\ttriggerChange( document.getElementById( 'edit_action' ) );\n\t\t\t\t} else {\n\t\t\t\t\tjQuery( '.hide_editable' ).fadeOut( 'slow' );\n\t\t\t\t\tjQuery( '.edit_action_message_box' ).fadeOut( 'slow' );//Hide On Update message box\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t//If File Protection is checked/unchecked\n\t\t\tjQuery( document ).on( 'change', '#protect_files', function() {\n\t\t\t\tif ( this.checked ) {\n\t\t\t\t\tjQuery( '.hide_protect_files' ).fadeIn( 'slow' );\n\t\t\t\t} else {\n\t\t\t\t\tjQuery( '.hide_protect_files' ).fadeOut( 'slow' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tjQuery( document ).on( 'frm-multiselect-changed', '#protect_files_role', adjustVisibilityValuesForEveryoneValues );\n\n\t\t\tjQuery( document ).on( 'submit', '.frm_form_settings', settingsSubmitted );\n\t\t\tjQuery( document ).on( 'change', '#form_settings_page input:not(.frm-search-input), #form_settings_page select, #form_settings_page textarea', fieldUpdated );\n\n\t\t\t// Page Selection Autocomplete\n\t\t\tinitAutocomplete();\n\n\t\t\tjQuery( document ).on( 'frm-action-loaded', onActionLoaded );\n\n\t\t\tinitOnSubmitAction();\n\n\t\t\twp.hooks.addAction( 'frm_reset_fields_updated', 'formidableAdmin', resetFieldsUpdated );\n\t\t},\n\n\t\tpanelInit: function() {\n\t\t\tlet customPanel, settingsPage, viewPage, insertFieldsTab;\n\n\t\t\tjQuery( '.frm_wrap, #postbox-container-1' ).on( 'click', '.frm_insert_code', insertCode );\n\t\t\tjQuery( document ).on( 'change', '.frm_insert_val', function() {\n\t\t\t\tinsertFieldCode( jQuery( this ).data( 'target' ), jQuery( this ).val() );\n\t\t\t\tjQuery( this ).val( '' );\n\t\t\t} );\n\n\t\t\tjQuery( document ).on( 'click change', '[name=\"frm-id-key-condition\"]', resetLogicBuilder );\n\t\t\tjQuery( document ).on( 'keyup change', '.frm-build-logic', setLogicExample );\n\n\t\t\tshowInputIcon();\n\t\t\tjQuery( document ).on( 'frmElementAdded', function( event, parentEle ) {\n\t\t\t\t/* This is here for add-ons to trigger */\n\t\t\t\tshowInputIcon( parentEle );\n\t\t\t} );\n\t\t\tjQuery( document ).on( 'mousedown', '.frm-show-box', showShortcodes );\n\n\t\t\tsettingsPage = document.getElementById( 'form_settings_page' );\n\t\t\tviewPage = document.body.classList.contains( 'post-type-frm_display' );\n\t\t\tinsertFieldsTab = document.getElementById( 'frm_insert_fields_tab' );\n\n\t\t\tif ( settingsPage !== null || viewPage || builderPage ) {\n\t\t\t\tjQuery( document ).on( 'focusin', 'form input, form textarea', function( e ) {\n\t\t\t\t\tlet htmlTab;\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tmaybeShowModal( this );\n\n\t\t\t\t\tif ( jQuery( this ).is( ':not(:submit, input[type=button], .frm-search-input, input[type=checkbox])' ) ) {\n\t\t\t\t\t\tif ( jQuery( e.target ).closest( '#frm_adv_info' ).length ) {\n\t\t\t\t\t\t// Don't trigger for fields inside of the modal.\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( settingsPage !== null || builderPage ) {\n\t\t\t\t\t\t/* form settings page */\n\t\t\t\t\t\t\thtmlTab = jQuery( '#frm_html_tab' );\n\t\t\t\t\t\t\tif ( jQuery( this ).closest( '#html_settings' ).length > 0 ) {\n\t\t\t\t\t\t\t\thtmlTab.show();\n\t\t\t\t\t\t\t\thtmlTab.siblings().hide();\n\t\t\t\t\t\t\t\tjQuery( '#frm_html_tab a' ).trigger( 'click' );\n\t\t\t\t\t\t\t\ttoggleAllowedHTML( this );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tshowElement( jQuery( '.frm-category-tabs li' ) );\n\t\t\t\t\t\t\t\tinsertFieldsTab.click();\n\t\t\t\t\t\t\t\thtmlTab.hide();\n\t\t\t\t\t\t\t\thtmlTab.siblings().show();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if ( viewPage ) {\n\t\t\t\t\t\t\tconst event = new CustomEvent( 'frm_legacy_views_handle_field_focus' );\n\t\t\t\t\t\t\tevent.frmData = { idAttrValue: this.id };\n\t\t\t\t\t\t\tdocument.dispatchEvent( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tjQuery( '.frm_wrap, #postbox-container-1' ).on( 'mousedown', '#frm_adv_info a, .frm_field_list a', function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t} );\n\n\t\t\tcustomPanel = jQuery( '#frm_adv_info' );\n\t\t\tcustomPanel.on( 'click', '.subsubsub a.frmids', function( e ) {\n\t\t\t\ttoggleKeyID( 'frmids', e );\n\t\t\t} );\n\t\t\tcustomPanel.on( 'click', '.subsubsub a.frmkeys', function( e ) {\n\t\t\t\ttoggleKeyID( 'frmkeys', e );\n\t\t\t} );\n\t\t},\n\n\t\tinboxInit: function() {\n\t\t\tjQuery( '.frm_inbox_dismiss' ).on( 'click', function( e ) {\n\t\t\t\tconst message = this.parentNode.parentNode;\n\t\t\t\tconst key = message.getAttribute( 'data-message' );\n\t\t\t\tconst href = this.getAttribute( 'href' );\n\t\t\t\tconst dismissedMessage = message.cloneNode( true );\n\t\t\t\tconst dismissedMessagesWrapper = document.querySelector( '.frm-dismissed-inbox-messages' );\n\n\t\t\t\tif ( 'free_templates' === key && ! this.classList.contains( 'frm_inbox_dismiss' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\tconst data = {\n\t\t\t\t\taction: 'frm_inbox_dismiss',\n\t\t\t\t\tkey,\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t};\n\n\t\t\t\tconst isInboxSlideIn = 'frm_inbox_slide_in' === message.id;\n\t\t\t\tif ( isInboxSlideIn ) {\n\t\t\t\t\tmessage.classList.remove( 's11-fadein' );\n\t\t\t\t\tmessage.classList.add( 's11-fadeout' );\n\t\t\t\t\tmessage.addEventListener( 'animationend', () => message.remove(), { once: true } );\n\t\t\t\t}\n\n\t\t\t\tpostAjax(\n\t\t\t\t\tdata,\n\t\t\t\t\t() => {\n\t\t\t\t\t\tif ( isInboxSlideIn ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( href !== '#' ) {\n\t\t\t\t\t\t\twindow.location = href;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfadeOut(\n\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tif ( null !== dismissedMessagesWrapper ) {\n\t\t\t\t\t\t\t\t\tdismissedMessage.classList.remove( 'frm-fade' );\n\t\t\t\t\t\t\t\t\tdismissedMessage.querySelector( '.frm-inbox-message-heading' )?.removeChild( dismissedMessage.querySelector( '.frm-inbox-message-heading .frm_inbox_dismiss' ) );\n\t\t\t\t\t\t\t\t\tdismissedMessagesWrapper.append( dismissedMessage );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( 1 === message.parentNode.querySelectorAll( '.frm-inbox-message-container' ).length ) {\n\t\t\t\t\t\t\t\t\tdocument.getElementById( 'frm_empty_inbox' ).classList.remove( 'frm_hidden' );\n\t\t\t\t\t\t\t\t\tmessage.parentNode.closest( '.frm-active' ).classList.add( 'frm-empty-inbox' );\n\t\t\t\t\t\t\t\t\tshowActiveCampaignForm();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmessage.remove();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} );\n\n\t\t\tif ( false === document.getElementById( 'frm_empty_inbox' )?.classList.contains( 'frm_hidden' ) ) {\n\t\t\t\tshowActiveCampaignForm();\n\t\t\t}\n\t\t},\n\n\t\tsolutionInit: function() {\n\t\t\tjQuery( document ).on( 'submit', '#frm-new-template', installTemplate );\n\t\t},\n\n\t\tstyleInit: function() {\n\t\t\tconst $previewWrapper = jQuery( '.frm_image_preview_wrapper' );\n\t\t\t$previewWrapper.on( 'click', '.frm_choose_image_box', addImageToOption );\n\t\t\t$previewWrapper.on( 'click', '.frm_remove_image_option', removeImageFromOption );\n\n\t\t\twp.hooks.doAction( 'frm_style_editor_init' );\n\t\t},\n\n\t\tcustomCSSInit: function() {\n\t\t\tconsole.warn( 'Calling frmAdminBuild.customCSSInit is deprecated.' );\n\t\t},\n\n\t\tglobalSettingsInit: function() {\n\t\t\tlet licenseTab;\n\n\t\t\tjQuery( document ).on( 'click', '[data-frmuninstall]', uninstallNow );\n\n\t\t\tinitiateMultiselect();\n\n\t\t\t// activate addon licenses\n\t\t\tlicenseTab = document.getElementById( 'licenses_settings' );\n\t\t\tif ( licenseTab !== null ) {\n\t\t\t\tjQuery( licenseTab ).on( 'click', '.edd_frm_save_license', saveAddonLicense );\n\t\t\t}\n\n\t\t\t// Solution install page\n\t\t\tjQuery( document ).on( 'click', '#frm-new-template button', installTemplateFieldset );\n\n\t\t\tjQuery( '#frm-dismissable-cta .dismiss' ).on( 'click', function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tjQuery.post(\n\t\t\t\t\tajaxurl,\n\t\t\t\t\t{\n\t\t\t\t\t\taction: 'frm_lite_settings_upgrade',\n\t\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tjQuery( '.settings-lite-cta' ).remove();\n\t\t\t} );\n\n\t\t\tconst captchaType = document.getElementById( 'frm_re_type' );\n\t\t\tif ( captchaType ) {\n\t\t\t\tcaptchaType.addEventListener( 'change', handleCaptchaTypeChange );\n\t\t\t}\n\n\t\t\tdocument.querySelector( '.frm_captchas' ).addEventListener( 'change', function( event ) {\n\t\t\t\tconst captchaValueOnLoad = document.querySelector( '.frm_captchas input[checked=\"checked\"]' )?.value;\n\t\t\t\tconst showNote = event.target.value !== captchaValueOnLoad;\n\t\t\t\tdocument.querySelector( '.captcha_settings .frm_note_style' ).classList.toggle( 'frm_hidden', ! showNote );\n\t\t\t} );\n\n\t\t\t// Set fieldsUpdated to 0 to avoid the unsaved changes pop up.\n\t\t\tfrmDom.util.documentOn( 'submit', '.frm_settings_form', () => fieldsUpdated = 0 );\n\n\t\t\tconst manageStyleSettings = document.getElementById( 'manage_styles_settings' );\n\t\t\tif ( manageStyleSettings ) {\n\t\t\t\tmanageStyleSettings.addEventListener(\n\t\t\t\t\t'change',\n\t\t\t\t\tevent => {\n\t\t\t\t\t\tconst target = event.target;\n\t\t\t\t\t\tif ( 'SELECT' !== target.nodeName || ! target.dataset.name || target.getAttribute( 'name' ) ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget.setAttribute( 'name', target.dataset.name );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst paymentsSettings = document.getElementById( 'payments_settings' );\n\t\t\tconst paymentSettingsTabs = paymentsSettings?.querySelectorAll( '[name=\"frm_payment_section\"]' );\n\t\t\tif ( paymentSettingsTabs ) {\n\t\t\t\tpaymentSettingsTabs.forEach(\n\t\t\t\t\telement => {\n\t\t\t\t\t\telement.addEventListener( 'change', () => {\n\t\t\t\t\t\t\tif ( ! element.checked ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst label = paymentsSettings.querySelector( `label[for=\"${ element.id }\"]` );\n\t\t\t\t\t\t\tif ( label ) {\n\t\t\t\t\t\t\t\tlabel.setAttribute( 'aria-selected', 'true' );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tpaymentSettingsTabs.forEach(\n\t\t\t\t\t\t\t\ttab => {\n\t\t\t\t\t\t\t\t\tif ( tab === element ) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tconst label = paymentsSettings.querySelector( `label[for=\"${ tab.id }\"]` );\n\t\t\t\t\t\t\t\t\tif ( label ) {\n\t\t\t\t\t\t\t\t\t\tlabel.setAttribute( 'aria-selected', 'false' );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\texportInit: function() {\n\t\t\tjQuery( '.frm_form_importer' ).on( 'submit', startFormMigration );\n\t\t\tjQuery( document.getElementById( 'frm_export_xml' ) ).on( 'submit', validateExport );\n\t\t\tjQuery( '#frm_export_xml input, #frm_export_xml select' ).on( 'change', removeExportError );\n\t\t\tjQuery( 'input[name=\"frm_import_file\"]' ).on( 'change', checkCSVExtension );\n\t\t\tdocument.querySelector( 'select[name=\"format\"]' ).addEventListener( 'change', exportTypeChanged );\n\n\t\t\tjQuery( 'input[name=\"frm_export_forms[]\"]' ).on( 'click', preventMultipleExport );\n\t\t\tinitiateMultiselect();\n\n\t\t\tjQuery( '.frm-feature-banner .dismiss' ).on( 'click', function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tjQuery.post( ajaxurl, {\n\t\t\t\t\taction: 'frm_dismiss_migrator',\n\t\t\t\t\tplugin: this.id,\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t} );\n\t\t\t\tthis.parentElement.remove();\n\t\t\t} );\n\n\t\t\tshowOrHideRepeaters( getExportOption() );\n\n\t\t\tdocument.querySelector( '#frm-export-select-all' ).addEventListener( 'change', event => {\n\t\t\t\tdocument.querySelectorAll( '[name=\"frm_export_forms[]\"]' ).forEach( cb => cb.checked = event.target.checked );\n\t\t\t} );\n\t\t},\n\n\t\tinboxBannerInit: function() {\n\t\t\tconst banner = document.getElementById( 'frm_banner' );\n\t\t\tif ( ! banner ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst dismissButton = banner.querySelector( '.frm-banner-dismiss' );\n\t\t\tdocument.addEventListener(\n\t\t\t\t'click',\n\t\t\t\tfunction( event ) {\n\t\t\t\t\tif ( event.target !== dismissButton ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\taction: 'frm_inbox_dismiss',\n\t\t\t\t\t\tkey: banner.dataset.key,\n\t\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t\t};\n\t\t\t\t\tpostAjax(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\tjQuery( banner ).fadeOut(\n\t\t\t\t\t\t\t\t400,\n\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\tbanner.remove();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\tupdateOpts: function( fieldId, opts, modal ) {\n\t\t\tconst separate = usingSeparateValues( fieldId ),\n\t\t\t\taction = isProductField( fieldId ) ? 'frm_bulk_products' : 'frm_import_options';\n\t\t\tjQuery.ajax( {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: ajaxurl,\n\t\t\t\tdata: {\n\t\t\t\t\taction: action,\n\t\t\t\t\tfield_id: fieldId,\n\t\t\t\t\topts: opts,\n\t\t\t\t\tseparate: separate,\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t},\n\t\t\t\tsuccess: function( html ) {\n\t\t\t\t\tdocument.getElementById( 'frm_field_' + fieldId + '_opts' ).innerHTML = html;\n\t\t\t\t\twp.hooks.doAction( 'frm_after_bulk_edit_opts', fieldId );\n\t\t\t\t\tresetDisplayedOpts( fieldId );\n\n\t\t\t\t\tif ( typeof modal !== 'undefined' ) {\n\t\t\t\t\t\tmodal.dialog( 'close' );\n\t\t\t\t\t\tdocument.getElementById( 'frm-update-bulk-opts' ).classList.remove( 'frm_loading_button' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\n\t\t/* remove conditional logic if the field doesn't exist */\n\t\ttriggerRemoveLogic: function( fieldID, metaName ) {\n\t\t\tjQuery( '#frm_logic_' + fieldID + '_' + metaName + ' .frm_remove_tag' ).trigger( 'click' );\n\t\t},\n\n\t\tdownloadXML: function( controller, ids, isTemplate ) {\n\t\t\tlet url = ajaxurl + '?action=frm_' + controller + '_xml&ids=' + ids;\n\t\t\tif ( isTemplate !== null ) {\n\t\t\t\turl = url + '&is_template=' + isTemplate;\n\t\t\t}\n\t\t\tlocation.href = url;\n\t\t},\n\n\t\t/**\n\t\t * @since 5.0.04\n\t\t */\n\t\thooks: {\n\t\t\tapplyFilters: function( hookName, ...args ) {\n\t\t\t\treturn wp.hooks.applyFilters( hookName, ...args );\n\t\t\t},\n\t\t\taddFilter: function( hookName, callback, priority ) {\n\t\t\t\treturn wp.hooks.addFilter( hookName, 'formidable', callback, priority );\n\t\t\t},\n\t\t\tdoAction: function( hookName, ...args ) {\n\t\t\t\treturn wp.hooks.doAction( hookName, ...args );\n\t\t\t},\n\t\t\taddAction: function( hookName, callback, priority ) {\n\t\t\t\treturn wp.hooks.addAction( hookName, 'formidable', callback, priority );\n\t\t\t}\n\t\t},\n\n\t\tapplyZebraStriping,\n\t\tinitModal,\n\t\tinfoModal,\n\t\toffsetModalY,\n\t\tadjustConditionalLogicOptionOrders,\n\t\taddRadioCheckboxOpt,\n\t\tinstallNewForm,\n\t\ttoggleAddonState,\n\t\tpurifyHtml,\n\t\tloadApiEmailForm,\n\t\taddMyEmailAddress,\n\t\tfillDropdownOpts,\n\t\tshowSaveAndReloadModal,\n\t\tclearSettingsBox,\n\t\tdeleteField,\n\t\tinsertFormField,\n\t\tconfirmLinkClick,\n\t\thandleInsertFieldByDraggingResponse,\n\t\thandleAddFieldClickResponse,\n\t\tsyncLayoutClasses,\n\t\tmoveFieldSettings,\n\t\tmaybeCollapseSettings,\n\t};\n};\n\nwindow.frmAdminBuild = frmAdminBuildJS();\n\njQuery( document ).ready(\n\t() => {\n\t\tfrmAdminBuild.init();\n\n\t\tdocument.querySelectorAll( '.frm-dropdown-menu' ).forEach( convertOldBootstrapDropdownsToBootstrap5 );\n\t\tdocument.querySelector( '.preview.dropdown .frm-dropdown-toggle' )?.setAttribute( 'data-bs-toggle', 'dropdown' );\n\n\t\t// Bootstrap 5 uses data-bs-toggle instead of data-toggle.\n\t\tdocument.querySelectorAll( '[data-toggle]' ).forEach( toggle => toggle.setAttribute( 'data-bs-toggle', toggle.getAttribute( 'data-toggle' ) ) );\n\n\t\tfunction convertOldBootstrapDropdownsToBootstrap5( frmDropdownMenu ) {\n\t\t\tfrmDropdownMenu.classList.add( 'dropdown-menu' );\n\n\t\t\tconst toggle = frmDropdownMenu.querySelector( '.frm-dropdown-toggle' );\n\t\t\tif ( toggle ) {\n\t\t\t\tif ( ! toggle.hasAttribute( 'role' ) ) {\n\t\t\t\t\ttoggle.setAttribute( 'role', 'button' );\n\t\t\t\t}\n\t\t\t\tif ( ! toggle.hasAttribute( 'tabindex' ) ) {\n\t\t\t\t\ttoggle.setAttribute( 'tabindex', 0 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Convert <li> and <ul> tags.\n\t\t\tif ( 'UL' === frmDropdownMenu.tagName ) {\n\t\t\t\tconvertBootstrapUl( frmDropdownMenu );\n\t\t\t}\n\t\t}\n\n\t\tfunction convertBootstrapUl( ul ) {\n\t\t\tlet html = ul.outerHTML;\n\t\t\thtml = html.replace( '<ul ', '<div ' );\n\t\t\thtml = html.replace( '</ul>', '</div>' );\n\t\t\thtml = html.replaceAll( '<li>', '<div class=\"dropdown-item\">' );\n\t\t\thtml = html.replaceAll( '<li class=\"', '<div class=\"dropdown-item ' );\n\t\t\thtml = html.replaceAll( '</li>', '</div>' );\n\t\t\tul.outerHTML = html;\n\t\t}\n\t}\n);\n\nwindow.frm_show_div = ( div, value, showIf, classId ) => { // eslint-disable-line camelcase\n\tif ( value == showIf ) {\n\t\tjQuery( classId + div ).fadeIn( 'slow' ).css( 'visibility', 'visible' );\n\t} else {\n\t\tjQuery( classId + div ).fadeOut( 'slow' );\n\t}\n};\n\nwindow.frmCheckAll = ( checked, n ) => {\n\tjQuery( 'input[name^=\"' + n + '\"]' ).prop( 'checked', ! ! checked );\n};\n\nwindow.frmCheckAllLevel = ( checked, n, level ) => {\n\tconst $kids = jQuery( '.frm_catlevel_' + level ).children( '.frm_checkbox' ).children( 'label' );\n\t$kids.children( 'input[name^=\"' + n + '\"]' ).prop( 'checked', ! ! checked );\n};\n\nwindow.frmGetFieldValues = ( fieldId, cur, rowNumber, fieldType, htmlName, callback ) => {\n\tif ( ! fieldId ) {\n\t\treturn;\n\t}\n\n\tjQuery.ajax( {\n\t\ttype: 'POST', url: ajaxurl,\n\t\tdata: 'action=frm_get_field_values&current_field=' + cur + '&field_id=' + fieldId + '&name=' + htmlName + '&t=' + fieldType + '&form_action=' + jQuery( 'input[name=\"frm_action\"]' ).val() + '&nonce=' + frmGlobal.nonce,\n\t\tsuccess: function( msg ) {\n\t\t\tdocument.getElementById( 'frm_show_selected_values_' + cur + '_' + rowNumber ).innerHTML = msg;\n\n\t\t\tif ( 'function' === typeof callback ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t} );\n};\n\nwindow.frmImportCsv = formID => {\n\tlet urlVars = '';\n\tif ( typeof __FRMURLVARS !== 'undefined' ) {\n\t\turlVars = __FRMURLVARS;\n\t}\n\n\tjQuery.ajax( {\n\t\ttype: 'POST', url: ajaxurl,\n\t\tdata: 'action=frm_import_csv&nonce=' + frmGlobal.nonce + '&frm_skip_cookie=1' + urlVars,\n\t\tsuccess: function( count ) {\n\t\t\tconst max = jQuery( '.frm_admin_progress_bar' ).attr( 'aria-valuemax' );\n\t\t\tconst imported = max - count;\n\t\t\tconst percent = ( imported / max ) * 100;\n\t\t\tjQuery( '.frm_admin_progress_bar' ).css( 'width', percent + '%' ).attr( 'aria-valuenow', imported );\n\n\t\t\tif ( parseInt( count, 10 ) > 0 ) {\n\t\t\t\tjQuery( '.frm_csv_remaining' ).html( count );\n\t\t\t\tfrmImportCsv( formID );\n\t\t\t} else {\n\t\t\t\tjQuery( document.getElementById( 'frm_import_message' ) ).html( frm_admin_js.import_complete ); // eslint-disable-line camelcase\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tlocation.href = '?page=formidable-entries&frm_action=list&form=' + formID + '&import-message=1';\n\t\t\t\t}, 2000 );\n\t\t\t}\n\t\t}\n\t} );\n};\n"],"names":["__","_frmDom","frmDom","div","svg","toggleAddonState","clicked","action","_window$ajaxurl","ajaxurl","window","frm_js","ajax_url","jQuery","remove","button","plugin","attr","el","parent","message","find","addClass","ajax","url","type","async","cache","dataType","data","nonce","frmGlobal","success","response","_response$data","_response","saveAndReload","error","extractErrorFromAddOnResponse","addonError","afterAddonInstall","wp","hooks","doAction","removeClass","form","is","html","arguments","length","undefined","frmAdminJs","frm_admin_js","addonStatuses","document","querySelectorAll","forEach","addonStatus","textContent","style","display","css","opacity","oneClick","showUpgradeModalSuccess","actionMap","frm_activate_addon","class","active","frm_deactivate_addon","installed","frm_uninstall_addon","not_installed","frm_install_addon","messageElement","parentElement","classList","add","buttonElement","refreshPage","location","reload","includes","inModal","closest","append","getSaveAndReloadSettingsOptions","padding","on","installAddonWithCreds","delay","fadeOut","className","children","saveAndReloadSettingsButton","push","closePopupButton","createElement","addEventListener","saveAndReloadFormBuilder","saveAndReloadSettings","page","getElementById","querySelector","submit","a","setAttribute","submitButton","contains","click","upgradeModal","upgradeMessage","image","replaceChildren","frmAddonStatus","circledIcon","_circledIcon$querySel","replaceWith","href","getShowLinkHrefValue","link","showLink","customLink","getAttribute","addOneClick","context","upgradeLabel","container","substr","oneclickMessage","oneclick","newMessage","showIt","showMsg","hideIt","modalIconWrapper","_modalIconWrapper$que","learnMoreLink","dataset","learnMore","JSON","parse","replace","rel","linkIcon","innerHTML","upsellImage","img","src","alt","upgrade","showLinkParent","initModal","id","width","$info","dialogArgs","dialogClass","modal","autoOpen","closeOnEscape","resizable","draggable","open","bindClickForDialogClose","close","removeAttribute","optionType","value","dialog","$modal","closeModal","initUpgradeModal","handleUpgradeClick","util","documentOn","event","element","content","target","showExpiredModal","selectedOption","options","selectedIndex","hookName","preventDefault","get","lockIcon","upgradeImageId","oldImage","parentNode","insertBefore","level","getRequiredLicenseFromTrigger","requires","FrmFormsConnect","$","messageBox","reset","setElements","app","init","deauthorize","authorize","reauthorize","pluginSlug","input","license","wpmu","checked","msg","afterAuthorize","showMessage","showProgress","showAuthorized","showInlineSuccess","setTimeout","show","from","to","box","successElement","frmAdminBuild","purifyHtml","confirm","frmAdminBuildJS","MAX_FIELD_GROUP_SIZE","tag","span","onClickPreventDefault","_frmDom$ajax","doJsonFetch","doJsonPost","contextualShortcodes","getContextualShortcodes","icons","save","drag","$newFields","builderForm","thisForm","copyHelper","fieldsUpdated","thisFormId","autoId","optionMap","lastNewActionIdReturned","_wp$i18n","i18n","sprintf","debouncedSyncAfterDragAndDrop","postBodyContent","$postBodyContent","dragState","dragging","currentURL","URL","urlParams","searchParams","builderPage","s","showElement","empty","$obj","firstChild","confirmClick","e","stopPropagation","confirmLinkClick","loadedFrom","confirmModal","applyFilters","confirmDeleteAllEntriesModal","args","self","wrapper","confirmButton","confirmationInput","timeoutInterval","modalOptions","heading","headingSingleEntry","copy","inputPlaceholder","entriesCount","deleteAllFormEntries","countEntries","parseInt","checkbox","getHeading","getCopy","getConfirmationInput","getOnDeleteActionsTriggerCheckbox","updateOnDeleteURL","triggerOnDeleteActions","redirectURL","initConfirmButton","triggerActionsOnDeleteEl","one","initConfirmationInput","placeholder","clearTimeout","confirmationCheck","toLowerCase","trim","copyWrapper","onDeleteActionsTrigger","frmEntriesData","hasPostAction","openModal","verify","$confirmMessage","i","dataAtts","btnClass","continueButton","createTextNode","infoModal","toggleItem","toggle","text","$items","hideShowItem","hide","uncheckList","uncheckListArray","split","isUncheckedCheckbox","toggleClass","current","uncheckItem","uncheckItemElement","nodeName","loadTooltip","tooltipTarget","hasAttribute","tooltip","deleteTooltips","loadTooltips","wrapClass","confirmedBulkDelete","deleteFieldConfirmed","removeThisTag","trashTemplate","clickWidget","off","isTop","suffix","bulkActionSelector","confirmBulkDelete","removeMore","deleteButton","indexOf","last","fadeEle","$fadeEle","_document$querySelect","fieldUpdated","fadeIn","afterActionRemoved","checkActiveAction","hookArgs","b","popCalcFields","cont","inside","actionId","val","actionType","action_id","action_type","initiateMultiselect","showInputIcon","initAutocomplete","trigger","siblings","slideUp","slideDown","clickNewTab","t","c","$link","not","tabContent","clearSettingsBox","clickTab","auto","loadSettingsTab","hideShortcodes","setupSortable","sortableSelector","list","makeDroppable","Array","child","makeDraggable","$sectionTitle","setupFieldOptionSorting","droppable","accept","deactivate","handleFieldDrop","over","onDragOverDroppable","out","onDraggableLeavesDroppable","tolerance","ui","getDroppableForOnDragOver","allowDrop","parents","nextAll","handle","settings","helper","getDraggableHelper","revert","start","handleDragStart","stop","handleDragStop","handleDrag","cursor","refreshPositions","cursorAt","top","left","delegateTarget","isFieldGroup","newTextFieldClone","cloneNode","setAttributeNS","copyTarget","isNewField","fieldType","showLimitModal","body","initialOffset","scrollTop","unselectFieldGroups","deleteEmptyDividerWrappers","maybeRemoveGroupHoverTarget","closeOpenFieldDropdowns","fade","maybeScrollBuilder","getDroppableTarget","frmSortableHelper","transform","getDragOffset","handleDragOverYAxis","y","clientY","handleDragOverFieldGroup","x","clientX","_","v","moved","h","offsetHeight","relativePos","offsetTop","Math","abs","$helper","maybeOpenCollapsedPage","$previousFieldContainer","previousSection","newSection","insertNewFieldByDragging","moveFieldThatAlreadyExists","maybeMakeFieldGroupDraggableAfterDragging","previousSectionId","newSectionId","$previousContainerFields","getFieldsInRow","maybeUpdatePreviousFieldContainerAfterDrop","maybeUpdateDraggableClassAfterDrop","updateFieldAfterMovingBetweenSections","placeholderParent","isDroppingIntoFieldGroup","fieldGroupLi","previousElementSibling","$pageBreakField","prevUntil","collapseButton","syncLayoutClasses","first","maybeDeleteAnEmptyFieldGroup","previousFieldContainer","closestFieldBox","_ref","$list","$children","prepend","insertAtIndex","determineIndexBasedOffOfMousePositionInList","$lastChild","offset","outerHeight","$endDivider","before","index","item","itemTop","returnIndex","_ref2","$row","determineIndexBasedOffOfMousePositionInRow","outerWidth","amountToOffsetLeftBy","syncAfterDragAndDrop","fixUnwrappedListItems","toggleSectionHolder","maybeFixEndDividers","maybeDeleteEmptyFieldGroups","updateFieldOrder","Event","bubbles","dispatchEvent","endDivider","fieldGroup","lists","childNodes","wrapFieldLiInPlace","dividers","divider","slice","call","firstElementChild","$fields","row","classes","$inputs","inputLeft","$item","size","layoutClasses","classToAddFunction","getLayoutClasses","each","getSyncLayoutClass","getEvenClassForSize","getClassForBlock","getLayoutClassForSize","updateFieldGroupControls","count","rowOffset","shouldShowControls","controls","setFieldControlsHtml","layoutOption","moveOption","layoutOptionLabel","addTooltip","makeTabbable","moveOptionLabel","getFieldControlsDropdown","title","dropdown","setAttributes","ul","classToAdd","itemIndex","currentClassToAdd","layoutClassIndex","currentClass","activeLayoutClass","fieldId","layoutClassesInput","fid","moveFieldSettings","concat","sort","opts","items","axis","forcePlaceholderSize","li","clone","insertAfter","resetDisplayedOpts","sortable","getSectionForFieldPlacement","currentItem","section","hasClass","getFormIdForFieldPlacement","formId","sDivide","appendTo","getSectionIdForFieldPlacement","sectionId","previousFormId","form_id","field","section_id","previous_form_id","updateInSectionValue","getInsertNewFieldArgs","hasBreak","fieldArgs","field_type","has_break","isInRepeater","last_row_field_ids","getFieldIdsInSubmitRow","shouldStopInsertingField","loadingID","getAutoId","loading","$placeholder","prevAll","handleInsertFieldByDraggingResponse","checkMsgForFieldId","handleInsertFieldError","$siblings","wrapFieldLi","msgAsjQueryObject","afterAddField","result","match","submitField","lastRowFields","ids","jqXHR","errorThrown","maybeShowInsertFieldError","jqXHRAborted","status","readyState","isSubmitBtn","containSubmitBtn","draggableIndex","lastRowIndex","childElementCount","submitButtonIndex","isLastRow","nextElementSibling","droppableIsARepeater","droppableIsInsideOfARepeater","isGdpr","shouldDenyDropInRepeater","$fieldsInRow","groupCanFitAnotherField","allowNewFieldDrop","allowMoveField","matches","newPageBreakField","newHiddenField","newSectionField","newEmbedField","newUserIdField","newFieldWillBeAddedToAGroup","groupIncludesBreakOrHiddenOrUserId","fieldTypeIsAlwaysAllowed","newFieldWillBeAddedToASection","allowMoveFieldGroup","isPageBreak","allowMoveFieldToSection","isHiddenField","isUserIdField","allowMoveFieldToGroup","draggableIncludeEmbedForm","draggableIncludesSection","group","draggableIncludesASection","draggableIsEmbedField","groupIsInASection","fieldsInRow","$field","filter","loadFields","thisField","$thisField","addHtmlToField","frmHiddenFdata","nextElement","nextField","getNextField","handleAjaxLoadFieldSuccess","_field$parentNode","key","$nextSet","newReplacedField","dropdownMenu","renumberPageBreaks","maybeHideQuantityProductFieldOption","loadedEvent","frmFields","map","f","addFieldClick","$thisObj","$button","handleAddFieldClickResponse","temporaryAnchor","insertFormField","fieldOptions","Promise","resolve","Object","assign","field_options","canDuplicateField","maxFieldsInGroup","fieldsInGroup","duplicateField","newRowId","fieldOrder","startsWith","fieldsInSection","field_id","_$field$0$querySelect","newRow","lastElementChild","duplicatedFieldHtml","originalFieldId","setLayoutClassesForDuplicatedFieldInGroup","after","maybeDuplicateUnsavedSettings","toggleOneSectionHolder","newField","_document$getElementB","hoverTarget","fieldClasses","classesInput","newFieldHtml","originalSettings","newFieldId","copySettings","fieldOptionKeys","originalDefault","copyDefault","originalSetting","tagType","copySetting","getKeyFromSettingInput","copyOption","remainingKeyDetails","copyKey","name","nameWithoutPrefix","nameSplit","pop","join","openSettings","handleClickOutsideOfFieldSettings","originalEvent","checkForMultiselectKeysOnMouseMove","keyIsDown","ctrlKey","metaKey","shiftKey","checkForActiveHoverTarget","elementFromPoint","previousHoverTarget","destroyFieldGroupPopup","maybeRemoveHoverTargetOnMouseMove","onFieldActionDropdownShow","$ul","fillFieldActionDropdown","firstAnchor","focus","onFieldGroupActionDropdownShow","changeSectionStyle","collapsedSection","zIndex","classSuffix","getDeleteActionOption","getDuplicateActionOption","icon","label","option","anchor","addFocus","regex","exec","$thisSection","checkHtmlForNewFields","toggled","maybeSetProductField","$parentSection","lastRowOrderInput","updateLastRowFieldsOrder","bounding","getBoundingClientRect","inView","right","innerWidth","documentElement","clientWidth","bottom","innerHeight","clientHeight","scroll","scrollHeight","behavior","deselectFields","maybeDisableFieldButtonAtLimit","addedEvent","frmField","frmSection","frmType","frmToggles","limit","countFieldTypeInForm","fieldsOrder","_typeof","keys","orderInput","addFieldIdToDraftFieldsInput","draftInput","preventFieldGroups","scrollToField","newPos","animate","checkCalculationCreatedByUser","calculation","warningMessage","checkMatchingParens","checkShortcodes","formula","stack","formulaArray","opening","closing","unmatchedClosing","hasOwnProperty","unmatched_parens","inputElement","checkNonNumericShortcodes","checkNonFormShortcodes","isTextCalculation","nonNumericShortcodes","getNonNumericShortcodes","test","text_shortcodes","prop","nonFormShortcodes","getNonFormShortcodes","view_shortcodes","isCalcBoxType","listClass","extractExcludedOptions","exclude","isArray","splice","hasExcludedOption","excludedOpts","hasOption","inputs","getElementsByName","getFieldOptionInputName","opt","at","substring","force","fields","p","calc","isSummary","getExcludeArray","getFieldList","fieldName","calcBox","codeList","includedExtras","getIncludedExtras","checkboxes","getElementsByClassName","rePopCalcFieldsForSummary","allFields","checkType","getPossibleValue","fieldKey","popProductFields","getCurrentProductFields","fName","products","quantities","isSelect","tagName","toString","prodFieldOpt","idsArray","popAllProductFields","productFieldOpt","liveChanges","newValue","changes","att","addBlankSelectOption","changeFieldClass","isSliderField","updateSliderFieldPreview","proIncludesSliderJs","getSliderMidpoint","getSliderDefaultValueInput","previewInputId","sliderInput","max","parseFloat","min","previewInput","toggleInvalidMsg","typeDropdown","toggleValidationBox","markRequired","thisid","$reqBox","hasValue","messageClass","$msg","$validationBox","markUnique","$unqDetail","default_unique","addConf","valMsg","default_conf","setConfirmationFieldDescriptions","fieldDescription","hiddenDescName","maybeSetNewDescription","confFieldDescription","hiddenConfName","newConfValue","descriptionDiv","hiddenName","desc","initBulkOptionsOverlay","insertBulkPreset","optList","separate","usingSeparateValues","product","isProductField","getElementsByTagName","updateOpts","addFieldOption","_this$closest","newOption","optType","optKey","oldKey","lastKey","getHighestOptKey","ftype","opt_key","opt_type","post","RegExp","addSaveAndDragIconsToOption","isNaN","toggleMultSel","toggleMultiSelect","setting","toggleSepValues","toggleImageOptions","hasImageOptions","imageSize","displayField","refreshOptionDisplayNow","imagesAsOptions","setAlignment","removeImageSizeClasses","getImageOptionSize","alignment","setImageSize","refreshOptionDisplay","object","fieldID","addImageToOption","_wp","imagePreview","media","model","fileFrame","frames","file_frame","multiple","library","attachment","state","toJSON","filename","$imagePreview","removeImageFromOption","$this","previewWrapper","toggleMultiselect","removeAttr","focusSearchBox","searchBox","dismissWarningMessage","warningEl","formData","FormData","stopFieldFocus","deleteFieldOption","parentLi","parentUl","visibleOptions","_Array$from$find$quer","otherInput","hasOther","maybeUncheckRadio","$self","uncheck","unbind","up","maybeClearOptText","new_option","confirmFieldsDeleteMessage","numberOfFields","clickDeleteField","confirmMsg","conf_delete","maybeDivider","fieldBoxes","fieldIdsToDelete","fieldBox","fieldsInsideFieldBox","conf_delete_sec","clickSelectField","clickDeleteFieldGroup","decoy","duplicateFieldGroup","placeholderUlChild","newRowUl","syncDetails","injectedCloneOptions","expectedLength","originalFieldIdByDuplicatedFieldId","duplicatedCount","$newRowUl","$duplicatedFields","cloneOption","getSizeOfLayoutClass","getLayoutClassName","clickFieldGroupLayout","sizeOfFieldGroup","popupWrapper","getSizeOfFieldGroupFromChildElement","destroyFieldGroupPopupOnOutsideClick","position","getFieldGroupPopup","firstLayoutOption","getSelectedFieldCount","childElement","popup","rowLayoutOptions","getRowLayoutTitle","getRowLayoutOptions","maybeMarkRowLayoutAsActive","separator","getCustomLayoutOption","getBreakIntoDifferentRowsOption","activeRow","currentRow","rowLayoutsMatch","getIconClone","ariaLabel","iconId","rowLayoutTitle","getEmptyGridContainer","getRowLayoutOption","useClass","getRowForSizeAndType","row1","row2","getRowLayoutAsKey","sizes","block","height","background","borderRadius","getLargeClassForSize","getSmallClassForSize","handleFieldGroupLayoutOptionClick","handleFieldGroupLayoutOptionInsideMergeClick","mergeSelectedFieldGroups","$selectedFieldGroups","$firstGroupUl","previousParent","customFieldGroupLayoutClick","setupCustomLayoutOptions","layoutClass","inputRow","paddingElement","inputValueOverride","inputField","buttonsWrapper","cancelButton","saveButton","floor","textAlign","getSecondaryButton","marginRight","getPrimaryButton","firstInput","customFieldGroupLayoutInsideMergeClick","getButton","textDecoration","breakFieldGroupClick","breakRow","stripLayoutFromFields","focusFieldGroupInputOnClick","select","cancelCustomFieldGroupClick","revertToFieldGroupPopupFirstPage","triggerElement","saveCustomFieldGroupClick","$controls","fieldGroupClick","maybeShowFieldGroupMessage","ctrlOrCmdKeyIsDown","shiftKeyIsDown","groupIsActive","getSelectedFieldGroups","numberOfSelectedGroups","selectedField","getSelectedField","syncAfterMultiSelect","$firstGroup","$range","nextUntil","$fieldGroup","maybeHideFieldGroupMessage","hideFieldGroupMessage","fieldGroupMessage","showFieldGroupMessage","rows","messageText","getFieldGroupMessageText","holdShiftMsg","selectedRowCount","$fieldGroups","selectedFieldGroup","selectedGroupHasMultipleFields","addFieldMultiselectPopup","maybeRemoveMultiselectPopup","getFieldMultiselectPopup","mergeOption","caret","verticalSeparator","deleteOption","selectedFieldsAreMergeable","marginLeft","selectedFieldGroups","totalFieldCount","mergeFieldsIntoRowClick","deleteFieldGroupsClick","deleteOnConfirm","multiselectPopup","getSelectedFieldIds","getDeleteSelectedFieldGroupsOnConfirmFunction","confirmedClick","deleteFieldIds","deleteAllSelectedFieldGroups","deleteFields","deleteField","hasOnlySubmitField","childUl","childLi","moveOpenModalsOutOfFieldOptions","openModals","_document$querySelect2","$section","$adjacentFields","$liWrapper","formEditorContainer","maybeEnableFieldButtonAtLimit","fieldTypeCount","addFieldLogicRow","logicRows","meta_name","getNewRowId","logicRow","insertAdjacentHTML","logicRowText","ruleText","defaultValue","addWatchLookupRow","lastRowId","lookupBlockRows","row_key","_document$getElementB2","watchRowBlock","resetOptionTextDetails","optionTextAlreadyExists","optionInputs","optionInput","onOptionTextFocus","getChoiceOldAndNewValues","_getChoiceOldValueAnd","getChoiceOldValueAndLabel","oldValue","oldLabel","_getChoiceNewValueAnd","getChoiceNewValueAndLabel","newLabel","choiceElement","singleOptionContainer","_choiceElement$closes","_choiceElement$closes2","onOptionTextBlur","originalValue","fieldIndex","logicId","rowLength","rowIndex","valueSelect","fieldIds","settingId","optionMatches","_getChoiceOldAndNewVa","singleSettingsContainer","_singleSettingsContai","searchSelectByText","selectElement","searchText","updateGetValueFieldSelection","fieldSelect","formID","maybeClearWatchFields","lookupBlock","containerClass","pages","maybeCollapsePage","toggleCollapsePage","toggleCollapseFakePage","toCollapse","getAllFieldsForPage","togglePage","topLevel","firstField","firstWrapper","$fieldsForPage","currentWrapper","fieldCount","slide","maybeCollapseSection","parentCont","maybeCollapseSettings","expanded","addSlideAnimationCssVars","setProperty","ceil","clickLabel","fieldTypeName","normalizeFieldName","clickDescription","autoExpandSettings","inSection","clickVis","originalList","clickAction","maybeUpdateFormatInput","formatElement","formatInput","selected","openAdvanced","toggleRepeatButtons","checkRepeatLimit","repeat_limit_min","checkCheckboxSelectionsLimit","checkbox_limit","updateRepeatText","obj","addRemove","toggleFormTax","$showFields","$showForms","getTaxOrFieldSelection","resetOptOnChange","thisOpt","getFieldKeyFromOpt","resetSingleOpt","allOpts","saved","defaultVal","labelForDisplay","optContainer","separateValues","single","baseName","getImageDisplayValue","nodeValue","firstInputIndex","node","buttonsAsOptions","replaceChild","imageUrl","showLabelWithImage","showingLabelWithImage","radioOrCheckbox","getImageLabel","fieldInfo","fillDropdownOpts","sourceID","getMultipleOpts","imageOptionClass","isProduct","addRadioCheckboxOpt","adjustConditionalLogicOptionOrders","getNewConditionalLogicOption","expectedOption","optionsContainer","expectedOptionInput","optionLength","optionIndex","optionMatch","getFieldOptions","_document$getElementB3","expectedOptionValue","_getNewConditionalLog","fieldChoices","expectedChoiceEl","valueOnFocus","hasMatch","prependValueSelectWithOptionMatch","listItems","optsContainer","other","isOther","inputType","getSingle","price","atts","showOther","removeDropdownOpts","hasPlaceholder","showValueAsLabel","labelName","optObj","optVals","no_label","getImageUrlFromInput","getChecked","optVal","Element","Document","outerHTML","clean","parseHTML","reduce","total","currentNode","cleanNode","imageLabelClass","originalLabel","shape","labelImage","labelNode","imageLabel","image_placeholder_icon","isChecked","isShowing","checkUniqueOpt","targetInput","settingsContainer","areValuesSeparate","endsWith","conflicts","getFieldValues","isTaxonomy","parentIDs","valueField","valueFieldType","fill","optionName","optionID","showSelect","showText","comparison","creatingValuesDropdown","fillField","thisType","callback","CustomEvent","frmData","frmGetFieldValues","getFieldSelection","$selectedFields","initOnceInAllInstances","prototype","orderFieldsObject","fieldSettingsForm","getFieldOrderInputById","currentOrder","newOrder","singleField","moveFieldsClass","moveFields","noSectionFields","$rows","sectionHasFields","handleShowPasswordLiveUpdate","fieldEl","$thisId","adjustVisibilityValuesForEveryoneValues","onEveryoneOptionSelected","unselectEveryoneOptionIfSelected","$select","next","selectedValues","hideEmptyEle","alignField","maybeShowInlineModal","showInlineModal","inputTrigger","getInputForIcon","dismissInlineModal","closeModalOnOutsideClick","_ref3","changeInputtedValue","changeHiddenSeparateValue","changeDefaultRadioValue","getOptionParent","getOptionFieldId","defaultRadio","savedVal","sep","liId","submitBuild","$thisEle","showNameYourFormModal","preFormSave","$form","stringify","serializeArray","frm_compact_fields","afterFormSave","$postStuff","$html","reloadIfAddonActivatedAjaxSubmitOnly","triggerSubmit","ownerDocument","triggerChange","submitNoAjax","shouldShowNameYourFormNameModal","modalWidget","offsetModalY","_document$querySelect3","formNameInput","noTitleText","addFormNameModalEvents","saveFormNameButton","newFormNameInput","onSaveFormNameButton","newFormName","then","delete","search","history","replaceState","form_key","removeWPUnload","adjustFormatInputBeforeSave","formatTypes","valueMap","none","international","currency","number","formatType","upgradePopup","require","showBasicModal","_event$target$dataset","modalTitle","_button$dataset","modalContent","maybeCreateModal","populateUpgradeTab","tab","h2","borderBottom","appendClonedModalElementToContainer","upgradeModalLink","upgradeButton","upgradeActions","screenshot","getScreenshotWrapper","folderUrl","getToolbar","getColorIcons","color","circle","backgroundColor","parentClass","maybeAddFieldSelection","wrap","missingClass","showSuccessOpt","copyFormAction","waitForActionToLoadBeforeCopy","targetSettings","wysiwygs","wysiwyg","tinymce","EditorManager","execCommand","$action","currentID","newID","newActionId","rename","reid","reclass","revalue","newAction","autocompleteInput","$trigger","$original","$inside","$top","exists","addFormAction","isAtLimitForActionType","getNewActionId","placeholderSetting","actionsList","list_id","handleAddFormActionSuccess","closeOpenActions","newActionContainer","widgetTop","toggleActionGroups","actions","triggerEvent","actionSettings","len","$thisobj","showFieldOptions","_document$querySelect4","allFieldSettings","scrollTo","editor","setupCallback","setupTinyMceEventHandlers","maybeAddShortcodesModalTriggerIcon","_singleField$querySel","shouldAddShortcodesModalTriggerIcon","fieldSettingsSelector","wrapTextareaWithIconContainer","textareas","textarea","wrapperSpan","createModalTriggerIcon","fieldsWithShortcodesBox","handleTinyMceChange","isTinyMceActive","tinyMCE","activeEditor","isHidden","targetElm","getContent","activeSettings","fragment","createDocumentFragment","endMarker","classname","showEmailRow","actionKey","rowType","hideEmailRow","actionBox","emailRowSelector","emailButtonSelector","showEmailWarning","fromVal","toVal","actionTriggers","addAlreadyUsedClass","getLimitForActionType","markActionTriggersInactive","markActionTriggersActive","triggers","atLimit","getNumberOfActionsForType","actionLimitMessage","only_one_action","edit_action_text","addFormLogicRow","logicRowsContainer","newRowID","email_id","checkDupPost","postField","$t","borderColor","field_already_used","togglePostContent","fillDyncontent","$dyn","switchPostType","curSelect","newSelect","catRows","postParentField","postMenuOrderField","postType","post_type","getActionOption","optName","replaceAll","successHandler","method","_wpnonce","console","addPosttaxRow","addPostRow","addPostmetaRow","metaName","postTypeRows","isNumeric","tax_key","action_key","cfOpts","optIndex","isFinite","changePosttaxRow","taxKey","showExclude","show_exclude","$tax","toggleCfOpts","cancel","toggleFormOpts","changedOpt","submitSettings","insertCode","insertFieldCode","variable","rich","elementId","activeElement","contentBox","doShortcode","wpActiveEditor","plain_text","innerText","send_to_editor","insertContent","maybeAddSanitizeUrlToShortcodeVariable","selection","createRange","selectionEnd","maybeFormatInsertedContent","selectionStart","maybeRemoveLayoutClasses","setSelectionRange","isALayoutClass","removeClasses","maybeRemoveClasses","beforeValue","currentClasses","textToInsert","startPattern","endPattern","resetLogicBuilder","setLogicExample","code","idKey","conditional_text","getSVGHref","getAttributeNS","maybeShowModal","moreIcon","getIconForInput","showShortcodeBox","showShortcodes","handleBuilderChangeEvent","maybeShowSaveAndReloadModal","_document$querySelect5","idParts","showSaveAndReloadModal","getModalContent","footer","getModalFooter","footerButton","buttonType","updateShortcodesPopupPosition","useElements","openTrigger","use","moreIconPosition","shortCodesPopup","parentPos","shouldFocus","hasAttributeNS","newMoreIcon","createElementNS","showOrHideContextualShortcodes","checkContextualShortcode","isContextualShortcode","canShowContextualShortcode","shortcode","address","inputId","fills","addressSelector","bodySelector","toggleContextualShortcodes","selector","shouldShowShortcodes","_iterator","_createForOfIteratorHelper","_step","n","done","_document$querySelect6","shortcodeLi","err","_document$getElementB4","confirmExit","buildSubmittedNoAjax","settingsSubmitted","resetFieldsUpdated","returnValue","amount","my","of","_moreIcon$closest","_input$nextElementSib","u","closeIcons","closeSvg","toggleAllowedHTML","inArray","toggleKeyID","switchTo","onActionLoaded","initWysiwygOnActionLoaded","addFocusEvents","holder","holderContainer","uninstallNow","saveAddonLicense","buttonName","disabled","thisRow","eddWrapper","actionIsSuccess","actionIsActivate","startFormMigration","checkedBoxes","importForms","forms","targetForm","$processSettings","importQueue","imported","importForm","provider","res","statusUpdate","grep","validateExport","$exportForms","$exportType","removeExportError","$thisName","checkCSVExtension","re","getExportOption","exportFormatSelect","exportTypeChanged","showOrHideRepeaters","checkExportTypes","checkSelectedAllFormsCheckbox","exportType","selectAllCheckbox","$dropdown","$selected","exportField","exportOption","repeaters","searchContent","preventMultipleExport","bootstrap","multiselect","installMultipleAddons","activateAddon","installAddon","addonState","proceed","hostname","username","password","showActiveCampaignForm","loadApiEmailForm","handleApiFormError","errorId","$error","handleEmailAddressError","formContainer","json","renderedHtml","autocomplete","initSelectionAutocomplete","nextInstallStep","thisStep","installTemplateFieldset","fieldset","elements","installNewForm","installTemplate","formToData","formName","template_name","formDesc","template_desc","xml","filterArgs","postAjax","redirect","showInstallFormErrorModal","handleCaptchaTypeChange","thresholdContainer","card","regEx","toSearch","selectedOptions","addons","itemCanBeShown","textMatchesPlural","updateCatHeadingVisibility","insertFieldsElement","headingElements","fieldsListElement","listItemElements","allHidden","every","iLen","evt","createEvent","initEvent","xmlHttp","XMLHttpRequest","params","k","encodeURIComponent","onreadystatechange","responseText","setRequestHeader","send","invisible","visible","cname","hidden","vis","onbeforeunload","w","addMultiselectLabelListener","clickListener","labelFor","buttonToggle","triggerMultiselectClick","maybeChangeEmbedFormMsg","fieldItem","embedMsg","toggleProductType","currentVal","subKey","names","Reflect","has","handleNameFieldOnFormBuilder","getSubFieldElFromCache","frmCachedSubFields","setSubFieldElToCache","getColClass","colCount","colClasses","num","allSubFieldNames","onChangeLayout","subFieldNames","newColClass","subFieldEl","_subFieldEl$classList","apply","_toConsumableArray","subFieldName","optionsEl","dropdownSelector","debounce","func","wait","liObject","useTag","useTagHref","hasDragIcon","hasSaveIcon","parser","DOMParser","parseFromString","liIcons","getElementsByTagNameNS","maybeAddSaveAndDragIcons","_key","maybeInitEntriesListPage","screenOptionsWrapper","maxSelectionsNote","margin","legend","maximumColumns","getSelectedCount","disableCheckboxesIfAtMax","addCheckboxListeners","initOnSubmitAction","onChangeType","actionEl","activeEls","activeEl","initAddMyEmailAddress","addMyEmailAddress","emptyInbox","leaveEmailInput","leaveEmailModal","email","$hiddenForm","$hiddenEmailField","emailWrapper","spinner","visibility","float","serialize","apiForm","showSuccessMessage","addAdminFooterLinks","_document$querySelect7","footerLinks","applyZebraStriping","tableSelector","emptyRowClass","isOdd","tables","table","maybeHideShortcodes","sidebar","isChild","initSelectDependencies","selects","toggleDependencyVisibility","dependencyElement","dependency","focusNextSingleOptionInput","currentInput","optionsList","inputsArray","currentIndex","nextInput","offsetParent","textLength","$openDrop","dismissIcon","inboxBannerInit","buildInit","settingsInit","styleInit","globalSettingsInit","exportInit","inboxInit","solutionInit","print","$advInfo","panelInit","$shortCodeDiv","showUpgradeTab","autoSearch","addFilter","_ref4","formKey","formKeyInput","previewDrop","_this$querySelector","smallScreenProceedButton","_document$getElementB5","saleBanner","saleDismiss","loadFieldId","$builderForm","builderArea","disableSelection","newStatus","currentTarget","addAction","showBtn","fieldSettingsEl","$formActions","formSettings","$loggedIn","$cookieExp","$editable","handleImageUploadClickEvents","bind","no_save_warning","$singleEntry","$saveDraft","customPanel","settingsPage","viewPage","insertFieldsTab","parentEle","htmlTab","idAttrValue","_document$getElementB6","dismissedMessage","dismissedMessagesWrapper","isInboxSlideIn","once","_dismissedMessage$que","removeChild","$previewWrapper","customCSSInit","warn","licenseTab","captchaType","_document$querySelect8","captchaValueOnLoad","showNote","manageStyleSettings","paymentsSettings","paymentSettingsTabs","cb","banner","dismissButton","triggerRemoveLogic","downloadXML","controller","isTemplate","_wp$hooks","_len","_key2","priority","_wp$hooks2","_len2","_key3","ready","_document$querySelect9","convertOldBootstrapDropdownsToBootstrap5","frmDropdownMenu","convertBootstrapUl","frm_show_div","showIf","classId","frmCheckAll","frmCheckAllLevel","$kids","cur","rowNumber","htmlName","frmImportCsv","urlVars","__FRMURLVARS","percent","import_complete"],"sourceRoot":""}