{"version":3,"file":"formidable_admin.js","mappings":"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","sources":["webpack://formidable/./js/src/admin/admin.js"],"sourcesContent":["/* exported frm_add_logic_row, frm_remove_tag, frm_show_div, frmCheckAll, frmCheckAllLevel */\n/* eslint-disable jsdoc/require-param, prefer-const, no-redeclare, @wordpress/no-unused-vars-before-return, jsdoc/check-types, jsdoc/check-tag-names, @wordpress/i18n-translator-comments, @wordpress/valid-sprintf, jsdoc/require-returns-description, jsdoc/require-param-type, no-unused-expressions, compat/compat */\n\nwindow.FrmFormsConnect = window.FrmFormsConnect || ( function( document, window, $ ) {\n\t/*global jQuery:false, frm_admin_js, frmGlobal, ajaxurl */\n\n\tconst el = {\n\t\tmessageBox: null,\n\t\treset: null,\n\n\t\tsetElements: function() {\n\t\t\tel.messageBox = document.querySelector( '.frm_pro_license_msg' );\n\t\t\tel.reset = document.getElementById( 'frm_reconnect_link' );\n\t\t}\n\t};\n\n\t/**\n\t * Public functions and properties.\n\t *\n\t * @since 4.03\n\t *\n\t * @type {Object}\n\t */\n\tconst app = {\n\n\t\t/**\n\t\t * Register connect button event.\n\t\t *\n\t\t * @since 4.03\n\t\t */\n\t\tinit: function() {\n\t\t\tel.setElements();\n\n\t\t\t$( document.getElementById( 'frm_deauthorize_link' ) ).on( 'click', app.deauthorize );\n\t\t\t$( '.frm_authorize_link' ).on( 'click', app.authorize );\n\t\t\t// Handles FF dashboard Authorize & Reauthorize events.\n\t\t\t// Attach click event to parent as #frm_deauthorize_link & #frm_reconnect_link dynamically recreated by bootstrap.setupBootstrapDropdowns in dom.js\n\t\t\t$( '.frm-dashboard-license-options' ).on( 'click', '#frm_deauthorize_link', app.deauthorize );\n\t\t\t$( '.frm-dashboard-license-options' ).on( 'click', '#frm_reconnect_link', app.reauthorize );\n\n\t\t\tif ( el.reset !== null ) {\n\t\t\t\t$( el.reset ).on( 'click', app.reauthorize );\n\t\t\t}\n\t\t},\n\n\t\t/* Manual license authorization */\n\t\tauthorize: function() {\n\t\t\t/*jshint validthis:true */\n\t\t\tconst button = this;\n\t\t\tconst pluginSlug = this.getAttribute( 'data-plugin' );\n\t\t\tconst input = document.getElementById( 'edd_' + pluginSlug + '_license_key' );\n\t\t\tconst license = input.value;\n\t\t\tlet wpmu = document.getElementById( 'proplug-wpmu' );\n\t\t\tthis.classList.add( 'frm_loading_button' );\n\t\t\tif ( wpmu === null ) {\n\t\t\t\twpmu = 0;\n\t\t\t} else if ( wpmu.checked ) {\n\t\t\t\twpmu = 1;\n\t\t\t} else {\n\t\t\t\twpmu = 0;\n\t\t\t}\n\n\t\t\t$.ajax( {\n\t\t\t\ttype: 'POST', url: ajaxurl, dataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'frm_addon_activate',\n\t\t\t\t\tlicense: license,\n\t\t\t\t\tplugin: pluginSlug,\n\t\t\t\t\twpmu: wpmu,\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t},\n\t\t\t\tsuccess: function( msg ) {\n\t\t\t\t\tapp.afterAuthorize( msg, input );\n\t\t\t\t\tbutton.classList.remove( 'frm_loading_button' );\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\n\t\tafterAuthorize: function( msg, input ) {\n\t\t\tif ( msg.success === true ) {\n\t\t\t\tinput.value = '•••••••••••••••••••';\n\t\t\t}\n\n\t\t\twp.hooks.doAction( 'frm_after_authorize', msg );\n\t\t\tapp.showMessage( msg );\n\t\t},\n\n\t\tshowProgress: function( msg ) {\n\t\t\tif ( el.messageBox === null ) {\n\t\t\t\t// In case the message box was added after page load.\n\t\t\t\tel.setElements();\n\t\t\t}\n\n\t\t\tconst messageBox = el.messageBox;\n\t\t\tif ( messageBox === null ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( msg.success === true ) {\n\t\t\t\tmessageBox.classList.remove( 'frm_error_style' );\n\t\t\t\tmessageBox.classList.add( 'frm_message', 'frm_updated_message' );\n\t\t\t} else {\n\t\t\t\tmessageBox.classList.add( 'frm_error_style' );\n\t\t\t\tmessageBox.classList.remove( 'frm_message', 'frm_updated_message' );\n\t\t\t}\n\t\t\tmessageBox.classList.remove( 'frm_hidden' );\n\t\t\tmessageBox.innerHTML = msg.message;\n\t\t},\n\n\t\tshowMessage: function( msg ) {\n\t\t\tif ( el.messageBox === null ) {\n\t\t\t\t// In case the message box was added after page load.\n\t\t\t\tel.setElements();\n\t\t\t}\n\t\t\tconst messageBox = el.messageBox;\n\n\t\t\tif ( msg.success === true ) {\n\t\t\t\tapp.showAuthorized( true );\n\t\t\t\tapp.showInlineSuccess();\n\n\t\t\t\t/**\n\t\t\t\t * Triggers the after license is authorized action for a confirmation/success modal.\n\t\t\t\t *\n\t\t\t\t * @param {Object} msg An object containing message data received from Authorize request.\n\t\t\t\t */\n\t\t\t\twp.hooks.doAction( 'frmAdmin.afterLicenseAuthorizeSuccess', { msg } );\n\t\t\t}\n\t\t\tapp.showProgress( msg );\n\n\t\t\tif ( msg.message !== '' ) {\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tmessageBox.innerHTML = '';\n\t\t\t\t\tmessageBox.classList.add( 'frm_hidden' );\n\t\t\t\t\tmessageBox.classList.remove( 'frm_error_style', 'frm_message', 'frm_updated_message' );\n\t\t\t\t}, 10000 );\n\t\t\t\tconst refreshPage = document.querySelector( '.frm-admin-page-dashboard' );\n\t\t\t\tif ( refreshPage ) {\n\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}, 1000 );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tshowAuthorized: function( show ) {\n\t\t\tconst from = show ? 'unauthorized' : 'authorized';\n\t\t\tconst to = show ? 'authorized' : 'unauthorized';\n\t\t\tconst container = document.querySelectorAll( '.frm_' + from + '_box' );\n\t\t\tif ( container.length ) {\n\t\t\t\t// Replace all authorized boxes with unauthorized boxes.\n\t\t\t\tcontainer.forEach( function( box ) {\n\t\t\t\t\tbox.className = box.className.replace( 'frm_' + from + '_box', 'frm_' + to + '_box' );\n\t\t\t\t} );\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Use the data-success element to replace the element content.\n\t\t */\n\t\tshowInlineSuccess: function() {\n\t\t\tconst successElement = document.querySelectorAll( '.frm-confirm-msg [data-success]' );\n\t\t\tif ( successElement.length ) {\n\t\t\t\tsuccessElement.forEach( function( element ) {\n\t\t\t\t\telement.innerHTML = frmAdminBuild.purifyHtml( element.getAttribute( 'data-success' ) );\n\t\t\t\t} );\n\t\t\t}\n\t\t},\n\n\t\t/* Clear the site license cache */\n\t\treauthorize: function() {\n\t\t\t/*jshint validthis:true */\n\t\t\tthis.innerHTML = '<span class=\"frm-wait frm_spinner\" style=\"visibility:visible;float:none\"></span>';\n\n\t\t\t$.ajax( {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: ajaxurl,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'frm_reset_cache',\n\t\t\t\t\tplugin: 'formidable_pro',\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t},\n\t\t\t\tsuccess: function( msg ) {\n\t\t\t\t\tel.reset.textContent = msg.message;\n\t\t\t\t\tif ( el.reset.getAttribute( 'data-refresh' ) === '1' ) {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t\treturn false;\n\t\t},\n\n\t\tdeauthorize: function() {\n\t\t\t/*jshint validthis:true */\n\t\t\tif ( ! confirm( frmGlobal.deauthorize ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst pluginSlug = this.getAttribute( 'data-plugin' ),\n\t\t\t\tinput = document.getElementById( 'edd_' + pluginSlug + '_license_key' ),\n\t\t\t\tlicense = input.value,\n\t\t\t\tlink = this;\n\n\t\t\tthis.innerHTML = '<span class=\"frm-wait frm_spinner\" style=\"visibility:visible;\"></span>';\n\n\t\t\t$.ajax( {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: ajaxurl,\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'frm_addon_deactivate',\n\t\t\t\t\tlicense: license,\n\t\t\t\t\tplugin: pluginSlug,\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t},\n\t\t\t\tsuccess: function() {\n\t\t\t\t\tapp.showAuthorized( false );\n\t\t\t\t\tinput.value = '';\n\t\t\t\t\tlink.replaceWith( 'Disconnected' );\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Triggers the after license is deauthorized sruccess action.\n\t\t\t\t\t */\n\t\t\t\t\twp.hooks.doAction( 'frmAdmin.afterLicenseDeauthorizeSuccess', {} );\n\t\t\t\t}\n\t\t\t} );\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t// Provide access to public functions/properties.\n\treturn app;\n}( document, window, jQuery ) );\n\nwindow.frmAdminBuildJS = function() {\n\t//'use strict';\n\n\t/*global jQuery:false, frm_admin_js, frmGlobal, ajaxurl, fromDom */\n\n\tconst frmAdminJs = frm_admin_js; // eslint-disable-line camelcase\n\tconst { tag, div, span, a, svg, img } = frmDom;\n\tconst { onClickPreventDefault } = frmDom.util;\n\tconst { doJsonFetch, doJsonPost } = frmDom.ajax;\n\tfrmAdminJs.contextualShortcodes = getContextualShortcodes();\n\tconst icons = {\n\t\tsave: svg( { href: '#frm_save_icon' } ),\n\t\tdrag: svg( { href: '#frm_drag_icon', classList: [ 'frm_drag_icon', 'frm-drag' ] } )\n\t};\n\n\tlet $newFields = jQuery( document.getElementById( 'frm-show-fields' ) ),\n\t\tbuilderForm = document.getElementById( 'new_fields' ),\n\t\tthisForm = document.getElementById( 'form_id' ),\n\t\tcopyHelper = false,\n\t\tfieldsUpdated = 0,\n\t\tthisFormId = 0,\n\t\tautoId = 0,\n\t\toptionMap = {},\n\t\tlastNewActionIdReturned = 0;\n\n\tconst { __, sprintf } = wp.i18n;\n\tlet debouncedSyncAfterDragAndDrop, postBodyContent, $postBodyContent;\n\n\tconst dragState = {\n\t\tdragging: false\n\t};\n\n\tif ( thisForm !== null ) {\n\t\tthisFormId = thisForm.value;\n\t}\n\n\tconst currentURL = new URL( window.location.href );\n\tconst urlParams = currentURL.searchParams;\n\tconst builderPage = document.getElementById( 'frm_builder_page' );\n\n\t// Global settings\n\tlet s;\n\n\tfunction showElement( element ) {\n\t\tif ( ! element[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\t\telement[ 0 ].style.display = '';\n\t}\n\n\tfunction empty( $obj ) {\n\t\tif ( $obj !== null ) {\n\t\t\twhile ( $obj.firstChild ) {\n\t\t\t\t$obj.removeChild( $obj.firstChild );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction addClass( $obj, className ) {\n\t\tif ( $obj.classList ) {\n\t\t\t$obj.classList.add( className );\n\t\t} else {\n\t\t\t$obj.className += ' ' + className;\n\t\t}\n\t}\n\n\tfunction confirmClick( e ) {\n\t\t/*jshint validthis:true */\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t\tconfirmLinkClick( this );\n\t}\n\n\tfunction confirmLinkClick( link ) {\n\t\tconst message = link.getAttribute( 'data-frmverify' ),\n\t\t\tloadedFrom = link.getAttribute( 'data-loaded-from' );\n\n\t\tif ( message === null || link.id === 'frm-confirmed-click' ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( 'entries-list' === loadedFrom ) {\n\t\t\treturn wp.hooks.applyFilters( 'frm_on_multiple_entries_delete', { link, initModal } );\n\t\t}\n\n\t\treturn confirmModal( link );\n\t}\n\n\tfunction confirmModal( link ) {\n\t\tlet verify, $confirmMessage, i, dataAtts, btnClass,\n\t\t\t$info = initModal( '#frm_confirm_modal', '400px' ),\n\t\t\tcontinueButton = document.getElementById( 'frm-confirmed-click' );\n\n\t\tif ( $info === false ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tverify = link.getAttribute( 'data-frmverify' );\n\t\tbtnClass = verify ? link.getAttribute( 'data-frmverify-btn' ) : '';\n\t\t$confirmMessage = jQuery( '.frm-confirm-msg' );\n\t\t$confirmMessage.empty();\n\n\t\tif ( verify ) {\n\t\t\t$confirmMessage.append( document.createTextNode( verify ) );\n\t\t\tif ( btnClass ) {\n\t\t\t\tcontinueButton.classList.add( btnClass );\n\t\t\t}\n\t\t}\n\n\t\tremoveAtts = continueButton.dataset;\n\t\tfor ( i in dataAtts ) {\n\t\t\tcontinueButton.removeAttribute( 'data-' + i );\n\t\t}\n\n\t\tdataAtts = link.dataset;\n\t\tfor ( i in dataAtts ) {\n\t\t\tif ( i !== 'frmverify' ) {\n\t\t\t\tcontinueButton.setAttribute( 'data-' + i, dataAtts[ i ] );\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Triggers the pre-open action for a confirmation modal. This action passes\n\t\t * relevant modal information and associated link to any listening hooks.\n\t\t *\n\t\t * @param {Object}      options       An object containing modal elements and data.\n\t\t * @param {HTMLElement} options.$info The HTML element containing modal information.\n\t\t * @param {string}      options.link  The link associated with the modal action.\n\t\t */\n\t\twp.hooks.doAction( 'frmAdmin.beforeOpenConfirmModal', { $info, link } );\n\n\t\t$info.dialog( 'open' );\n\t\tcontinueButton.setAttribute( 'href', link.getAttribute( 'href' ) || link.getAttribute( 'data-href' ) );\n\t\treturn false;\n\t}\n\n\tfunction infoModal( msg ) {\n\t\tconst $info = initModal( '#frm_info_modal', '400px' );\n\n\t\tif ( $info === false ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tjQuery( '.frm-info-msg' ).html( msg );\n\n\t\t$info.dialog( 'open' );\n\t\treturn false;\n\t}\n\n\tfunction toggleItem( e ) {\n\t\t/*jshint validthis:true */\n\t\tconst toggle = this.getAttribute( 'data-frmtoggle' );\n\t\tconst text = this.getAttribute( 'data-toggletext' );\n\t\tconst $items = jQuery( toggle );\n\n\t\te.preventDefault();\n\n\t\t$items.toggle();\n\n\t\tif ( text !== null && text !== '' ) {\n\t\t\tthis.setAttribute( 'data-toggletext', this.innerHTML );\n\t\t\tthis.textContent = text;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Toggle a class on target elements when an anchor is clicked, or when a radio or checkbox has been selected.\n\t *\n\t * @param {Event} e Event with either the change or click type.\n\t * @return {false}\n\t */\n\tfunction hideShowItem( e ) {\n\t\t/*jshint validthis:true */\n\t\tlet hide = this.getAttribute( 'data-frmhide' );\n\t\tlet show = this.getAttribute( 'data-frmshow' );\n\t\tlet uncheckList = this.getAttribute( 'data-frmuncheck' );\n\t\tlet uncheckListArray = uncheckList ? uncheckList.split( ',' ) : [];\n\n\t\t// Flip unchecked checkboxes so an off value undoes the on value.\n\t\tif ( isUncheckedCheckbox( this ) ) {\n\t\t\tif ( hide !== null ) {\n\t\t\t\tshow = hide;\n\t\t\t\thide = null;\n\t\t\t} else if ( show !== null ) {\n\t\t\t\thide = show;\n\t\t\t\tshow = null;\n\t\t\t}\n\t\t}\n\n\t\te.preventDefault();\n\n\t\tconst toggleClass = this.getAttribute( 'data-toggleclass' ) || 'frm_hidden';\n\n\t\tif ( hide !== null ) {\n\t\t\tjQuery( hide ).addClass( toggleClass );\n\t\t}\n\n\t\tif ( show !== null ) {\n\t\t\tjQuery( show ).removeClass( toggleClass );\n\t\t}\n\n\t\tconst current = this.parentNode.querySelectorAll( 'a.current' );\n\t\tif ( current !== null ) {\n\t\t\tfor ( let i = 0; i < current.length; i++ ) {\n\t\t\t\tcurrent[ i ].classList.remove( 'current' );\n\t\t\t}\n\t\t\tthis.classList.add( 'current' );\n\t\t}\n\n\t\tif ( uncheckListArray.length ) {\n\t\t\tuncheckListArray.forEach( function( uncheckItem ) {\n\t\t\t\tconst uncheckItemElement = document.querySelector( uncheckItem );\n\t\t\t\tif ( uncheckItemElement ) {\n\t\t\t\t\tuncheckItemElement.checked = false;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfunction isUncheckedCheckbox( element ) {\n\t\treturn 'INPUT' === element.nodeName && 'checkbox' === element.type && ! element.checked;\n\t}\n\n\tfunction loadTooltips() {\n\t\tlet wrapClass = jQuery( '.wrap, .frm_wrap' ),\n\t\t\tconfirmModal = document.getElementById( 'frm_confirm_modal' ),\n\t\t\tdoAction = false,\n\t\t\tconfirmedBulkDelete = false;\n\n\t\tjQuery( confirmModal ).on( 'click', '[data-deletefield]', deleteFieldConfirmed );\n\t\tjQuery( confirmModal ).on( 'click', '[data-removeid]', removeThisTag );\n\t\tjQuery( confirmModal ).on( 'click', '[data-trashtemplate]', trashTemplate );\n\n\t\twrapClass.on( 'click', '.frm_remove_tag, .frm_remove_form_action', removeThisTag );\n\t\twrapClass.on( 'click', 'a[data-frmverify]', confirmClick );\n\t\twrapClass.on( 'click', 'a[data-frmtoggle]', toggleItem );\n\t\twrapClass.on( 'click', 'a[data-frmhide], a[data-frmshow]', hideShowItem );\n\t\twrapClass.on( 'change', 'input[data-frmhide], input[data-frmshow]', hideShowItem );\n\t\twrapClass.on( 'click', '.widget-top,a.widget-action', clickWidget );\n\n\t\twrapClass.on( 'mouseenter.frm', '.frm_bstooltip, .frm_help', function() {\n\t\t\tjQuery( this ).off( 'mouseenter.frm' );\n\n\t\t\tjQuery( '.frm_bstooltip, .frm_help' ).tooltip();\n\t\t\tjQuery( this ).tooltip( 'show' );\n\t\t} );\n\n\t\tjQuery( '.frm_bstooltip, .frm_help' ).tooltip( );\n\n\t\tjQuery( document ).on( 'click', '#doaction, #doaction2', function( event ) {\n\t\t\tconst isTop = this.id === 'doaction',\n\t\t\t\tsuffix = isTop ? 'top' : 'bottom',\n\t\t\t\tbulkActionSelector = document.getElementById( 'bulk-action-selector-' + suffix ),\n\t\t\t\tconfirmBulkDelete = document.getElementById( 'confirm-bulk-delete-' + suffix );\n\n\t\t\tif ( bulkActionSelector !== null && confirmBulkDelete !== null ) {\n\t\t\t\tdoAction = this;\n\n\t\t\t\tif ( ! confirmedBulkDelete && bulkActionSelector.value === 'bulk_delete' ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconfirmLinkClick( confirmBulkDelete );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdoAction = false;\n\t\t\t}\n\t\t} );\n\n\t\tjQuery( document ).on( 'click', '#frm-confirmed-click', function( event ) {\n\t\t\tif ( doAction === false || event.target.classList.contains( 'frm-btn-inactive' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( this.getAttribute( 'href' ) === 'confirm-bulk-delete' ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconfirmedBulkDelete = true;\n\t\t\t\tdoAction.click();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction deleteTooltips() {\n\t\tdocument.querySelectorAll( '.tooltip' ).forEach(\n\t\t\tfunction( tooltip ) {\n\t\t\t\ttooltip.remove();\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction removeThisTag() {\n\t\t/*jshint validthis:true */\n\t\tlet show, hide, removeMore;\n\n\t\tif ( parseInt( this.getAttribute( 'data-skip-frm-js' ) ) || confirmLinkClick( this ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst deleteButton = jQuery( this );\n\t\tconst id = deleteButton.attr( 'data-removeid' );\n\n\t\tshow = deleteButton.attr( 'data-showlast' );\n\t\tif ( typeof show === 'undefined' ) {\n\t\t\tshow = '';\n\t\t}\n\n\t\thide = deleteButton.attr( 'data-hidelast' );\n\t\tif ( typeof hide === 'undefined' ) {\n\t\t\thide = '';\n\t\t}\n\n\t\tremoveMore = deleteButton.attr( 'data-removemore' );\n\n\t\tif ( show !== '' ) {\n\t\t\tif ( deleteButton.closest( '.frm_add_remove' ).find( '.frm_remove_tag:visible' ).length > 1 ) {\n\t\t\t\tshow = '';\n\t\t\t\thide = '';\n\t\t\t}\n\t\t} else if ( id.indexOf( 'frm_postmeta_' ) === 0 ) {\n\t\t\tif ( jQuery( '#frm_postmeta_rows .frm_postmeta_row' ).length < 2 ) {\n\t\t\t\tshow = '.frm_add_postmeta_row.button';\n\t\t\t}\n\t\t\tif ( jQuery( '.frm_toggle_cf_opts' ).length && jQuery( '#frm_postmeta_rows .frm_postmeta_row:not(#' + id + ')' ).last().length ) {\n\t\t\t\tif ( show !== '' ) {\n\t\t\t\t\tshow += ',';\n\t\t\t\t}\n\t\t\t\tshow += '#' + jQuery( '#frm_postmeta_rows .frm_postmeta_row:not(#' + id + ')' ).last().attr( 'id' ) + ' .frm_toggle_cf_opts';\n\t\t\t}\n\t\t}\n\n\t\tconst fadeEle = document.getElementById( id );\n\t\tconst $fadeEle = jQuery( fadeEle );\n\t\t$fadeEle.fadeOut( 300, function() {\n\t\t\t$fadeEle.remove();\n\t\t\tfieldUpdated();\n\n\t\t\tif ( hide !== '' ) {\n\t\t\t\tjQuery( hide ).hide();\n\t\t\t}\n\n\t\t\tif ( show !== '' ) {\n\t\t\t\tjQuery( show + ' a,' + show ).removeClass( 'frm_hidden' ).fadeIn( 'slow' );\n\t\t\t}\n\n\t\t\tif ( this.closest( '.frm_form_action_settings' ) ) {\n\t\t\t\tconst type = this.closest( '.frm_form_action_settings' ).querySelector( '.frm_action_name' ).value;\n\t\t\t\tafterActionRemoved( type );\n\t\t\t}\n\t\t\tdocument.querySelector( '.tooltip' )?.remove();\n\t\t} );\n\n\t\tif ( typeof removeMore !== 'undefined' ) {\n\t\t\tremoveMore = jQuery( removeMore );\n\t\t\tremoveMore.fadeOut( 400, function() {\n\t\t\t\tremoveMore.remove();\n\t\t\t} );\n\t\t}\n\n\t\tif ( show !== '' ) {\n\t\t\tjQuery( this ).closest( '.frm_logic_rows' ).fadeOut( 'slow' );\n\t\t}\n\n\t\t/**\n\t\t * Fires after a tag element has been removed in the admin interface.\n\t\t *\n\t\t * @param {string}      id      The ID of the removed element\n\t\t * @param {HTMLElement} fadeEle The removed element that was faded out\n\t\t */\n\t\twp.hooks.doAction( 'frm_admin_tag_removed', id, fadeEle );\n\n\t\treturn false;\n\t}\n\n\tfunction afterActionRemoved( type ) {\n\t\tcheckActiveAction( type );\n\n\t\tconst hookName = 'frm_after_action_removed';\n\t\tconst hookArgs = { type };\n\t\twp.hooks.doAction( hookName, hookArgs );\n\t}\n\n\tfunction clickWidget( event, b ) {\n\t\t/*jshint validthis:true */\n\t\tif ( typeof b === 'undefined' ) {\n\t\t\tb = this;\n\t\t}\n\n\t\tpopCalcFields( b, false );\n\n\t\tconst cont = jQuery( b ).closest( '.frm_form_action_settings' );\n\t\tconst target = event.target;\n\n\t\tif ( cont.length && typeof target !== 'undefined' ) {\n\t\t\tconst className = target.parentElement.className;\n\t\t\tif ( 'string' === typeof className ) {\n\t\t\t\tif ( className.indexOf( 'frm_email_icons' ) > -1 || className.indexOf( 'frm_toggle' ) > -1 ) {\n\t\t\t\t\t// clicking on delete icon shouldn't open it\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet inside = cont.children( '.widget-inside' );\n\n\t\tif ( cont.length && inside.find( 'p, div, table' ).length < 1 ) {\n\t\t\tconst actionId = cont.find( 'input[name$=\"[ID]\"]' ).val();\n\t\t\tconst actionType = cont.find( 'input[name$=\"[post_excerpt]\"]' ).val();\n\t\t\tif ( actionType ) {\n\t\t\t\tinside.html( '<span class=\"frm-wait frm_spinner\"></span>' );\n\t\t\t\tcont.find( '.spinner' ).fadeIn( 'slow' );\n\t\t\t\tjQuery.ajax( {\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\turl: ajaxurl,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taction: 'frm_form_action_fill',\n\t\t\t\t\t\taction_id: actionId,\n\t\t\t\t\t\taction_type: actionType,\n\t\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function( html ) {\n\t\t\t\t\t\tinside.html( html );\n\t\t\t\t\t\tinitiateMultiselect();\n\t\t\t\t\t\tshowInputIcon( '#' + cont.attr( 'id' ) );\n\t\t\t\t\t\tinitAutocomplete( inside );\n\t\t\t\t\t\tjQuery( b ).trigger( 'frm-action-loaded' );\n\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Fires after filling form action content when opening.\n\t\t\t\t\t\t *\n\t\t\t\t\t\t * @since 5.5.4\n\t\t\t\t\t\t *\n\t\t\t\t\t\t * @param {Object} insideElement JQuery object of form action inside element.\n\t\t\t\t\t\t */\n\t\t\t\t\t\twp.hooks.doAction( 'frm_filled_form_action', inside );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\tjQuery( b ).closest( '.frm_field_box' ).siblings().find( '.widget-inside' ).slideUp( 'fast' );\n\t\tif ( ( typeof b.className !== 'undefined' && b.className.indexOf( 'widget-action' ) !== -1 ) || jQuery( b ).closest( '.start_divider' ).length < 1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tinside = jQuery( b ).closest( 'div.widget' ).children( '.widget-inside' );\n\t\tif ( inside.is( ':hidden' ) ) {\n\t\t\tinside.slideDown( 'fast' );\n\t\t} else {\n\t\t\tinside.slideUp( 'fast' );\n\t\t}\n\t}\n\n\tfunction clickNewTab() {\n\t\t/*jshint validthis:true */\n\t\tconst t = this.getAttribute( 'href' );\n\t\tif ( typeof t === 'undefined' ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst c = t.replace( '#', '.' );\n\t\tconst $link = jQuery( this );\n\n\t\t$link.closest( 'li' ).addClass( 'frm-tabs active' ).siblings( 'li' ).removeClass( 'frm-tabs active starttab' );\n\t\t$link.closest( 'div' ).children( '.tabs-panel' ).not( t ).not( c ).hide();\n\n\t\tconst tabContent = document.getElementById( t.replace( '#', '' ) );\n\t\tif ( tabContent ) {\n\t\t\ttabContent.style.display = 'block';\n\t\t}\n\n\t\t// clearSettingsBox would hide field settings when opening the fields modal and we want to skip it there.\n\t\tif ( this.id === 'frm_insert_fields_tab' && ! this.closest( '#frm_adv_info' ) ) {\n\t\t\tclearSettingsBox();\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction clickTab( link, auto ) {\n\t\tlink = jQuery( link );\n\t\tconst t = link.attr( 'href' );\n\t\tif ( typeof t === 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst c = t.replace( '#', '.' );\n\n\t\tlink.closest( 'li' ).addClass( 'frm-tabs active' ).siblings( 'li' ).removeClass( 'frm-tabs active starttab' );\n\t\tif ( link.closest( 'div' ).find( '.tabs-panel' ).length ) {\n\t\t\tlink.closest( 'div' ).children( '.tabs-panel' ).not( t ).not( c ).hide();\n\t\t} else if ( document.getElementById( 'form_global_settings' ) !== null ) {\n\t\t\t/* global settings */\n\t\t\tconst ajax = link.data( 'frmajax' );\n\t\t\tlink.closest( '.frm_wrap' ).find( '.tabs-panel, .hide_with_tabs' ).hide();\n\t\t\tif ( typeof ajax !== 'undefined' && ajax == '1' ) {\n\t\t\t\tloadSettingsTab( t );\n\t\t\t}\n\t\t} else {\n\t\t\t/* form settings page */\n\t\t\tjQuery( '#frm-categorydiv .tabs-panel, .hide_with_tabs' ).hide();\n\t\t}\n\t\tjQuery( t ).show();\n\t\tjQuery( c ).show();\n\n\t\thideShortcodes();\n\n\t\tif ( auto !== 'auto' ) {\n\t\t\t// Hide success message on tab change.\n\t\t\tjQuery( '.frm_updated_message' ).hide();\n\t\t\tjQuery( '.frm_warning_style' ).hide();\n\t\t}\n\n\t\tif ( jQuery( link ).closest( '#frm_adv_info' ).length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( jQuery( '.frm_form_settings' ).length ) {\n\t\t\tjQuery( '.frm_form_settings' ).attr( 'action', '?page=formidable&frm_action=settings&id=' + jQuery( '.frm_form_settings input[name=\"id\"]' ).val() + '&t=' + t.replace( '#', '' ) );\n\t\t} else {\n\t\t\tjQuery( '.frm_settings_form' ).attr( 'action', '?page=formidable-settings&t=' + t.replace( '#', '' ) );\n\t\t}\n\t}\n\n\tfunction setupSortable( sortableSelector ) {\n\t\tdocument.querySelectorAll( sortableSelector ).forEach(\n\t\t\tlist => {\n\t\t\t\tmakeDroppable( list );\n\t\t\t\tArray.from( list.children ).forEach( child => makeDraggable( child, '.frm-move' ) );\n\n\t\t\t\tconst $sectionTitle = jQuery( list ).children( '[data-type=\"divider\"]' ).children( '.divider_section_only' );\n\t\t\t\tif ( $sectionTitle.length ) {\n\t\t\t\t\tmakeDroppable( $sectionTitle );\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\tsetupFieldOptionSorting( jQuery( '#frm_builder_page' ) );\n\t}\n\n\tfunction makeDroppable( list ) {\n\t\tjQuery( list ).droppable( {\n\t\t\taccept: '.frmbutton, li.frm_field_box',\n\t\t\tdeactivate: handleFieldDrop,\n\t\t\tover: onDragOverDroppable,\n\t\t\tout: onDraggableLeavesDroppable,\n\t\t\ttolerance: 'pointer'\n\t\t} );\n\t}\n\n\tfunction onDragOverDroppable( event, ui ) {\n\t\tconst droppable = getDroppableForOnDragOver( event.target );\n\t\tconst draggable = ui.draggable[ 0 ];\n\n\t\tif ( ! allowDrop( draggable, droppable, event ) ) {\n\t\t\tdroppable.classList.remove( 'frm-over-droppable' );\n\t\t\tjQuery( droppable ).parents( 'ul.frm_sorting' ).addClass( 'frm-over-droppable' );\n\t\t\treturn;\n\t\t}\n\n\t\tdocument.querySelectorAll( '.frm-over-droppable' ).forEach( droppable => droppable.classList.remove( 'frm-over-droppable' ) );\n\t\tdroppable.classList.add( 'frm-over-droppable' );\n\t\tjQuery( droppable ).parents( 'ul.frm_sorting' ).addClass( 'frm-over-droppable' );\n\t}\n\n\t/**\n\t * Maybe change the droppable.\n\t * Section titles are made droppable, but are not a list, so we need to change the droppable to the section's list instead.\n\t *\n\t * @param {Element} droppable\n\t * @return {Element}\n\t */\n\tfunction getDroppableForOnDragOver( droppable ) {\n\t\tif ( droppable.classList.contains( 'divider_section_only' ) ) {\n\t\t\tdroppable = jQuery( droppable ).nextAll( '.start_divider.frm_sorting' ).get( 0 );\n\t\t}\n\t\treturn droppable;\n\t}\n\n\tfunction onDraggableLeavesDroppable( event ) {\n\t\tconst droppable = event.target;\n\t\tdroppable.classList.remove( 'frm-over-droppable' );\n\t}\n\n\tfunction makeDraggable( draggable, handle ) {\n\t\tconst settings = {\n\t\t\thelper: getDraggableHelper,\n\t\t\trevert: 'invalid',\n\t\t\tdelay: 10,\n\t\t\tstart: handleDragStart,\n\t\t\tstop: handleDragStop,\n\t\t\tdrag: handleDrag,\n\t\t\tcursor: 'grabbing',\n\t\t\trefreshPositions: true,\n\t\t\tcursorAt: {\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 90 // The width of draggable button is 180. 90 should center the draggable on the cursor.\n\t\t\t}\n\t\t};\n\t\tif ( 'string' === typeof handle ) {\n\t\t\tsettings.handle = handle;\n\t\t}\n\t\tjQuery( draggable ).draggable( settings );\n\t}\n\n\tfunction getDraggableHelper( event ) {\n\t\tconst draggable = event.delegateTarget;\n\n\t\tif ( isFieldGroup( draggable ) ) {\n\t\t\tconst newTextFieldClone = document.getElementById( 'frm-insert-fields' ).querySelector( '.frm_ttext' ).cloneNode( true );\n\t\t\tnewTextFieldClone.querySelector( 'use' ).setAttributeNS( 'http://www.w3.org/1999/xlink', 'href', '#frm_field_group_layout_icon' );\n\t\t\tnewTextFieldClone.querySelector( 'span' ).textContent = __( 'Field Group', 'formidable' );\n\t\t\tnewTextFieldClone.classList.add( 'frm_field_box' );\n\t\t\tnewTextFieldClone.classList.add( 'ui-sortable-helper' );\n\t\t\treturn newTextFieldClone;\n\t\t}\n\n\t\tlet copyTarget;\n\t\tconst isNewField = draggable.classList.contains( 'frmbutton' );\n\t\tif ( isNewField ) {\n\t\t\tcopyTarget = draggable.cloneNode( true );\n\t\t\tcopyTarget.classList.add( 'ui-sortable-helper' );\n\t\t\tdraggable.classList.add( 'frm-new-field' );\n\t\t\treturn copyTarget;\n\t\t}\n\n\t\tif ( draggable.hasAttribute( 'data-ftype' ) ) {\n\t\t\tconst fieldType = draggable.getAttribute( 'data-ftype' );\n\t\t\tcopyTarget = document.getElementById( 'frm-insert-fields' ).querySelector( '.frm_t' + fieldType );\n\t\t\tcopyTarget = copyTarget.cloneNode( true );\n\t\t\tcopyTarget.classList.add( 'form-field' );\n\n\t\t\tcopyTarget.classList.add( 'ui-sortable-helper' );\n\n\t\t\tif ( copyTarget ) {\n\t\t\t\treturn copyTarget.cloneNode( true );\n\t\t\t}\n\t\t}\n\n\t\treturn div( { className: 'frmbutton' } );\n\t}\n\n\tfunction handleDragStart( event, ui ) {\n\t\tdragState.dragging = true;\n\n\t\tconst container = postBodyContent;\n\t\tcontainer.classList.add( 'frm-dragging-field' );\n\n\t\tdocument.body.classList.add( 'frm-dragging' );\n\t\tui.helper.addClass( 'frm-sortable-helper' );\n\t\tui.helper.initialOffset = container.scrollTop;\n\n\t\tevent.target.classList.add( 'frm-drag-fade' );\n\n\t\tunselectFieldGroups();\n\t\tdeleteEmptyDividerWrappers();\n\t\tmaybeRemoveGroupHoverTarget();\n\t\tcloseOpenFieldDropdowns();\n\t\tdeleteTooltips();\n\t}\n\n\tfunction handleDragStop() {\n\t\tconst container = postBodyContent;\n\t\tcontainer.classList.remove( 'frm-dragging-field' );\n\t\tdocument.body.classList.remove( 'frm-dragging' );\n\n\t\tconst fade = document.querySelector( '.frm-drag-fade' );\n\t\tif ( fade ) {\n\t\t\tfade.classList.remove( 'frm-drag-fade' );\n\t\t}\n\t}\n\n\tfunction handleDrag( event, ui ) {\n\t\tmaybeScrollBuilder( event );\n\t\tconst draggable = event.target;\n\t\tconst droppable = getDroppableTarget();\n\n\t\tlet placeholder = document.getElementById( 'frm_drag_placeholder' );\n\t\tif ( ! allowDrop( draggable, droppable, event ) ) {\n\t\t\tif ( placeholder ) {\n\t\t\t\tplaceholder.remove();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! placeholder ) {\n\t\t\tplaceholder = tag( 'li', {\n\t\t\t\tid: 'frm_drag_placeholder',\n\t\t\t\tclassName: 'sortable-placeholder'\n\t\t\t} );\n\t\t}\n\t\tconst frmSortableHelper = ui.helper.get( 0 );\n\t\tif ( frmSortableHelper.classList.contains( 'form-field' ) || frmSortableHelper.classList.contains( 'frm_field_box' ) ) {\n\t\t\t// Sync the y position of the draggable so it still follows the cursor after scrolling up and down the field list.\n\t\t\tfrmSortableHelper.style.transform = 'translateY(' + getDragOffset( ui.helper ) + 'px)';\n\t\t}\n\n\t\tif ( 'frm-show-fields' === droppable.id || droppable.classList.contains( 'start_divider' ) ) {\n\t\t\tplaceholder.style.left = 0;\n\t\t\thandleDragOverYAxis( { droppable, y: event.clientY, placeholder } );\n\t\t\treturn;\n\t\t}\n\n\t\tplaceholder.style.top = '';\n\t\thandleDragOverFieldGroup( { droppable, x: event.clientX, placeholder } );\n\t}\n\n\tfunction maybeScrollBuilder( event ) {\n\t\t$postBodyContent.scrollTop(\n\t\t\t( _, v ) => {\n\t\t\t\tconst moved = event.clientY;\n\t\t\t\tconst h = postBodyContent.offsetHeight;\n\t\t\t\tconst relativePos = event.clientY - postBodyContent.offsetTop;\n\t\t\t\tconst y = relativePos - ( h / 2 );\n\n\t\t\t\tif ( relativePos > ( h - 50 ) && moved > 5 ) {\n\t\t\t\t\t// Scrolling down.\n\t\t\t\t\treturn v + ( y * 0.1 );\n\t\t\t\t}\n\n\t\t\t\tif ( relativePos < 70 && moved < 130 ) {\n\t\t\t\t\t// Scrolling up.\n\t\t\t\t\treturn v - Math.abs( y * 0.1 );\n\t\t\t\t}\n\n\t\t\t\treturn v;\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction getDragOffset( $helper ) {\n\t\treturn postBodyContent.scrollTop - $helper.initialOffset;\n\t}\n\n\tfunction getDroppableTarget() {\n\t\tlet droppable = document.getElementById( 'frm-show-fields' );\n\t\twhile ( droppable.querySelector( '.frm-over-droppable' ) ) {\n\t\t\tdroppable = droppable.querySelector( '.frm-over-droppable' );\n\t\t}\n\t\tif ( 'frm-show-fields' === droppable.id && ! droppable.classList.contains( 'frm-over-droppable' ) ) {\n\t\t\tdroppable = false;\n\t\t}\n\t\treturn droppable;\n\t}\n\n\tfunction handleFieldDrop( _, ui ) {\n\t\tif ( ! dragState.dragging ) {\n\t\t\t// dragState.dragging is set to true on drag start.\n\t\t\t// The deactivate event gets called for every droppable. This check to make sure it happens once.\n\t\t\treturn;\n\t\t}\n\n\t\tdragState.dragging = false;\n\n\t\tconst draggable = ui.draggable[ 0 ];\n\t\tconst placeholder = document.getElementById( 'frm_drag_placeholder' );\n\n\t\tif ( ! placeholder ) {\n\t\t\tui.helper.remove();\n\t\t\tdebouncedSyncAfterDragAndDrop();\n\t\t\treturn;\n\t\t}\n\n\t\tmaybeOpenCollapsedPage( placeholder );\n\n\t\tconst $previousFieldContainer = ui.helper.parent();\n\t\tconst previousSection = ui.helper.get( 0 ).closest( 'ul.start_divider' );\n\t\tconst newSection = placeholder.closest( 'ul.start_divider' );\n\n\t\tif ( draggable.classList.contains( 'frm-new-field' ) ) {\n\t\t\tinsertNewFieldByDragging( draggable.id );\n\t\t} else {\n\t\t\tmoveFieldThatAlreadyExists( draggable, placeholder );\n\t\t\tmaybeMakeFieldGroupDraggableAfterDragging( placeholder.parentElement );\n\t\t}\n\n\t\tconst previousSectionId = previousSection ? parseInt( previousSection.closest( '.edit_field_type_divider' ).getAttribute( 'data-fid' ) ) : 0;\n\t\tconst newSectionId = newSection ? parseInt( newSection.closest( '.edit_field_type_divider' ).getAttribute( 'data-fid' ) ) : 0;\n\n\t\tplaceholder.remove();\n\t\tui.helper.remove();\n\n\t\tconst $previousContainerFields = $previousFieldContainer.length ? getFieldsInRow( $previousFieldContainer ) : [];\n\t\tmaybeUpdatePreviousFieldContainerAfterDrop( $previousFieldContainer, $previousContainerFields );\n\t\tmaybeUpdateDraggableClassAfterDrop( draggable, $previousContainerFields );\n\n\t\tif ( previousSectionId !== newSectionId ) {\n\t\t\tupdateFieldAfterMovingBetweenSections( jQuery( draggable ), previousSection );\n\t\t}\n\n\t\tdebouncedSyncAfterDragAndDrop();\n\t}\n\n\t/**\n\t * When a field is moved into a field group, make sure the field group is draggable.\n\t *\n\t * @since 6.24\n\t *\n\t * @param {HTMLElement} placeholderParent\n\t * @return {void}\n\t */\n\tfunction maybeMakeFieldGroupDraggableAfterDragging( placeholderParent ) {\n\t\tconst isDroppingIntoFieldGroup = placeholderParent.nodeName === 'UL' &&\n\t\t\t! placeholderParent.classList.contains( 'start_divider' ) &&\n\t\t\t'frm-show-fields' !== placeholderParent.id;\n\n\t\tif ( ! isDroppingIntoFieldGroup ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst fieldGroupLi = placeholderParent.closest( 'li' );\n\t\tif ( fieldGroupLi && ! fieldGroupLi.classList.contains( 'ui-draggable' ) ) {\n\t\t\tmakeDraggable( fieldGroupLi, '.frm-move' );\n\t\t}\n\t}\n\n\t/**\n\t * If a page if collapsed, expand it before dragging since only the page break will move.\n\t *\n\t * @param {Element} placeholder\n\t * @return {void}\n\t */\n\tfunction maybeOpenCollapsedPage( placeholder ) {\n\t\tif ( ! placeholder.previousElementSibling || ! placeholder.previousElementSibling.classList.contains( 'frm-is-collapsed' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst $pageBreakField = jQuery( placeholder ).prevUntil( '[data-type=\"break\"]' );\n\t\tif ( ! $pageBreakField.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst collapseButton = $pageBreakField.find( '.frm-collapse-page' ).get( 0 );\n\t\tif ( collapseButton ) {\n\t\t\tcollapseButton.click();\n\t\t}\n\t}\n\n\tfunction maybeUpdatePreviousFieldContainerAfterDrop( $previousFieldContainer, $previousContainerFields ) {\n\t\tif ( ! $previousFieldContainer.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( $previousContainerFields.length ) {\n\t\t\tsyncLayoutClasses( $previousContainerFields.first() );\n\t\t} else {\n\t\t\tmaybeDeleteAnEmptyFieldGroup( $previousFieldContainer.get( 0 ) );\n\t\t}\n\t}\n\n\tfunction maybeUpdateDraggableClassAfterDrop( draggable, $previousContainerFields ) {\n\t\tif ( 0 !== $previousContainerFields.length || 1 !== getFieldsInRow( jQuery( draggable.parentNode ) ).length ) {\n\t\t\tsyncLayoutClasses( jQuery( draggable ) );\n\t\t}\n\t}\n\n\t/**\n\t * Remove an empty field group, but don't remove an empty section.\n\t *\n\t * @param {Element} previousFieldContainer\n\t * @return {void}\n\t */\n\tfunction maybeDeleteAnEmptyFieldGroup( previousFieldContainer ) {\n\t\tconst closestFieldBox = previousFieldContainer.closest( 'li.frm_field_box' );\n\t\tif ( closestFieldBox && ! closestFieldBox.classList.contains( 'edit_field_type_divider' ) ) {\n\t\t\tclosestFieldBox.remove();\n\t\t}\n\t}\n\n\tfunction handleDragOverYAxis( { droppable, y, placeholder } ) {\n\t\tconst $list = jQuery( droppable );\n\n\t\tlet top;\n\n\t\t$children = $list.children().not( '.edit_field_type_end_divider' );\n\t\tif ( 0 === $children.length ) {\n\t\t\t$list.prepend( placeholder );\n\t\t\ttop = 0;\n\t\t} else {\n\t\t\tconst insertAtIndex = determineIndexBasedOffOfMousePositionInList( $list, y );\n\n\t\t\tif ( insertAtIndex === $children.length ) {\n\t\t\t\tconst $lastChild = jQuery( $children.get( insertAtIndex - 1 ) );\n\t\t\t\ttop = $lastChild.offset().top + $lastChild.outerHeight();\n\t\t\t\t$list.append( placeholder );\n\n\t\t\t\t// Make sure nothing gets inserted after the end divider.\n\t\t\t\tconst $endDivider = $list.children( '.edit_field_type_end_divider' );\n\t\t\t\tif ( $endDivider.length ) {\n\t\t\t\t\t$list.append( $endDivider );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttop = jQuery( $children.get( insertAtIndex ) ).offset().top;\n\t\t\t\tjQuery( $children.get( insertAtIndex ) ).before( placeholder );\n\t\t\t}\n\t\t}\n\n\t\ttop -= $list.offset().top;\n\t\tplaceholder.style.top = top + 'px';\n\t}\n\n\tfunction determineIndexBasedOffOfMousePositionInList( $list, y ) {\n\t\tconst $items = $list.children().not( '.edit_field_type_end_divider' );\n\t\tconst length = $items.length;\n\n\t\tlet index, item, itemTop, returnIndex;\n\n\t\tif ( ! document.querySelector( '.frm-has-fields .frm_no_fields' ) ) {\n\t\t\t// Always return 0 when there are no fields.\n\t\t\treturn 0;\n\t\t}\n\n\t\treturnIndex = 0;\n\t\tfor ( index = length - 1; index >= 0; --index ) {\n\t\t\titem = $items.get( index );\n\t\t\titemTop = jQuery( item ).offset().top;\n\t\t\tif ( y > itemTop ) {\n\t\t\t\treturnIndex = index;\n\t\t\t\tif ( y > itemTop + ( jQuery( item ).outerHeight() / 2 ) ) {\n\t\t\t\t\treturnIndex = index + 1;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn returnIndex;\n\t}\n\n\tfunction handleDragOverFieldGroup( { droppable, x, placeholder } ) {\n\t\tconst $row = jQuery( droppable );\n\t\tconst $children = getFieldsInRow( $row );\n\n\t\tif ( ! $children.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet left;\n\t\tconst insertAtIndex = determineIndexBasedOffOfMousePositionInRow( $row, x );\n\n\t\tif ( insertAtIndex === $children.length ) {\n\t\t\tconst $lastChild = jQuery( $children.get( insertAtIndex - 1 ) );\n\t\t\tleft = $lastChild.offset().left + $lastChild.outerWidth();\n\t\t\t$row.append( placeholder );\n\t\t} else {\n\t\t\tleft = jQuery( $children.get( insertAtIndex ) ).offset().left;\n\t\t\tjQuery( $children.get( insertAtIndex ) ).before( placeholder );\n\n\t\t\tconst amountToOffsetLeftBy = 0 === insertAtIndex ? 4 : 8; // Offset by 8 in between rows, but only 4 for the first item in a group.\n\t\t\tleft -= amountToOffsetLeftBy; // Offset the placeholder slightly so it appears between two fields.\n\t\t}\n\n\t\tleft -= $row.offset().left;\n\n\t\tplaceholder.style.left = left + 'px';\n\t}\n\n\tfunction syncAfterDragAndDrop() {\n\t\tfixUnwrappedListItems();\n\t\ttoggleSectionHolder();\n\t\tmaybeFixEndDividers();\n\t\tmaybeDeleteEmptyFieldGroups();\n\t\tupdateFieldOrder();\n\n\t\tconst event = new Event( 'frm_sync_after_drag_and_drop', { bubbles: false } );\n\t\tdocument.dispatchEvent( event );\n\t}\n\n\tfunction maybeFixEndDividers() {\n\t\tdocument.querySelectorAll( '.edit_field_type_end_divider' ).forEach(\n\t\t\tendDivider => endDivider.parentNode.appendChild( endDivider )\n\t\t);\n\t}\n\n\tfunction maybeDeleteEmptyFieldGroups() {\n\t\tdocument.querySelectorAll( 'li.form_field_box:not(.form-field)' ).forEach(\n\t\t\tfieldGroup => ! fieldGroup.children.length && fieldGroup.remove()\n\t\t);\n\t}\n\n\tfunction fixUnwrappedListItems() {\n\t\tconst lists = document.querySelectorAll( 'ul#frm-show-fields, ul.start_divider' );\n\t\tlists.forEach(\n\t\t\tlist => {\n\t\t\t\tlist.childNodes.forEach(\n\t\t\t\t\tchild => {\n\t\t\t\t\t\tif ( 'undefined' === typeof child.classList ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( child.classList.contains( 'edit_field_type_end_divider' ) ) {\n\t\t\t\t\t\t\t// Never wrap end divider in place.\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( 'undefined' !== typeof child.classList && child.classList.contains( 'form-field' ) ) {\n\t\t\t\t\t\t\twrapFieldLiInPlace( child );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction deleteEmptyDividerWrappers() {\n\t\tconst dividers = document.querySelectorAll( 'ul.start_divider' );\n\t\tif ( ! dividers.length ) {\n\t\t\treturn;\n\t\t}\n\t\tdividers.forEach(\n\t\t\tfunction( divider ) {\n\t\t\t\tconst children = [].slice.call( divider.children );\n\t\t\t\tchildren.forEach(\n\t\t\t\t\tfunction( child ) {\n\t\t\t\t\t\tif ( 0 === child.children.length ) {\n\t\t\t\t\t\t\tchild.remove();\n\t\t\t\t\t\t} else if ( 1 === child.children.length && 'ul' === child.firstElementChild.nodeName.toLowerCase() && 0 === child.firstElementChild.children.length ) {\n\t\t\t\t\t\t\tchild.remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction getFieldsInRow( $row ) {\n\t\tlet $fields = jQuery();\n\n\t\tconst row = $row.get( 0 );\n\t\tif ( ! row.children ) {\n\t\t\treturn $fields;\n\t\t}\n\n\t\tArray.from( row.children ).forEach(\n\t\t\tchild => {\n\t\t\t\tif ( 'none' === child.style.display ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst classes = child.classList;\n\t\t\t\tif ( ! classes.contains( 'form-field' ) || classes.contains( 'edit_field_type_end_divider' ) || classes.contains( 'frm-sortable-helper' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$fields = $fields.add( child );\n\t\t\t}\n\t\t);\n\t\treturn $fields;\n\t}\n\n\tfunction determineIndexBasedOffOfMousePositionInRow( $row, x ) {\n\t\tlet $inputs = getFieldsInRow( $row ),\n\t\t\tlength = $inputs.length,\n\t\t\tindex, input, inputLeft, returnIndex;\n\n\t\treturnIndex = 0;\n\t\tfor ( index = length - 1; index >= 0; --index ) {\n\t\t\tinput = $inputs.get( index );\n\t\t\tinputLeft = jQuery( input ).offset().left;\n\t\t\tif ( x > inputLeft ) {\n\t\t\t\treturnIndex = index;\n\t\t\t\tif ( x > inputLeft + ( jQuery( input ).outerWidth() / 2 ) ) {\n\t\t\t\t\treturnIndex = index + 1;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn returnIndex;\n\t}\n\n\tfunction syncLayoutClasses( $item, type ) {\n\t\tlet $fields, size, layoutClasses, classToAddFunction;\n\n\t\tif ( 'undefined' === typeof type ) {\n\t\t\ttype = 'even';\n\t\t}\n\n\t\t$fields = $item.parent().children( 'li.form-field, li.frmbutton_loadingnow' ).not( '.edit_field_type_end_divider' );\n\t\tsize = $fields.length;\n\t\tlayoutClasses = getLayoutClasses();\n\n\t\tif ( 'even' === type && 5 !== size ) {\n\t\t\t$fields.each( getSyncLayoutClass( layoutClasses, getEvenClassForSize( size ) ) );\n\t\t} else if ( 'clear' === type ) {\n\t\t\t$fields.each( getSyncLayoutClass( layoutClasses, '' ) );\n\t\t} else {\n\t\t\tif ( -1 !== [ 'left', 'right', 'middle', 'even' ].indexOf( type ) ) {\n\t\t\t\tclassToAddFunction = function( index ) {\n\t\t\t\t\treturn getClassForBlock( size, type, index );\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tclassToAddFunction = function( index ) {\n\t\t\t\t\tconst size = type[ index ];\n\t\t\t\t\treturn getLayoutClassForSize( size );\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t$fields.each( getSyncLayoutClass( layoutClasses, classToAddFunction ) );\n\t\t}\n\n\t\tupdateFieldGroupControls( $item.parent(), $fields.length );\n\t}\n\n\tfunction updateFieldGroupControls( $row, count ) {\n\t\tlet rowOffset, shouldShowControls, controls;\n\n\t\trowOffset = $row.offset();\n\n\t\tif ( 'undefined' === typeof rowOffset ) {\n\t\t\treturn;\n\t\t}\n\n\t\tshouldShowControls = count >= 2;\n\n\t\tcontrols = document.getElementById( 'frm_field_group_controls' );\n\t\tif ( null === controls ) {\n\t\t\tif ( ! shouldShowControls ) {\n\t\t\t\t// exit early. if we do not need controls and they do not exist, do nothing.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcontrols = div();\n\t\t\tcontrols.id = 'frm_field_group_controls';\n\t\t\tcontrols.setAttribute( 'role', 'group' );\n\t\t\tcontrols.setAttribute( 'tabindex', 0 );\n\t\t\tsetFieldControlsHtml( controls );\n\t\t\tbuilderPage.appendChild( controls );\n\t\t}\n\n\t\t$row.append( controls );\n\t\tcontrols.style.display = shouldShowControls ? 'block' : 'none';\n\t}\n\n\tfunction setFieldControlsHtml( controls ) {\n\t\tlet layoutOption, moveOption;\n\n\t\tlayoutOption = document.createElement( 'span' );\n\t\tlayoutOption.innerHTML = '<svg class=\"frmsvg\"><use xlink:href=\"#frm_field_group_layout_icon\"></use></svg>';\n\t\tconst layoutOptionLabel = __( 'Set Row Layout', 'formidable' );\n\t\taddTooltip( layoutOption, layoutOptionLabel );\n\t\tmakeTabbable( layoutOption, layoutOptionLabel );\n\n\t\tmoveOption = document.createElement( 'span' );\n\t\tmoveOption.innerHTML = '<svg class=\"frmsvg\"><use xlink:href=\"#frm_thick_move_icon\"></use></svg>';\n\t\tmoveOption.classList.add( 'frm-move' );\n\t\tconst moveOptionLabel = __( 'Move Field Group', 'formidable' );\n\t\taddTooltip( moveOption, moveOptionLabel );\n\t\tmakeTabbable( moveOption, moveOptionLabel );\n\n\t\tcontrols.innerHTML = '';\n\t\tcontrols.appendChild( layoutOption );\n\t\tcontrols.appendChild( moveOption );\n\t\tcontrols.appendChild( getFieldControlsDropdown() );\n\t}\n\n\tfunction addTooltip( element, title ) {\n\t\telement.setAttribute( 'data-toggle', 'tooltip' );\n\t\telement.setAttribute( 'data-container', 'body' );\n\t\telement.setAttribute( 'title', title );\n\t\telement.addEventListener(\n\t\t\t'mouseover',\n\t\t\tfunction() {\n\t\t\t\tif ( null === element.getAttribute( 'data-original-title' ) ) {\n\t\t\t\t\tjQuery( element ).tooltip();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction getFieldControlsDropdown() {\n\t\tconst dropdown = span( { className: 'dropdown' } );\n\t\tconst trigger = a( {\n\t\t\tclassName: 'frm_bstooltip frm-hover-icon frm-dropdown-toggle dropdown-toggle',\n\t\t\tchildren: [\n\t\t\t\tspan( {\n\t\t\t\t\tchild: svg( { href: '#frm_thick_more_vert_icon' } )\n\t\t\t\t} ),\n\t\t\t\tspan( {\n\t\t\t\t\tclassName: 'screen-reader-text',\n\t\t\t\t\ttext: __( 'Toggle More Options Dropdown', 'formidable' )\n\t\t\t\t} )\n\t\t\t]\n\t\t} );\n\n\t\tfrmDom.setAttributes(\n\t\t\ttrigger,\n\t\t\t{\n\t\t\t\ttitle: __( 'More Options', 'formidable' ),\n\t\t\t\t'data-toggle': 'dropdown',\n\t\t\t\t'data-container': 'body'\n\t\t\t}\n\t\t);\n\t\tmakeTabbable( trigger, __( 'More Options', 'formidable' ) );\n\t\tdropdown.appendChild( trigger );\n\n\t\tconst ul = div( {\n\t\t\tclassName: 'frm-dropdown-menu dropdown-menu dropdown-menu-right'\n\t\t} );\n\t\tul.setAttribute( 'role', 'menu' );\n\t\tdropdown.appendChild( ul );\n\n\t\treturn dropdown;\n\t}\n\n\tfunction getSyncLayoutClass( layoutClasses, classToAdd ) {\n\t\treturn function( itemIndex ) {\n\t\t\tlet currentClassToAdd, length, layoutClassIndex, currentClass, activeLayoutClass, fieldId, layoutClassesInput;\n\n\t\t\tcurrentClassToAdd = 'function' === typeof classToAdd ? classToAdd( itemIndex ) : classToAdd;\n\t\t\tlength = layoutClasses.length;\n\t\t\tactiveLayoutClass = false;\n\t\t\tfor ( layoutClassIndex = 0; layoutClassIndex < length; ++layoutClassIndex ) {\n\t\t\t\tcurrentClass = layoutClasses[ layoutClassIndex ];\n\t\t\t\tif ( this.classList.contains( currentClass ) ) {\n\t\t\t\t\tactiveLayoutClass = currentClass;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfieldId = this.dataset.fid;\n\n\t\t\tif ( 'undefined' === typeof fieldId ) {\n\t\t\t\t// we are syncing the drag/drop placeholder before the actual field has loaded.\n\t\t\t\t// this will get called again afterward and the input will exist then.\n\t\t\t\tthis.classList.add( currentClassToAdd );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmoveFieldSettings( document.getElementById( 'frm-single-settings-' + fieldId ) );\n\t\t\tlayoutClassesInput = document.getElementById( 'frm_classes_' + fieldId );\n\n\t\t\tif ( null === layoutClassesInput ) {\n\t\t\t\t// not every field type has a layout class input.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( false === activeLayoutClass ) {\n\t\t\t\tif ( '' !== currentClassToAdd ) {\n\t\t\t\t\tlayoutClassesInput.value = layoutClassesInput.value.concat( ' ' + currentClassToAdd );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.classList.remove( activeLayoutClass );\n\t\t\t\tlayoutClassesInput.value = layoutClassesInput.value.replace( activeLayoutClass, currentClassToAdd );\n\t\t\t}\n\n\t\t\tif ( this.classList.contains( 'frm_first' ) ) {\n\t\t\t\tthis.classList.remove( 'frm_first' );\n\t\t\t\tlayoutClassesInput.value = layoutClassesInput.value.replace( 'frm_first', '' ).trim();\n\t\t\t}\n\n\t\t\tif ( 0 === itemIndex ) {\n\t\t\t\tthis.classList.add( 'frm_first' );\n\t\t\t\tlayoutClassesInput.value = layoutClassesInput.value.concat( ' frm_first' );\n\t\t\t}\n\n\t\t\tjQuery( layoutClassesInput ).trigger( 'change' );\n\t\t};\n\t}\n\n\tfunction getLayoutClasses() {\n\t\treturn [ 'frm_full', 'frm_half', 'frm_third', 'frm_fourth', 'frm_sixth', 'frm_two_thirds', 'frm_three_fourths', 'frm1', 'frm2', 'frm3', 'frm4', 'frm5', 'frm6', 'frm7', 'frm8', 'frm9', 'frm10', 'frm11', 'frm12' ];\n\t}\n\n\tfunction setupFieldOptionSorting( sort ) {\n\t\tconst opts = {\n\t\t\titems: '.frm_sortable_field_opts li',\n\t\t\taxis: 'y',\n\t\t\topacity: 0.65,\n\t\t\tforcePlaceholderSize: false,\n\t\t\thandle: '.frm-drag',\n\t\t\thelper: function( e, li ) {\n\t\t\t\tcopyHelper = li.clone().insertAfter( li );\n\t\t\t\treturn li.clone();\n\t\t\t},\n\t\t\tstop: function( e, ui ) {\n\t\t\t\tcopyHelper && copyHelper.remove();\n\t\t\t\tconst fieldId = ui.item.attr( 'id' ).replace( 'frm_delete_field_', '' ).replace( '-' + ui.item.data( 'optkey' ) + '_container', '' );\n\t\t\t\tresetDisplayedOpts( fieldId );\n\t\t\t\tfieldUpdated();\n\t\t\t}\n\t\t};\n\t\tjQuery( sort ).sortable( opts );\n\t}\n\n\t// Get the section where a field is dropped\n\tfunction getSectionForFieldPlacement( currentItem ) {\n\t\tlet section = '';\n\t\tif ( typeof currentItem !== 'undefined' && ! currentItem.hasClass( 'edit_field_type_divider' ) ) {\n\t\t\tsection = currentItem.closest( '.edit_field_type_divider' );\n\t\t}\n\t\treturn section;\n\t}\n\n\t// Get the form ID where a field is dropped\n\tfunction getFormIdForFieldPlacement( section ) {\n\t\tlet formId = '';\n\n\t\tif ( typeof section[ 0 ] !== 'undefined' ) {\n\t\t\tconst sDivide = section.children( '.start_divider' );\n\t\t\tsDivide.children( '.edit_field_type_end_divider' ).appendTo( sDivide );\n\t\t\tif ( typeof section.attr( 'data-formid' ) !== 'undefined' ) {\n\t\t\t\tconst fieldId = section.attr( 'data-fid' );\n\t\t\t\tformId = jQuery( 'input[name=\"field_options[form_select_' + fieldId + ']\"]' ).val();\n\t\t\t}\n\t\t}\n\n\t\tif ( typeof formId === 'undefined' || formId === '' ) {\n\t\t\tformId = thisFormId;\n\t\t}\n\n\t\treturn formId;\n\t}\n\n\t// Get the section ID where a field is dropped\n\tfunction getSectionIdForFieldPlacement( section ) {\n\t\tlet sectionId = 0;\n\t\tif ( typeof section[ 0 ] !== 'undefined' ) {\n\t\t\tsectionId = section.attr( 'id' ).replace( 'frm_field_id_', '' );\n\t\t}\n\n\t\treturn sectionId;\n\t}\n\n\t/**\n\t * Update a field after it is dragged and dropped into, out of, or between sections\n\t *\n\t * @param {Object} currentItem\n\t * @param {Object} previousSection\n\t * @return {void}\n\t */\n\tfunction updateFieldAfterMovingBetweenSections( currentItem, previousSection ) {\n\t\tif ( ! currentItem.hasClass( 'form-field' ) ) {\n\t\t\t// currentItem is a field group. Call for children recursively.\n\t\t\tgetFieldsInRow( jQuery( currentItem.get( 0 ).firstChild ) ).each(\n\t\t\t\tfunction() {\n\t\t\t\t\tupdateFieldAfterMovingBetweenSections( jQuery( this ), previousSection );\n\t\t\t\t}\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst fieldId = currentItem.attr( 'id' ).replace( 'frm_field_id_', '' );\n\t\tconst section = getSectionForFieldPlacement( currentItem );\n\t\tconst formId = getFormIdForFieldPlacement( section );\n\t\tconst sectionId = getSectionIdForFieldPlacement( section );\n\t\tconst previousFormId = previousSection ? getFormIdForFieldPlacement( jQuery( previousSection.parentNode ) ) : 0;\n\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_update_field_after_move',\n\t\t\t\tform_id: formId,\n\t\t\t\tfield: fieldId,\n\t\t\t\tsection_id: sectionId,\n\t\t\t\tprevious_form_id: previousFormId,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: function() {\n\t\t\t\ttoggleSectionHolder();\n\t\t\t\tupdateInSectionValue( fieldId, sectionId );\n\t\t\t}\n\t\t} );\n\t}\n\n\t// Update the in_section field value\n\tfunction updateInSectionValue( fieldId, sectionId ) {\n\t\tdocument.getElementById( 'frm_in_section_' + fieldId ).value = sectionId;\n\t}\n\n\t/**\n\t * Get the arguments for inserting a new field.\n\t *\n\t * @since 6.23\n\t *\n\t * @param {string} fieldType\n\t * @param {string} sectionId\n\t * @param {string} formId\n\t * @param {Number} hasBreak\n\t *\n\t * @return {Object}\n\t */\n\tfunction getInsertNewFieldArgs( fieldType, sectionId, formId, hasBreak ) {\n\t\treturn {\n\t\t\taction: 'frm_insert_field',\n\t\t\tform_id: formId,\n\t\t\tfield_type: fieldType,\n\t\t\tsection_id: sectionId,\n\t\t\tnonce: frmGlobal.nonce,\n\t\t\thas_break: hasBreak,\n\t\t\tlast_row_field_ids: getFieldIdsInSubmitRow()\n\t\t};\n\t}\n\n\t/**\n\t * Returns true if it's a range field type and slider type is not selected.\n\t *\n\t * @since 6.23\n\t *\n\t * @param {string} fieldType\n\t * @return {boolean}\n\t */\n\tfunction shouldStopInsertingField( fieldType ) {\n\t\treturn wp.hooks.applyFilters( 'frm_should_stop_inserting_field', false, fieldType );\n\t}\n\n\t/**\n\t * Add a new field by dragging and dropping it from the Fields sidebar\n\t *\n\t * @param {string} fieldType\n\t */\n\tfunction insertNewFieldByDragging( fieldType ) {\n\t\tif ( shouldStopInsertingField( fieldType ) ) {\n\t\t\twp.hooks.doAction( 'frm_stopped_inserting_by_dragging', fieldType );\n\t\t\treturn;\n\t\t}\n\n\t\tconst placeholder = document.getElementById( 'frm_drag_placeholder' );\n\t\tconst loadingID = fieldType.replace( '|', '-' ) + '_' + getAutoId();\n\t\tconst loading = tag(\n\t\t\t'li',\n\t\t\t{\n\t\t\t\tid: loadingID,\n\t\t\t\tclassName: 'frm-wait frmbutton_loadingnow'\n\t\t\t}\n\t\t);\n\t\tconst $placeholder = jQuery( loading );\n\t\tconst currentItem = jQuery( placeholder );\n\t\tconst section = getSectionForFieldPlacement( currentItem );\n\t\tconst formId = getFormIdForFieldPlacement( section );\n\t\tconst sectionId = getSectionIdForFieldPlacement( section );\n\n\t\tplaceholder.parentNode.insertBefore( loading, placeholder );\n\t\tplaceholder.remove();\n\t\tsyncLayoutClasses( $placeholder );\n\n\t\tlet hasBreak = 0;\n\t\tif ( 'summary' === fieldType ) {\n\t\t\t// see if we need to insert a page break before this newly-added summary field. Check for at least 1 page break\n\t\t\thasBreak = jQuery( '.frmbutton_loadingnow#' + loadingID ).prevAll( 'li[data-type=\"break\"]' ).length ? 1 : 0;\n\t\t}\n\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: getInsertNewFieldArgs( fieldType, sectionId, formId, hasBreak ),\n\t\t\tsuccess: function( msg ) {\n\t\t\t\thandleInsertFieldByDraggingResponse( msg, $placeholder );\n\n\t\t\t\tconst fieldId = checkMsgForFieldId( msg );\n\t\t\t\tif ( fieldId ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * Fires after a field is added.\n\t\t\t\t\t *\n\t\t\t\t\t * @since 6.23\n\t\t\t\t\t *\n\t\t\t\t\t * @param {Object} fieldData            The field data.\n\t\t\t\t\t * @param {string} fieldData.field      The field HTML.\n\t\t\t\t\t * @param {string} fieldData.field_type The field type.\n\t\t\t\t\t * @param {string} fieldData.form_id    The form ID.\n\t\t\t\t\t */\n\t\t\t\t\twp.hooks.doAction( 'frm_after_field_added_in_form_builder', {\n\t\t\t\t\t\tfield: msg,\n\t\t\t\t\t\tfieldId,\n\t\t\t\t\t\tfieldType,\n\t\t\t\t\t\tform_id: formId,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: handleInsertFieldError\n\t\t} );\n\t}\n\n\t/**\n\t * @param {string} msg\n\t * @param {Object} $placeholder jQuery object.\n\t */\n\tfunction handleInsertFieldByDraggingResponse( msg, $placeholder ) {\n\t\tlet replaceWith;\n\t\tdocument.getElementById( 'frm_form_editor_container' ).classList.add( 'frm-has-fields' );\n\t\tconst $siblings = $placeholder.siblings( 'li.form-field' ).not( '.edit_field_type_end_divider' );\n\n\t\tif ( ! $siblings.length ) {\n\t\t\t// if dragging into a new row, we need to wrap the li first.\n\t\t\treplaceWith = wrapFieldLi( msg );\n\t\t} else {\n\t\t\treplaceWith = msgAsjQueryObject( msg );\n\t\t\tif ( ! $placeholder.get( 0 ).parentNode.parentNode.classList.contains( 'ui-draggable' ) ) {\n\t\t\t\t// If a field group wasn't draggable because it only had a single field, make it draggable.\n\t\t\t\tmakeDraggable( $placeholder.get( 0 ).parentNode.parentNode, '.frm-move' );\n\t\t\t}\n\t\t}\n\t\t$placeholder.replaceWith( replaceWith );\n\t\tupdateFieldOrder();\n\t\tafterAddField( msg, false );\n\t\tif ( $siblings.length ) {\n\t\t\tsyncLayoutClasses( $siblings.first() );\n\t\t}\n\t\ttoggleSectionHolder();\n\n\t\tif ( ! $siblings.length ) {\n\t\t\tmakeDroppable( replaceWith.get( 0 ).querySelector( 'ul.frm_sorting' ) );\n\t\t\tmakeDraggable( replaceWith.get( 0 ).querySelector( 'li.form-field' ), '.frm-move' );\n\t\t} else {\n\t\t\tmakeDraggable( replaceWith.get( 0 ), '.frm-move' );\n\t\t}\n\t}\n\n\t/**\n\t * Get the field ID from the response message.\n\t *\n\t * @since 6.23\n\t *\n\t * @param {string} msg\n\t * @return {Number}\n\t */\n\tfunction checkMsgForFieldId( msg ) {\n\t\tconst result = msg.match( /data-fid=\"(\\d+)\"/ );\n\t\treturn result ? parseInt( result[ 1 ] ) : 0;\n\t}\n\n\tfunction getFieldIdsInSubmitRow() {\n\t\tconst submitField = document.querySelector( '.edit_field_type_submit' );\n\t\tif ( ! submitField ) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst lastRowFields = submitField.parentNode.children;\n\t\tconst ids = [];\n\t\tfor ( let i = 0; i < lastRowFields.length; i++ ) {\n\t\t\tids.push( lastRowFields[ i ].dataset.fid );\n\t\t}\n\n\t\treturn ids;\n\t}\n\n\tfunction moveFieldThatAlreadyExists( draggable, placeholder ) {\n\t\tplaceholder.parentNode.insertBefore( draggable, placeholder );\n\t}\n\n\tfunction msgAsjQueryObject( msg ) {\n\t\tconst element = div();\n\t\telement.innerHTML = msg;\n\t\treturn jQuery( element.firstChild );\n\t}\n\n\tfunction handleInsertFieldError( jqXHR, _, errorThrown ) {\n\t\tmaybeShowInsertFieldError( errorThrown, jqXHR );\n\t}\n\n\tfunction maybeShowInsertFieldError( errorThrown, jqXHR ) {\n\t\tif ( ! jqXHRAborted( jqXHR ) ) {\n\t\t\tinfoModal( errorThrown + '. Please try again.' );\n\t\t}\n\t}\n\n\tfunction jqXHRAborted( jqXHR ) {\n\t\treturn jqXHR.status === 0 || jqXHR.readyState === 0;\n\t}\n\n\t/**\n\t * Get a unique id that automatically increments with every function call.\n\t * Can be used for any UI that requires a unique id.\n\t * Not to be used in data.\n\t *\n\t * @return {number}\n\t */\n\tfunction getAutoId() {\n\t\treturn ++autoId;\n\t}\n\n\t/**\n\t * Determine if a draggable element can be droppable into a droppable element.\n\t *\n\t * Don't allow page break, embed form, or section inside section field\n\t * Don't allow page breaks inside of field groups.\n\t * Don't allow field groups with sections inside of sections.\n\t * Don't allow field groups in field groups.\n\t * Don't allow hidden fields inside of field groups but allow them in sections.\n\t * Don't allow any fields below the submit button field.\n\t * Don't allow submit button field above any fields.\n\t * Don't allow GDPR fields in repeaters.\n\t *\n\t * @param {HTMLElement} draggable\n\t * @param {HTMLElement} droppable\n\t * @param {Event}       event\n\t * @return {Boolean}\n\t */\n\tfunction allowDrop( draggable, droppable, event ) {\n\t\tif ( false === droppable ) {\n\t\t\t// Don't show drop placeholder if dragging somewhere off of the droppable area.\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( droppable.closest( '.frm-sortable-helper' ) ) {\n\t\t\t// Do not allow drop into draggable.\n\t\t\treturn false;\n\t\t}\n\n\t\tconst isSubmitBtn = draggable.classList.contains( 'edit_field_type_submit' );\n\t\tconst containSubmitBtn = ! draggable.classList.contains( 'form_field' ) && !! draggable.querySelector( '.edit_field_type_submit' );\n\n\t\tif ( 'frm-show-fields' === droppable.id ) {\n\t\t\tconst draggableIndex = determineIndexBasedOffOfMousePositionInList( jQuery( droppable ), event.clientY );\n\n\t\t\tif ( isSubmitBtn || containSubmitBtn ) {\n\t\t\t\t// Do not allow dropping submit button to above position.\n\t\t\t\tconst lastRowIndex = droppable.childElementCount - 1;\n\t\t\t\treturn draggableIndex > lastRowIndex;\n\t\t\t}\n\n\t\t\t// Do not allow dropping other fields to below submit button.\n\t\t\tconst submitButtonIndex = jQuery( droppable.querySelector( '.edit_field_type_submit' ).closest( '#frm-show-fields > li' ) ).index();\n\t\t\treturn draggableIndex <= submitButtonIndex;\n\t\t}\n\n\t\tif ( isSubmitBtn ) {\n\t\t\tif ( droppable.classList.contains( 'start_divider' ) ) {\n\t\t\t\t// Don't allow dropping submit button into a repeater.\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif ( isLastRow( droppable.parentElement ) ) {\n\t\t\t\t// Allow dropping submit button into the last row.\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ( ! isLastRow( droppable.parentElement.nextElementSibling ) ) {\n\t\t\t\t// Don't a dropping submit button into the row that isn't the second one from bottom.\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Allow dropping submit button into the second row from bottom if there is only submit button in the last row.\n\t\t\treturn ! draggable.parentElement.querySelector( 'li.frm_field_box:not(.edit_field_type_submit)' );\n\t\t}\n\n\t\tif ( droppable.classList.contains( 'start_divider' ) && ( draggable.classList.contains( 'edit_field_type_gdpr' ) || draggable.id === 'gdpr' ) && droppable.closest( '.repeat_section' ) ) {\n\t\t\t// Don't allow GDPR fields in repeaters.\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( ! droppable.classList.contains( 'start_divider' ) ) {\n\t\t\tconst $fieldsInRow = getFieldsInRow( jQuery( droppable ) );\n\t\t\tif ( ! groupCanFitAnotherField( $fieldsInRow, jQuery( draggable ) ) ) {\n\t\t\t\t// Field group is full and cannot accept another field.\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif ( draggable.id === 'divider' && droppable.closest( '.start_divider' ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tconst isNewField = draggable.classList.contains( 'frm-new-field' );\n\t\tif ( isNewField ) {\n\t\t\treturn allowNewFieldDrop( draggable, droppable );\n\t\t}\n\n\t\treturn allowMoveField( draggable, droppable );\n\t}\n\n\t/**\n\t * Checks if given element is the last row in form builder.\n\t *\n\t * @param {HTMLElement} element Element.\n\t * @return {Boolean}\n\t */\n\tfunction isLastRow( element ) {\n\t\treturn element && element.matches( '#frm-show-fields > li:last-child' );\n\t}\n\n\t// Don't allow a new page break or hidden field in a field group.\n\t// Don't allow a new field into a field group that includes a page break or hidden field.\n\t// Don't allow a new section inside of a section.\n\t// Don't allow an embedded form in a section.\n\tfunction allowNewFieldDrop( draggable, droppable ) {\n\t\tconst classes = draggable.classList;\n\t\tconst newPageBreakField = classes.contains( 'frm_tbreak' );\n\t\tconst newHiddenField = classes.contains( 'frm_thidden' );\n\t\tconst newSectionField = classes.contains( 'frm_tdivider' );\n\t\tconst newEmbedField = classes.contains( 'frm_tform' );\n\t\tconst newUserIdField = classes.contains( 'frm_tuser_id' );\n\n\t\tconst newFieldWillBeAddedToAGroup = ! ( 'frm-show-fields' === droppable.id || droppable.classList.contains( 'start_divider' ) );\n\t\tif ( newFieldWillBeAddedToAGroup ) {\n\t\t\tif ( groupIncludesBreakOrHiddenOrUserId( droppable ) ) {\n\t\t\t\t// Never allow any field beside a page break or a hidden field.\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn ! newHiddenField && ! newPageBreakField && ! newUserIdField;\n\t\t}\n\n\t\tconst fieldTypeIsAlwaysAllowed = ! newPageBreakField && ! newHiddenField && ! newSectionField && ! newEmbedField;\n\t\tif ( fieldTypeIsAlwaysAllowed ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst newFieldWillBeAddedToASection = droppable.classList.contains( 'start_divider' ) || null !== droppable.closest( '.start_divider' );\n\t\tif ( newFieldWillBeAddedToASection ) {\n\t\t\t// Don't allow a section or an embedded form in a section.\n\t\t\treturn ! newEmbedField && ! newSectionField;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction allowMoveField( draggable, droppable ) {\n\t\tif ( isFieldGroup( draggable ) ) {\n\t\t\treturn allowMoveFieldGroup( draggable, droppable );\n\t\t}\n\n\t\tconst isPageBreak = draggable.classList.contains( 'edit_field_type_break' );\n\t\tif ( isPageBreak ) {\n\t\t\t// Page breaks are only allowed in the main list of fields, not in sections or in field groups.\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( droppable.classList.contains( 'start_divider' ) ) {\n\t\t\treturn allowMoveFieldToSection( draggable );\n\t\t}\n\n\t\tconst isHiddenField = draggable.classList.contains( 'edit_field_type_hidden' );\n\t\tconst isUserIdField = draggable.classList.contains( 'edit_field_type_user_id' );\n\t\tif ( isHiddenField || isUserIdField ) {\n\t\t\t// Hidden fields and user id fields should not be added to field groups since they're not shown\n\t\t\t// and don't make sense with the grid distribution.\n\t\t\treturn false;\n\t\t}\n\n\t\treturn allowMoveFieldToGroup( draggable, droppable );\n\t}\n\n\tfunction isFieldGroup( draggable ) {\n\t\treturn draggable.classList.contains( 'frm_field_box' ) && ! draggable.classList.contains( 'form-field' );\n\t}\n\n\tfunction allowMoveFieldGroup( fieldGroup, droppable ) {\n\t\tif ( droppable.classList.contains( 'start_divider' ) && null === fieldGroup.querySelector( '.start_divider' ) ) {\n\t\t\t// Allow a field group with no section inside of a section.\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction allowMoveFieldToSection( draggable ) {\n\t\tconst draggableIncludeEmbedForm = draggable.classList.contains( 'edit_field_type_form' ) || draggable.querySelector( '.edit_field_type_form' );\n\t\tif ( draggableIncludeEmbedForm ) {\n\t\t\t// Do not allow an embedded form inside of a section.\n\t\t\treturn false;\n\t\t}\n\n\t\tconst draggableIncludesSection = draggable.classList.contains( 'edit_field_type_divider' ) || draggable.querySelector( '.edit_field_type_divider' );\n\t\tif ( draggableIncludesSection ) {\n\t\t\t// Do not allow a section inside of a section.\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction allowMoveFieldToGroup( draggable, group ) {\n\t\tif ( groupIncludesBreakOrHiddenOrUserId( group ) ) {\n\t\t\t// Never allow any field beside a page break or a hidden field.\n\t\t\treturn false;\n\t\t}\n\n\t\tconst isFieldGroup = jQuery( draggable ).children( 'ul.frm_sorting' ).not( '.start_divider' ).length > 0;\n\t\tif ( isFieldGroup ) {\n\t\t\t// Do not allow a field group directly inside of a field group unless it's in a section.\n\t\t\treturn false;\n\t\t}\n\n\t\tconst draggableIncludesASection = draggable.classList.contains( 'edit_field_type_divider' ) || draggable.querySelector( '.edit_field_type_divider' );\n\t\tconst draggableIsEmbedField = draggable.classList.contains( 'edit_field_type_form' );\n\t\tconst groupIsInASection = null !== group.closest( '.start_divider' );\n\t\tif ( groupIsInASection && ( draggableIncludesASection || draggableIsEmbedField ) ) {\n\t\t\t// Do not allow a section or an embed field inside of a section.\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction groupIncludesBreakOrHiddenOrUserId( group ) {\n\t\treturn null !== group.querySelector( '.edit_field_type_break, .edit_field_type_hidden, .edit_field_type_user_id' );\n\t}\n\n\tfunction groupCanFitAnotherField( fieldsInRow, $field ) {\n\t\tlet fieldId;\n\t\tif ( fieldsInRow.length < 6 ) {\n\t\t\treturn true;\n\t\t}\n\t\tif ( fieldsInRow.length > 6 ) {\n\t\t\treturn false;\n\t\t}\n\t\tfieldId = $field.attr( 'data-fid' );\n\t\t// allow 6 if we're not changing field groups.\n\t\treturn 1 === jQuery( fieldsInRow ).filter( '[data-fid=\"' + fieldId + '\"]' ).length;\n\t}\n\n\tfunction loadFields( fieldId ) {\n\t\tconst thisField = document.getElementById( fieldId );\n\t\tconst $thisField = jQuery( thisField );\n\t\tconst field = [];\n\t\tconst addHtmlToField = element => {\n\t\t\tconst frmHiddenFdata = element.querySelector( '.frm_hidden_fdata' );\n\t\t\telement.classList.add( 'frm_load_now' );\n\t\t\tif ( frmHiddenFdata !== null ) {\n\t\t\t\tfield.push( frmHiddenFdata.innerHTML );\n\t\t\t}\n\t\t};\n\n\t\tlet nextElement = thisField;\n\t\taddHtmlToField( nextElement );\n\n\t\tlet nextField = getNextField( nextElement );\n\t\twhile ( nextField && field.length < 15 ) {\n\t\t\taddHtmlToField( nextField );\n\t\t\tnextElement = nextField;\n\t\t\tnextField = getNextField( nextField );\n\t\t}\n\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_load_field',\n\t\t\t\tfield: field,\n\t\t\t\tform_id: thisFormId,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: html => handleAjaxLoadFieldSuccess( html, $thisField, field )\n\t\t} );\n\t}\n\n\tfunction getNextField( field ) {\n\t\tif ( field.nextElementSibling ) {\n\t\t\treturn field.nextElementSibling;\n\t\t}\n\t\treturn field.parentNode?.closest( '.frm_field_box' )?.nextElementSibling?.querySelector( '.form-field' );\n\t}\n\n\tfunction handleAjaxLoadFieldSuccess( html, $thisField, field ) {\n\t\tlet key, $nextSet;\n\n\t\thtml = html.replace( /^\\s+|\\s+$/g, '' );\n\t\tif ( html.indexOf( '{' ) !== 0 ) {\n\t\t\tjQuery( '.frm_load_now' ).removeClass( '.frm_load_now' ).html( 'Error' );\n\t\t\treturn;\n\t\t}\n\n\t\thtml = JSON.parse( html );\n\t\tfor ( key in html ) {\n\t\t\tjQuery( '#frm_field_id_' + key ).replaceWith( html[ key ] );\n\t\t\tsetupSortable( '#frm_field_id_' + key + '.edit_field_type_divider ul.frm_sorting' );\n\t\t\tmakeDraggable( document.getElementById( 'frm_field_id_' + key ) );\n\t\t}\n\n\t\t$nextSet = $thisField.nextAll( '.frm_field_loading:not(.frm_load_now)' );\n\t\tif ( $nextSet.length ) {\n\t\t\tloadFields( $nextSet.attr( 'id' ) );\n\t\t} else {\n\t\t\t// go up a level\n\t\t\t$nextSet = jQuery( document.getElementById( 'frm-show-fields' ) ).find( '.frm_field_loading:not(.frm_load_now)' );\n\t\t\tif ( $nextSet.length ) {\n\t\t\t\tloadFields( $nextSet.attr( 'id' ) );\n\t\t\t}\n\t\t}\n\n\t\tinitiateMultiselect();\n\t\trenumberPageBreaks();\n\t\tmaybeHideQuantityProductFieldOption();\n\n\t\tconst loadedEvent = new Event( 'frm_ajax_loaded_field', { bubbles: false } );\n\t\tloadedEvent.frmFields = field.map( f => JSON.parse( f ) );\n\t\tdocument.dispatchEvent( loadedEvent );\n\t}\n\n\tfunction addFieldClick() {\n\t\t/*jshint validthis:true */\n\t\tconst $thisObj = jQuery( this );\n\t\t// there is no real way to disable a <a> (with a valid href attribute) in HTML - https://css-tricks.com/how-to-disable-links/\n\t\tif ( $thisObj.hasClass( 'disabled' ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst $button = $thisObj.closest( '.frmbutton' );\n\t\tconst fieldType = $button.attr( 'id' );\n\n\t\tif ( shouldStopInsertingField( fieldType ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet hasBreak = 0;\n\t\tif ( 'summary' === fieldType ) {\n\t\t\thasBreak = $newFields.children( 'li[data-type=\"break\"]' ).length > 0 ? 1 : 0;\n\t\t}\n\n\t\tconst formId = thisFormId;\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: getInsertNewFieldArgs( fieldType, 0, formId, hasBreak ),\n\t\t\tsuccess: function( msg ) {\n\t\t\t\thandleAddFieldClickResponse( msg );\n\n\t\t\t\tconst fieldId = checkMsgForFieldId( msg );\n\t\t\t\tif ( fieldId ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * Fires after a field is added.\n\t\t\t\t\t *\n\t\t\t\t\t * @since 6.23\n\t\t\t\t\t *\n\t\t\t\t\t * @param {Object} fieldData            The field data.\n\t\t\t\t\t * @param {string} fieldData.field      The field HTML.\n\t\t\t\t\t * @param {string} fieldData.field_type The field type.\n\t\t\t\t\t * @param {string} fieldData.form_id    The form ID.\n\t\t\t\t\t */\n\t\t\t\t\twp.hooks.doAction( 'frm_after_field_added_in_form_builder', {\n\t\t\t\t\t\tfield: msg,\n\t\t\t\t\t\tfieldId,\n\t\t\t\t\t\tfieldType,\n\t\t\t\t\t\tform_id: formId,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: handleInsertFieldError\n\t\t} );\n\t\treturn false;\n\t}\n\n\tfunction handleAddFieldClickResponse( msg ) {\n\t\tdocument.getElementById( 'frm_form_editor_container' ).classList.add( 'frm-has-fields' );\n\t\tconst replaceWith = wrapFieldLi( msg );\n\t\tconst submitField = $newFields[ 0 ].querySelector( '.edit_field_type_submit' );\n\n\t\tif ( ! submitField ) {\n\t\t\t$newFields.append( replaceWith );\n\t\t} else {\n\t\t\tjQuery( submitField.closest( '.frm_field_box:not(.form-field)' ) ).before( replaceWith );\n\t\t}\n\n\t\tafterAddField( msg, true );\n\n\t\treplaceWith.each(\n\t\t\tfunction() {\n\t\t\t\tmakeDroppable( this.querySelector( 'ul.frm_sorting' ) );\n\t\t\t\tmakeDraggable( this.querySelector( '.form-field' ), '.frm-move' );\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction insertFormField( fieldType, fieldOptions = {} ) {\n\t\treturn new Promise( resolve => {\n\t\t\tconst formId = thisFormId;\n\t\t\tlet hasBreak = 0;\n\n\t\t\tif ( 'summary' === fieldType ) {\n\t\t\t\thasBreak = $newFields.children( 'li[data-type=\"break\"]' ).length > 0 ? 1 : 0;\n\t\t\t}\n\n\t\t\tjQuery.ajax( {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: ajaxurl,\n\t\t\t\tdata: Object.assign( getInsertNewFieldArgs( fieldType, 0, formId, hasBreak ), { field_options: fieldOptions } ),\n\t\t\t\tsuccess: function( msg ) {\n\t\t\t\t\tresolve( msg );\n\n\t\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t\tupdateFieldOrder();\n\t\t\t\t\t\tafterAddField( msg, true );\n\n\t\t\t\t\t\tconst fieldId = checkMsgForFieldId( msg );\n\t\t\t\t\t\tif ( fieldId ) {\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * Fires after a field is added.\n\t\t\t\t\t\t\t *\n\t\t\t\t\t\t\t * @since 6.23\n\t\t\t\t\t\t\t *\n\t\t\t\t\t\t\t * @param {Object} fieldData            The field data.\n\t\t\t\t\t\t\t * @param {string} fieldData.field      The field HTML.\n\t\t\t\t\t\t\t * @param {string} fieldData.field_type The field type.\n\t\t\t\t\t\t\t * @param {string} fieldData.form_id    The form ID.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\twp.hooks.doAction( 'frm_after_field_added_in_form_builder', {\n\t\t\t\t\t\t\t\tfield: msg,\n\t\t\t\t\t\t\t\tfieldId,\n\t\t\t\t\t\t\t\tfieldType,\n\t\t\t\t\t\t\t\tform_id: formId,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 10 );\n\t\t\t\t},\n\t\t\t\terror: handleInsertFieldError\n\t\t\t} );\n\t\t} );\n\t}\n\n\tfunction maybeHideQuantityProductFieldOption() {\n\t\tlet hide = true,\n\t\t\topts = document.querySelectorAll( '.frmjs_prod_field_opt_cont' );\n\n\t\tif ( $newFields.find( 'li.edit_field_type_product' ).length > 1 ) {\n\t\t\thide = false;\n\t\t}\n\n\t\tfor ( let i = 0; i < opts.length; i++ ) {\n\t\t\tif ( hide ) {\n\t\t\t\topts[ i ].classList.add( 'frm_hidden' );\n\t\t\t} else {\n\t\t\t\topts[ i ].classList.remove( 'frm_hidden' );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns true if a field can be duplicated.\n\t *\n\t * @since 6.19\n\t *\n\t * @param {HTMLElement} field\n\t * @param {number}      maxFieldsInGroup\n\t *\n\t * @return {Boolean}\n\t */\n\tfunction canDuplicateField( field, maxFieldsInGroup ) {\n\t\tif ( field.classList.contains( 'frm-page-collapsed' ) ) {\n\t\t\treturn false;\n\t\t}\n\t\tconst fieldGroup = field.closest( 'li.frm_field_box:not(.form-field)' );\n\t\tif ( ! fieldGroup ) {\n\t\t\treturn true;\n\t\t}\n\t\tconst fieldsInGroup = getFieldsInRow( jQuery( fieldGroup.querySelector( 'ul' ) ) ).length;\n\t\treturn fieldsInGroup < maxFieldsInGroup;\n\t}\n\n\tfunction duplicateField() {\n\t\tlet $field, fieldId, children, newRowId, fieldOrder;\n\t\tconst maxFieldsInGroup = 6;\n\n\t\t$field = jQuery( this ).closest( 'li.form-field' );\n\t\tnewRowId = this.getAttribute( 'frm-target-row-id' );\n\n\t\tif ( ! ( newRowId && newRowId.startsWith( 'frm_field_group_' ) ) && ! canDuplicateField( $field.get( 0 ), maxFieldsInGroup ) ) {\n\t\t\t/* translators: %1$d: Maximum number of fields allowed in a field group. */\n\t\t\tinfoModal( sprintf( __( 'You can only have a maximum of %1$d fields in a field group. Delete or move out a field from the group and try again.', 'formidable' ), maxFieldsInGroup ) );\n\t\t\treturn;\n\t\t}\n\n\t\tcloseOpenFieldDropdowns();\n\t\tfieldId = $field.data( 'fid' );\n\t\tchildren = fieldsInSection( fieldId );\n\n\t\tif ( null !== newRowId ) {\n\t\t\tfieldOrder = this.getAttribute( 'frm-field-order' );\n\t\t}\n\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_duplicate_field',\n\t\t\t\tfield_id: fieldId,\n\t\t\t\tform_id: thisFormId,\n\t\t\t\tchildren: children,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: function( msg ) {\n\t\t\t\tlet newRow;\n\n\t\t\t\tlet replaceWith;\n\n\t\t\t\tif ( null !== newRowId ) {\n\t\t\t\t\tnewRow = document.getElementById( newRowId );\n\t\t\t\t\tif ( null !== newRow ) {\n\t\t\t\t\t\treplaceWith = msgAsjQueryObject( msg );\n\t\t\t\t\t\tjQuery( newRow ).append( replaceWith );\n\t\t\t\t\t\tmakeDraggable( replaceWith.get( 0 ), '.frm-move' );\n\t\t\t\t\t\tif ( null !== fieldOrder ) {\n\t\t\t\t\t\t\tnewRow.lastElementChild.setAttribute( 'frm-field-order', fieldOrder );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tjQuery( newRow ).trigger(\n\t\t\t\t\t\t\t'frm_added_duplicated_field_to_row',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tduplicatedFieldHtml: msg,\n\t\t\t\t\t\t\t\toriginalFieldId: fieldId\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tafterAddField( msg, false );\n\t\t\t\t\t\tsetLayoutClassesForDuplicatedFieldInGroup( $field.get( 0 ), replaceWith.get( 0 ) );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( $field.siblings( 'li.form-field' ).length ) {\n\t\t\t\t\treplaceWith = msgAsjQueryObject( msg );\n\t\t\t\t\t$field.after( replaceWith );\n\t\t\t\t\tsyncLayoutClasses( $field );\n\t\t\t\t\tmakeDraggable( replaceWith.get( 0 ), '.frm-move' );\n\t\t\t\t} else {\n\t\t\t\t\treplaceWith = wrapFieldLi( msg );\n\t\t\t\t\t$field.parent().parent().after( replaceWith );\n\t\t\t\t\tmakeDroppable( replaceWith.get( 0 ).querySelector( 'ul.frm_sorting' ) );\n\t\t\t\t\tmakeDraggable( replaceWith.get( 0 ).querySelector( 'li.form-field' ), '.frm-move' );\n\t\t\t\t}\n\n\t\t\t\tupdateFieldOrder();\n\t\t\t\tafterAddField( msg, false );\n\t\t\t\tmaybeDuplicateUnsavedSettings( fieldId, msg );\n\t\t\t\ttoggleOneSectionHolder( replaceWith.find( '.start_divider' ) );\n\t\t\t\t$field[ 0 ].querySelector( '.frm-dropdown-menu.dropdown-menu-right' )?.classList.remove( 'show' );\n\t\t\t\tsetLayoutClassesForDuplicatedFieldInGroup( $field.get( 0 ), replaceWith.get( 0 ) );\n\t\t\t}\n\t\t} );\n\t\treturn false;\n\t}\n\n\t/**\n\t * Sets the layout classes for a duplicated field in a field group from the layout classes of the original field.\n\t *\n\t * @param {HTMLElement} field    The original field.\n\t * @param {HTMLElement} newField The duplicated field.\n\t *\n\t * @return {void}\n\t */\n\tfunction setLayoutClassesForDuplicatedFieldInGroup( field, newField ) {\n\t\tconst hoverTarget = field.closest( '.frm-field-group-hover-target' );\n\t\tif ( ! hoverTarget || ! isFieldGroup( hoverTarget.parentElement ) ) {\n\t\t\treturn;\n\t\t}\n\t\tconst fieldId = field.dataset.fid;\n\t\tlet fieldClasses = document.getElementById( 'frm_classes_' + fieldId )?.value;\n\t\tif ( ! fieldClasses ) {\n\t\t\treturn;\n\t\t}\n\t\tfieldClasses = fieldClasses.replace( 'frm_first', '' );\n\t\tif ( ! newField.className.includes( fieldClasses ) ) {\n\t\t\tnewField.className += ' ' + fieldClasses;\n\n\t\t\tconst classesInput = document.getElementById( 'frm_classes_' + newField.dataset.fid );\n\t\t\tif ( classesInput ) {\n\t\t\t\tclassesInput.value = fieldClasses;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction maybeDuplicateUnsavedSettings( originalFieldId, newFieldHtml ) {\n\t\tlet originalSettings, newFieldId, copySettings, fieldOptionKeys, originalDefault, copyDefault;\n\n\t\toriginalSettings = document.getElementById( 'frm-single-settings-' + originalFieldId );\n\t\tif ( null === originalSettings ) {\n\t\t\treturn;\n\t\t}\n\n\t\tnewFieldId = jQuery( newFieldHtml ).attr( 'data-fid' );\n\t\tif ( 'undefined' === typeof newFieldId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tcopySettings = document.getElementById( 'frm-single-settings-' + newFieldId );\n\t\tif ( null === copySettings ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfieldOptionKeys = [\n\t\t\t'name', 'required', 'unique', 'read_only', 'placeholder', 'description', 'size', 'max', 'format', 'prepend', 'append', 'separate_value'\n\t\t];\n\n\t\toriginalSettings.querySelectorAll( 'input[name^=\"field_options[\"], textarea[name^=\"field_options[\"]' ).forEach(\n\t\t\tfunction( originalSetting ) {\n\t\t\t\tlet key, tagType, copySetting;\n\n\t\t\t\tkey = getKeyFromSettingInput( originalSetting );\n\n\t\t\t\tif ( 'options' === key ) {\n\t\t\t\t\tcopyOption( originalSetting, copySettings, originalFieldId, newFieldId );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( -1 === fieldOptionKeys.indexOf( key ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttagType = originalSetting.matches( 'input' ) ? 'input' : 'textarea';\n\t\t\t\tcopySetting = copySettings.querySelector( tagType + '[name=\"field_options[' + key + '_' + newFieldId + ']\"]' );\n\t\t\t\tif ( null === copySetting ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( 'checkbox' === originalSetting.type ) {\n\t\t\t\t\tif ( originalSetting.checked !== copySetting.checked ) {\n\t\t\t\t\t\tjQuery( copySetting ).trigger( 'click' );\n\t\t\t\t\t}\n\t\t\t\t} else if ( 'text' === originalSetting.type || 'textarea' === tagType ) {\n\t\t\t\t\tif ( originalSetting.value !== copySetting.value ) {\n\t\t\t\t\t\tcopySetting.value = originalSetting.value;\n\t\t\t\t\t\tjQuery( copySetting ).trigger( 'change' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\toriginalDefault = originalSettings.querySelector( 'input[name=\"default_value_' + originalFieldId + '\"]' );\n\t\tif ( null !== originalDefault ) {\n\t\t\tcopyDefault = copySettings.querySelector( 'input[name=\"default_value_' + newFieldId + '\"]' );\n\t\t\tif ( null !== copyDefault && originalDefault.value !== copyDefault.value ) {\n\t\t\t\tcopyDefault.value = originalDefault.value;\n\t\t\t\tjQuery( copyDefault ).trigger( 'change' );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction copyOption( originalSetting, copySettings, originalFieldId, newFieldId ) {\n\t\tlet remainingKeyDetails, copyKey, copySetting;\n\t\tremainingKeyDetails = originalSetting.name.substr( 23 + ( '' + originalFieldId ).length );\n\t\tcopyKey = 'field_options[options_' + newFieldId + ']' + remainingKeyDetails;\n\t\tcopySetting = copySettings.querySelector( 'input[name=\"' + copyKey + '\"]' );\n\t\tif ( null !== copySetting && copySetting.value !== originalSetting.value ) {\n\t\t\tcopySetting.value = originalSetting.value;\n\t\t\tjQuery( copySetting ).trigger( 'change' );\n\t\t}\n\t}\n\n\tfunction getKeyFromSettingInput( input ) {\n\t\tlet nameWithoutPrefix, nameSplit;\n\t\tnameWithoutPrefix = input.name.substr( 14 );\n\t\tnameSplit = nameWithoutPrefix.split( '_' );\n\t\tnameSplit.pop();\n\t\treturn nameSplit.join( '_' );\n\t}\n\n\tfunction closeOpenFieldDropdowns() {\n\t\tconst openSettings = document.querySelector( '.frm-field-settings-open' );\n\t\tif ( null !== openSettings ) {\n\t\t\topenSettings.classList.remove( 'frm-field-settings-open' );\n\t\t\tjQuery( document ).off( 'click', '#frm_builder_page', handleClickOutsideOfFieldSettings );\n\t\t\tjQuery( '.frm-field-action-icons .dropdown.open' ).removeClass( 'open' );\n\t\t}\n\t}\n\n\tfunction handleClickOutsideOfFieldSettings( event ) {\n\t\tif ( ! jQuery( event.originalEvent.target ).closest( '.frm-field-action-icons' ).length ) {\n\t\t\tcloseOpenFieldDropdowns();\n\t\t}\n\t}\n\n\tfunction checkForMultiselectKeysOnMouseMove( event ) {\n\t\tconst keyIsDown = ! ! ( event.ctrlKey || event.metaKey || event.shiftKey );\n\t\tjQuery( builderPage ).toggleClass( 'frm-multiselect-key-is-down', keyIsDown );\n\t\tcheckForActiveHoverTarget( event );\n\t}\n\n\tfunction checkForActiveHoverTarget( event ) {\n\t\tlet container, elementFromPoint, list, previousHoverTarget;\n\n\t\tcontainer = postBodyContent;\n\t\tif ( container.classList.contains( 'frm-dragging-field' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( null !== document.querySelector( '.frm-field-group-hover-target .frm-field-settings-open' ) ) {\n\t\t\t// do not set a hover target if a dropdown is open for the current hover target.\n\t\t\treturn;\n\t\t}\n\n\t\telementFromPoint = document.elementFromPoint( event.clientX, event.clientY );\n\t\tif ( null !== elementFromPoint && ! elementFromPoint.classList.contains( 'edit_field_type_divider' ) ) {\n\t\t\tlist = elementFromPoint.closest( 'ul.frm_sorting' );\n\n\t\t\tif ( null !== list && ! list.classList.contains( 'start_divider' ) && 'frm-show-fields' !== list.id ) {\n\t\t\t\tpreviousHoverTarget = maybeRemoveGroupHoverTarget();\n\t\t\t\tif ( false !== previousHoverTarget && ! jQuery( previousHoverTarget ).is( list ) ) {\n\t\t\t\t\tdestroyFieldGroupPopup();\n\t\t\t\t}\n\t\t\t\tupdateFieldGroupControls( jQuery( list ), getFieldsInRow( jQuery( list ) ).length );\n\t\t\t\tlist.classList.add( 'frm-field-group-hover-target' );\n\t\t\t\tjQuery( '#wpbody-content' ).on( 'mousemove', maybeRemoveHoverTargetOnMouseMove );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction maybeRemoveGroupHoverTarget() {\n\t\tlet controls, previousHoverTarget;\n\n\t\tcontrols = document.getElementById( 'frm_field_group_controls' );\n\t\tif ( null !== controls ) {\n\t\t\tcontrols.style.display = 'none';\n\t\t}\n\n\t\tpreviousHoverTarget = document.querySelector( '.frm-field-group-hover-target' );\n\t\tif ( null === previousHoverTarget ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tjQuery( '#wpbody-content' ).off( 'mousemove', maybeRemoveHoverTargetOnMouseMove );\n\t\tpreviousHoverTarget.classList.remove( 'frm-field-group-hover-target' );\n\t\treturn previousHoverTarget;\n\t}\n\n\tfunction maybeRemoveHoverTargetOnMouseMove( event ) {\n\t\tconst elementFromPoint = document.elementFromPoint( event.clientX, event.clientY );\n\t\tif ( null !== elementFromPoint && null !== elementFromPoint.closest( '#frm-show-fields' ) ) {\n\t\t\treturn;\n\t\t}\n\t\tmaybeRemoveGroupHoverTarget();\n\t}\n\n\tfunction onFieldActionDropdownShow( isFieldGroup ) {\n\t\tunselectFieldGroups();\n\t\t// maybe offset the dropdown if it goes off of the right of the screen.\n\t\tsetTimeout(\n\t\t\tfunction() {\n\t\t\t\tlet ul, $ul;\n\t\t\t\tul = document.querySelector( '.dropdown.show .frm-dropdown-menu' );\n\t\t\t\tif ( null === ul ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif ( null === ul.getAttribute( 'aria-label' ) ) {\n\t\t\t\t\tul.setAttribute( 'aria-label', __( 'More Options', 'formidable' ) );\n\t\t\t\t}\n\t\t\t\tif ( 0 === ul.children.length ) {\n\t\t\t\t\tfillFieldActionDropdown( ul, true === isFieldGroup );\n\t\t\t\t}\n\t\t\t\t$ul = jQuery( ul );\n\t\t\t\tif ( $ul.offset().left > jQuery( window ).width() - $ul.outerWidth() ) {\n\t\t\t\t\tul.style.left = ( -$ul.outerWidth() ) + 'px';\n\t\t\t\t}\n\t\t\t\tconst firstAnchor = ul.firstElementChild.querySelector( 'a' );\n\t\t\t\tif ( firstAnchor ) {\n\t\t\t\t\tfirstAnchor.focus();\n\t\t\t\t}\n\t\t\t},\n\t\t\t0\n\t\t);\n\t}\n\n\tfunction onFieldGroupActionDropdownShow() {\n\t\tonFieldActionDropdownShow( true );\n\t}\n\n\tfunction changeSectionStyle( e ) {\n\t\tconst collapsedSection = e.target.closest( '.frm-section-collapsed' );\n\t\tif ( ! collapsedSection ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( e.type === 'show' ) {\n\t\t\tcollapsedSection.style.zIndex = 3;\n\t\t} else {\n\t\t\tcollapsedSection.style.zIndex = 1;\n\t\t}\n\t}\n\n\tfunction fillFieldActionDropdown( ul, isFieldGroup ) {\n\t\tlet classSuffix, options;\n\t\tclassSuffix = isFieldGroup ? '_field_group' : '_field';\n\t\toptions = [ getDeleteActionOption( isFieldGroup ), getDuplicateActionOption( isFieldGroup ) ];\n\t\tif ( ! isFieldGroup ) {\n\t\t\toptions.push(\n\t\t\t\t{ class: 'frm_select', icon: 'frm_settings_icon', label: __( 'Field Settings', 'formidable' ) }\n\t\t\t);\n\t\t}\n\t\toptions.forEach(\n\t\t\tfunction( option ) {\n\t\t\t\tlet li, anchor, span;\n\t\t\t\tli = document.createElement( 'div' );\n\t\t\t\tli.classList.add( 'frm_more_options_li', 'dropdown-item' );\n\n\t\t\t\tanchor = document.createElement( 'a' );\n\t\t\t\tanchor.classList.add( option.class + classSuffix );\n\t\t\t\tanchor.setAttribute( 'href', '#' );\n\t\t\t\tmakeTabbable( anchor );\n\n\t\t\t\tspan = document.createElement( 'span' );\n\t\t\t\tspan.textContent = option.label;\n\t\t\t\tanchor.innerHTML = '<svg class=\"frmsvg\"><use xlink:href=\"#' + option.icon + '\"></use></svg>';\n\t\t\t\tanchor.appendChild( document.createTextNode( ' ' ) );\n\t\t\t\tanchor.appendChild( span );\n\n\t\t\t\tli.appendChild( anchor );\n\t\t\t\tul.appendChild( li );\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction getDeleteActionOption( isFieldGroup ) {\n\t\tconst option = { class: 'frm_delete', icon: 'frm_delete_icon' };\n\t\toption.label = isFieldGroup ? __( 'Delete Group', 'formidable' ) : __( 'Delete', 'formidable' );\n\t\treturn option;\n\t}\n\n\tfunction getDuplicateActionOption( isFieldGroup ) {\n\t\tconst option = { class: 'frm_clone', icon: 'frm_clone_icon' };\n\t\toption.label = isFieldGroup ? __( 'Duplicate Group', 'formidable' ) : __( 'Duplicate', 'formidable' );\n\t\treturn option;\n\t}\n\n\tfunction wrapFieldLi( field ) {\n\t\tconst wrapper = div();\n\n\t\tif ( 'string' === typeof field ) {\n\t\t\twrapper.innerHTML = field;\n\t\t} else {\n\t\t\twrapper.appendChild( field );\n\t\t}\n\n\t\tlet result = jQuery();\n\t\tArray.from( wrapper.children ).forEach(\n\t\t\tli => {\n\t\t\t\tresult = result.add(\n\t\t\t\t\tjQuery( '<li>' )\n\t\t\t\t\t\t.addClass( 'frm_field_box' )\n\t\t\t\t\t\t.html(\n\t\t\t\t\t\t\tjQuery( '<ul>' ).addClass( 'frm_grid_container frm_sorting' ).append( li )\n\t\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\n\t\treturn result;\n\t}\n\n\tfunction wrapFieldLiInPlace( li ) {\n\t\tconst ul = tag(\n\t\t\t'ul',\n\t\t\t{\n\t\t\t\tclassName: 'frm_grid_container frm_sorting'\n\t\t\t}\n\t\t);\n\t\tconst wrapper = tag(\n\t\t\t'li',\n\t\t\t{\n\t\t\t\tclassName: 'frm_field_box',\n\t\t\t\tchild: ul\n\t\t\t}\n\t\t);\n\n\t\tli.replaceWith( wrapper );\n\t\tul.appendChild( li );\n\n\t\tmakeDroppable( ul );\n\t\tmakeDraggable( wrapper, '.frm-move' );\n\t}\n\n\tfunction afterAddField( msg, addFocus ) {\n\t\tconst regex = /id=\"(\\S+)\"/;\n\t\tconst match = regex.exec( msg );\n\t\tconst field = document.getElementById( match[ 1 ] );\n\t\tconst section = '#' + match[ 1 ] + '.edit_field_type_divider ul.frm_sorting.start_divider';\n\t\tconst $thisSection = jQuery( section );\n\t\tconst type = field.getAttribute( 'data-type' );\n\n\t\tcheckHtmlForNewFields( msg );\n\n\t\tlet toggled = false;\n\n\t\tfieldUpdated();\n\t\tsetupSortable( section );\n\n\t\tif ( 'quantity' === type ) {\n\t\t\t// try to automatically attach a product field\n\t\t\tmaybeSetProductField( field );\n\t\t}\n\n\t\tif ( 'product' === type || 'quantity' === type ) {\n\t\t\t// quantity too needs to be a part of the if stmt especially cos of the very\n\t\t\t// 1st quantity field (or even if it's just one quantity field in the form).\n\t\t\tmaybeHideQuantityProductFieldOption();\n\t\t}\n\n\t\tif ( $thisSection.length ) {\n\t\t\t$thisSection.parent( '.frm_field_box' ).children( '.frm_no_section_fields' ).addClass( 'frm_block' );\n\t\t} else {\n\t\t\tconst $parentSection = jQuery( field ).closest( 'ul.frm_sorting.start_divider' );\n\t\t\tif ( $parentSection.length ) {\n\t\t\t\ttoggleOneSectionHolder( $parentSection );\n\t\t\t\ttoggled = true;\n\t\t\t}\n\t\t}\n\n\t\tif ( msg.indexOf( 'frm-collapse-page' ) !== -1 ) {\n\t\t\trenumberPageBreaks();\n\t\t}\n\n\t\taddClass( field, 'frm-newly-added' );\n\t\tsetTimeout( function() {\n\t\t\tfield.classList.remove( 'frm-newly-added' );\n\t\t}, 1000 );\n\n\t\tif ( addFocus ) {\n\t\t\tconst bounding = field.getBoundingClientRect(),\n\t\t\t\tcontainer = document.getElementById( 'post-body-content' ),\n\t\t\t\tinView = ( bounding.top >= 0 &&\n\t\t\t\t\tbounding.left >= 0 &&\n\t\t\t\t\tbounding.right <= ( window.innerWidth || document.documentElement.clientWidth ) &&\n\t\t\t\t\tbounding.bottom <= ( window.innerHeight || document.documentElement.clientHeight )\n\t\t\t\t);\n\n\t\t\tif ( ! inView ) {\n\t\t\t\tcontainer.scroll( {\n\t\t\t\t\ttop: container.scrollHeight,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tbehavior: 'smooth'\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif ( toggled === false ) {\n\t\t\t\ttoggleOneSectionHolder( $thisSection );\n\t\t\t}\n\t\t}\n\n\t\tdeselectFields();\n\t\tinitiateMultiselect();\n\n\t\tdocument.getElementById( 'frm-show-fields' ).classList.remove( 'frm-over-droppable' );\n\n\t\tconst addedEvent = new Event( 'frm_added_field', { bubbles: false } );\n\t\taddedEvent.frmField = field;\n\t\taddedEvent.frmSection = section;\n\t\taddedEvent.frmType = type;\n\t\taddedEvent.frmToggles = toggled;\n\t\tdocument.dispatchEvent( addedEvent );\n\t}\n\n\t/**\n\t * Since multiple new fields may get added when a new field is inserted, check the HTML.\n\t *\n\t * @param {string} html\n\t * @return {void}\n\t */\n\tfunction checkHtmlForNewFields( html ) {\n\t\tconst element = div();\n\t\telement.innerHTML = html;\n\t\telement.querySelectorAll( '.form-field' ).forEach( addFieldIdToDraftFieldsInput );\n\t}\n\n\t/**\n\t * @param {HTMLElement} field\n\t * @return {void}\n\t */\n\tfunction addFieldIdToDraftFieldsInput( field ) {\n\t\tif ( ! field.dataset.fid ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst draftInput = document.getElementById( 'draft_fields' );\n\t\tif ( ! draftInput ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( '' === draftInput.value ) {\n\t\t\tdraftInput.value = field.dataset.fid;\n\t\t} else {\n\t\t\tconst split = draftInput.value.split( ',' );\n\t\t\tif ( ! split.includes( field.dataset.fid ) ) {\n\t\t\t\tdraftInput.value += ',' + field.dataset.fid;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction clearSettingsBox( preventFieldGroups ) {\n\t\tjQuery( '#new_fields .frm-single-settings' ).addClass( 'frm_hidden' );\n\t\tjQuery( '#frm-options-panel > .frm-single-settings' ).removeClass( 'frm_hidden' );\n\t\tdeselectFields( preventFieldGroups );\n\t}\n\n\tfunction deselectFields( preventFieldGroups ) {\n\t\tjQuery( 'li.ui-state-default.selected' ).removeClass( 'selected' );\n\t\tjQuery( '.frm-show-field-settings.selected' ).removeClass( 'selected' );\n\t\tif ( ! preventFieldGroups ) {\n\t\t\tunselectFieldGroups();\n\t\t}\n\t}\n\n\tfunction scrollToField( field ) {\n\t\tconst newPos = field.getBoundingClientRect().top,\n\t\t\tcontainer = document.getElementById( 'post-body-content' );\n\n\t\tif ( typeof animate === 'undefined' ) {\n\t\t\tjQuery( container ).scrollTop( newPos );\n\t\t} else {\n\t\t\t// TODO: smooth scroll\n\t\t\tjQuery( container ).animate( { scrollTop: newPos }, 500 );\n\t\t}\n\t}\n\n\tfunction checkCalculationCreatedByUser() {\n\t\tconst calculation = this.value;\n\t\tlet warningMessage = checkMatchingParens( calculation );\n\t\twarningMessage += checkShortcodes( calculation, this );\n\n\t\tif ( warningMessage !== '' ) {\n\t\t\tinfoModal( calculation + '\\n\\n' + warningMessage );\n\t\t}\n\t}\n\n\t/**\n\t * Checks a string for parens, brackets, and curly braces and returns a message if any unmatched are found.\n\t *\n\t * @param  formula\n\t * @return {string}\n\t */\n\tfunction checkMatchingParens( formula ) {\n\t\tlet stack = [],\n\t\t\tformulaArray = formula.split( '' ),\n\t\t\tlength = formulaArray.length,\n\t\t\topening = [ '{', '[', '(' ],\n\t\t\tclosing = {\n\t\t\t\t'}': '{',\n\t\t\t\t')': '(',\n\t\t\t\t']': '['\n\t\t\t},\n\t\t\tunmatchedClosing = [],\n\t\t\tmsg = '',\n\t\t\ti, top;\n\n\t\tfor ( i = 0; i < length; i++ ) {\n\t\t\tif ( opening.includes( formulaArray[ i ] ) ) {\n\t\t\t\tstack.push( formulaArray[ i ] );\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ( closing.hasOwnProperty( formulaArray[ i ] ) ) {\n\t\t\t\ttop = stack.pop();\n\t\t\t\tif ( top !== closing[ formulaArray[ i ] ] ) {\n\t\t\t\t\tunmatchedClosing.push( formulaArray[ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( stack.length > 0 || unmatchedClosing.length > 0 ) {\n\t\t\tmsg = frmAdminJs.unmatched_parens + '\\n\\n';\n\t\t\treturn msg;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\t/**\n\t * Checks a calculation for shortcodes that shouldn't be in it and returns a message if found.\n\t *\n\t * @param  calculation\n\t * @param  inputElement\n\t * @return {string}\n\t */\n\tfunction checkShortcodes( calculation, inputElement ) {\n\t\tlet msg = checkNonNumericShortcodes( calculation, inputElement );\n\t\tmsg += checkNonFormShortcodes( calculation );\n\n\t\treturn msg;\n\t}\n\n\t/**\n\t * Checks if a numeric calculation has shortcodes that output non-numeric strings and returns a message if found.\n\t *\n\t * @param  calculation\n\t *\n\t * @param  inputElement\n\t * @return {string}\n\t */\n\tfunction checkNonNumericShortcodes( calculation, inputElement ) {\n\t\tlet msg = '';\n\n\t\tif ( isTextCalculation( inputElement ) ) {\n\t\t\treturn msg;\n\t\t}\n\n\t\tconst nonNumericShortcodes = getNonNumericShortcodes();\n\n\t\tif ( nonNumericShortcodes.test( calculation ) ) {\n\t\t\tmsg = frmAdminJs.text_shortcodes + '\\n\\n';\n\t\t}\n\n\t\treturn msg;\n\t}\n\n\t/**\n\t * Determines if the calculation input is from a text calculation.\n\t *\n\t * @param inputElement\n\t */\n\tfunction isTextCalculation( inputElement ) {\n\t\treturn jQuery( inputElement ).siblings( 'label[for^=\"calc_type\"]' ).children( 'input' ).prop( 'checked' );\n\t}\n\n\t/**\n\t * Returns a regular expression of shortcodes that can't be used in numeric calculations.\n\t *\n\t * @return {RegExp}\n\t */\n\tfunction getNonNumericShortcodes() {\n\t\treturn /\\[(date|time|email|ip)\\]/;\n\t}\n\n\t/**\n\t * Checks if a string has any shortcodes that do not belong in forms and returns a message if any are found.\n\t *\n\t * @param  formula\n\t * @return {string}\n\t */\n\tfunction checkNonFormShortcodes( formula ) {\n\t\tlet nonFormShortcodes = getNonFormShortcodes(),\n\t\t\tmsg = '';\n\n\t\tif ( nonFormShortcodes.test( formula ) ) {\n\t\t\tmsg += frmAdminJs.view_shortcodes + '\\n\\n';\n\t\t}\n\n\t\treturn msg;\n\t}\n\n\t/**\n\t * Returns a regular expression of shortcodes that can't be used in forms but can be used in Views, Email\n\t * Notifications, and other Formidable areas.\n\t *\n\t * @return {RegExp}\n\t */\n\tfunction getNonFormShortcodes() {\n\t\treturn /\\[id\\]|\\[key\\]|\\[if\\s\\w+\\]|\\[foreach\\s\\w+\\]|\\[created-at(\\s*)?/g;\n\t}\n\n\tfunction isCalcBoxType( box, listClass ) {\n\t\tconst list = jQuery( box ).find( '.frm_code_list' );\n\t\treturn 1 === list.length && list.hasClass( listClass );\n\t}\n\n\tfunction extractExcludedOptions( exclude ) {\n\t\tconst opts = [];\n\t\tif ( ! Array.isArray( exclude ) ) {\n\t\t\treturn opts;\n\t\t}\n\n\t\tfor ( let i = 0; i < exclude.length; i++ ) {\n\t\t\tif ( exclude[ i ].startsWith( '[' ) ) {\n\t\t\t\topts.push( exclude[ i ] );\n\t\t\t\t// remove it\n\t\t\t\texclude.splice( i, 1 );\n\t\t\t\t// https://love2dev.com/blog/javascript-remove-from-array/#remove-from-array-splice-value\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\n\t\treturn opts;\n\t}\n\n\tfunction hasExcludedOption( field, excludedOpts ) {\n\t\tlet hasOption = false;\n\t\tfor ( let i = 0; i < excludedOpts.length; i++ ) {\n\t\t\tconst inputs = document.getElementsByName( getFieldOptionInputName( excludedOpts[ i ], field.fieldId ) );\n\t\t\t// 2nd condition checks that there's at least one non-empty value\n\t\t\tif ( inputs.length && jQuery( inputs[ 0 ] ).val() ) {\n\t\t\t\thasOption = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn hasOption;\n\t}\n\n\tfunction getFieldOptionInputName( opt, fieldId ) {\n\t\tconst at = opt.indexOf( ']' );\n\t\treturn 'field_options' + opt.substring( 0, at ) + '_' + fieldId + opt.substring( at );\n\t}\n\n\tfunction popCalcFields( v, force ) {\n\t\tlet box, exclude, fields, i, list,\n\t\t\tp = jQuery( v ).closest( '.frm-single-settings' ),\n\t\t\tcalc = p.find( '.frm-calc-field' );\n\n\t\tif ( ! force && ( ! calc.length || calc.val() === '' || calc.is( ':hidden' ) ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isSummary = isCalcBoxType( v, 'frm_js_summary_list' );\n\n\t\tconst fieldId = p.find( 'input[name=\"frm_fields_submitted[]\"]' ).val();\n\n\t\tif ( force ) {\n\t\t\tbox = v;\n\t\t} else {\n\t\t\tbox = document.getElementById( 'frm-calc-box-' + fieldId );\n\t\t}\n\n\t\texclude = getExcludeArray( box, isSummary );\n\t\tconst excludedOpts = extractExcludedOptions( exclude );\n\n\t\tfields = getFieldList();\n\t\tlist = document.getElementById( 'frm-calc-list-' + fieldId );\n\t\tlist.innerHTML = '';\n\n\t\tfor ( i = 0; i < fields.length; i++ ) {\n\t\t\tif ( ( exclude && exclude.includes( fields[ i ].fieldType ) ) ||\n\t\t\t\t( excludedOpts.length && hasExcludedOption( fields[ i ], excludedOpts ) ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst a = document.createElement( 'a' );\n\t\t\ta.setAttribute( 'href', '#' );\n\t\t\ta.setAttribute( 'data-code', fields[ i ].fieldId );\n\t\t\ta.classList.add( 'frm_insert_code' );\n\t\t\ta.appendChild( span( fields[ i ].fieldName ) );\n\t\t\ta.appendChild( span( { className: 'frm-text-sm frm-text-grey-500', text: '[' + fields[ i ].fieldId + ']' } ) );\n\n\t\t\tconst li = document.createElement( 'li' );\n\t\t\tli.classList.add( 'frm-field-list-' + fieldId );\n\t\t\tli.classList.add( 'frm-field-list-' + fields[ i ].fieldType );\n\t\t\tli.appendChild( a );\n\t\t\tlist.appendChild( li );\n\t\t}\n\t}\n\n\tfunction getExcludeArray( calcBox, isSummary ) {\n\t\tconst codeList = calcBox.querySelector( '.frm_code_list' );\n\t\tconst exclude = JSON.parse( codeList.getAttribute( 'data-exclude' ) );\n\n\t\tif ( isSummary ) {\n\t\t\t// includedExtras are those that are normally excluded from the summary but the form owner can choose to include,\n\t\t\t// when they have been chosen to be included, then they can now be manually excluded in the calc box.\n\t\t\tconst includedExtras = getIncludedExtras();\n\t\t\tif ( includedExtras.length ) {\n\t\t\t\tfor ( let i = 0; i < exclude.length; i++ ) {\n\t\t\t\t\tif ( includedExtras.includes( exclude[ i ] ) ) {\n\t\t\t\t\t\t// remove it\n\t\t\t\t\t\texclude.splice( i, 1 );\n\t\t\t\t\t\t// https://love2dev.com/blog/javascript-remove-from-array/#remove-from-array-splice-value\n\t\t\t\t\t\ti--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn exclude;\n\t}\n\n\tfunction getIncludedExtras() {\n\t\tconst checked = [];\n\t\tconst checkboxes = document.getElementsByClassName( 'frm_include_extras_field' );\n\n\t\tfor ( let i = 0; i < checkboxes.length; i++ ) {\n\t\t\tif ( checkboxes[ i ].checked ) {\n\t\t\t\tchecked.push( checkboxes[ i ].value );\n\t\t\t}\n\t\t}\n\n\t\treturn checked;\n\t}\n\n\tfunction rePopCalcFieldsForSummary() {\n\t\tpopCalcFields( jQuery( '.frm-inline-modal.postbox:has(.frm_js_summary_list)' )[ 0 ], true );\n\t}\n\n\tfunction getFieldList( fieldType ) {\n\t\tlet i,\n\t\t\tfields = [],\n\t\t\tallFields = document.querySelectorAll( 'li.frm_field_box' ),\n\t\t\tcheckType = 'undefined' !== typeof fieldType;\n\n\t\tfor ( i = 0; i < allFields.length; i++ ) {\n\t\t\t// data-ftype is better (than data-type) cos of fields loaded by AJAX - which might not be ready yet\n\t\t\tif ( checkType && allFields[ i ].getAttribute( 'data-ftype' ) !== fieldType ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst fieldId = allFields[ i ].getAttribute( 'data-fid' );\n\t\t\tif ( typeof fieldId !== 'undefined' && fieldId ) {\n\t\t\t\tfields.push( {\n\t\t\t\t\tfieldId: fieldId,\n\t\t\t\t\tfieldName: getPossibleValue( 'frm_name_' + fieldId ),\n\t\t\t\t\tfieldType: getPossibleValue( 'field_options_type_' + fieldId ),\n\t\t\t\t\tfieldKey: getPossibleValue( 'field_options_field_key_' + fieldId )\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\treturn wp.hooks.applyFilters( 'frm_admin_get_field_list', fields, fieldType, allFields );\n\t}\n\n\tfunction popProductFields( field ) {\n\t\tlet i, checked, id,\n\t\t\toptions = [],\n\t\t\tcurrent = getCurrentProductFields( field ),\n\t\t\tfName = field.getAttribute( 'data-frmfname' ),\n\t\t\tproducts = getFieldList( 'product' ),\n\t\t\tquantities = getFieldList( 'quantity' ),\n\t\t\tisSelect = field.tagName === 'SELECT', // for reverse compatibility.\n\t\t\t// whether we have just 1 product and 1 quantity field & should therefore attach the latter to the former\n\t\t\tauto = 1 === quantities.length && 1 === products.length;\n\n\t\tif ( isSelect ) {\n\t\t\t// This fallback can be removed after 4.05.\n\t\t\tcurrent = field.getAttribute( 'data-frmcurrent' );\n\t\t}\n\n\t\tfor ( i = 0; i < products.length; i++ ) {\n\t\t\t// let's be double sure it's string, else indexOf will fail\n\t\t\tid = products[ i ].fieldId.toString();\n\t\t\tchecked = auto || -1 !== current.indexOf( id );\n\t\t\tif ( isSelect ) {\n\t\t\t\t// This fallback can be removed after 4.05.\n\t\t\t\tchecked = checked ? ' selected' : '';\n\t\t\t\toptions.push( '<option value=\"' + id + '\"' + checked + '>' + products[ i ].fieldName + '</option>' );\n\t\t\t} else {\n\t\t\t\tchecked = checked ? ' checked' : '';\n\t\t\t\toptions.push( '<label class=\"frm6\">' );\n\t\t\t\toptions.push( '<input type=\"checkbox\" name=\"' + fName + '\" value=\"' + id + '\"' + checked + '> ' + products[ i ].fieldName );\n\t\t\t\toptions.push( '</label>' );\n\t\t\t}\n\t\t}\n\n\t\tfield.innerHTML = options.join( '' );\n\t}\n\n\tfunction getCurrentProductFields( prodFieldOpt ) {\n\t\tconst products = prodFieldOpt.querySelectorAll( '[type=\"checkbox\"]:checked' ),\n\t\t\tidsArray = [];\n\n\t\tfor ( let i = 0; i < products.length; i++ ) {\n\t\t\tidsArray.push( products[ i ].value );\n\t\t}\n\n\t\treturn idsArray;\n\t}\n\n\tfunction popAllProductFields() {\n\t\tconst opts = document.querySelectorAll( '.frmjs_prod_field_opt' );\n\t\tfor ( let i = 0; i < opts.length; i++ ) {\n\t\t\tpopProductFields( opts[ i ] );\n\t\t}\n\t}\n\n\tfunction maybeSetProductField( field ) {\n\t\tconst fieldId = field.getAttribute( 'data-fid' ),\n\t\t\tproductFieldOpt = document.getElementById( 'field_options[product_field_' + fieldId + ']' );\n\n\t\tif ( null === productFieldOpt ) {\n\t\t\treturn;\n\t\t}\n\n\t\tpopProductFields( productFieldOpt );\n\t\t// in order to move its settings to that LHS panel where\n\t\t// the update form resides, else it'll lose this setting\n\t\tmoveFieldSettings( document.getElementById( 'frm-single-settings-' + fieldId ) );\n\t}\n\n\t/**\n\t * If the element doesn't exist, use a blank value.\n\t */\n\tfunction getPossibleValue( id ) {\n\t\tconst field = document.getElementById( id );\n\t\tif ( field !== null ) {\n\t\t\treturn field.value;\n\t\t}\n\t\treturn '';\n\t}\n\n\tfunction liveChanges() {\n\t\t/*jshint validthis:true */\n\t\tlet option,\n\t\t\tnewValue = this.value,\n\t\t\tchanges = document.getElementById( this.getAttribute( 'data-changeme' ) ),\n\t\t\tatt = this.getAttribute( 'data-changeatt' );\n\n\t\tif ( changes === null ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( att !== null ) {\n\t\t\tif ( changes.tagName === 'SELECT' && att === 'placeholder' ) {\n\t\t\t\toption = changes.options[ 0 ];\n\t\t\t\tif ( option.value === '' ) {\n\t\t\t\t\toption.innerHTML = newValue;\n\t\t\t\t} else {\n\t\t\t\t\t// Create a placeholder option if there are no blank values.\n\t\t\t\t\taddBlankSelectOption( changes, newValue );\n\t\t\t\t}\n\t\t\t} else if ( att === 'class' ) {\n\t\t\t\tchangeFieldClass( changes, this );\n\t\t\t} else if ( isSliderField( changes ) ) {\n\t\t\t\tupdateSliderFieldPreview( changes, att, newValue );\n\t\t\t} else {\n\t\t\t\tchanges.setAttribute( att, newValue );\n\t\t\t}\n\t\t} else if ( changes.id.indexOf( 'setup-message' ) === 0 ) {\n\t\t\tif ( newValue !== '' ) {\n\t\t\t\tchanges.innerHTML = '<input type=\"text\" value=\"\" disabled />';\n\t\t\t}\n\t\t} else {\n\t\t\tchanges.innerHTML = purifyHtml( newValue );\n\t\t\tif ( 'TEXTAREA' === changes.nodeName && changes.classList.contains( 'wp-editor-area' ) ) {\n\t\t\t\t// Trigger change events on wysiwyg textareas so we can also sync default values in the visual tab.\n\t\t\t\tjQuery( changes ).trigger( 'change' );\n\t\t\t}\n\n\t\t\tif ( changes.classList.contains( 'frm_primary_label' ) && 'break' === changes.nextElementSibling.getAttribute( 'data-ftype' ) ) {\n\t\t\t\tchanges.nextElementSibling.querySelector( '.frm_button_submit' ).textContent = newValue;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction updateSliderFieldPreview( field, att, newValue ) {\n\t\tif ( frmGlobal.proIncludesSliderJs ) {\n\t\t\tconst hookName = 'frm_update_slider_field_preview';\n\t\t\tconst hookArgs = { field, att, newValue };\n\t\t\twp.hooks.doAction( hookName, hookArgs );\n\t\t\treturn;\n\t\t}\n\n\t\t// This functionality has been moved to pro since v5.4.3. This code should be removed eventually.\n\t\tif ( 'value' === att ) {\n\t\t\tif ( '' === newValue ) {\n\t\t\t\tnewValue = getSliderMidpoint( field );\n\t\t\t}\n\t\t\tfield.value = newValue;\n\t\t} else {\n\t\t\tfield.setAttribute( att, newValue );\n\t\t}\n\n\t\tif ( -1 === [ 'value', 'min', 'max' ].indexOf( att ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ( 'max' === att || 'min' === att ) && '' === getSliderDefaultValueInput( field.id ) ) {\n\t\t\tfield.value = getSliderMidpoint( field );\n\t\t}\n\n\t\tfield.parentNode.querySelector( '.frm_range_value' ).textContent = field.value;\n\t}\n\n\tfunction getSliderDefaultValueInput( previewInputId ) {\n\t\treturn document.querySelector( 'input[data-changeme=\"' + previewInputId + '\"][data-changeatt=\"value\"]' ).value;\n\t}\n\n\tfunction getSliderMidpoint( sliderInput ) {\n\t\tconst max = parseFloat( sliderInput.getAttribute( 'max' ) );\n\t\tconst min = parseFloat( sliderInput.getAttribute( 'min' ) );\n\t\treturn ( ( max - min ) / 2 ) + min;\n\t}\n\n\tfunction isSliderField( previewInput ) {\n\t\treturn 'range' === previewInput.type && previewInput.parentNode.classList.contains( 'frm_range_container' );\n\t}\n\n\tfunction toggleInvalidMsg() {\n\t\t/*jshint validthis:true */\n\t\tlet typeDropdown, fieldType,\n\t\t\tfieldId = this.getAttribute( 'data-fid' ),\n\t\t\tvalue = '';\n\n\t\t[ 'field_options_max_', 'frm_format_' ].forEach( function( id ) {\n\t\t\tconst input = document.getElementById( id + fieldId );\n\t\t\tif ( ! input ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvalue += input.value;\n\t\t} );\n\n\t\ttypeDropdown = document.getElementsByName( 'field_options[type_' + fieldId + ']' )[ 0 ];\n\t\tfieldType = typeDropdown.options[ typeDropdown.selectedIndex ].value;\n\n\t\tif ( fieldType === 'text' ) {\n\t\t\ttoggleValidationBox( '' !== value, '.frm_invalid_msg' + fieldId );\n\t\t}\n\t}\n\n\tfunction markRequired() {\n\t\t/*jshint validthis:true */\n\t\tconst thisid = this.id.replace( 'frm_', '' ),\n\t\t\tfieldId = thisid.replace( 'req_field_', '' ),\n\t\t\tchecked = this.checked,\n\t\t\tlabel = jQuery( '#field_label_' + fieldId + ' .frm_required' );\n\n\t\ttoggleValidationBox( checked, '.frm_required_details' + fieldId );\n\n\t\tif ( checked ) {\n\t\t\tconst $reqBox = jQuery( 'input[name=\"field_options[required_indicator_' + fieldId + ']\"]' );\n\t\t\tif ( $reqBox.val() === '' ) {\n\t\t\t\t$reqBox.val( '*' );\n\t\t\t}\n\t\t\tlabel.removeClass( 'frm_hidden' );\n\t\t} else {\n\t\t\tlabel.addClass( 'frm_hidden' );\n\t\t}\n\t}\n\n\tfunction toggleValidationBox( hasValue, messageClass ) {\n\t\t$msg = jQuery( messageClass );\n\t\tif ( hasValue ) {\n\t\t\t$msg.fadeIn( 'fast' ).closest( '.frm_validation_msg' ).fadeIn( 'fast' );\n\t\t} else {\n\t\t\t// Fade out validation options\n\t\t\tconst $validationBox = $msg.fadeOut( 'fast' ).closest( '.frm_validation_box' );\n\t\t\tconst v = $validationBox.css( 'display', 'block' ).children( ':not(' + messageClass + '):visible' ).length;\n\t\t\t$validationBox.css( 'display', '' );\n\t\t\tif ( v === 0 ) {\n\t\t\t\t$msg.closest( '.frm_validation_msg' ).fadeOut( 'fast' );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction markUnique() {\n\t\t/*jshint validthis:true */\n\t\tconst fieldId = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' );\n\t\tconst $thisField = jQuery( '.frm_unique_details' + fieldId );\n\t\tif ( this.checked ) {\n\t\t\t$thisField.fadeIn( 'fast' ).closest( '.frm_validation_msg' ).fadeIn( 'fast' );\n\t\t\t$unqDetail = jQuery( '.frm_unique_details' + fieldId + ' input' );\n\t\t\tif ( $unqDetail.val() === '' ) {\n\t\t\t\t$unqDetail.val( frmAdminJs.default_unique );\n\t\t\t}\n\t\t} else {\n\t\t\tconst $validationBox = $thisField.fadeOut( 'fast' ).closest( '.frm_validation_box' );\n\t\t\tconst v = $validationBox.css( 'display', 'block' ).children( ':not(.frm_unique_details' + fieldId + '):visible' ).length;\n\t\t\t$validationBox.css( 'display', '' );\n\t\t\tif ( v === 0 ) {\n\t\t\t\t$thisField.closest( '.frm_validation_msg' ).fadeOut( 'fast' );\n\t\t\t}\n\t\t}\n\t}\n\n\t//Fade confirmation field and validation option in or out\n\tfunction addConf() {\n\t\t/*jshint validthis:true */\n\t\tconst fieldId = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' );\n\t\tconst val = jQuery( this ).val();\n\t\tconst $thisField = jQuery( document.getElementById( 'frm_field_id_' + fieldId ) );\n\n\t\ttoggleValidationBox( val !== '', '.frm_conf_details' + fieldId );\n\n\t\tif ( val !== '' ) {\n\t\t\t//Add default validation message if empty\n\t\t\tconst valMsg = jQuery( '.frm_validation_box .frm_conf_details' + fieldId + ' input' );\n\t\t\tif ( valMsg.val() === '' ) {\n\t\t\t\tvalMsg.val( frmAdminJs.default_conf );\n\t\t\t}\n\n\t\t\tsetConfirmationFieldDescriptions( fieldId );\n\n\t\t\t//Add or remove class for confirmation field styling\n\t\t\tif ( val === 'inline' ) {\n\t\t\t\t$thisField.removeClass( 'frm_conf_below' ).addClass( 'frm_conf_inline' );\n\t\t\t} else if ( val === 'below' ) {\n\t\t\t\t$thisField.removeClass( 'frm_conf_inline' ).addClass( 'frm_conf_below' );\n\t\t\t}\n\t\t\tjQuery( '.frm-conf-box-' + fieldId ).removeClass( 'frm_hidden' );\n\t\t} else {\n\t\t\tjQuery( '.frm-conf-box-' + fieldId ).addClass( 'frm_hidden' );\n\t\t\tsetTimeout( function() {\n\t\t\t\t$thisField.removeClass( 'frm_conf_inline frm_conf_below' );\n\t\t\t}, 200 );\n\t\t}\n\t}\n\n\tfunction setConfirmationFieldDescriptions( fieldId ) {\n\t\tconst fieldType = document.getElementsByName( 'field_options[type_' + fieldId + ']' )[ 0 ].value;\n\n\t\tconst fieldDescription = document.getElementById( 'field_description_' + fieldId );\n\t\tconst hiddenDescName = 'field_options[description_' + fieldId + ']';\n\t\tconst newValue = frmAdminJs[ 'enter_' + fieldType ];\n\t\tmaybeSetNewDescription( fieldDescription, hiddenDescName, newValue );\n\n\t\tconst confFieldDescription = document.getElementById( 'conf_field_description_' + fieldId );\n\t\tconst hiddenConfName = 'field_options[conf_desc_' + fieldId + ']';\n\t\tconst newConfValue = frmAdminJs[ 'confirm_' + fieldType ];\n\t\tmaybeSetNewDescription( confFieldDescription, hiddenConfName, newConfValue );\n\t}\n\n\tfunction maybeSetNewDescription( descriptionDiv, hiddenName, newValue ) {\n\t\tif ( descriptionDiv.innerHTML === frmAdminJs.desc ) {\n\t\t\t// Set the visible description value and the hidden description value\n\t\t\tdescriptionDiv.innerHTML = newValue;\n\t\t\tdocument.getElementsByName( hiddenName )[ 0 ].value = newValue;\n\t\t}\n\t}\n\n\tfunction initBulkOptionsOverlay() {\n\t\t/*jshint validthis:true */\n\t\tconst $info = initModal( '#frm-bulk-modal', '700px' );\n\t\tif ( $info === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\tjQuery( '.frm-insert-preset' ).on( 'click', insertBulkPreset );\n\n\t\tjQuery( builderForm ).on( 'click', 'a.frm-bulk-edit-link', function( event ) {\n\t\t\tevent.preventDefault();\n\t\t\tlet i, key, label,\n\t\t\t\tcontent = '',\n\t\t\t\toptList,\n\t\t\t\topts,\n\t\t\t\tfieldId = jQuery( this ).closest( '[data-fid]' ).data( 'fid' ),\n\t\t\t\tseparate = usingSeparateValues( fieldId ),\n\t\t\t\tproduct = isProductField( fieldId );\n\n\t\t\toptList = document.getElementById( 'frm_field_' + fieldId + '_opts' );\n\t\t\tif ( ! optList ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\topts = optList.getElementsByTagName( 'li' );\n\n\t\t\tdocument.getElementById( 'bulk-field-id' ).value = fieldId;\n\n\t\t\tfor ( i = 0; i < opts.length; i++ ) {\n\t\t\t\tkey = opts[ i ].getAttribute( 'data-optkey' );\n\t\t\t\tif ( key !== '000' ) {\n\t\t\t\t\tlabel = document.getElementsByName( 'field_options[options_' + fieldId + '][' + key + '][label]' )[ 0 ];\n\t\t\t\t\tif ( typeof label !== 'undefined' ) {\n\t\t\t\t\t\tcontent += label.value;\n\t\t\t\t\t\tif ( separate ) {\n\t\t\t\t\t\t\tcontent += '|' + document.getElementsByName( 'field_options[options_' + fieldId + '][' + key + '][value]' )[ 0 ].value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( product ) {\n\t\t\t\t\t\t\tcontent += '|' + document.getElementsByName( 'field_options[options_' + fieldId + '][' + key + '][price]' )[ 0 ].value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontent += '\\r\\n';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( i >= opts.length - 1 ) {\n\t\t\t\t\tdocument.getElementById( 'frm_bulk_options' ).value = content;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$info.dialog( 'open' );\n\n\t\t\treturn false;\n\t\t} );\n\n\t\tjQuery( '#frm-update-bulk-opts' ).on( 'click', function() {\n\t\t\tconst fieldId = document.getElementById( 'bulk-field-id' ).value;\n\t\t\tconst optionType = document.getElementById( 'bulk-option-type' ).value;\n\n\t\t\tif ( optionType ) {\n\t\t\t\t// Use custom handler for custom option type.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.classList.add( 'frm_loading_button' );\n\t\t\tfrmAdminBuild.updateOpts( fieldId, document.getElementById( 'frm_bulk_options' ).value, $info );\n\t\t\tfieldUpdated();\n\t\t} );\n\t}\n\n\tfunction insertBulkPreset( event ) {\n\t\t/*jshint validthis:true */\n\t\tconst opts = JSON.parse( this.getAttribute( 'data-opts' ) );\n\t\tevent.preventDefault();\n\t\tdocument.getElementById( 'frm_bulk_options' ).value = opts.join( '\\n' );\n\t\treturn false;\n\t}\n\n\t//Add new option or \"Other\" option to radio/checkbox/dropdown\n\tfunction addFieldOption() {\n\t\t/*jshint validthis:true */\n\t\tlet fieldId = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' ),\n\t\t\tnewOption = jQuery( '#frm_field_' + fieldId + '_opts .frm_option_template' ).prop( 'outerHTML' ),\n\t\t\toptType = jQuery( this ).data( 'opttype' ),\n\t\t\toptKey = 0,\n\t\t\toldKey = '000',\n\t\t\tlastKey = getHighestOptKey( fieldId );\n\n\t\tif ( lastKey !== oldKey ) {\n\t\t\toptKey = lastKey + 1;\n\t\t}\n\n\t\t//Update hidden field\n\t\tif ( optType === 'other' ) {\n\t\t\tdocument.getElementById( 'other_input_' + fieldId ).value = 1;\n\n\t\t\t//Hide \"Add Other\" option now if this is radio field\n\t\t\tconst ftype = jQuery( this ).data( 'ftype' );\n\t\t\tif ( ftype === 'radio' || ftype === 'select' ) {\n\t\t\t\tjQuery( this ).fadeOut( 'slow' );\n\t\t\t}\n\n\t\t\tconst data = {\n\t\t\t\taction: 'frm_add_field_option',\n\t\t\t\tfield_id: fieldId,\n\t\t\t\topt_key: optKey,\n\t\t\t\topt_type: optType,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t};\n\t\t\tjQuery.post( ajaxurl, data, function( msg ) {\n\t\t\t\tjQuery( document.getElementById( 'frm_field_' + fieldId + '_opts' ) ).append( msg );\n\t\t\t\tresetDisplayedOpts( fieldId );\n\t\t\t} );\n\t\t} else {\n\t\t\tnewOption = newOption.replace( new RegExp( 'optkey=\"' + oldKey + '\"', 'g' ), 'optkey=\"' + optKey + '\"' );\n\t\t\tnewOption = newOption.replace( new RegExp( '-' + oldKey + '_', 'g' ), '-' + optKey + '_' );\n\t\t\tnewOption = newOption.replace( new RegExp( '-' + oldKey + '\"', 'g' ), '-' + optKey + '\"' );\n\t\t\tnewOption = newOption.replace( new RegExp( '\\\\[' + oldKey + '\\\\]', 'g' ), '[' + optKey + ']' );\n\t\t\tnewOption = newOption.replace( 'frm_hidden frm_option_template', '' );\n\t\t\tnewOption = { newOption };\n\t\t\taddSaveAndDragIconsToOption( fieldId, newOption );\n\t\t\tthis.closest( '.frm_single_option' ).after( newOption.newOption );\n\t\t\tresetDisplayedOpts( fieldId );\n\t\t}\n\n\t\t// Make sure all remove buttons are enabled\n\t\tthis.closest( '.frm_sortable_field_opts' )?.querySelectorAll( '.frm_remove_tag.frm_disabled' )?.\n\t\t\tforEach( button => button.classList.remove( 'frm_disabled' ) );\n\n\t\tfieldUpdated();\n\t}\n\n\tfunction getHighestOptKey( fieldId ) {\n\t\tlet i = 0,\n\t\t\toptKey = 0,\n\t\t\topts = jQuery( '#frm_field_' + fieldId + '_opts li' ),\n\t\t\tlastKey = 0;\n\n\t\tfor ( i; i < opts.length; i++ ) {\n\t\t\toptKey = opts[ i ].getAttribute( 'data-optkey' );\n\t\t\tif ( opts.length === 1 ) {\n\t\t\t\treturn optKey;\n\t\t\t}\n\t\t\tif ( optKey !== '000' ) {\n\t\t\t\toptKey = optKey.replace( 'other_', '' );\n\t\t\t\toptKey = parseInt( optKey, 10 );\n\t\t\t}\n\n\t\t\tif ( ! isNaN( lastKey ) && ( optKey > lastKey || lastKey === '000' ) ) {\n\t\t\t\tlastKey = optKey;\n\t\t\t}\n\t\t}\n\n\t\treturn lastKey;\n\t}\n\n\tfunction toggleMultSel() {\n\t\t/*jshint validthis:true */\n\t\tconst fieldId = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' );\n\t\ttoggleMultiSelect( fieldId, this.value );\n\t}\n\n\tfunction toggleMultiSelect( fieldId, value ) {\n\t\tconst setting = jQuery( '.frm_multiple_cont_' + fieldId );\n\t\tif ( value === 'select' ) {\n\t\t\tsetting.fadeIn( 'fast' );\n\t\t} else {\n\t\t\tsetting.fadeOut( 'fast' );\n\t\t}\n\t}\n\n\tfunction toggleSepValues() {\n\t\t/*jshint validthis:true */\n\t\tconst fieldId = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' );\n\t\ttoggle( jQuery( '.field_' + fieldId + '_option_key' ) );\n\t\tjQuery( '.field_' + fieldId + '_option' ).toggleClass( 'frm_with_key' );\n\t}\n\n\tfunction toggleImageOptions() {\n\t\t/*jshint validthis:true */\n\t\tlet hasImageOptions, imageSize,\n\t\t\t$field = jQuery( this ).closest( '.frm-single-settings' ),\n\t\t\tfieldId = $field.data( 'fid' ),\n\t\t\tdisplayField = document.getElementById( 'frm_field_id_' + fieldId );\n\n\t\trefreshOptionDisplayNow( jQuery( this ) );\n\n\t\ttoggle( jQuery( '.field_' + fieldId + '_image_id' ) );\n\t\ttoggle( jQuery( '.frm_toggle_image_options_' + fieldId ) );\n\t\ttoggle( jQuery( '.frm_image_size_' + fieldId ) );\n\t\ttoggle( jQuery( '.frm_alignment_' + fieldId ) );\n\t\ttoggle( jQuery( '.frm-add-other#frm_add_field_' + fieldId ) );\n\n\t\thasImageOptions = imagesAsOptions( fieldId );\n\n\t\tif ( hasImageOptions ) {\n\t\t\tsetAlignment( fieldId, 'inline' );\n\t\t\tremoveImageSizeClasses( displayField );\n\t\t\timageSize = getImageOptionSize( fieldId );\n\t\t\tdisplayField.classList.add( 'frm_image_options' );\n\t\t\tdisplayField.classList.add( 'frm_image_size_' + imageSize );\n\t\t\t$field.find( '.frm-bulk-edit-link' ).hide();\n\t\t} else {\n\t\t\tdisplayField.classList.remove( 'frm_image_options' );\n\t\t\tremoveImageSizeClasses( displayField );\n\t\t\tsetAlignment( fieldId, 'block' );\n\t\t\t$field.find( '.frm-bulk-edit-link' ).show();\n\t\t}\n\n\t\t/**\n\t\t * Fires when image options are toggled for a field.\n\t\t *\n\t\t * @param {HTMLElement} field           The field element.\n\t\t * @param {boolean}     hasImageOptions Whether the field has image options enabled.\n\t\t */\n\t\twp.hooks.doAction( 'frm_image_options_toggled', $field[ 0 ], hasImageOptions );\n\t}\n\n\tfunction removeImageSizeClasses( field ) {\n\t\tfield.classList.remove( 'frm_image_size_', 'frm_image_size_small', 'frm_image_size_medium', 'frm_image_size_large', 'frm_image_size_xlarge' );\n\t}\n\n\tfunction setAlignment( fieldId, alignment ) {\n\t\tjQuery( '#field_options_align_' + fieldId ).val( alignment ).trigger( 'change' );\n\t}\n\n\tfunction setImageSize() {\n\t\tconst $field = jQuery( this ).closest( '.frm-single-settings' ),\n\t\t\tfieldId = $field.data( 'fid' ),\n\t\t\tdisplayField = document.getElementById( 'frm_field_id_' + fieldId );\n\n\t\trefreshOptionDisplay();\n\n\t\tif ( imagesAsOptions( fieldId ) ) {\n\t\t\tremoveImageSizeClasses( displayField );\n\t\t\tdisplayField.classList.add( 'frm_image_options' );\n\t\t\tdisplayField.classList.add( 'frm_image_size_' + getImageOptionSize( fieldId ) );\n\t\t}\n\t}\n\n\tfunction refreshOptionDisplayNow( object ) {\n\t\tconst $field = object.closest( '.frm-single-settings' ),\n\t\t\tfieldID = $field.data( 'fid' );\n\t\tjQuery( '.field_' + fieldID + '_option' ).trigger( 'change' );\n\t}\n\n\tfunction refreshOptionDisplay() {\n\t\t/*jshint validthis:true */\n\t\trefreshOptionDisplayNow( jQuery( this ) );\n\t}\n\n\tfunction addImageToOption( event ) {\n\t\tconst imagePreview = event.target.closest( '.frm_image_preview_wrapper' );\n\n\t\tevent.preventDefault();\n\n\t\twp.media.model.settings.post.id = 0;\n\n\t\tconst fileFrame = wp.media.frames.file_frame = wp.media( {\n\t\t\tmultiple: false,\n\t\t\tlibrary: {\n\t\t\t\ttype: [ 'image' ]\n\t\t\t}\n\t\t} );\n\n\t\tfileFrame.on( 'select', function() {\n\t\t\tconst attachment = fileFrame.state().get( 'selection' ).first().toJSON();\n\t\t\tconst img = imagePreview.querySelector( 'img' );\n\n\t\t\timg.setAttribute( 'src', attachment.url );\n\t\t\timg.classList.remove( 'frm_hidden' );\n\t\t\timg.removeAttribute( 'srcset' ); // Prevent the old image from sticking around.\n\n\t\t\timagePreview.querySelector( '.frm_image_preview_frame' ).style.display = 'block';\n\t\t\timagePreview.querySelector( '.frm_image_preview_title' ).textContent = attachment.filename;\n\t\t\timagePreview.querySelector( '.frm_choose_image_box' ).style.display = 'none';\n\n\t\t\tconst $imagePreview = jQuery( imagePreview );\n\t\t\t$imagePreview.siblings( 'input[name*=\"[label]\"]' ).data( 'frmimgurl', attachment.url );\n\t\t\t$imagePreview.find( 'input.frm_image_id' ).val( attachment.id ).trigger( 'change' );\n\t\t\twp.media.model.settings.post.id = 0;\n\t\t} );\n\n\t\tfileFrame.open();\n\t}\n\n\tfunction removeImageFromOption( event ) {\n\t\tconst $this = jQuery( this ),\n\t\t\tpreviewWrapper = $this.closest( '.frm_image_preview_wrapper' );\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tpreviewWrapper.find( 'img' ).attr( 'src', '' );\n\t\tpreviewWrapper.find( '.frm_image_preview_frame' ).hide();\n\t\tpreviewWrapper.find( '.frm_choose_image_box' ).show();\n\t\tpreviewWrapper.find( 'input.frm_image_id' ).val( 0 ).trigger( 'change' );\n\t}\n\n\tfunction toggleMultiselect() {\n\t\t/*jshint validthis:true */\n\t\tconst dropdown = jQuery( this ).closest( 'li' ).find( '.frm_form_fields select' );\n\t\tif ( this.checked ) {\n\t\t\tdropdown.attr( 'multiple', 'multiple' );\n\t\t} else {\n\t\t\tdropdown.removeAttr( 'multiple' );\n\t\t}\n\t}\n\n\t/**\n\t * Allow typing on form switcher click without an extra click to search.\n\t */\n\tfunction focusSearchBox() {\n\t\tconst searchBox = document.getElementById( 'dropform-search-input' );\n\t\tif ( searchBox !== null ) {\n\t\t\tsetTimeout( function() {\n\t\t\t\tsearchBox.focus();\n\t\t\t}, 100 );\n\t\t}\n\t}\n\n\t/**\n\t * Dismiss a warning message and send an AJAX request to update the dismissal state.\n\t *\n\t * @since 6.3\n\t *\n\t * @param {Event} event The event object associated with the click on the dismiss icon.\n\t */\n\tfunction dismissWarningMessage( event ) {\n\t\tconst target = event.target;\n\n\t\tconst warningEl = target.closest( '.frm_warning_style' );\n\t\tjQuery( warningEl ).fadeOut( 400, () => warningEl.remove() );\n\n\t\tconst action = target.dataset.action;\n\t\tconst formData = new FormData();\n\t\tdoJsonPost( action, formData );\n\t}\n\n\t/**\n\t * If a field is clicked in the builder, prevent inputs from changing.\n\t */\n\tfunction stopFieldFocus( e ) {\n\t\te.preventDefault();\n\t}\n\n\t/**\n\t * Delete a field option.\n\t */\n\tfunction deleteFieldOption() {\n\t\tconst parentLi = this.parentNode;\n\t\tconst parentUl = parentLi.parentNode;\n\n\t\t// If only 2 visible options, add disabled class to the other delete button\n\t\tconst visibleOptions = parentUl.querySelectorAll( 'li:not(.frm_hidden)' );\n\t\tif ( visibleOptions.length === 2 ) {\n\t\t\tArray.from( visibleOptions )\n\t\t\t\t.find( li => li !== parentLi )\n\t\t\t\t.querySelector( '.frm_remove_tag' )?.classList.add( 'frm_disabled' );\n\t\t}\n\n\t\t/*jshint validthis:true */\n\t\tlet otherInput,\n\t\t\tfieldId = this.getAttribute( 'data-fid' );\n\n\t\tjQuery( parentLi ).fadeOut( 'fast', function() {\n\t\t\twp.hooks.doAction( 'frm_before_delete_field_option', this );\n\t\t\tjQuery( parentLi ).remove();\n\n\t\t\tconst hasOther = jQuery( parentUl ).find( '.frm_other_option' );\n\t\t\tif ( hasOther.length < 1 ) {\n\t\t\t\totherInput = document.getElementById( 'other_input_' + fieldId );\n\t\t\t\tif ( otherInput !== null ) {\n\t\t\t\t\totherInput.value = 0;\n\t\t\t\t}\n\t\t\t\tjQuery( '#other_button_' + fieldId ).fadeIn( 'fast' );\n\t\t\t}\n\t\t} );\n\t\tfieldUpdated();\n\t}\n\n\t/**\n\t * If a radio button is set as default, allow a click to\n\t * deselect it.\n\t */\n\tfunction maybeUncheckRadio() {\n\t\tlet $self, uncheck, unbind, up;\n\n\t\t/*jshint validthis:true */\n\t\t$self = jQuery( this );\n\t\tif ( $self.is( ':checked' ) ) {\n\t\t\tuncheck = function() {\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t$self.prop( 'checked', false );\n\t\t\t\t}, 0 );\n\t\t\t};\n\t\t\tunbind = function() {\n\t\t\t\t$self.off( 'mouseup', up );\n\t\t\t};\n\t\t\tup = function() {\n\t\t\t\tuncheck();\n\t\t\t\tunbind();\n\t\t\t};\n\t\t\t$self.on( 'mouseup', up );\n\t\t\t$self.one( 'mouseout', unbind );\n\t\t}\n\t}\n\n\t/**\n\t * If the field option has the default text, clear it out on click.\n\t */\n\tfunction maybeClearOptText() {\n\t\t/*jshint validthis:true */\n\t\tif ( this.value === frmAdminJs.new_option ) {\n\t\t\tthis.setAttribute( 'data-value-on-focus', this.value );\n\t\t\tthis.value = '';\n\t\t}\n\t}\n\n\tfunction confirmFieldsDeleteMessage( numberOfFields ) {\n\t\t/* translators: %1$s: Number of fields that are selected to be deleted. */\n\t\treturn sprintf( __( 'Are you sure you want to delete these %1$s selected field(s)?', 'formidable' ), numberOfFields );\n\t}\n\n\tfunction clickDeleteField() {\n\t\t/*jshint validthis:true */\n\t\tlet confirmMsg = frmAdminJs.conf_delete,\n\t\t\tmaybeDivider = this.parentNode.parentNode.parentNode.parentNode.parentNode,\n\t\t\tli = maybeDivider.parentNode,\n\t\t\tfield = jQuery( this ).closest( 'li.form-field' ),\n\t\t\tfieldId = field.data( 'fid' );\n\n\t\tif ( field.data( 'ftype' ) === 'divider' ) {\n\t\t\tconst fieldBoxes = document.querySelectorAll( '.frm-field-group-hover-target .start_divider .frm_field_box' );\n\t\t\tlet fieldIdsToDelete = 0;\n\t\t\tfieldBoxes.forEach( fieldBox => {\n\t\t\t\tconst fieldsInsideFieldBox = fieldBox.querySelectorAll( 'li.form-field' );\n\t\t\t\tif ( fieldsInsideFieldBox ) {\n\t\t\t\t\tfieldIdsToDelete += fieldsInsideFieldBox.length;\n\t\t\t\t}\n\t\t\t} );\n\t\t\tif ( fieldIdsToDelete ) {\n\t\t\t\tconfirmMsg = confirmFieldsDeleteMessage( ++fieldIdsToDelete );\n\t\t\t}\n\t\t}\n\n\t\tif ( li.classList.contains( 'frm-section-collapsed' ) || li.classList.contains( 'frm-page-collapsed' ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If deleting a section, use a special message.\n\t\tif ( maybeDivider.className === 'divider_section_only' ) {\n\t\t\tconfirmMsg = frmAdminJs.conf_delete_sec;\n\t\t}\n\n\t\tthis.setAttribute( 'data-frmverify', confirmMsg );\n\t\tthis.setAttribute( 'data-frmverify-btn', 'frm-button-red' );\n\t\tthis.setAttribute( 'data-deletefield', fieldId );\n\n\t\tcloseOpenFieldDropdowns();\n\n\t\tconfirmLinkClick( this );\n\t\treturn false;\n\t}\n\n\tfunction clickSelectField() {\n\t\tthis.closest( 'li.form-field' ).click();\n\t}\n\n\tfunction clickDeleteFieldGroup() {\n\t\tlet hoverTarget, decoy;\n\n\t\thoverTarget = document.querySelector( '.frm-field-group-hover-target' );\n\t\tif ( null === hoverTarget ) {\n\t\t\treturn;\n\t\t}\n\n\t\thoverTarget.classList.add( 'frm-selected-field-group' );\n\n\t\tdecoy = document.createElement( 'div' );\n\t\tdecoy.classList.add( 'frm-delete-field-groups', 'frm_hidden' );\n\t\tdocument.body.appendChild( decoy );\n\t\tdecoy.click();\n\t}\n\n\tfunction duplicateFieldGroup() {\n\t\tconst hoverTarget = document.querySelector( '.frm-field-group-hover-target' );\n\t\tif ( null === hoverTarget ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst newRowId = 'frm_field_group_' + getAutoId();\n\t\tconst placeholderUlChild = document.createTextNode( '' );\n\t\twrapFieldLiInPlace( placeholderUlChild );\n\n\t\tconst newRow = jQuery( placeholderUlChild ).closest( 'li' ).get( 0 );\n\t\tnewRow.classList.add( 'frm_hidden' );\n\n\t\tconst newRowUl = newRow.querySelector( 'ul' );\n\t\tnewRowUl.id = newRowId;\n\n\t\tjQuery( hoverTarget.closest( 'li.frm_field_box' ) ).after( newRow );\n\n\t\tconst $fields = getFieldsInRow( jQuery( hoverTarget ) );\n\t\tconst syncDetails = [];\n\t\tconst injectedCloneOptions = [];\n\n\t\tconst expectedLength = $fields.length;\n\t\tconst originalFieldIdByDuplicatedFieldId = {};\n\n\t\tlet duplicatedCount = 0;\n\n\t\tjQuery( newRow ).on(\n\t\t\t'frm_added_duplicated_field_to_row',\n\t\t\tfunction( _, args ) {\n\t\t\t\toriginalFieldIdByDuplicatedFieldId[ jQuery( args.duplicatedFieldHtml ).attr( 'data-fid' ) ] = args.originalFieldId;\n\n\t\t\t\tif ( expectedLength > ++duplicatedCount ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst $newRowUl = jQuery( newRowUl );\n\t\t\t\tconst $duplicatedFields = getFieldsInRow( $newRowUl );\n\n\t\t\t\tinjectedCloneOptions.forEach(\n\t\t\t\t\tfunction( cloneOption ) {\n\t\t\t\t\t\tcloneOption.remove();\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tfor ( let index = 0; index < expectedLength; ++index ) {\n\t\t\t\t\t$newRowUl.append( $newRowUl.children( 'li.form-field[frm-field-order=\"' + index + '\"]' ) );\n\t\t\t\t}\n\n\t\t\t\tsyncLayoutClasses( $duplicatedFields.first(), syncDetails );\n\t\t\t\tnewRow.classList.remove( 'frm_hidden' );\n\t\t\t\tupdateFieldOrder();\n\n\t\t\t\tgetFieldsInRow( $newRowUl ).each(\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tmaybeDuplicateUnsavedSettings( originalFieldIdByDuplicatedFieldId[ this.getAttribute( 'data-fid' ) ], jQuery( this ).prop( 'outerHTML' ) );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\n\t\t$fields.each(\n\t\t\tfunction( index ) {\n\t\t\t\tlet cloneOption;\n\t\t\t\tcloneOption = document.createElement( 'li' );\n\t\t\t\tcloneOption.classList.add( 'frm_clone_field' );\n\t\t\t\tcloneOption.setAttribute( 'frm-target-row-id', newRowId );\n\t\t\t\tcloneOption.setAttribute( 'frm-field-order', index );\n\t\t\t\tthis.appendChild( cloneOption );\n\t\t\t\tcloneOption.click();\n\t\t\t\tinjectedCloneOptions.push( cloneOption );\n\t\t\t\tsyncDetails.push( getSizeOfLayoutClass( getLayoutClassName( this.classList ) ) );\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction clickFieldGroupLayout() {\n\t\tlet hoverTarget, sizeOfFieldGroup, popupWrapper;\n\n\t\thoverTarget = document.querySelector( '.frm-field-group-hover-target' );\n\n\t\tif ( null === hoverTarget ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdeselectFields();\n\n\t\tsizeOfFieldGroup = getSizeOfFieldGroupFromChildElement( hoverTarget.querySelector( 'li.form-field' ) );\n\n\t\thoverTarget.classList.add( 'frm-has-open-field-group-popup' );\n\t\tjQuery( document ).on( 'click', '#frm_builder_page', destroyFieldGroupPopupOnOutsideClick );\n\n\t\tpopupWrapper = div();\n\t\tpopupWrapper.style.position = 'relative';\n\t\tpopupWrapper.appendChild( getFieldGroupPopup( sizeOfFieldGroup, this ) );\n\t\tthis.parentNode.appendChild( popupWrapper );\n\n\t\tconst firstLayoutOption = popupWrapper.querySelector( '.frm-row-layout-option' );\n\t\tif ( firstLayoutOption ) {\n\t\t\tfirstLayoutOption.focus();\n\t\t}\n\t}\n\n\tfunction destroyFieldGroupPopupOnOutsideClick( event ) {\n\t\tif ( event.target.classList.contains( 'frm-custom-field-group-layout' ) || event.target.classList.contains( 'frm-cancel-custom-field-group-layout' ) ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( ! jQuery( event.target ).closest( '#frm_field_group_controls' ).length && ! jQuery( event.target ).closest( '#frm_field_group_popup' ).length ) {\n\t\t\tdestroyFieldGroupPopup();\n\t\t}\n\t}\n\n\tfunction getSizeOfFieldGroupFromChildElement( element ) {\n\t\tconst $ul = jQuery( element ).closest( 'ul' );\n\t\tif ( $ul.length ) {\n\t\t\treturn getFieldsInRow( $ul ).length;\n\t\t}\n\t\treturn getSelectedFieldCount();\n\t}\n\n\tfunction getFieldGroupPopup( sizeOfFieldGroup, childElement ) {\n\t\tlet popup, wrapper, rowLayoutOptions, ul;\n\n\t\tpopup = document.getElementById( 'frm_field_group_popup' );\n\t\tif ( null === popup ) {\n\t\t\tpopup = div();\n\t\t} else {\n\t\t\tpopup.innerHTML = '';\n\t\t}\n\n\t\tpopup.id = 'frm_field_group_popup';\n\n\t\twrapper = div();\n\t\twrapper.style.padding = '0 24px 12px';\n\t\twrapper.appendChild( getRowLayoutTitle() );\n\n\t\trowLayoutOptions = getRowLayoutOptions( sizeOfFieldGroup );\n\n\t\tul = childElement.closest( 'ul.frm_sorting' );\n\t\tif ( null !== ul ) {\n\t\t\tmaybeMarkRowLayoutAsActive( ul, rowLayoutOptions );\n\t\t}\n\n\t\twrapper.appendChild( rowLayoutOptions );\n\n\t\tpopup.appendChild( wrapper );\n\t\tpopup.appendChild( separator() );\n\n\t\tpopup.appendChild( getCustomLayoutOption() );\n\t\tpopup.appendChild( getBreakIntoDifferentRowsOption() );\n\n\t\treturn popup;\n\t}\n\n\tfunction maybeMarkRowLayoutAsActive( activeRow, options ) {\n\t\tlet length, index, currentRow;\n\n\t\tlength = options.children.length;\n\t\tfor ( index = 0; index < length; ++index ) {\n\t\t\tcurrentRow = options.children[ index ];\n\t\t\tif ( rowLayoutsMatch( currentRow, activeRow ) ) {\n\t\t\t\tcurrentRow.classList.add( 'frm-active-row-layout' );\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction separator() {\n\t\treturn document.createElement( 'hr' );\n\t}\n\n\tfunction getCustomLayoutOption() {\n\t\tconst option = div();\n\t\toption.textContent = __( 'Custom layout', 'formidable' );\n\t\tjQuery( option ).prepend( getIconClone( 'frm_gear_svg' ) );\n\t\toption.classList.add( 'frm-custom-field-group-layout' );\n\t\tmakeTabbable( option );\n\t\treturn option;\n\t}\n\n\tfunction makeTabbable( element, ariaLabel ) {\n\t\telement.setAttribute( 'tabindex', 0 );\n\t\telement.setAttribute( 'role', 'button' );\n\t\tif ( 'undefined' !== typeof ariaLabel ) {\n\t\t\telement.setAttribute( 'aria-label', ariaLabel );\n\t\t}\n\t}\n\n\tfunction getIconClone( iconId ) {\n\t\tconst clone = document.getElementById( iconId ).cloneNode( true );\n\t\tclone.id = '';\n\t\treturn clone;\n\t}\n\n\tfunction getBreakIntoDifferentRowsOption() {\n\t\tconst option = div();\n\t\toption.textContent = __( 'Break into rows', 'formidable' );\n\t\tjQuery( option ).prepend( getIconClone( 'frm_break_field_group_svg' ) );\n\t\toption.classList.add( 'frm-break-field-group' );\n\t\tmakeTabbable( option );\n\t\treturn option;\n\t}\n\n\tfunction getRowLayoutTitle() {\n\t\tconst rowLayoutTitle = div();\n\t\trowLayoutTitle.classList.add( 'frm-row-layout-title' );\n\t\trowLayoutTitle.textContent = __( 'Row Layout', 'formidable' );\n\t\treturn rowLayoutTitle;\n\t}\n\n\tfunction getRowLayoutOptions( size ) {\n\t\tlet wrapper, padding;\n\n\t\twrapper = getEmptyGridContainer();\n\t\tif ( 5 !== size ) {\n\t\t\twrapper.appendChild( getRowLayoutOption( size, 'even' ) );\n\t\t}\n\t\tif ( size % 2 === 1 ) {\n\t\t\t// only include the middle option for odd numbers because even doesn't make a lot of sense.\n\t\t\twrapper.appendChild( getRowLayoutOption( size, 'middle' ) );\n\t\t}\n\t\tif ( size < 6 ) {\n\t\t\twrapper.appendChild( getRowLayoutOption( size, 'left' ) );\n\t\t\twrapper.appendChild( getRowLayoutOption( size, 'right' ) );\n\t\t} else {\n\t\t\tpadding = div();\n\t\t\tpadding.classList.add( 'frm_fourth' );\n\t\t\twrapper.prepend( padding );\n\t\t}\n\n\t\treturn wrapper;\n\t}\n\n\tfunction getRowLayoutOption( size, type ) {\n\t\tlet option, useClass;\n\n\t\toption = div();\n\t\toption.classList.add( 'frm-row-layout-option' );\n\t\tmakeTabbable( option, type );\n\n\t\tswitch ( size ) {\n\t\t\tcase 6:\n\t\t\t\tuseClass = 'frm_half';\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tuseClass = 'frm_third';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tuseClass = size % 2 === 1 ? 'frm_fourth' : 'frm_third';\n\t\t\t\tbreak;\n\t\t}\n\n\t\toption.classList.add( useClass );\n\t\toption.setAttribute( 'layout-type', type );\n\n\t\toption.appendChild( getRowForSizeAndType( size, type ) );\n\t\treturn option;\n\t}\n\n\tfunction rowLayoutsMatch( row1, row2 ) {\n\t\treturn getRowLayoutAsKey( row1 ) === getRowLayoutAsKey( row2 );\n\t}\n\n\tfunction getRowLayoutAsKey( row ) {\n\t\tlet $fields, sizes;\n\t\tif ( row.classList.contains( 'frm-row-layout-option' ) ) {\n\t\t\t$fields = jQuery( row ).find( '.frm_grid_container' ).children();\n\t\t} else {\n\t\t\t$fields = getFieldsInRow( jQuery( row ) );\n\t\t}\n\t\tsizes = [];\n\t\t$fields.each(\n\t\t\tfunction() {\n\t\t\t\tsizes.push( getSizeOfLayoutClass( getLayoutClassName( this.classList ) ) );\n\t\t\t}\n\t\t);\n\t\treturn sizes.join( '-' );\n\t}\n\n\tfunction getRowForSizeAndType( size, type ) {\n\t\tlet row, index, block;\n\n\t\trow = getEmptyGridContainer();\n\t\tfor ( index = 0; index < size; ++index ) {\n\t\t\tblock = div();\n\t\t\tblock.classList.add( getClassForBlock( size, type, index ) );\n\t\t\tblock.style.height = '16px';\n\t\t\tblock.style.background = '#9EA9B8';\n\t\t\tblock.style.borderRadius = '1px';\n\t\t\trow.appendChild( block );\n\t\t}\n\n\t\treturn row;\n\t}\n\n\t/**\n\t * @param {number} size  2-6.\n\t * @param {string} type  even, middle, left, or right.\n\t * @param {number} index 0-5.\n\t * @return {string} The class name.\n\t */\n\tfunction getClassForBlock( size, type, index ) {\n\t\tif ( 'even' === type ) {\n\t\t\treturn getEvenClassForSize( size, index );\n\t\t} else if ( 'middle' === type ) {\n\t\t\tif ( 3 === size ) {\n\t\t\t\treturn 1 === index ? 'frm6' : 'frm3';\n\t\t\t}\n\t\t\tif ( 5 === size ) {\n\t\t\t\treturn 2 === index ? 'frm4' : 'frm2';\n\t\t\t}\n\t\t} else if ( 'left' === type ) {\n\t\t\treturn 0 === index ? getLargeClassForSize( size ) : getSmallClassForSize( size );\n\t\t} else if ( 'right' === type ) {\n\t\t\treturn index === size - 1 ? getLargeClassForSize( size ) : getSmallClassForSize( size );\n\t\t}\n\t\treturn 'frm12';\n\t}\n\n\tfunction getEvenClassForSize( size, index ) {\n\t\tif ( -1 !== [ 2, 3, 4, 6 ].indexOf( size ) ) {\n\t\t\treturn getLayoutClassForSize( 12 / size );\n\t\t}\n\t\tif ( 5 === size && 'undefined' !== typeof index ) {\n\t\t\treturn 0 === index ? 'frm4' : 'frm2';\n\t\t}\n\t\treturn 'frm12';\n\t}\n\n\tfunction getSmallClassForSize( size ) {\n\t\tswitch ( size ) {\n\t\t\tcase 2: case 3:\n\t\t\t\treturn 'frm3';\n\t\t\tcase 4:\n\t\t\t\treturn 'frm2';\n\t\t\tcase 5:\n\t\t\t\treturn 'frm2';\n\t\t\tcase 6:\n\t\t\t\treturn 'frm1';\n\t\t}\n\t\treturn 'frm12';\n\t}\n\n\tfunction getLargeClassForSize( size ) {\n\t\tswitch ( size ) {\n\t\t\tcase 2:\n\t\t\t\treturn 'frm9';\n\t\t\tcase 3: case 4:\n\t\t\t\treturn 'frm6';\n\t\t\tcase 5:\n\t\t\t\treturn 'frm4';\n\t\t\tcase 6:\n\t\t\t\treturn 'frm7';\n\t\t}\n\t\treturn 'frm12';\n\t}\n\n\tfunction getEmptyGridContainer() {\n\t\tconst wrapper = div();\n\t\twrapper.classList.add( 'frm_grid_container' );\n\t\treturn wrapper;\n\t}\n\n\t/**\n\t * Handle when a field group layout option (that sets grid classes/column sizing) is selected in the \"Row Layout\" popup.\n\t *\n\t * @return {void}\n\t */\n\tfunction handleFieldGroupLayoutOptionClick() {\n\t\tconst row = document.querySelector( '.frm-field-group-hover-target' );\n\t\tif ( ! row ) {\n\t\t\t// The field group layout options also get clicked when merging multiple rows.\n\t\t\t// The following code isn't required for multiple rows though so just exit early.\n\t\t\treturn;\n\t\t}\n\n\t\tconst type = this.getAttribute( 'layout-type' );\n\t\tsyncLayoutClasses( getFieldsInRow( jQuery( row ) ).first(), type );\n\t\tdestroyFieldGroupPopup();\n\t}\n\n\tfunction handleFieldGroupLayoutOptionInsideMergeClick() {\n\t\tlet $ul, type;\n\t\t$ul = mergeSelectedFieldGroups();\n\t\ttype = this.getAttribute( 'layout-type' );\n\t\tsyncLayoutClasses( getFieldsInRow( $ul ).first(), type );\n\t\tunselectFieldGroups();\n\t}\n\n\tfunction mergeSelectedFieldGroups() {\n\t\tconst $selectedFieldGroups = jQuery( '.frm-selected-field-group' ),\n\t\t\t$firstGroupUl = $selectedFieldGroups.first();\n\t\t$selectedFieldGroups.not( $firstGroupUl ).each(\n\t\t\tfunction() {\n\t\t\t\tgetFieldsInRow( jQuery( this ) ).each(\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tconst previousParent = this.parentNode;\n\t\t\t\t\t\tgetFieldsInRow( $firstGroupUl ).last().after( this );\n\t\t\t\t\t\tif ( ! jQuery( previousParent ).children( 'li.form-field' ).length ) {\n\t\t\t\t\t\t\t// clean up the previous field group if we've removed all of its fields.\n\t\t\t\t\t\t\tpreviousParent.closest( 'li.frm_field_box' ).remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t\tupdateFieldOrder();\n\t\tsyncLayoutClasses( getFieldsInRow( $firstGroupUl ).first() );\n\t\treturn $firstGroupUl;\n\t}\n\n\tfunction customFieldGroupLayoutClick() {\n\t\tlet $fields;\n\t\tif ( null !== this.closest( '.frm-merge-fields-into-row' ) ) {\n\t\t\treturn;\n\t\t}\n\t\t$fields = getFieldsInRow( jQuery( '.frm-field-group-hover-target' ) );\n\t\tsetupCustomLayoutOptions( $fields );\n\t}\n\n\tfunction setupCustomLayoutOptions( $fields ) {\n\t\tlet size, popup, wrapper, layoutClass, inputRow, paddingElement, inputValueOverride, index, inputField, heading, label, buttonsWrapper, cancelButton, saveButton;\n\n\t\tsize = $fields.length;\n\n\t\tpopup = document.getElementById( 'frm_field_group_popup' );\n\t\tpopup.innerHTML = '';\n\n\t\twrapper = div();\n\t\twrapper.style.padding = '0 24px';\n\n\t\tlayoutClass = getEvenClassForSize( 5 === size ? 6 : size );\n\n\t\tinputRow = div();\n\t\tinputRow.style.padding = '20px 0';\n\t\tinputRow.classList.add( 'frm_grid_container' );\n\n\t\tif ( 5 === size ) {\n\t\t\t// add a span to pad the inputs by 1 column, to account for the missing 2 columns.\n\t\t\tpaddingElement = document.createElement( 'span' );\n\t\t\tpaddingElement.classList.add( 'frm1' );\n\t\t\tinputRow.appendChild( paddingElement );\n\t\t}\n\n\t\tinputValueOverride = getSelectedFieldCount() > 0 ? getSizeOfLayoutClass( getEvenClassForSize( size ) ) : false;\n\t\tif ( false !== inputValueOverride && inputValueOverride >= 12 ) {\n\t\t\tinputValueOverride = Math.floor( 12 / size );\n\t\t}\n\n\t\tfor ( index = 0; index < size; ++index ) {\n\t\t\tinputField = document.createElement( 'input' );\n\t\t\tinputField.type = 'text';\n\t\t\tinputField.classList.add( layoutClass );\n\t\t\tinputField.classList.add( 'frm-custom-grid-size-input' );\n\t\t\tinputField.value = false !== inputValueOverride ? inputValueOverride : getSizeOfLayoutClass( getLayoutClassName( $fields.get( index ).classList ) );\n\t\t\tinputRow.appendChild( inputField );\n\t\t}\n\n\t\theading = div();\n\t\theading.classList.add( 'frm-builder-popup-heading' );\n\t\theading.textContent = __( 'Enter number of columns for each field', 'formidable' );\n\n\t\tlabel = div();\n\t\tlabel.classList.add( 'frm-builder-popup-subheading' );\n\t\tlabel.textContent = __( 'Layouts are based on a 12-column grid system', 'formidable' );\n\n\t\twrapper.appendChild( heading );\n\t\twrapper.appendChild( label );\n\n\t\twrapper.appendChild( inputRow );\n\n\t\tbuttonsWrapper = div();\n\t\tbuttonsWrapper.style.textAlign = 'right';\n\n\t\tcancelButton = getSecondaryButton();\n\t\tcancelButton.textContent = __( 'Cancel', 'formidable' );\n\t\tcancelButton.classList.add( 'frm-cancel-custom-field-group-layout' );\n\t\tcancelButton.style.marginRight = '10px';\n\n\t\tsaveButton = getPrimaryButton();\n\t\tsaveButton.textContent = __( 'Save', 'formidable' );\n\t\tsaveButton.classList.add( 'frm-save-custom-field-group-layout' );\n\n\t\tbuttonsWrapper.appendChild( cancelButton );\n\t\tbuttonsWrapper.appendChild( saveButton );\n\n\t\twrapper.appendChild( buttonsWrapper );\n\n\t\tpopup.appendChild( wrapper );\n\n\t\tsetTimeout(\n\t\t\tfunction() {\n\t\t\t\tconst firstInput = popup.querySelector( 'input.frm-custom-grid-size-input' ).focus();\n\t\t\t\tif ( firstInput ) {\n\t\t\t\t\tfirstInput.focus();\n\t\t\t\t}\n\t\t\t},\n\t\t\t0\n\t\t);\n\t}\n\n\tfunction customFieldGroupLayoutInsideMergeClick() {\n\t\t$fields = jQuery( '.frm-selected-field-group li.form-field' );\n\t\tsetupCustomLayoutOptions( $fields );\n\t}\n\n\tfunction getPrimaryButton() {\n\t\tconst button = getButton();\n\t\tbutton.classList.add( 'button-primary', 'frm-button-primary' );\n\t\treturn button;\n\t}\n\n\tfunction getSecondaryButton() {\n\t\tconst button = getButton();\n\t\tbutton.classList.add( 'button-secondary', 'frm-button-secondary' );\n\t\treturn button;\n\t}\n\n\tfunction getButton() {\n\t\tconst button = document.createElement( 'a' );\n\t\tbutton.setAttribute( 'href', '#' );\n\t\tbutton.classList.add( 'button' );\n\t\tbutton.style.textDecoration = 'none';\n\t\treturn button;\n\t}\n\n\tfunction getSizeOfLayoutClass( className ) {\n\t\tswitch ( className ) {\n\t\t\tcase 'frm_half':\n\t\t\t\treturn 6;\n\t\t\tcase 'frm_third':\n\t\t\t\treturn 4;\n\t\t\tcase 'frm_two_thirds':\n\t\t\t\treturn 8;\n\t\t\tcase 'frm_fourth':\n\t\t\t\treturn 3;\n\t\t\tcase 'frm_three_fourths':\n\t\t\t\treturn 9;\n\t\t\tcase 'frm_sixth':\n\t\t\t\treturn 2;\n\t\t}\n\n\t\tif ( 0 === className.indexOf( 'frm' ) ) {\n\t\t\treturn parseInt( className.substr( 3 ) );\n\t\t}\n\n\t\t// Anything missing a layout class should be a full width row.\n\t\treturn 12;\n\t}\n\n\tfunction getLayoutClassName( classList ) {\n\t\tlet classes, index, currentClass;\n\t\tclasses = getLayoutClasses();\n\t\tfor ( index = 0; index < classes.length; ++index ) {\n\t\t\tcurrentClass = classes[ index ];\n\t\t\tif ( classList.contains( currentClass ) ) {\n\t\t\t\treturn currentClass;\n\t\t\t}\n\t\t}\n\t\treturn '';\n\t}\n\n\tfunction getLayoutClassForSize( size ) {\n\t\treturn 'frm' + size;\n\t}\n\n\tfunction breakFieldGroupClick() {\n\t\tconst row = document.querySelector( '.frm-field-group-hover-target' );\n\t\tbreakRow( row );\n\t\tdestroyFieldGroupPopup();\n\t}\n\n\tfunction breakRow( row ) {\n\t\tconst $row = jQuery( row );\n\t\tgetFieldsInRow( $row ).each(\n\t\t\tfunction( index ) {\n\t\t\t\tconst field = this;\n\t\t\t\tif ( 0 !== index ) {\n\t\t\t\t\t$row.parent().after( wrapFieldLi( field ) );\n\t\t\t\t}\n\t\t\t\tstripLayoutFromFields( jQuery( field ) );\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction stripLayoutFromFields( field ) {\n\t\tsyncLayoutClasses( field, 'clear' );\n\t}\n\n\tfunction focusFieldGroupInputOnClick() {\n\t\tthis.select();\n\t}\n\n\tfunction cancelCustomFieldGroupClick() {\n\t\trevertToFieldGroupPopupFirstPage( this );\n\t}\n\n\tfunction revertToFieldGroupPopupFirstPage( triggerElement ) {\n\t\tjQuery( document.getElementById( 'frm_field_group_popup' ) ).replaceWith(\n\t\t\tgetFieldGroupPopup( getSizeOfFieldGroupFromChildElement( triggerElement ), triggerElement )\n\t\t);\n\t}\n\n\tfunction destroyFieldGroupPopup() {\n\t\tlet popup, wrapper;\n\t\tpopup = document.getElementById( 'frm_field_group_popup' );\n\t\tif ( popup === null ) {\n\t\t\treturn;\n\t\t}\n\t\twrapper = document.querySelector( '.frm-has-open-field-group-popup' );\n\t\tif ( null !== wrapper ) {\n\t\t\twrapper.classList.remove( 'frm-has-open-field-group-popup' );\n\t\t\tpopup.parentNode.remove();\n\t\t}\n\t\tjQuery( document ).off( 'click', '#frm_builder_page', destroyFieldGroupPopupOnOutsideClick );\n\t}\n\n\tfunction saveCustomFieldGroupClick() {\n\t\tlet syncDetails, $controls, $ul;\n\n\t\tsyncDetails = [];\n\n\t\tjQuery( document.getElementById( 'frm_field_group_popup' ).querySelectorAll( '.frm_grid_container input' ) )\n\t\t\t.each(\n\t\t\t\tfunction() {\n\t\t\t\t\tsyncDetails.push( parseInt( this.value ) );\n\t\t\t\t}\n\t\t\t);\n\n\t\t$controls = jQuery( document.getElementById( 'frm_field_group_controls' ) );\n\n\t\tif ( $controls.length && 'none' !== $controls.get( 0 ).style.display ) {\n\t\t\tsyncLayoutClasses( getFieldsInRow( jQuery( document.querySelector( '.frm-field-group-hover-target' ) ) ).first(), syncDetails );\n\t\t} else {\n\t\t\t$ul = mergeSelectedFieldGroups();\n\t\t\tsyncLayoutClasses( getFieldsInRow( $ul ).first(), syncDetails );\n\t\t\tunselectFieldGroups();\n\t\t}\n\n\t\tdestroyFieldGroupPopup();\n\t}\n\n\tfunction fieldGroupClick( e ) {\n\t\tmaybeShowFieldGroupMessage();\n\n\t\tif ( 'ul' !== e.originalEvent.target.nodeName.toLowerCase() ) {\n\t\t\t// only continue if the group itself was clicked / ignore when a field is clicked.\n\t\t\treturn;\n\t\t}\n\n\t\tconst hoverTarget = document.querySelector( '.frm-field-group-hover-target' );\n\t\tif ( ! hoverTarget ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst ctrlOrCmdKeyIsDown = e.ctrlKey || e.metaKey;\n\t\tconst shiftKeyIsDown = e.shiftKey;\n\t\tconst groupIsActive = hoverTarget.classList.contains( 'frm-selected-field-group' );\n\t\tconst $selectedFieldGroups = getSelectedFieldGroups();\n\n\t\tlet numberOfSelectedGroups = $selectedFieldGroups.length;\n\n\t\tif ( ctrlOrCmdKeyIsDown || shiftKeyIsDown ) {\n\t\t\t// multi-selecting\n\n\t\t\tconst selectedField = getSelectedField();\n\t\t\tif ( null !== selectedField && ! jQuery( selectedField ).siblings( 'li.form-field' ).length ) {\n\t\t\t\t// count a selected field on its own as a selected field group when multiselecting.\n\t\t\t\tselectedField.parentNode.classList.add( 'frm-selected-field-group' );\n\t\t\t\t++numberOfSelectedGroups;\n\t\t\t}\n\n\t\t\tif ( ctrlOrCmdKeyIsDown ) {\n\t\t\t\tif ( groupIsActive ) {\n\t\t\t\t\t// unselect if holding ctrl or cmd and the group was already active.\n\t\t\t\t\t--numberOfSelectedGroups;\n\t\t\t\t\thoverTarget.classList.remove( 'frm-selected-field-group' );\n\t\t\t\t\tsyncAfterMultiSelect( numberOfSelectedGroups );\n\t\t\t\t\treturn; // exit early to avoid adding back frm-selected-field-group\n\t\t\t\t}\n\n\t\t\t\t++numberOfSelectedGroups;\n\t\t\t} else if ( shiftKeyIsDown && ! groupIsActive ) {\n\t\t\t\t++numberOfSelectedGroups; // include the one we're selecting right now.\n\t\t\t\tconst $firstGroup = $selectedFieldGroups.first();\n\n\t\t\t\tlet $range;\n\t\t\t\tif ( $firstGroup.parent().index() < jQuery( hoverTarget.parentNode ).index() ) {\n\t\t\t\t\t$range = $firstGroup.parent().nextUntil( hoverTarget.parentNode );\n\t\t\t\t} else {\n\t\t\t\t\t$range = $firstGroup.parent().prevUntil( hoverTarget.parentNode );\n\t\t\t\t}\n\n\t\t\t\t$range.each(\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tconst $fieldGroup = jQuery( this ).closest( 'li' ).find( 'ul.frm_sorting' );\n\t\t\t\t\t\tif ( ! $fieldGroup.hasClass( 'frm-selected-field-group' ) ) {\n\t\t\t\t\t\t\t++numberOfSelectedGroups;\n\t\t\t\t\t\t\t$fieldGroup.addClass( 'frm-selected-field-group' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\t// not multi-selecting\n\t\t\tunselectFieldGroups();\n\t\t\tnumberOfSelectedGroups = 1;\n\t\t}\n\n\t\thoverTarget.classList.add( 'frm-selected-field-group' );\n\t\tsyncAfterMultiSelect( numberOfSelectedGroups );\n\n\t\tmaybeHideFieldGroupMessage();\n\n\t\tjQuery( document ).off( 'click', unselectFieldGroups );\n\t\tjQuery( document ).on( 'click', unselectFieldGroups );\n\t}\n\n\t/**\n\t * Hide the field group message by manipulating classes.\n\t *\n\t * @param {Element} fieldGroupMessage The field group message element.\n\t * @return {void}\n\t */\n\tfunction hideFieldGroupMessage( fieldGroupMessage ) {\n\t\tif ( ! fieldGroupMessage ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfieldGroupMessage.classList.add( 'frm_hidden' );\n\t\tfieldGroupMessage.classList.remove( 'frm-fadein-up-back' );\n\t}\n\n\t/**\n\t * Show the field group message by manipulating classes.\n\t *\n\t * @param {Element} fieldGroupMessage The field group message element.\n\t * @return {void}\n\t */\n\tfunction showFieldGroupMessage( fieldGroupMessage ) {\n\t\tif ( ! fieldGroupMessage ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfieldGroupMessage.classList.remove( 'frm_hidden' );\n\t\tfieldGroupMessage.classList.add( 'frm-fadein-up-back' );\n\t}\n\n\t/**\n\t * Maybe show a message if there are at least two rows.\n\t *\n\t * @return {void}\n\t */\n\tfunction maybeShowFieldGroupMessage() {\n\t\tlet fieldGroupMessage = document.getElementById( 'frm-field-group-message' );\n\t\tconst rows = document.querySelectorAll( '.edit_form_item:not(.edit_field_type_end_divider)' );\n\n\t\tif ( rows.length < 2 ) {\n\t\t\thideFieldGroupMessage( fieldGroupMessage );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( fieldGroupMessage ) {\n\t\t\tshowFieldGroupMessage( fieldGroupMessage );\n\t\t\treturn;\n\t\t}\n\n\t\tfieldGroupMessage = div( {\n\t\t\tid: 'frm-field-group-message',\n\t\t\tclassName: 'frm-flex-center frm-fadein-up-back',\n\t\t\tchildren: [\n\t\t\t\tspan( {\n\t\t\t\t\tid: 'frm-field-group-message-dismiss',\n\t\t\t\t\tclassName: 'frm-flex-center',\n\t\t\t\t\tchild: svg( { href: '#frm_close_icon' } )\n\t\t\t\t} )\n\t\t\t]\n\t\t} );\n\n\t\t// Insert the field group into the DOM\n\t\tdocument.getElementById( 'post-body-content' ).appendChild( fieldGroupMessage );\n\n\t\t// Get and add the field group message text\n\t\tconst messageText = getFieldGroupMessageText();\n\t\tfieldGroupMessage.prepend( messageText );\n\n\t\t// Set up a click event listener\n\t\tdocument.getElementById( 'frm-field-group-message-dismiss' ).addEventListener( 'click', () => {\n\t\t\thideFieldGroupMessage( document.getElementById( 'frm-field-group-message' ) );\n\t\t} );\n\t}\n\n\t/**\n\t * Get a span element with text about selecting multiple fields.\n\t *\n\t * @return {HTMLElement} A span element with the message and style classes.\n\t */\n\tfunction getFieldGroupMessageText() {\n\t\tconst text = document.createElement( 'span' );\n\t\ttext.classList.add( 'frm-field-group-message-text', 'frm-flex-center' );\n\t\ttext.innerHTML = sprintf(\n\t\t\t/* translators: %1$s: Start span HTML, %2$s: end span HTML */\n\t\t\tfrm_admin_js.holdShiftMsg, // eslint-disable-line camelcase\n\t\t\t'<span class=\"frm-meta-tag frm-flex-center\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-shift\" viewBox=\"0 0 16 16\"><path d=\"M7.3 2a1 1 0 0 1 1.4 0l6.4 6.8a1 1 0 0 1-.8 1.7h-2.8v3a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-3H1.7a1 1 0 0 1-.8-1.7L7.3 2zm7 7.5L8 2.7 1.7 9.5h2.8a1 1 0 0 1 1 1v3h5v-3a1 1 0 0 1 1-1h2.8z\"/></svg>',\n\t\t\t'</span>'\n\t\t);\n\n\t\treturn text;\n\t}\n\n\t/**\n\t * Maybe hide the field group message based on the number of selected rows.\n\t *\n\t * @return {void}\n\t */\n\tfunction maybeHideFieldGroupMessage() {\n\t\tconst selectedRowCount = document.querySelectorAll( '.frm-selected-field-group' ).length;\n\t\tif ( selectedRowCount < 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst fieldGroupMessage = document.getElementById( 'frm-field-group-message' );\n\t\thideFieldGroupMessage( fieldGroupMessage );\n\t}\n\n\tfunction getSelectedField() {\n\t\treturn document.getElementById( 'frm-show-fields' ).querySelector( 'li.form-field.selected' );\n\t}\n\n\tfunction getSelectedFieldGroups() {\n\t\tconst $fieldGroups = jQuery( '.frm-selected-field-group' );\n\t\tif ( $fieldGroups.length ) {\n\t\t\treturn $fieldGroups;\n\t\t}\n\n\t\tconst selectedField = getSelectedField();\n\t\tif ( selectedField ) {\n\t\t\t// If there is only one field in a group and the field is selected, consider the field's group as selected for multi-select.\n\t\t\tconst selectedFieldGroup = selectedField.closest( 'ul' );\n\t\t\tif ( selectedFieldGroup && 1 === getFieldsInRow( jQuery( selectedFieldGroup ) ).length ) {\n\t\t\t\tselectedFieldGroup.classList.add( 'frm-selected-field-group' );\n\t\t\t\treturn jQuery( selectedFieldGroup );\n\t\t\t}\n\t\t}\n\n\t\treturn jQuery();\n\t}\n\n\tfunction syncAfterMultiSelect( numberOfSelectedGroups ) {\n\t\tclearSettingsBox( true ); // unselect any fields if one is selected.\n\t\tif ( numberOfSelectedGroups >= 2 || ( 1 === numberOfSelectedGroups && selectedGroupHasMultipleFields() ) ) {\n\t\t\taddFieldMultiselectPopup();\n\t\t} else {\n\t\t\tmaybeRemoveMultiselectPopup();\n\t\t}\n\t\tmaybeRemoveGroupHoverTarget();\n\t}\n\n\tfunction selectedGroupHasMultipleFields() {\n\t\treturn getFieldsInRow( jQuery( document.querySelector( '.frm-selected-field-group' ) ) ).length > 1;\n\t}\n\n\tfunction unselectFieldGroups( event ) {\n\t\tif ( 'undefined' !== typeof event ) {\n\t\t\tif ( null !== event.originalEvent.target.closest( '#frm-show-fields' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( event.originalEvent.target.classList.contains( 'frm-merge-fields-into-row' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( null !== event.originalEvent.target.closest( '.frm-merge-fields-into-row' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( event.originalEvent.target.classList.contains( 'frm-custom-field-group-layout' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( event.originalEvent.target.classList.contains( 'frm-cancel-custom-field-group-layout' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tjQuery( '.frm-selected-field-group' ).removeClass( 'frm-selected-field-group' );\n\t\tjQuery( document ).off( 'click', unselectFieldGroups );\n\t\tmaybeRemoveMultiselectPopup();\n\t}\n\n\tfunction maybeRemoveMultiselectPopup() {\n\t\tconst popup = document.getElementById( 'frm_field_multiselect_popup' );\n\t\tif ( null !== popup ) {\n\t\t\tpopup.remove();\n\t\t}\n\t}\n\n\tfunction addFieldMultiselectPopup() {\n\t\tgetFieldMultiselectPopup();\n\t}\n\n\tfunction getFieldMultiselectPopup() {\n\t\tlet popup, mergeOption, caret, verticalSeparator, deleteOption;\n\n\t\tpopup = document.getElementById( 'frm_field_multiselect_popup' );\n\n\t\tif ( null !== popup ) {\n\t\t\tpopup.classList.toggle( 'frm-unmergable', ! selectedFieldsAreMergeable() );\n\t\t\treturn popup;\n\t\t}\n\n\t\tpopup = div();\n\t\tpopup.id = 'frm_field_multiselect_popup';\n\t\tif ( ! selectedFieldsAreMergeable() ) {\n\t\t\tpopup.classList.add( 'frm-unmergable' );\n\t\t}\n\n\t\tmergeOption = div();\n\t\tmergeOption.classList.add( 'frm-merge-fields-into-row' );\n\t\tmergeOption.textContent = __( 'Merge into row', 'formidable' );\n\n\t\tcaret = document.createElement( 'a' );\n\t\tcaret.style.marginLeft = '5px';\n\t\tcaret.classList.add( 'frm_icon_font', 'frm_arrowdown6_icon' );\n\t\tcaret.setAttribute( 'href', '#' );\n\t\tmergeOption.appendChild( caret );\n\n\t\tpopup.appendChild( mergeOption );\n\n\t\tverticalSeparator = div();\n\t\tverticalSeparator.classList.add( 'frm-multiselect-popup-separator' );\n\t\tpopup.appendChild( verticalSeparator );\n\n\t\tdeleteOption = div();\n\t\tdeleteOption.classList.add( 'frm-delete-field-groups' );\n\t\tdeleteOption.appendChild( getIconClone( 'frm_trash_svg' ) );\n\t\tpopup.appendChild( deleteOption );\n\n\t\tdocument.getElementById( 'post-body-content' ).appendChild( popup );\n\n\t\tjQuery( popup ).hide().fadeIn();\n\n\t\treturn popup;\n\t}\n\n\tfunction selectedFieldsAreMergeable() {\n\t\tlet selectedFieldGroups, totalFieldCount, length, index, fieldGroup;\n\t\tselectedFieldGroups = document.querySelectorAll( '.frm-selected-field-group' );\n\t\tlength = selectedFieldGroups.length;\n\t\tif ( 1 === length ) {\n\t\t\treturn false;\n\t\t}\n\t\ttotalFieldCount = 0;\n\t\tfor ( index = 0; index < length; ++index ) {\n\t\t\tfieldGroup = selectedFieldGroups[ index ];\n\t\t\tif ( null !== fieldGroup.querySelector( '.edit_field_type_break, .edit_field_type_hidden' ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\ttotalFieldCount += getFieldsInRow( jQuery( fieldGroup ) ).length;\n\t\t\tif ( totalFieldCount > 6 ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction mergeFieldsIntoRowClick( event ) {\n\t\tlet size, popup;\n\n\t\tif ( null !== event.originalEvent.target.closest( '#frm_field_group_popup' ) ) {\n\t\t\t// prevent clicks within the popup from triggering the button again.\n\t\t\treturn;\n\t\t}\n\n\t\tif ( event.originalEvent.target.classList.contains( 'frm-custom-field-group-layout' ) ) {\n\t\t\t// avoid switching back to the first page when clicking the custom option nested inside of the merge option.\n\t\t\treturn;\n\t\t}\n\n\t\tsize = getSelectedFieldCount();\n\t\tpopup = getFieldGroupPopup( size, document.querySelector( '.frm-selected-field-group' ).firstChild );\n\t\tthis.appendChild( popup );\n\t}\n\n\tfunction getSelectedFieldCount() {\n\t\tlet count = 0;\n\t\tjQuery( document.querySelectorAll( '.frm-selected-field-group' ) ).each(\n\t\t\tfunction() {\n\t\t\t\tcount += getFieldsInRow( jQuery( this ) ).length;\n\t\t\t}\n\t\t);\n\t\treturn count;\n\t}\n\n\tfunction deleteFieldGroupsClick() {\n\t\tlet fieldIdsToDelete, deleteOnConfirm, multiselectPopup;\n\n\t\tfieldIdsToDelete = getSelectedFieldIds();\n\t\tdeleteOnConfirm = getDeleteSelectedFieldGroupsOnConfirmFunction( fieldIdsToDelete );\n\n\t\tmultiselectPopup = document.getElementById( 'frm_field_multiselect_popup' );\n\t\tif ( null !== multiselectPopup ) {\n\t\t\tmultiselectPopup.remove();\n\t\t}\n\n\t\tthis.setAttribute( 'data-frmverify', confirmFieldsDeleteMessage( fieldIdsToDelete.length ) );\n\t\tconfirmLinkClick( this );\n\n\t\tconst confirmedClick = document.getElementById( 'frm-confirmed-click' );\n\n\t\t// Remove any previous delete field data so delete confirmation does not attempt\n\t\t// to delete a field that was already deleted or previously attempted and cancelled.\n\t\tconfirmedClick?.removeAttribute( 'data-deletefield' );\n\n\t\tjQuery( confirmedClick ).on( 'click', deleteOnConfirm );\n\t\tjQuery( '#frm_confirm_modal' ).one( 'dialogclose', function() {\n\t\t\tjQuery( confirmedClick ).off( 'click', deleteOnConfirm );\n\t\t} );\n\t}\n\n\tfunction getSelectedFieldIds() {\n\t\tconst deleteFieldIds = [];\n\t\tjQuery( '.frm-selected-field-group > li.form-field' )\n\t\t\t.each(\n\t\t\t\tfunction() {\n\t\t\t\t\tdeleteFieldIds.push( this.dataset.fid );\n\t\t\t\t}\n\t\t\t);\n\t\treturn deleteFieldIds;\n\t}\n\n\tfunction getDeleteSelectedFieldGroupsOnConfirmFunction( deleteFieldIds ) {\n\t\treturn function( event ) {\n\t\t\tevent.preventDefault();\n\t\t\tdeleteAllSelectedFieldGroups( deleteFieldIds );\n\t\t};\n\t}\n\n\tfunction deleteAllSelectedFieldGroups( deleteFieldIds ) {\n\t\tdeleteFieldIds.forEach(\n\t\t\tfunction( fieldId ) {\n\t\t\t\tdeleteFields( fieldId );\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction deleteFieldConfirmed() {\n\t\t/*jshint validthis:true */\n\t\tdeleteFields( this.getAttribute( 'data-deletefield' ) );\n\t}\n\n\tfunction deleteFields( fieldId ) {\n\t\tconst field = jQuery( '#frm_field_id_' + fieldId );\n\n\t\tdeleteField( fieldId );\n\n\t\tif ( field.hasClass( 'edit_field_type_divider' ) ) {\n\t\t\tfield.find( 'li.frm_field_box[data-fid]' ).each( function() {\n\t\t\t\tdeleteField( this.getAttribute( 'data-fid' ) );\n\t\t\t} );\n\t\t}\n\n\t\ttoggleSectionHolder();\n\t}\n\n\t/**\n\t * Checks if there is only submit field in the form builder.\n\t *\n\t * @return {Boolean}\n\t */\n\tfunction hasOnlySubmitField() {\n\t\t// If there are at least 2 rows, return false.\n\t\tif ( $newFields.get( 0 ).childElementCount > 1 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst childUl = $newFields.get( 0 ).firstElementChild.firstElementChild;\n\n\t\t// Use query instead of children because there might be a div inside this ul.\n\t\tconst childLi = childUl.querySelectorAll( 'li.frm_field_box' );\n\n\t\t// If there are at least 2 items in the row, return false.\n\t\tif ( childLi.length > 1 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn childLi[ 0 ].classList.contains( 'edit_field_type_submit' );\n\t}\n\n\t/**\n\t * Moves open modals out of the field options form.\n\t *\n\t * When a modal is open, it is moved in the DOM and appended to the parent element of the modal trigger input. That\n\t * creates a problem since deleting the field also deletes the modal and this function fixes that problem.\n\t *\n\t * @since 6.22\n\t *\n\t * @param {Object} settings\n\t * @return {void}\n\t */\n\tfunction moveOpenModalsOutOfFieldOptions( settings ) {\n\t\tconst openModals = settings[ 0 ].querySelectorAll( '.frm-inline-modal[data-fills]' );\n\t\tif ( ! openModals.length ) {\n\t\t\treturn;\n\t\t}\n\t\topenModals.forEach( modal => {\n\t\t\tmodal.classList.add( 'frm_hidden' );\n\t\t\tmodal.removeAttribute( 'data-fills' );\n\t\t\tmodal.closest( 'form' ).appendChild( modal );\n\t\t} );\n\t}\n\n\tfunction deleteField( fieldId ) {\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_delete_field',\n\t\t\t\tfield_id: fieldId,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: function() {\n\t\t\t\tconst $thisField = jQuery( document.getElementById( 'frm_field_id_' + fieldId ) ),\n\t\t\t\t\tsettings = jQuery( '#frm-single-settings-' + fieldId );\n\n\t\t\t\t// Remove settings from sidebar.\n\t\t\t\tif ( settings.is( ':visible' ) ) {\n\t\t\t\t\tdocument.querySelector( '.frm-settings-panel .frm-tabs-navs ul > li:first-child' )?.click();\n\t\t\t\t\tdocument.querySelector( '#frm-options-panel .frm-single-settings' ).classList.remove( 'frm_hidden' );\n\t\t\t\t}\n\n\t\t\t\tmoveOpenModalsOutOfFieldOptions( settings );\n\t\t\t\tsettings.remove();\n\n\t\t\t\t$thisField.fadeOut( 'slow', function() {\n\t\t\t\t\tlet $section = $thisField.closest( '.start_divider' ),\n\t\t\t\t\t\ttype = $thisField.data( 'type' ),\n\t\t\t\t\t\t$adjacentFields = $thisField.siblings( 'li.form-field' ),\n\t\t\t\t\t\t$liWrapper;\n\n\t\t\t\t\tif ( ! $adjacentFields.length ) {\n\t\t\t\t\t\tif ( $thisField.is( '.edit_field_type_end_divider' ) ) {\n\t\t\t\t\t\t\t$adjacentFields.length = $thisField.closest( 'li.form-field' ).siblings();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$liWrapper = $thisField.closest( 'ul.frm_sorting' ).parent();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$thisField.remove();\n\t\t\t\t\tif ( type === 'break' ) {\n\t\t\t\t\t\trenumberPageBreaks();\n\t\t\t\t\t} else if ( type === 'product' ) {\n\t\t\t\t\t\tmaybeHideQuantityProductFieldOption();\n\t\t\t\t\t\t// a product field attached to a quantity field earlier might be the one deleted, so re-populate\n\t\t\t\t\t\tpopAllProductFields();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( $adjacentFields.length ) {\n\t\t\t\t\t\tsyncLayoutClasses( $adjacentFields.first() );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$liWrapper.remove();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( jQuery( '#frm-show-fields li' ).length === 0 || hasOnlySubmitField() ) {\n\t\t\t\t\t\tconst formEditorContainer = document.getElementById( 'frm_form_editor_container' );\n\t\t\t\t\t\tformEditorContainer.classList.remove( 'frm-has-fields' );\n\t\t\t\t\t\tformEditorContainer.classList.add( 'frm-empty-fields' );\n\t\t\t\t\t} else if ( $section.length ) {\n\t\t\t\t\t\ttoggleOneSectionHolder( $section );\n\t\t\t\t\t}\n\n\t\t\t\t\t// prevent \"More Options\" tooltips from staying around after their target field is deleted.\n\t\t\t\t\tdeleteTooltips();\n\t\t\t\t} );\n\n\t\t\t\tif ( $thisField.length ) {\n\t\t\t\t\twp.hooks.doAction( 'frm_after_delete_field', $thisField[ 0 ] );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction addFieldLogicRow() {\n\t\t/*jshint validthis:true */\n\t\tconst id = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' ),\n\t\t\tformId = thisFormId,\n\t\t\tlogicRows = document.getElementById( 'frm_logic_row_' + id ).querySelectorAll( '.frm_logic_row' );\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_add_logic_row',\n\t\t\t\tform_id: formId,\n\t\t\t\tfield_id: id,\n\t\t\t\tnonce: frmGlobal.nonce,\n\t\t\t\tmeta_name: getNewRowId( logicRows, 'frm_logic_' + id + '_' ),\n\t\t\t\tfields: getFieldList()\n\t\t\t},\n\t\t\tsuccess: function( html ) {\n\t\t\t\tjQuery( document.getElementById( 'logic_' + id ) ).fadeOut( 'fast', function() {\n\t\t\t\t\tconst logicRow = document.getElementById( 'frm_logic_row_' + id );\n\t\t\t\t\tlogicRow.insertAdjacentHTML( 'beforeend', html );\n\n\t\t\t\t\tconst logicRowText = logicRow.querySelector( '.frm_logic_row:last-child .frm-logic-rule-text' );\n\t\t\t\t\tif ( logicRowText ) {\n\t\t\t\t\t\tlogicRowText.textContent = logicRow.dataset.ruleText;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst logicRows = logicRow.closest( '.frm_logic_rows' );\n\t\t\t\t\tlogicRows.style.height = 'auto';\n\t\t\t\t\tjQuery( logicRows ).fadeIn( 'fast' );\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t\treturn false;\n\t}\n\n\tfunction getNewRowId( rows, replace, defaultValue ) {\n\t\tif ( ! rows.length ) {\n\t\t\treturn 'undefined' !== typeof defaultValue ? defaultValue : 0;\n\t\t}\n\t\treturn parseInt( rows[ rows.length - 1 ].id.replace( replace, '' ), 10 ) + 1;\n\t}\n\n\tfunction addWatchLookupRow() {\n\t\t/*jshint validthis:true */\n\t\tlet lastRowId,\n\t\t\tid = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' ),\n\t\t\tformId = thisFormId,\n\t\t\tlookupBlockRows = document.getElementById( 'frm_watch_lookup_block_' + id ).children;\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_add_watch_lookup_row',\n\t\t\t\tform_id: formId,\n\t\t\t\tfield_id: id,\n\t\t\t\trow_key: getNewRowId( lookupBlockRows, 'frm_watch_lookup_' + id + '_' ),\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: function( newRow ) {\n\t\t\t\tconst watchRowBlock = jQuery( document.getElementById( 'frm_watch_lookup_block_' + id ) );\n\t\t\t\twatchRowBlock.append( newRow );\n\t\t\t\twatchRowBlock.fadeIn( 'slow' );\n\n\t\t\t\t// Show the \"Watch Lookup Fields\" label if it was hidden\n\t\t\t\tdocument.getElementById( `frm_watch_lookup_label_${ id }` )?.classList.remove( 'frm-force-hidden' );\n\t\t\t}\n\t\t} );\n\t\treturn false;\n\t}\n\n\tfunction resetOptionTextDetails() {\n\t\tjQuery( '.frm-single-settings ul input[type=\"text\"][name^=\"field_options[options_\"]' ).filter( '[data-value-on-load]' ).removeAttr( 'data-value-on-load' );\n\t\tjQuery( 'input[type=\"hidden\"][name^=optionmap]' ).remove();\n\t}\n\n\tfunction optionTextAlreadyExists( input ) {\n\t\tlet fieldId = jQuery( input ).closest( '.frm-single-settings' ).attr( 'data-fid' ),\n\t\t\toptionInputs = jQuery( input ).closest( 'ul' ).get( 0 ).querySelectorAll( '.field_' + fieldId + '_option' ),\n\t\t\tindex,\n\t\t\toptionInput;\n\n\t\tfor ( index in optionInputs ) {\n\t\t\toptionInput = optionInputs[ index ];\n\t\t\tif ( optionInput.id !== input.id && optionInput.value === input.value && optionInput.getAttribute( 'data-duplicate' ) !== 'true' ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfunction onOptionTextFocus() {\n\t\tlet input,\n\t\t\tfieldId;\n\n\t\tif ( this.getAttribute( 'data-value-on-load' ) === null ) {\n\t\t\tthis.setAttribute( 'data-value-on-load', this.value );\n\n\t\t\tfieldId = jQuery( this ).closest( '.frm-single-settings' ).attr( 'data-fid' );\n\t\t\tinput = document.createElement( 'input' );\n\t\t\tinput.value = this.value;\n\t\t\tinput.setAttribute( 'type', 'hidden' );\n\t\t\tinput.setAttribute( 'name', 'optionmap[' + fieldId + '][' + this.value + ']' );\n\t\t\tthis.parentNode.appendChild( input );\n\n\t\t\tif ( typeof optionMap[ fieldId ] === 'undefined' ) {\n\t\t\t\toptionMap[ fieldId ] = {};\n\t\t\t}\n\n\t\t\toptionMap[ fieldId ][ this.value ] = input;\n\t\t}\n\n\t\tif ( this.getAttribute( 'data-duplicate' ) === 'true' ) {\n\t\t\tthis.removeAttribute( 'data-duplicate' );\n\n\t\t\t// we want to use original value if actually still a duplicate\n\t\t\tif ( optionTextAlreadyExists( this ) ) {\n\t\t\t\tthis.setAttribute( 'data-value-on-focus', this.getAttribute( 'data-value-on-load' ) );\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif ( '' !== this.value || frmAdminJs.new_option !== this.getAttribute( 'data-value-on-focus' ) ) {\n\t\t\tthis.setAttribute( 'data-value-on-focus', this.value );\n\t\t}\n\t}\n\n\t/**\n\t * Returns an object that has the old and new values and labels, when a field choice is changed.\n\t *\n\t * @param {HTMLElement} input\n\t * @return {Object}\n\t */\n\tfunction getChoiceOldAndNewValues( input ) {\n\t\tconst { oldValue, oldLabel } = getChoiceOldValueAndLabel( input );\n\t\tconst { newValue, newLabel } = getChoiceNewValueAndLabel( input );\n\n\t\treturn { oldValue, oldLabel, newValue, newLabel };\n\t}\n\n\t/**\n\t * Returns an object that has the new value and label, when a field choice is changed.\n\t *\n\t * @param {HTMLElement} choiceElement\n\t * @return {Object}\n\t */\n\tfunction getChoiceNewValueAndLabel( choiceElement ) {\n\t\tconst singleOptionContainer = choiceElement.closest( '.frm_single_option' );\n\n\t\tlet newValue, newLabel;\n\n\t\tif ( choiceElement.parentElement.classList.contains( 'frm_single_option' ) ) { // label changed\n\t\t\tnewValue = singleOptionContainer.querySelector( '.frm_option_key input[type=\"text\"]' ).value;\n\t\t\tnewLabel = choiceElement.value;\n\t\t\treturn { newValue, newLabel };\n\t\t}\n\n\t\t// saved value changed\n\t\tnewLabel = singleOptionContainer.querySelector( 'input[type=\"text\"]' ).value;\n\t\tnewValue = choiceElement.value;\n\t\treturn { newValue, newLabel };\n\t}\n\n\t/**\n\t * Returns an object that has the old value and label, when a field choice is changed.\n\t *\n\t * @param {HTMLElement} choiceElement\n\t * @return {Object}\n\t */\n\tfunction getChoiceOldValueAndLabel( choiceElement ) {\n\t\tconst usingSeparateValues = choiceElement.closest( '.frm-single-settings' ).querySelector( '.frm_toggle_sep_values' )?.checked ?? false;\n\t\tconst singleOptionContainer = choiceElement.closest( '.frm_single_option' );\n\n\t\tlet oldValue, oldLabel;\n\n\t\tif ( usingSeparateValues ) {\n\t\t\tif ( choiceElement.parentElement.classList.contains( 'frm_single_option' ) ) { // label changed\n\t\t\t\toldValue = singleOptionContainer.querySelector( '.frm_option_key input[type=\"text\"]' ).getAttribute( 'data-value-on-focus' );\n\t\t\t\toldLabel = choiceElement.getAttribute( 'data-value-on-focus' );\n\t\t\t\treturn { oldValue, oldLabel };\n\t\t\t}\n\t\t}\n\t\toldValue = choiceElement.getAttribute( 'data-value-on-focus' );\n\t\toldLabel = singleOptionContainer.querySelector( 'input[type=\"text\"]' ).getAttribute( 'data-value-on-focus' );\n\n\t\treturn { oldValue, oldLabel };\n\t}\n\n\tfunction onOptionTextBlur() {\n\t\tlet originalValue,\n\t\t\tfieldId,\n\t\t\tfieldIndex,\n\t\t\tlogicId,\n\t\t\trow,\n\t\t\trowLength,\n\t\t\trowIndex,\n\t\t\tvalueSelect,\n\t\t\topts,\n\t\t\tfieldIds,\n\t\t\tsettingId,\n\t\t\tsetting,\n\t\t\toptionMatches,\n\t\t\toption;\n\n\t\tconst { oldValue, oldLabel, newValue, newLabel } = getChoiceOldAndNewValues( this );\n\n\t\tif ( oldValue === newValue && oldLabel === newLabel ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst singleSettingsContainer = this.closest( '.frm-single-settings' );\n\n\t\tfieldId = singleSettingsContainer.getAttribute( 'data-fid' );\n\t\toriginalValue = this.getAttribute( 'data-value-on-load' );\n\n\t\t// check if the newValue is already mapped to another option\n\t\t// if it is, mark as duplicate and return\n\t\tif ( optionTextAlreadyExists( this ) ) {\n\t\t\tthis.setAttribute( 'data-duplicate', 'true' );\n\n\t\t\tif ( typeof optionMap[ fieldId ] !== 'undefined' && typeof optionMap[ fieldId ][ originalValue ] !== 'undefined' ) {\n\t\t\t\t// unmap any other change that may have happened before instead of changing it to something unused\n\t\t\t\toptionMap[ fieldId ][ originalValue ].value = originalValue;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( typeof optionMap[ fieldId ] !== 'undefined' && typeof optionMap[ fieldId ][ originalValue ] !== 'undefined' ) {\n\t\t\toptionMap[ fieldId ][ originalValue ].value = newValue;\n\t\t}\n\n\t\tfieldIds = [];\n\t\trows = builderPage.querySelectorAll( '.frm_logic_row' );\n\t\trowLength = rows.length;\n\t\tfor ( rowIndex = 0; rowIndex < rowLength; rowIndex++ ) {\n\t\t\trow = rows[ rowIndex ];\n\t\t\topts = row.querySelector( '.frm_logic_field_opts' );\n\n\t\t\tif ( opts.value !== fieldId ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlogicId = row.id.split( '_' )[ 2 ];\n\t\t\tvalueSelect = row.querySelector( 'select[name=\"field_options[hide_opt_' + logicId + '][]\"]' );\n\n\t\t\tif ( '' === oldValue ) {\n\t\t\t\toptionMatches = [];\n\t\t\t} else {\n\t\t\t\toptionMatches = valueSelect.querySelectorAll( 'option[value=\"' + oldValue + '\"]' );\n\t\t\t}\n\n\t\t\tif ( ! optionMatches.length ) {\n\t\t\t\toptionMatches = valueSelect.querySelectorAll( 'option[value=\"' + newValue + '\"]' );\n\n\t\t\t\tif ( ! optionMatches.length ) {\n\t\t\t\t\tif ( ! singleSettingsContainer.querySelector( '.frm_toggle_sep_values' )?.checked ) {\n\t\t\t\t\t\toption = searchSelectByText( valueSelect, oldValue ); // Find conditional logic option with oldValue\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! option ) {\n\t\t\t\t\t\toption = document.createElement( 'option' );\n\t\t\t\t\t\tvalueSelect.appendChild( option );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( optionMatches.length ) {\n\t\t\t\toption = optionMatches[ optionMatches.length - 1 ];\n\t\t\t}\n\n\t\t\toption.setAttribute( 'value', newValue );\n\t\t\toption.textContent = newLabel;\n\n\t\t\tif ( fieldIds.indexOf( logicId ) === -1 ) {\n\t\t\t\tfieldIds.push( logicId );\n\t\t\t}\n\t\t}\n\n\t\tfor ( fieldIndex in fieldIds ) {\n\t\t\tsettingId = fieldIds[ fieldIndex ];\n\t\t\tsetting = document.getElementById( 'frm-single-settings-' + settingId );\n\t\t\tmoveFieldSettings( setting );\n\t\t}\n\t}\n\n\t/**\n\t * Returns an option element that matches a string with its text content.\n\t *\n\t * @param {HTMLElement} selectElement\n\t * @param {string}      searchText\n\t * @return {HTMLElement|null}\n\t */\n\tfunction searchSelectByText( selectElement, searchText ) {\n\t\tconst options = selectElement.options;\n\n\t\tfor ( let i = 0; i < options.length; i++ ) {\n\t\t\tconst option = options[ i ];\n\t\t\tif ( searchText === option.textContent ) {\n\t\t\t\treturn option;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfunction updateGetValueFieldSelection() {\n\t\t/*jshint validthis:true */\n\t\tconst fieldID = this.id.replace( 'get_values_form_', '' );\n\t\tconst fieldSelect = document.getElementById( 'get_values_field_' + fieldID );\n\t\tconst fieldType = this.getAttribute( 'data-fieldtype' );\n\n\t\tif ( this.value === '' ) {\n\t\t\tfieldSelect.options.length = 1;\n\t\t} else {\n\t\t\tconst formID = this.value;\n\t\t\tjQuery.ajax( {\n\t\t\t\ttype: 'POST', url: ajaxurl,\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'frm_get_options_for_get_values_field',\n\t\t\t\t\tform_id: formID,\n\t\t\t\t\tfield_type: fieldType,\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t},\n\t\t\t\tsuccess: function( fields ) {\n\t\t\t\t\tfieldSelect.innerHTML = fields;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\t// Clear the Watch Fields option when Lookup field switches to \"Text\" option\n\tfunction maybeClearWatchFields() {\n\t\t/*jshint validthis:true */\n\t\tlet link, lookupBlock,\n\t\t\tfieldID = this.name.replace( 'field_options[data_type_', '' ).replace( ']', '' );\n\n\t\tlink = document.getElementById( 'frm_add_watch_lookup_link_' + fieldID );\n\t\tif ( ! link ) {\n\t\t\treturn;\n\t\t}\n\t\tlink = link.parentNode;\n\n\t\tif ( this.value === 'text' ) {\n\t\t\tlookupBlock = document.getElementById( 'frm_watch_lookup_block_' + fieldID );\n\t\t\tif ( lookupBlock !== null ) {\n\t\t\t\t// Clear and hide the Watch Fields option\n\t\t\t\tlookupBlock.innerHTML = '';\n\t\t\t\tlink.classList.add( 'frm_hidden' );\n\n\t\t\t\t// Hide the Watch Fields row\n\t\t\t\tlink.previousElementSibling.style.display = 'none';\n\t\t\t\tlink.previousElementSibling.previousElementSibling.style.display = 'none';\n\t\t\t\tlink.previousElementSibling.previousElementSibling.previousElementSibling.style.display = 'none';\n\t\t\t}\n\t\t} else {\n\t\t\t// Show the Watch Fields option\n\t\t\tlink.classList.remove( 'frm_hidden' );\n\t\t}\n\n\t\ttoggleMultiSelect( fieldID, this.value );\n\t}\n\n\t// Number the pages and hide/show the first page as needed.\n\tfunction renumberPageBreaks() {\n\t\tlet i, containerClass,\n\t\t\tpages = document.getElementsByClassName( 'frm-page-num' );\n\n\t\tif ( pages.length > 1 ) {\n\t\t\tdocument.getElementById( 'frm-fake-page' ).style.display = 'block';\n\t\t\tfor ( i = 0; i < pages.length; i++ ) {\n\t\t\t\tcontainerClass = pages[ i ].parentNode.parentNode.parentNode.classList;\n\t\t\t\tif ( i === 1 ) {\n\t\t\t\t\t// Hide previous button on page 1\n\t\t\t\t\tcontainerClass.add( 'frm-first-page' );\n\t\t\t\t} else {\n\t\t\t\t\tcontainerClass.remove( 'frm-first-page' );\n\t\t\t\t}\n\t\t\t\tpages[ i ].textContent = ( i + 1 );\n\t\t\t}\n\t\t} else {\n\t\t\tdocument.getElementById( 'frm-fake-page' ).style.display = 'none';\n\t\t}\n\n\t\twp.hooks.doAction( 'frm_renumber_page_breaks', pages );\n\t}\n\n\t// The fake field works differently than real fields.\n\tfunction maybeCollapsePage() {\n\t\t/*jshint validthis:true */\n\t\tconst field = jQuery( this ).closest( '.frm_field_box[data-ftype=break]' );\n\t\tif ( field.length ) {\n\t\t\ttoggleCollapsePage( field );\n\t\t} else {\n\t\t\ttoggleCollapseFakePage();\n\t\t}\n\t}\n\n\t// Find all fields in a page and hide/show them\n\tfunction toggleCollapsePage( field ) {\n\t\tconst toCollapse = getAllFieldsForPage( field.get( 0 ).parentNode.closest( 'li.frm_field_box' ).nextElementSibling );\n\t\ttogglePage( field, toCollapse );\n\t}\n\n\tfunction toggleCollapseFakePage() {\n\t\tconst topLevel = document.getElementById( 'frm-fake-page' ),\n\t\t\tfirstField = document.getElementById( 'frm-show-fields' ).firstElementChild,\n\t\t\ttoCollapse = getAllFieldsForPage( firstField );\n\n\t\tif ( firstField.getAttribute( 'data-ftype' ) === 'break' ) {\n\t\t\t// Don't collapse if the first field is a page break.\n\t\t\treturn;\n\t\t}\n\n\t\ttogglePage( jQuery( topLevel ), toCollapse );\n\t}\n\n\tfunction getAllFieldsForPage( firstWrapper ) {\n\t\tlet $fieldsForPage, currentWrapper;\n\n\t\t$fieldsForPage = jQuery();\n\n\t\tif ( null === firstWrapper ) {\n\t\t\treturn $fieldsForPage;\n\t\t}\n\n\t\tcurrentWrapper = firstWrapper;\n\n\t\tdo {\n\t\t\tif ( null !== currentWrapper.querySelector( '.edit_field_type_break' ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t$fieldsForPage = $fieldsForPage.add( jQuery( currentWrapper ) );\n\t\t\tcurrentWrapper = currentWrapper.nextElementSibling;\n\t\t} while ( null !== currentWrapper );\n\n\t\treturn $fieldsForPage;\n\t}\n\n\tfunction togglePage( field, toCollapse ) {\n\t\tlet i,\n\t\t\tfieldCount = toCollapse.length,\n\t\t\tslide = Math.min( fieldCount, 3 );\n\n\t\tif ( field.hasClass( 'frm-page-collapsed' ) ) {\n\t\t\tfield.removeClass( 'frm-page-collapsed' );\n\t\t\ttoCollapse.removeClass( 'frm-is-collapsed' );\n\t\t\tfor ( i = 0; i < slide; i++ ) {\n\t\t\t\tif ( i === slide - 1 ) {\n\t\t\t\t\tjQuery( toCollapse[ i ] ).slideDown( 150, function() {\n\t\t\t\t\t\ttoCollapse.show();\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tjQuery( toCollapse[ i ] ).slideDown( 150 );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfield.addClass( 'frm-page-collapsed' );\n\t\t\ttoCollapse.addClass( 'frm-is-collapsed' );\n\t\t\tfor ( i = 0; i < slide; i++ ) {\n\t\t\t\tif ( i === slide - 1 ) {\n\t\t\t\t\tjQuery( toCollapse[ i ] ).slideUp( 150, function() {\n\t\t\t\t\t\ttoCollapse.css( 'cssText', 'display:none !important;' );\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tjQuery( toCollapse[ i ] ).slideUp( 150 );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction maybeCollapseSection() {\n\t\t/*jshint validthis:true */\n\t\tconst parentCont = this.parentNode.parentNode.parentNode.parentNode;\n\n\t\tparentCont.classList.toggle( 'frm-section-collapsed' );\n\t}\n\n\tfunction maybeCollapseSettings() {\n\t\t/*jshint validthis:true */\n\t\tthis.classList.toggle( 'frm-collapsed' );\n\n\t\t// Toggles the \"aria-expanded\" attribute\n\t\tconst expanded = this.getAttribute( 'aria-expanded' ) === 'true' || false;\n\t\tthis.setAttribute( 'aria-expanded', ! expanded );\n\n\t\taddSlideAnimationCssVars( this.nextElementSibling );\n\t}\n\n\t/**\n\t * Add slide animation CSS variables to the element\n\t *\n\t * @param {HTMLElement} element The element to add CSS variables to\n\t * @return {void}\n\t */\n\tfunction addSlideAnimationCssVars( element ) {\n\t\tif ( ! element ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet height = element.scrollHeight;\n\t\tif ( height <= 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\theight += 250;\n\t\telement.style.setProperty( '--slide-height', `${ height }px` );\n\t\telement.style.setProperty( '--slide-time', `${ Math.ceil( height * 0.8 ) }ms` );\n\t}\n\n\tfunction clickLabel() {\n\t\tif ( ! this.id ) {\n\t\t\treturn;\n\t\t}\n\n\t\t/*jshint validthis:true */\n\t\tlet setting = document.querySelectorAll( '[data-changeme=\"' + this.id + '\"]' )[ 0 ],\n\t\t\tfieldId = this.id.replace( 'field_label_', '' ),\n\t\t\tfieldType = document.getElementById( 'field_options_type_' + fieldId ),\n\t\t\tfieldTypeName = fieldType.value;\n\n\t\tif ( typeof setting !== 'undefined' ) {\n\t\t\tif ( fieldType.tagName === 'SELECT' ) {\n\t\t\t\tfieldTypeName = fieldType.options[ fieldType.selectedIndex ].text.toLowerCase();\n\t\t\t} else {\n\t\t\t\tfieldTypeName = fieldTypeName.replace( '_', ' ' );\n\t\t\t}\n\n\t\t\tfieldTypeName = normalizeFieldName( fieldTypeName );\n\n\t\t\tsetTimeout( function() {\n\t\t\t\tif ( setting.value.toLowerCase() === fieldTypeName ) {\n\t\t\t\t\tsetting.select();\n\t\t\t\t} else {\n\t\t\t\t\tsetting.focus();\n\t\t\t\t}\n\t\t\t}, 50 );\n\t\t}\n\t}\n\n\tfunction clickDescription() {\n\t\t/*jshint validthis:true */\n\t\tconst setting = document.querySelectorAll( '[data-changeme=\"' + this.id + '\"]' )[ 0 ];\n\t\tif ( typeof setting !== 'undefined' ) {\n\t\t\tsetTimeout( function() {\n\t\t\t\tsetting.focus();\n\t\t\t\tautoExpandSettings( setting );\n\t\t\t}, 50 );\n\t\t}\n\t}\n\n\tfunction autoExpandSettings( setting ) {\n\t\tconst inSection = setting.closest( '.frm-collapse-me' );\n\t\tif ( inSection !== null ) {\n\t\t\tinSection.previousElementSibling.classList.remove( 'frm-collapsed' );\n\t\t}\n\t}\n\n\tfunction normalizeFieldName( fieldTypeName ) {\n\t\tif ( fieldTypeName === 'divider' ) {\n\t\t\tfieldTypeName = 'section';\n\t\t} else if ( fieldTypeName === 'range' ) {\n\t\t\tfieldTypeName = 'slider';\n\t\t} else if ( fieldTypeName === 'data' ) {\n\t\t\tfieldTypeName = 'dynamic';\n\t\t} else if ( fieldTypeName === 'form' ) {\n\t\t\tfieldTypeName = 'embed form';\n\t\t}\n\t\treturn fieldTypeName;\n\t}\n\n\tfunction clickVis( e ) {\n\t\t/*jshint validthis:true */\n\t\tlet currentClass, originalList;\n\n\t\tcurrentClass = e.target.classList;\n\n\t\tif ( currentClass.contains( 'frm-collapse-page' ) || currentClass.contains( 'frm-sub-label' ) || e.target.closest( '.dropdown' ) !== null ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.closest( '.start_divider' ) !== null ) {\n\t\t\te.stopPropagation();\n\t\t}\n\n\t\tif ( this.classList.contains( 'edit_field_type_divider' ) ) {\n\t\t\toriginalList = e.originalEvent.target.closest( 'ul.frm_sorting' );\n\t\t\tif ( null !== originalList ) {\n\t\t\t\t// prevent section click if clicking a field group within a section.\n\t\t\t\tif ( originalList.classList.contains( 'edit_field_type_divider' ) || originalList.parentNode.parentNode.classList.contains( 'start_divider' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tclickAction( this );\n\t}\n\n\t/**\n\t * Update the format input based on the selected format type.\n\t *\n\t * @since 6.9\n\t *\n\t * @param {Event} event The event object from the format type selection.\n\t * @return {void}\n\t */\n\tfunction maybeUpdateFormatInput( event ) {\n\t\tconst formatElement = event.target;\n\t\tconst type = formatElement.value;\n\n\t\tif ( 'custom' === type ) {\n\t\t\tconst fieldId = formatElement.dataset.fieldId;\n\t\t\tconst formatInput = document.getElementById( `frm-field-format-custom-${ fieldId }` ).querySelector( '.frm_format_opt' );\n\n\t\t\tif ( 'international' === formatInput.value || 'currency' === formatInput.value || 'number' === formatInput.value ) {\n\t\t\t\tformatInput.setAttribute( 'value', '' );\n\t\t\t}\n\t\t}\n\n\t\tsetTimeout(\n\t\t\t() => {\n\t\t\t\tformatElement.querySelectorAll( 'option' ).forEach(\n\t\t\t\t\toption => {\n\t\t\t\t\t\tif ( option.selected && option.classList.contains( 'frm_show_upgrade' ) ) {\n\t\t\t\t\t\t\tformatElement.value = 'none';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t},\n\t\t\t0\n\t\t);\n\t}\n\n\t/**\n\t * Open Advanced settings on double click.\n\t */\n\tfunction openAdvanced() {\n\t\tconst fieldId = this.getAttribute( 'data-fid' );\n\t\tautoExpandSettings( document.getElementById( 'field_options_field_key_' + fieldId ) );\n\t}\n\n\tfunction toggleRepeatButtons() {\n\t\t/*jshint validthis:true */\n\t\tconst $thisField = jQuery( this ).closest( '.frm_field_box' );\n\t\t$thisField.find( '.repeat_icon_links' ).removeClass( 'repeat_format repeat_formatboth repeat_formattext' ).addClass( 'repeat_format' + this.value );\n\t\tif ( this.value === 'text' || this.value === 'both' ) {\n\t\t\t$thisField.find( '.frm_repeat_text' ).show();\n\t\t\t$thisField.find( '.repeat_icon_links a' ).addClass( 'frm_button' );\n\t\t} else {\n\t\t\t$thisField.find( '.frm_repeat_text' ).hide();\n\t\t\t$thisField.find( '.repeat_icon_links a' ).removeClass( 'frm_button' );\n\t\t}\n\t}\n\n\tfunction checkRepeatLimit() {\n\t\t/*jshint validthis:true */\n\t\tconst val = this.value;\n\t\tif ( val !== '' && ( val < 2 || val > 200 ) ) {\n\t\t\tinfoModal( frmAdminJs.repeat_limit_min );\n\t\t\tthis.value = '';\n\t\t}\n\t}\n\n\tfunction checkCheckboxSelectionsLimit() {\n\t\t/*jshint validthis:true */\n\t\tconst val = this.value;\n\t\tif ( val !== '' && ( val < 1 || val > 200 ) ) {\n\t\t\tinfoModal( frmAdminJs.checkbox_limit );\n\t\t\tthis.value = '';\n\t\t}\n\t}\n\n\tfunction updateRepeatText( obj, addRemove ) {\n\t\tconst $thisField = jQuery( obj ).closest( '.frm_field_box' );\n\t\t$thisField.find( '.frm_' + addRemove + '_form_row .frm_repeat_label' ).text( obj.value );\n\t}\n\n\tfunction fieldsInSection( id ) {\n\t\tconst children = [];\n\t\tjQuery( document.getElementById( 'frm_field_id_' + id ) ).find( 'li.frm_field_box:not(.no_repeat_section .edit_field_type_end_divider)' ).each( function() {\n\t\t\tchildren.push( jQuery( this ).data( 'fid' ) );\n\t\t} );\n\t\treturn children;\n\t}\n\n\tfunction toggleFormTax() {\n\t\t/*jshint validthis:true */\n\t\tconst id = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' );\n\t\tconst val = this.value;\n\t\tconst $showFields = document.getElementById( 'frm_show_selected_fields_' + id );\n\t\tconst $showForms = document.getElementById( 'frm_show_selected_forms_' + id );\n\n\t\tjQuery( $showForms ).find( 'select' ).val( '' );\n\t\tif ( val === 'form' ) {\n\t\t\t$showForms.style.display = 'inline';\n\t\t\tempty( $showFields );\n\t\t} else {\n\t\t\t$showFields.style.display = 'none';\n\t\t\t$showForms.style.display = 'none';\n\t\t\tgetTaxOrFieldSelection( val, id );\n\t\t}\n\t}\n\n\tfunction resetOptOnChange() {\n\t\t/*jshint validthis:true */\n\t\tlet field, thisOpt;\n\n\t\tfield = getFieldKeyFromOpt( this );\n\t\tif ( ! field ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthisOpt = jQuery( this ).closest( '.frm_single_option' );\n\n\t\tresetSingleOpt( field.fieldId, field.fieldKey, thisOpt );\n\t}\n\n\tfunction getFieldKeyFromOpt( object ) {\n\t\tlet allOpts, fieldId, fieldKey;\n\n\t\tallOpts = jQuery( object ).closest( '.frm_sortable_field_opts' );\n\t\tif ( ! allOpts.length ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfieldId = allOpts.attr( 'id' ).replace( 'frm_field_', '' ).replace( '_opts', '' );\n\t\tfieldKey = allOpts.data( 'key' );\n\n\t\treturn {\n\t\t\tfieldId: fieldId,\n\t\t\tfieldKey: fieldKey\n\t\t};\n\t}\n\n\tfunction resetSingleOpt( fieldId, fieldKey, thisOpt ) {\n\t\tlet saved, text, defaultVal, previewInput, labelForDisplay, optContainer,\n\t\t\toptKey = thisOpt.data( 'optkey' ),\n\t\t\tseparateValues = usingSeparateValues( fieldId ),\n\t\t\tsingle = jQuery( 'label[for=\"field_' + fieldKey + '-' + optKey + '\"]' ),\n\t\t\tbaseName = 'field_options[options_' + fieldId + '][' + optKey + ']',\n\t\t\tlabel = jQuery( 'input[name=\"' + baseName + '[label]\"]' );\n\n\t\tif ( single.length < 1 ) {\n\t\t\tresetDisplayedOpts( fieldId );\n\n\t\t\t// Set the default value.\n\t\t\tdefaultVal = thisOpt.find( 'input[name^=\"default_value_\"]' );\n\t\t\tif ( defaultVal.is( ':checked' ) && label.length > 0 ) {\n\t\t\t\tjQuery( 'select[name^=\"item_meta[' + fieldId + ']\"]' ).val( label.val() );\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tpreviewInput = single.children( 'input' );\n\n\t\tif ( label.length < 1 ) {\n\t\t\t// Check for other label.\n\t\t\tlabel = jQuery( 'input[name=\"' + baseName + '\"]' );\n\t\t\tsaved = label.val();\n\t\t} else if ( separateValues ) {\n\t\t\tsaved = jQuery( 'input[name=\"' + baseName + '[value]\"]' ).val();\n\t\t} else {\n\t\t\tsaved = label.val();\n\t\t}\n\n\t\tif ( label.length < 1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Set the displayed value.\n\t\ttext = single[ 0 ].childNodes;\n\n\t\tif ( imagesAsOptions( fieldId ) ) {\n\t\t\tlabelForDisplay = getImageDisplayValue( thisOpt, fieldId, label );\n\t\t\toptContainer = single.find( '.frm_image_option_container' );\n\n\t\t\tif ( optContainer.length > 0 ) {\n\t\t\t\toptContainer.replaceWith( labelForDisplay );\n\t\t\t} else {\n\t\t\t\ttext[ text.length - 1 ].nodeValue = '';\n\t\t\t\tsingle.append( labelForDisplay );\n\t\t\t}\n\t\t} else {\n\t\t\tlet firstInputIndex = false;\n\t\t\ttext.forEach( ( node, index ) => {\n\t\t\t\tif ( firstInputIndex === false ) {\n\t\t\t\t\tif ( node.tagName === 'INPUT' ) {\n\t\t\t\t\t\tfirstInputIndex = index;\n\t\t\t\t\t}\n\t\t\t\t} else if ( index === firstInputIndex + 1 ) {\n\t\t\t\t\tlet nodeValue = '';\n\n\t\t\t\t\tif ( buttonsAsOptions( fieldId ) ) {\n\t\t\t\t\t\tnodeValue = div( { className: 'frm_label_button_container', text: ' ' + label.val() } );\n\t\t\t\t\t\tsingle[ 0 ].replaceChild( nodeValue, node );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode.nodeValue = ' ' + label.val();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsingle[ 0 ].removeChild( node );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Set saved value.\n\t\tpreviewInput.val( saved );\n\n\t\t// Set the default value.\n\t\tdefaultVal = thisOpt.find( 'input[name^=\"default_value_\"]' );\n\t\tpreviewInput.prop( 'checked', defaultVal.is( ':checked' ) ? true : false );\n\t}\n\n\tfunction buttonsAsOptions( fieldId ) {\n\t\tconst fields = document.getElementsByName( 'field_options[image_options_' + fieldId + ']' );\n\t\tconst result = Array.from( fields ).find( field => field.checked && ( 'buttons' === field.value ) );\n\n\t\treturn typeof result !== 'undefined';\n\t}\n\n\t/**\n\t * Set the displayed value for an image option.\n\t */\n\tfunction getImageDisplayValue( thisOpt, fieldId, label ) {\n\t\tlet image, imageUrl, showLabelWithImage, fieldType;\n\n\t\timage = thisOpt.find( 'img' );\n\t\tif ( image ) {\n\t\t\timageUrl = image.attr( 'src' );\n\t\t}\n\n\t\tshowLabelWithImage = showingLabelWithImage( fieldId );\n\t\tfieldType = radioOrCheckbox( fieldId );\n\t\treturn getImageLabel( label.val(), showLabelWithImage, imageUrl, fieldType );\n\t}\n\n\tfunction getImageOptionSize( fieldId ) {\n\t\tlet val,\n\t\t\tfield = document.getElementById( 'field_options_image_size_' + fieldId ),\n\t\t\tsize = '';\n\n\t\tif ( field !== null ) {\n\t\t\tval = field.value;\n\t\t\tif ( val !== '' ) {\n\t\t\t\tsize = val;\n\t\t\t}\n\t\t}\n\n\t\treturn size;\n\t}\n\n\tfunction resetDisplayedOpts( fieldId ) {\n\t\tlet i, opts, type, placeholder, fieldInfo,\n\t\t\tinput = jQuery( '[name^=\"item_meta[' + fieldId + ']\"]' );\n\n\t\tif ( input.length < 1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( input.is( 'select' ) ) {\n\t\t\tplaceholder = document.getElementById( 'frm_placeholder_' + fieldId );\n\t\t\tif ( placeholder !== null && placeholder.value === '' ) {\n\t\t\t\tfillDropdownOpts( input[ 0 ], { sourceID: fieldId } );\n\t\t\t} else {\n\t\t\t\tfillDropdownOpts( input[ 0 ], {\n\t\t\t\t\tsourceID: fieldId,\n\t\t\t\t\tplaceholder: placeholder.value\n\t\t\t\t} );\n\t\t\t}\n\t\t} else {\n\t\t\topts = getMultipleOpts( fieldId );\n\t\t\tjQuery( '#field_' + fieldId + '_inner_container > .frm_form_fields' ).html( '' );\n\t\t\tfieldInfo = getFieldKeyFromOpt( jQuery( '#frm_delete_field_' + fieldId + '-000_container' ) );\n\n\t\t\tconst container = jQuery( '#field_' + fieldId + '_inner_container > .frm_form_fields' ),\n\t\t\t\thasImageOptions = imagesAsOptions( fieldId ),\n\t\t\t\timageSize = hasImageOptions ? getImageOptionSize( fieldId ) : '',\n\t\t\t\timageOptionClass = hasImageOptions ? ( 'frm_image_option frm_image_' + imageSize + ' ' ) : '',\n\t\t\t\tisProduct = isProductField( fieldId );\n\n\t\t\ttype = ( 'hidden' === input.attr( 'type' ) ? input.data( 'field-type' ) : input.attr( 'type' ) );\n\t\t\tfor ( i = 0; i < opts.length; i++ ) {\n\t\t\t\tcontainer.append( addRadioCheckboxOpt( type, opts[ i ], fieldId, fieldInfo.fieldKey, isProduct, imageOptionClass ) );\n\t\t\t}\n\t\t}\n\n\t\tadjustConditionalLogicOptionOrders( fieldId );\n\t}\n\n\t/**\n\t * Returns an object that has a value and label for new conditional logic option, for a given option value.\n\t *\n\t * @param {Number} fieldId\n\t * @param {string} expectedOption\n\t * @return {Object}\n\t */\n\tfunction getNewConditionalLogicOption( fieldId, expectedOption ) {\n\t\tconst optionsContainer = document.getElementById( 'frm_field_' + fieldId + '_opts' );\n\n\t\tconst expectedOptionInput = optionsContainer.querySelector( 'input[value=\"' + expectedOption + '\"]' );\n\n\t\tif ( expectedOptionInput ) {\n\t\t\treturn getChoiceNewValueAndLabel( expectedOptionInput );\n\t\t}\n\n\t\treturn { newValue: expectedOption, newLabel: expectedOption };\n\t}\n\n\tfunction adjustConditionalLogicOptionOrders( fieldId, type ) {\n\t\tlet row, opts, logicId, valueSelect, optionLength, optionIndex, expectedOption, optionMatch, fieldOptions,\n\t\t\trows = builderPage.querySelectorAll( '.frm_logic_row' ),\n\t\t\trowLength = rows.length;\n\n\t\tfieldOptions = wp.hooks.applyFilters( 'frm_conditional_logic_field_options', getFieldOptions( fieldId ), { type, fieldId } );\n\t\toptionLength = fieldOptions.length;\n\n\t\tfor ( rowIndex = 0; rowIndex < rowLength; rowIndex++ ) {\n\t\t\trow = rows[ rowIndex ];\n\t\t\topts = row.querySelector( '.frm_logic_field_opts' );\n\n\t\t\tif ( opts.value != fieldId ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlogicId = row.id.split( '_' )[ 2 ];\n\t\t\tvalueSelect = row.querySelector( 'select[name=\"field_options[hide_opt_' + logicId + '][]\"]' );\n\n\t\t\tfor ( optionIndex = optionLength - 1; optionIndex >= 0; optionIndex-- ) {\n\t\t\t\texpectedOption = fieldOptions[ optionIndex ];\n\t\t\t\tlet expectedOptionValue = document.getElementById( 'frm_field_' + fieldId + '_opts' ).querySelector( '.frm_option_key input[type=\"text\"]' )?.value;\n\t\t\t\tif ( ! expectedOptionValue ) {\n\t\t\t\t\texpectedOptionValue = expectedOption;\n\t\t\t\t}\n\n\t\t\t\toptionMatch = valueSelect.querySelector( 'option[value=\"' + expectedOptionValue + '\"]' );\n\n\t\t\t\tconst { newValue, newLabel } = getNewConditionalLogicOption( fieldId, expectedOption );\n\n\t\t\t\tconst fieldChoices = document.querySelectorAll( '#frm_field_' + fieldId + '_opts input[data-value-on-focus]' );\n\t\t\t\tconst expectedChoiceEl = Array.from( fieldChoices ).find( element => element.value === expectedOption );\n\t\t\t\tif ( expectedChoiceEl ) {\n\t\t\t\t\tconst oldValue = expectedChoiceEl.dataset.valueOnFocus;\n\t\t\t\t\tconst hasMatch = oldValue && valueSelect.querySelector( 'option[value=\"' + oldValue + '\"]' );\n\t\t\t\t\tif ( hasMatch ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tprependValueSelectWithOptionMatch( valueSelect, optionMatch, newValue, newLabel );\n\t\t\t}\n\n\t\t\toptionMatch = valueSelect.querySelector( 'option[value=\"\"]' );\n\t\t\tif ( optionMatch !== null ) {\n\t\t\t\tvalueSelect.prepend( optionMatch );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction prependValueSelectWithOptionMatch( valueSelect, optionMatch, newValue, newLabel ) {\n\t\tif ( optionMatch === null && ! valueSelect.querySelector( 'option[value=\"' + newValue + '\"]' ) ) {\n\t\t\toptionMatch = frmDom.tag( 'option', { text: newLabel } );\n\t\t\toptionMatch.value = newValue;\n\t\t}\n\n\t\tvalueSelect.prepend( optionMatch );\n\t}\n\n\tfunction getFieldOptions( fieldId ) {\n\t\tlet index, input, li, listItems, optsContainer, length,\n\t\t\toptions = [];\n\t\toptsContainer = document.getElementById( 'frm_field_' + fieldId + '_opts' );\n\n\t\tif ( ! optsContainer ) {\n\t\t\treturn options;\n\t\t}\n\t\tlistItems = optsContainer.querySelectorAll( '.frm_single_option' );\n\t\tlength = listItems.length;\n\n\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\tli = listItems[ index ];\n\n\t\t\tif ( li.classList.contains( 'frm_hidden' ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tinput = li.querySelector( '.field_' + fieldId + '_option' );\n\t\t\toptions.push( input.value );\n\t\t}\n\t\treturn options;\n\t}\n\n\tfunction addRadioCheckboxOpt( type, opt, fieldId, fieldKey, isProduct, classes ) {\n\t\tlet other,\n\t\t\tsingle = '',\n\t\t\tisOther = opt.key.indexOf( 'other' ) !== -1,\n\t\t\tid = 'field_' + fieldKey + '-' + opt.key,\n\t\t\tinputType = type === 'scale' ? 'radio' : type;\n\n\t\tother = '<input type=\"text\" id=\"field_' + fieldKey + '-' + opt.key + '-otext\" class=\"frm_other_input frm_pos_none\" name=\"item_meta[other][' + fieldId + '][' + opt.key + ']\" value=\"\" />';\n\n\t\tthis.getSingle = function() {\n\t\t\t/**\n\t\t\t * Get single option template.\n\t\t\t *\n\t\t\t * @param {Object} option  Object containing the option data.\n\t\t\t * @param {string} type    The field type.\n\t\t\t * @param {string} fieldId The field id.\n\t\t\t * @param {string} classes The option clasnames.\n\t\t\t * @param {string} id      The input id attribute.\n\t\t\t */\n\t\t\tsingle = wp.hooks.applyFilters( 'frm_admin.build_single_option_template', single, { opt, type, fieldId, classes, id } );\n\n\t\t\tif ( '' !== single ) {\n\t\t\t\treturn single;\n\t\t\t}\n\n\t\t\treturn '<div class=\"frm_' + type + ' ' + type + ' ' + classes + '\" id=\"frm_' + type + '_' + fieldId + '-' + opt.key + '\"><label for=\"' + id +\n\t\t\t'\"><input type=\"' + inputType +\n\t\t\t'\" name=\"item_meta[' + fieldId + ']' + ( type === 'checkbox' ? '[]' : '' ) +\n\t\t\t'\" value=\"' + purifyHtml( opt.saved ) + '\" id=\"' + id + '\"' + ( isProduct ? ' data-price=\"' + opt.price + '\"' : '' ) + ( opt.checked ? ' checked=\"checked\"' : '' ) + '> ' + purifyHtml( opt.label ) + '</label>' +\n\t\t\t( isOther ? other : '' ) +\n\t\t\t'</div>';\n\t\t};\n\n\t\treturn this.getSingle();\n\t}\n\n\tfunction fillDropdownOpts( field, atts ) {\n\t\tif ( field === null ) {\n\t\t\treturn;\n\t\t}\n\t\tconst sourceID = atts.sourceID,\n\t\t\tplaceholder = atts.placeholder,\n\t\t\tisProduct = isProductField( sourceID ),\n\t\t\tshowOther = atts.other;\n\n\t\tremoveDropdownOpts( field );\n\t\tlet opts = getMultipleOpts( sourceID ),\n\t\t\thasPlaceholder = ( typeof placeholder !== 'undefined' );\n\n\t\tfor ( let i = 0; i < opts.length; i++ ) {\n\t\t\tlet label = opts[ i ].label,\n\t\t\t\tisOther = opts[ i ].key.indexOf( 'other' ) !== -1;\n\n\t\t\tif ( hasPlaceholder && label !== '' ) {\n\t\t\t\taddBlankSelectOption( field, placeholder );\n\t\t\t} else if ( hasPlaceholder ) {\n\t\t\t\tlabel = placeholder;\n\t\t\t}\n\t\t\thasPlaceholder = false;\n\n\t\t\tif ( ! isOther || showOther ) {\n\t\t\t\tconst opt = document.createElement( 'option' );\n\t\t\t\topt.value = opts[ i ].saved;\n\t\t\t\topt.innerHTML = purifyHtml( label );\n\n\t\t\t\tif ( isProduct ) {\n\t\t\t\t\topt.setAttribute( 'data-price', opts[ i ].price );\n\t\t\t\t}\n\n\t\t\t\tfield.appendChild( opt );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction addBlankSelectOption( field, placeholder ) {\n\t\tconst opt = document.createElement( 'option' ),\n\t\t\tfirstChild = field.firstChild;\n\n\t\topt.value = '';\n\t\topt.innerHTML = placeholder;\n\t\tif ( firstChild !== null ) {\n\t\t\tfield.insertBefore( opt, firstChild );\n\t\t\tfield.selectedIndex = 0;\n\t\t} else {\n\t\t\tfield.appendChild( opt );\n\t\t}\n\t}\n\n\tfunction getMultipleOpts( fieldId ) {\n\t\tlet i, saved, labelName, label, key, optObj,\n\t\t\tfieldType,\n\t\t\tchecked = false,\n\t\t\topts = [],\n\t\t\timageUrl = '';\n\n\t\tconst optVals = jQuery( 'input[name^=\"field_options[options_' + fieldId + ']\"]' );\n\t\tconst isProduct = isProductField( fieldId );\n\t\tconst showLabelWithImage = showingLabelWithImage( fieldId );\n\t\tconst hasImageOptions = imagesAsOptions( fieldId );\n\t\tconst separateValues = usingSeparateValues( fieldId );\n\n\t\tfor ( i = 0; i < optVals.length; i++ ) {\n\t\t\tif ( optVals[ i ].name.indexOf( '[000]' ) > 0 || optVals[ i ].name.indexOf( '[value]' ) > 0 || optVals[ i ].name.indexOf( '[image]' ) > 0 || optVals[ i ].name.indexOf( '[price]' ) > 0 ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tsaved = optVals[ i ].value;\n\t\t\tlabel = saved;\n\t\t\tkey = optVals[ i ].name.replace( 'field_options[options_' + fieldId + '][', '' ).replace( '[label]', '' ).replace( ']', '' );\n\n\t\t\tif ( separateValues ) {\n\t\t\t\tlabelName = optVals[ i ].name.replace( '[label]', '[value]' );\n\t\t\t\tsaved = jQuery( 'input[name=\"' + labelName + '\"]' ).val();\n\t\t\t}\n\n\t\t\tif ( hasImageOptions ) {\n\t\t\t\timageUrl = getImageUrlFromInput( optVals[ i ] );\n\t\t\t\tfieldType = radioOrCheckbox( fieldId );\n\t\t\t\tlabel = getImageLabel( label, showLabelWithImage, imageUrl, fieldType );\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * @since 5.0.04\n\t\t\t */\n\t\t\tlabel = frmAdminBuild.hooks.applyFilters( 'frm_choice_field_label', label, fieldId, optVals[ i ], hasImageOptions );\n\n\t\t\tchecked = getChecked( optVals[ i ].id );\n\n\t\t\toptObj = {\n\t\t\t\tsaved: saved,\n\t\t\t\tlabel: label,\n\t\t\t\tchecked: checked,\n\t\t\t\tkey: key\n\t\t\t};\n\n\t\t\tif ( isProduct ) {\n\t\t\t\tlabelName = optVals[ i ].name.replace( '[label]', '[price]' );\n\t\t\t\toptObj.price = jQuery( 'input[name=\"' + labelName + '\"]' ).val();\n\t\t\t}\n\n\t\t\topts.push( optObj );\n\t\t}\n\n\t\treturn opts;\n\t}\n\n\tfunction radioOrCheckbox( fieldId ) {\n\t\tconst settings = document.getElementById( 'frm-single-settings-' + fieldId );\n\t\tif ( settings === null ) {\n\t\t\treturn 'radio';\n\t\t}\n\n\t\treturn settings.classList.contains( 'frm-type-checkbox' ) ? 'checkbox' : 'radio';\n\t}\n\n\tfunction getImageUrlFromInput( optVal ) {\n\t\tlet img,\n\t\t\twrapper = jQuery( optVal ).siblings( '.frm_image_preview_wrapper' );\n\n\t\tif ( ! wrapper.length ) {\n\t\t\treturn '';\n\t\t}\n\n\t\timg = wrapper.find( 'img' );\n\t\tif ( ! img.length ) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn img.attr( 'src' );\n\t}\n\n\tfunction purifyHtml( html ) {\n\t\tif ( html instanceof Element || html instanceof Document ) {\n\t\t\thtml = html.outerHTML;\n\t\t}\n\n\t\tconst clean = jQuery.parseHTML( html ).reduce(\n\t\t\t( total, currentNode ) => {\n\t\t\t\tconst cleanNode = frmDom.cleanNode( currentNode );\n\n\t\t\t\tif ( '#text' === cleanNode.nodeName ) {\n\t\t\t\t\treturn total += cleanNode.textContent;\n\t\t\t\t}\n\n\t\t\t\treturn total + cleanNode.outerHTML;\n\t\t\t},\n\t\t\t''\n\t\t);\n\n\t\tif ( clean !== html ) {\n\t\t\t// Clean it until nothing changes, in case the stripped result is now unsafe.\n\t\t\treturn purifyHtml( clean );\n\t\t}\n\n\t\treturn clean;\n\t}\n\n\tfunction getImageLabel( label, showLabelWithImage, imageUrl, fieldType ) {\n\t\tlet imageLabelClass,\n\t\t\toriginalLabel = label,\n\t\t\tshape = fieldType === 'checkbox' ? 'square' : 'circle',\n\t\t\tlabelImage,\n\t\t\tlabelNode,\n\t\t\timageLabel;\n\n\t\toriginalLabel = purifyHtml( originalLabel );\n\n\t\tif ( imageUrl ) {\n\t\t\tlabelImage = img( { src: imageUrl, alt: originalLabel } );\n\t\t} else {\n\t\t\tlabelImage = div( { className: 'frm_empty_url' } );\n\t\t\tlabelImage.innerHTML = frmAdminJs.image_placeholder_icon;\n\t\t}\n\n\t\timageLabelClass = showLabelWithImage ? ' frm_label_with_image' : '';\n\n\t\timageLabel = tag( 'span', { className: 'frm_text_label_for_image_inner' } );\n\n\t\timageLabel.innerHTML = originalLabel;\n\t\tlabelNode = tag(\n\t\t\t'span',\n\t\t\t{\n\t\t\t\tclassName: 'frm_image_option_container' + imageLabelClass,\n\t\t\t\tchildren: [\n\t\t\t\t\tlabelImage,\n\t\t\t\t\ttag( 'span', { className: 'frm_text_label_for_image', child: imageLabel } )\n\t\t\t\t]\n\t\t\t}\n\t\t);\n\n\t\treturn labelNode;\n\t}\n\n\tfunction getChecked( id ) {\n\t\tfield = jQuery( '#' + id );\n\n\t\tif ( field.length === 0 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tcheckbox = field.siblings( 'input[type=checkbox]' );\n\n\t\treturn checkbox.length && checkbox.prop( 'checked' );\n\t}\n\n\tfunction removeDropdownOpts( field ) {\n\t\tlet i;\n\t\tif ( typeof field.options === 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( i = field.options.length - 1; i >= 0; i-- ) {\n\t\t\tfield.remove( i );\n\t\t}\n\t}\n\n\t/**\n\t * Is the box checked to use separate values?\n\t */\n\tfunction usingSeparateValues( fieldId ) {\n\t\treturn isChecked( 'separate_value_' + fieldId );\n\t}\n\n\t/**\n\t * Is the box checked to use images as options?\n\t */\n\tfunction imagesAsOptions( fieldId ) {\n\t\tlet checked = false,\n\t\t\tfield = document.getElementsByName( 'field_options[image_options_' + fieldId + ']' );\n\n\t\tfor ( let i = 0; i < field.length; i++ ) {\n\t\t\tif ( field[ i ].checked ) {\n\t\t\t\tchecked = '0' !== field[ i ].value;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * @since 5.0.04\n\t\t */\n\t\treturn frmAdminBuild.hooks.applyFilters( 'frm_choice_field_images_as_options', checked, fieldId );\n\t}\n\n\tfunction showingLabelWithImage( fieldId ) {\n\t\tconst isShowing = ! isChecked( 'hide_image_text_' + fieldId );\n\n\t\t/**\n\t\t * @since 5.0.04\n\t\t */\n\t\treturn frmAdminBuild.hooks.applyFilters( 'frm_choice_field_showing_label_with_image', isShowing, fieldId );\n\t}\n\n\tfunction isChecked( id ) {\n\t\tconst field = document.getElementById( id );\n\t\tif ( field === null ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn field.checked;\n\t}\n\n\tfunction checkUniqueOpt( targetInput ) {\n\t\tconst settingsContainer = targetInput.closest( '.frm-single-settings' );\n\t\tconst fieldId = settingsContainer.getAttribute( 'data-fid' );\n\t\tconst areValuesSeparate = settingsContainer.querySelector( '[name=\"field_options[separate_value_' + fieldId + ']\"]' ).checked;\n\n\t\tif ( areValuesSeparate && ! targetInput.name.endsWith( '[value]' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst container = document.getElementById( 'frm_field_' + fieldId + '_opts' );\n\t\tconst conflicts = Array.from( container.querySelectorAll( 'input[type=\"text\"]' ) ).filter(\n\t\t\tinput => input.id !== targetInput.id &&\n\t\t\t\tareValuesSeparate === input.name.endsWith( '[value]' ) &&\n\t\t\t\tinput.value === targetInput.value\n\t\t);\n\n\t\tif ( conflicts.length ) {\n\t\t\t/* translators: %s: The detected option value. */\n\t\t\tinfoModal( sprintf( __( 'Duplicate option value \"%s\" detected', 'formidable' ), purifyHtml( targetInput.value ) ) );\n\t\t}\n\t}\n\n\tfunction getFieldValues() {\n\t\t/*jshint validthis:true */\n\t\tlet isTaxonomy,\n\t\t\tval = this.value;\n\n\t\tif ( val ) {\n\t\t\tconst parentIDs = this.parentNode.id.replace( 'frm_logic_', '' ).split( '_' );\n\t\t\tconst fieldID = parentIDs[ 0 ];\n\t\t\tconst metaKey = parentIDs[ 1 ];\n\t\t\tconst valueField = document.getElementById( 'frm_field_id_' + val );\n\t\t\tconst valueFieldType = valueField.getAttribute( 'data-ftype' );\n\t\t\tconst fill = document.getElementById( 'frm_show_selected_values_' + fieldID + '_' + metaKey );\n\t\t\tconst optionName = 'field_options[hide_opt_' + fieldID + '][]';\n\t\t\tconst optionID = 'frm_field_logic_opt_' + fieldID;\n\t\t\tlet input = false;\n\t\t\tlet showSelect = ( valueFieldType === 'select' || valueFieldType === 'checkbox' || valueFieldType === 'radio' );\n\t\t\tconst showText = ( valueFieldType === 'text' || valueFieldType === 'email' || valueFieldType === 'phone' || valueFieldType === 'url' || valueFieldType === 'number' );\n\n\t\t\tif ( showSelect ) {\n\t\t\t\tisTaxonomy = document.getElementById( 'frm_has_hidden_options_' + val );\n\t\t\t\tif ( isTaxonomy !== null ) {\n\t\t\t\t\t// get the category options with ajax\n\t\t\t\t\tshowSelect = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( showSelect || showText ) {\n\t\t\t\tconst comparison = document.querySelector( `#frm_logic_${ fieldID }_${ metaKey } [name=\"field_options[hide_field_cond_${ fieldID }][]\"]` ).value;\n\t\t\t\tfill.innerHTML = '';\n\t\t\t\tconst creatingValuesDropdown = showSelect && ! [ 'LIKE', 'not LIKE', 'LIKE%', '%LIKE' ].includes( comparison );\n\t\t\t\tif ( creatingValuesDropdown ) {\n\t\t\t\t\tinput = document.createElement( 'select' );\n\t\t\t\t} else {\n\t\t\t\t\tinput = document.createElement( 'input' );\n\t\t\t\t\tinput.type = 'text';\n\t\t\t\t}\n\t\t\t\tinput.name = optionName;\n\t\t\t\tinput.id = optionID + '_' + metaKey;\n\t\t\t\tfill.appendChild( input );\n\n\t\t\t\tif ( creatingValuesDropdown ) {\n\t\t\t\t\tconst fillField = document.getElementById( input.id );\n\t\t\t\t\tfillDropdownOpts( fillField, {\n\t\t\t\t\t\tsourceID: val,\n\t\t\t\t\t\tplaceholder: '',\n\t\t\t\t\t\tother: true\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst thisType = this.getAttribute( 'data-type' );\n\t\t\t\tconst callback = () => {\n\t\t\t\t\tconst event = new CustomEvent( 'frm_logic_options_loaded' );\n\t\t\t\t\tevent.frmData = { valueFieldType, fieldID, metaKey };\n\t\t\t\t\tdocument.dispatchEvent( event );\n\t\t\t\t};\n\n\t\t\t\tfrmGetFieldValues( val, fieldID, metaKey, thisType, undefined, callback );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getFieldSelection() {\n\t\t/*jshint validthis:true */\n\t\tconst formId = this.value;\n\t\tif ( formId ) {\n\t\t\tconst fieldId = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' );\n\t\t\tgetTaxOrFieldSelection( formId, fieldId );\n\t\t}\n\t}\n\n\tfunction getTaxOrFieldSelection( formId, fieldId ) {\n\t\tif ( formId ) {\n\t\t\tjQuery.ajax( {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: ajaxurl,\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'frm_get_field_selection',\n\t\t\t\t\tfield_id: fieldId,\n\t\t\t\t\tform_id: formId,\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t},\n\t\t\t\tsuccess: function( msg ) {\n\t\t\t\t\tconst $selectedFields = jQuery( '#frm_show_selected_fields_' + fieldId );\n\t\t\t\t\t$selectedFields.toggleClass( 'frm6', ! msg.includes( 'frm-inline-message' ) );\n\t\t\t\t\t$selectedFields.html( msg ).show();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction updateFieldOrder() {\n\t\tlet self = this;\n\n\t\tthis.initOnceInAllInstances = function() {\n\t\t\tif ( 'undefined' !== typeof updateFieldOrder.prototype.orderFieldsObject ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// It will store the order input fields ( input[name=\"field_options[field_order_{fieldId}]\"] ).\n\t\t\t// It will help to reduce the DOM searches based on fieldId.\n\t\t\t// The same object data is used across all \"updateFieldOrder\" instances.\n\t\t\tupdateFieldOrder.prototype.orderFieldsObject = {};\n\n\t\t\t// Get the Form group that will handle the fields settings.\n\t\t\t// Perform a single DOM search and use it across all \"updateFieldOrder\" instances.\n\t\t\tupdateFieldOrder.prototype.fieldSettingsForm = document.getElementById( 'frm-end-form-marker' ).closest( 'form' );\n\t\t};\n\n\t\tthis.getFieldOrderInputById = function( fieldId, parent ) {\n\t\t\tlet field;\n\t\t\tconst orderFieldsObject = updateFieldOrder.prototype.orderFieldsObject;\n\t\t\tconst fieldSettingsForm = updateFieldOrder.prototype.fieldSettingsForm;\n\n\t\t\tif ( 'undefined' === typeof orderFieldsObject[ fieldId ] ) {\n\t\t\t\tfield = fieldSettingsForm.querySelector( 'input[name=\"field_options[field_order_' + fieldId + ']\"]' );\n\t\t\t\tif ( null === field ) {\n\t\t\t\t\tfield = parent.querySelector( 'input[name=\"field_options[field_order_' + fieldId + ']\"]' );\n\t\t\t\t}\n\t\t\t\torderFieldsObject[ fieldId ] = field;\n\t\t\t\treturn field;\n\t\t\t}\n\n\t\t\treturn orderFieldsObject[ fieldId ];\n\t\t};\n\n\t\tthis.initOnceInAllInstances();\n\t\trenumberPageBreaks();\n\n\t\treturn ( function() {\n\t\t\tlet fieldId, field, currentOrder, newOrder,\n\t\t\t\tmoveFieldsClass = new moveFieldSettings(),\n\t\t\t\tfields = jQuery( 'li.frm_field_box', jQuery( '#frm-show-fields' ) );\n\n\t\t\tfor ( i = 0; i < fields.length; i++ ) {\n\t\t\t\tfieldId = fields[ i ].getAttribute( 'data-fid' );\n\t\t\t\tfield = self.getFieldOrderInputById( fieldId, fields[ i ] );\n\n\t\t\t\t// get current field order, make sure we don't get the \"field\" reference as the \"field\" value will get updated later.\n\t\t\t\tcurrentOrder = null !== field ? Object.assign( {}, field.value )[ 0 ] : null;\n\t\t\t\tnewOrder = i + 1;\n\n\t\t\t\tif ( currentOrder != newOrder && null !== currentOrder ) {\n\t\t\t\t\tfield.value = newOrder;\n\t\t\t\t\tsingleField = fields[ i ].querySelector( '#frm-single-settings-' + fieldId );\n\n\t\t\t\t\t// add field that needs to be moved to \"updateFieldOrder.prototype.fieldSettingsForm\"\n\t\t\t\t\tmoveFieldsClass.append( singleField );\n\t\t\t\t\tfieldUpdated();\n\t\t\t\t}\n\t\t\t}\n\t\t\t// move all appended fields\n\t\t\tmoveFieldsClass.moveFields();\n\t\t}() );\n\t}\n\n\tfunction toggleSectionHolder() {\n\t\tdocument.querySelectorAll( '.start_divider' ).forEach(\n\t\t\tfunction( divider ) {\n\t\t\t\ttoggleOneSectionHolder( jQuery( divider ) );\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction toggleOneSectionHolder( $section ) {\n\t\tlet noSectionFields, $rows, length, index, sectionHasFields;\n\n\t\tif ( ! $section.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t$rows = $section.find( 'ul.frm_sorting' );\n\t\tsectionHasFields = false;\n\t\tlength = $rows.length;\n\t\tfor ( index = 0; index < length; ++index ) {\n\t\t\tif ( 0 !== getFieldsInRow( jQuery( $rows.get( index ) ) ).length ) {\n\t\t\t\tsectionHasFields = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tnoSectionFields = $section.parent().children( '.frm_no_section_fields' ).get( 0 );\n\t\tnoSectionFields.classList.toggle( 'frm_block', ! sectionHasFields );\n\t}\n\n\tfunction handleShowPasswordLiveUpdate() {\n\t\tfrmDom.util.documentOn( 'change', '.frm_show_password_setting_input', event => {\n\t\t\tconst fieldId = event.target.getAttribute( 'data-fid' );\n\t\t\tconst fieldEl = document.getElementById( 'frm_field_id_' + fieldId );\n\t\t\tif ( ! fieldEl ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfieldEl.classList.toggle( 'frm_disabled_show_password', ! event.target.checked );\n\t\t} );\n\t}\n\n\tfunction slideDown() {\n\t\t/*jshint validthis:true */\n\t\tconst id = jQuery( this ).data( 'slidedown' );\n\t\tconst $thisId = jQuery( document.getElementById( id ) );\n\t\tif ( $thisId.is( ':hidden' ) ) {\n\t\t\t$thisId.slideDown( 'fast' );\n\t\t\tthis.style.display = 'none';\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction slideUp() {\n\t\t/*jshint validthis:true */\n\t\tconst id = jQuery( this ).data( 'slideup' );\n\t\tconst $thisId = jQuery( document.getElementById( id ) );\n\t\t$thisId.slideUp( 'fast' );\n\t\t$thisId.siblings( 'a' ).show();\n\t\treturn false;\n\t}\n\n\tfunction adjustVisibilityValuesForEveryoneValues( element, option ) {\n\t\tif ( '' === option.getAttribute( 'value' ) ) {\n\t\t\tonEveryoneOptionSelected( jQuery( this ) );\n\t\t} else {\n\t\t\tunselectEveryoneOptionIfSelected( jQuery( this ) );\n\t\t}\n\t}\n\n\tfunction onEveryoneOptionSelected( $select ) {\n\t\t$select.val( '' );\n\t\t$select.next( '.btn-group' ).find( '.multiselect-container input[value!=\"\"]' ).prop( 'checked', false );\n\t}\n\n\tfunction unselectEveryoneOptionIfSelected( $select ) {\n\t\tlet selectedValues = $select.val(),\n\t\t\tindex;\n\n\t\tif ( selectedValues === null ) {\n\t\t\t$select.next( '.btn-group' ).find( '.multiselect-container input[value=\"\"]' ).prop( 'checked', true );\n\t\t\tonEveryoneOptionSelected( $select );\n\t\t\treturn;\n\t\t}\n\n\t\tindex = selectedValues.indexOf( '' );\n\t\tif ( index >= 0 ) {\n\t\t\tselectedValues.splice( index, 1 );\n\t\t\t$select.val( selectedValues );\n\t\t\t$select.next( '.btn-group' ).find( '.multiselect-container input[value=\"\"]' ).prop( 'checked', false );\n\t\t}\n\t}\n\n\t/**\n\t * Get rid of empty container that inserts extra space.\n\t */\n\tfunction hideEmptyEle() {\n\t\tjQuery( '.frm-hide-empty' ).each( function() {\n\t\t\tif ( jQuery( this ).text().trim().length === 0 ) {\n\t\t\t\tjQuery( this ).remove();\n\t\t\t}\n\t\t} );\n\t}\n\n\t/* Change the classes in the builder */\n\tfunction changeFieldClass( field, setting ) {\n\t\tlet classes, replace, alignField,\n\t\t\treplaceWith = ' ' + setting.value,\n\t\t\tfieldId = field.getAttribute( 'data-fid' );\n\n\t\t// Include classes from multiple settings.\n\t\tif ( typeof fieldId !== 'undefined' ) {\n\t\t\tif ( setting.classList.contains( 'field_options_align' ) ) {\n\t\t\t\treplaceWith += ' ' + document.getElementById( 'frm_classes_' + fieldId ).value;\n\t\t\t} else if ( setting.classList.contains( 'frm_classes' ) ) {\n\t\t\t\talignField = document.getElementById( 'field_options_align_' + fieldId );\n\t\t\t\tif ( alignField !== null ) {\n\t\t\t\t\treplaceWith += ' ' + alignField.value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treplaceWith += ' ';\n\n\t\t// Allow for the column number dropdown.\n\t\treplaceWith = replaceWith.replace( ' block ', ' vertical_radio ' ).replace( ' inline ', ' horizontal_radio ' );\n\n\t\tclasses = field.className.split( ' frmstart ' )[ 1 ];\n\t\tclasses = 0 === classes.indexOf( 'frmend ' ) ? '' : classes.split( ' frmend ' )[ 0 ];\n\n\t\tif ( classes.trim() === '' ) {\n\t\t\treplace = ' frmstart  frmend ';\n\t\t\tif ( -1 === field.className.indexOf( replace ) ) {\n\t\t\t\treplace = ' frmstart frmend ';\n\t\t\t}\n\t\t\treplaceWith = ' frmstart ' + replaceWith.trim() + ' frmend ';\n\t\t} else {\n\t\t\treplace = classes.trim();\n\t\t\treplaceWith = replaceWith.trim();\n\t\t}\n\n\t\tfield.className = field.className.replace( replace, replaceWith );\n\t}\n\n\tfunction maybeShowInlineModal( e ) {\n\t\t/*jshint validthis:true */\n\t\te.preventDefault();\n\t\tshowInlineModal( this, undefined, e );\n\t}\n\n\tfunction showInlineModal( icon, input, event ) {\n\t\tconst box = document.getElementById( icon.getAttribute( 'data-open' ) ),\n\t\t\tcontainer = jQuery( icon ).closest( 'p,ul' ),\n\t\t\tinputTrigger = ( typeof input !== 'undefined' );\n\n\t\tif ( container.hasClass( 'frm-open' ) ) {\n\t\t\tcontainer.removeClass( 'frm-open' );\n\t\t\tbox.classList.add( 'frm_hidden' );\n\t\t} else {\n\t\t\tif ( ! inputTrigger ) {\n\t\t\t\tinput = getInputForIcon( icon );\n\t\t\t}\n\t\t\tif ( input !== null ) {\n\t\t\t\tif ( ! inputTrigger ) {\n\t\t\t\t\tconst { key } = event;\n\t\t\t\t\tif ( key !== 'Enter' && key !== ' ' ) {\n\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcontainer.after( box );\n\t\t\t\tbox.setAttribute( 'data-fills', input.id.replace( '-proxy-input', '' ) );\n\n\t\t\t\tif ( box.id.indexOf( 'frm-calc-box' ) === 0 ) {\n\t\t\t\t\tpopCalcFields( box, true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcontainer.addClass( 'frm-open' );\n\t\t\tbox.classList.remove( 'frm_hidden' );\n\n\t\t\t/**\n\t\t\t * @since 6.4.1\n\t\t\t */\n\t\t\twp.hooks.doAction( 'frm_show_inline_modal', box, icon );\n\t\t}\n\t}\n\n\tfunction dismissInlineModal( e ) {\n\t\t/*jshint validthis:true */\n\t\te.preventDefault();\n\t\tthis.parentNode.classList.add( 'frm_hidden' );\n\t\tjQuery( '.frm-open [data-open=\"' + this.parentNode.id + '\"]' ).closest( '.frm-open' ).removeClass( 'frm-open' );\n\t}\n\n\t/**\n\t * Close frm-modal-no-dismiss element when clicking outside of it\n\t *\n\t * @param {Event} event The click event\n\t */\n\tfunction closeModalOnOutsideClick( { target } ) {\n\t\tif (\n\t\t\ttarget.closest( '.frm-inline-modal.frm-modal-no-dismiss' ) ||\n\t\t\ttarget.closest( '.frm-show-inline-modal' ) ||\n\t\t\ttarget.closest( '#frm_adv_info' ) ||\n\t\t\ttarget.closest( '.frm-token-proxy-input' )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Close all inline modals (without close button) that are not hidden\n\t\tdocument.querySelectorAll( '.frm-inline-modal.frm-modal-no-dismiss:not(.frm_hidden)' ).forEach( modal => {\n\t\t\tmodal.classList.add( 'frm_hidden' );\n\t\t\tmodal.previousElementSibling.classList.remove( 'frm-open' );\n\t\t} );\n\t}\n\n\tfunction changeInputtedValue() {\n\t\t/*jshint validthis:true */\n\t\tlet i,\n\t\t\taction = this.getAttribute( 'data-frmchange' ).split( ',' );\n\n\t\tfor ( i = 0; i < action.length; i++ ) {\n\t\t\tif ( action[ i ] === 'updateOption' ) {\n\t\t\t\tchangeHiddenSeparateValue( this );\n\t\t\t} else if ( action[ i ] === 'updateDefault' ) {\n\t\t\t\tchangeDefaultRadioValue( this );\n\t\t\t} else if ( action[ i ] === 'checkUniqueOpt' ) {\n\t\t\t\tcheckUniqueOpt( this );\n\t\t\t} else {\n\t\t\t\tthis.value = this.value[ action[ i ] ]();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * When the saved value is changed, update the default value radio.\n\t */\n\tfunction changeDefaultRadioValue( input ) {\n\t\tconst parentLi = getOptionParent( input ),\n\t\t\tkey = parentLi.getAttribute( 'data-optkey' ),\n\t\t\tfieldId = getOptionFieldId( parentLi, key ),\n\t\t\tdefaultRadio = parentLi.querySelector( 'input[name=\"default_value_' + fieldId + '\"]' );\n\n\t\tif ( defaultRadio !== null ) {\n\t\t\tdefaultRadio.value = input.value;\n\t\t}\n\t}\n\n\t/**\n\t * If separate values are not enabled, change the saved value when\n\t * the displayed value is changed.\n\t */\n\tfunction changeHiddenSeparateValue( input ) {\n\t\tlet savedVal,\n\t\t\tparentLi = getOptionParent( input ),\n\t\t\tkey = parentLi.getAttribute( 'data-optkey' ),\n\t\t\tfieldId = getOptionFieldId( parentLi, key ),\n\t\t\tsep = document.getElementById( 'separate_value_' + fieldId );\n\n\t\tif ( sep !== null && sep.checked === false ) {\n\t\t\t// If separate values are not turned on.\n\t\t\tsavedVal = document.getElementById( 'field_key_' + fieldId + '-' + key );\n\t\t\tsavedVal.value = input.value;\n\t\t\tchangeDefaultRadioValue( savedVal );\n\t\t}\n\t}\n\n\tfunction getOptionParent( input ) {\n\t\tlet parentLi = input.parentNode;\n\t\tif ( parentLi.tagName !== 'LI' ) {\n\t\t\tparentLi = parentLi.parentNode;\n\t\t}\n\t\treturn parentLi;\n\t}\n\n\tfunction getOptionFieldId( li, key ) {\n\t\tconst liId = li.id;\n\n\t\treturn liId.replace( 'frm_delete_field_', '' ).replace( '-' + key + '_container', '' );\n\t}\n\n\tfunction submitBuild() {\n\t\t/*jshint validthis:true */\n\t\tconst $thisEle = this;\n\n\t\tif ( showNameYourFormModal() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tpreFormSave( this );\n\n\t\tconst $form = jQuery( builderForm );\n\t\tconst v = JSON.stringify( $form.serializeArray() );\n\n\t\tjQuery( document.getElementById( 'frm_compact_fields' ) ).val( v );\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: { action: 'frm_save_form', frm_compact_fields: v, nonce: frmGlobal.nonce },\n\t\t\tsuccess: function( msg ) {\n\t\t\t\tafterFormSave( $thisEle );\n\n\t\t\t\tconst $postStuff = document.getElementById( 'post-body-content' );\n\t\t\t\tconst $html = document.createElement( 'div' );\n\t\t\t\t$html.setAttribute( 'class', 'frm_updated_message' );\n\t\t\t\t$html.innerHTML = msg;\n\t\t\t\t$postStuff.insertBefore( $html, $postStuff.firstChild );\n\t\t\t\treloadIfAddonActivatedAjaxSubmitOnly();\n\t\t\t},\n\t\t\terror: function() {\n\t\t\t\ttriggerSubmit( document.getElementById( 'frm_js_build_form' ) );\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction triggerSubmit( form ) {\n\t\tconst button = form.ownerDocument.createElement( 'input' );\n\t\tbutton.style.display = 'none';\n\t\tbutton.type = 'submit';\n\t\tform.appendChild( button ).click();\n\t\tform.removeChild( button );\n\t}\n\n\tfunction triggerChange( element ) {\n\t\tjQuery( element ).trigger( 'change' );\n\t}\n\n\tfunction submitNoAjax() {\n\t\t/*jshint validthis:true */\n\t\tlet form;\n\n\t\tif ( showNameYourFormModal() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tpreFormSave( this );\n\t\tform = jQuery( builderForm );\n\t\tjQuery( document.getElementById( 'frm_compact_fields' ) ).val( JSON.stringify( form.serializeArray() ) );\n\t\ttriggerSubmit( document.getElementById( 'frm_js_build_form' ) );\n\t}\n\n\t/**\n\t * Display a modal dialog for naming a new form template, if applicable.\n\t *\n\t * @return {boolean} True if the modal is successfully initialized and displayed; false otherwise.\n\t */\n\tfunction showNameYourFormModal() {\n\t\t// Exit early if the 'new_template' URL parameter is not set to 'true'\n\t\tif ( ! shouldShowNameYourFormNameModal() ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst modalWidget = initModal( '#frm-form-templates-modal', '440px' );\n\t\tif ( ! modalWidget ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Set the vertical offset for the modal and open it\n\t\toffsetModalY( modalWidget, '72px' );\n\t\tmodalWidget.dialog( 'open' );\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns true if 'Name Your Form' modal should be displayed.\n\t *\n\t * @return {Boolean}\n\t */\n\tfunction shouldShowNameYourFormNameModal() {\n\t\tconst formNameInput = document.getElementById( 'frm_form_name' );\n\t\tif ( formNameInput && formNameInput.value.trim() !== '' ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn 'true' === urlParams.get( 'new_template' ) && document.querySelector( '#frm_top_bar #frm_bs_dropdown .frm_bstooltip' )?.textContent.trim() === frm_admin_js.noTitleText; // eslint-disable-line camelcase\n\t}\n\n\t/**\n\t * Manages event handling for the 'Name your form' modal.\n\t *\n\t * Attaches click and keydown event listeners to the save button and input field.\n\t *\n\t * @return {void}\n\t */\n\tfunction addFormNameModalEvents() {\n\t\tconst saveFormNameButton = document.getElementById( 'frm-save-form-name-button' );\n\t\tconst newFormNameInput = document.getElementById( 'frm_new_form_name_input' );\n\n\t\t// Attach click event listener\n\t\tonClickPreventDefault( saveFormNameButton, onSaveFormNameButton );\n\n\t\t// Attach keydown event listener\n\t\tnewFormNameInput.addEventListener( 'keydown', function( event ) {\n\t\t\tif ( event.key === 'Enter' ) {\n\t\t\t\tonSaveFormNameButton.call( this, event );\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Handles the click event on the save form name button.\n\t *\n\t * @param {Event} event The click event object.\n\t * @return {void}\n\t */\n\tconst onSaveFormNameButton = event => {\n\t\tconst newFormName = document.getElementById( 'frm_new_form_name_input' ).value.trim();\n\n\t\t// Prepare FormData for the POST request\n\t\tconst formData = new FormData();\n\t\tformData.append( 'form_id', urlParams.get( 'id' ) );\n\t\tformData.append( 'form_name', newFormName );\n\n\t\t// Perform the POST request\n\t\tdoJsonPost( 'rename_form', formData ).then( data => {\n\t\t\t// Remove the 'new_template' parameter from the URL and update the browser history\n\t\t\turlParams.delete( 'new_template' );\n\t\t\tcurrentURL.search = urlParams.toString();\n\t\t\thistory.replaceState( {}, '', currentURL.toString() );\n\n\t\t\tif ( null !== document.getElementById( 'frm_notification_settings' ) ) {\n\t\t\t\tdocument.getElementById( 'frm_form_name' ).value = newFormName;\n\t\t\t\tdocument.getElementById( 'frm_form_key' ).value = data.form_key;\n\t\t\t}\n\n\t\t\t// Trigger the 'Save' button click using jQuery\n\t\t\tjQuery( '#frm-publishing' ).find( '.frm_button_submit' ).trigger( 'click' );\n\t\t} );\n\t};\n\n\tfunction preFormSave( b ) {\n\t\tremoveWPUnload();\n\t\tif ( jQuery( 'form.inplace_form' ).length ) {\n\t\t\tjQuery( '.inplace_save, .postbox' ).trigger( 'click' );\n\t\t}\n\n\t\tif ( b.classList.contains( 'frm_button_submit' ) ) {\n\t\t\tb.classList.add( 'frm_loading_form' );\n\t\t} else {\n\t\t\tb.classList.add( 'frm_loading_button' );\n\t\t}\n\t\tb.setAttribute( 'aria-busy', 'true' );\n\n\t\tadjustFormatInputBeforeSave();\n\t}\n\n\t/**\n\t * Updates the format input based on the selected format type from dropdowns during the form save process.\n\t *\n\t * @since 6.9\n\t *\n\t * @return {void}\n\t */\n\tfunction adjustFormatInputBeforeSave() {\n\t\tconst formatTypes = document.querySelectorAll( '.frm_format_dropdown, .frm_phone_type_dropdown' );\n\t\tconst valueMap = {\n\t\t\tnone: '',\n\t\t\tinternational: 'international',\n\t\t\tcurrency: 'currency',\n\t\t\tnumber: 'number'\n\t\t};\n\n\t\tformatTypes.forEach( formatType => {\n\t\t\tconst value = formatType.value;\n\t\t\tif ( value in valueMap ) {\n\t\t\t\tconst formatInput = document.getElementById( `frm_format_${ formatType.dataset.fieldId }` );\n\t\t\t\tformatInput.value = valueMap[ value ];\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction afterFormSave( button ) {\n\t\tbutton.classList.remove( 'frm_loading_form' );\n\t\tbutton.classList.remove( 'frm_loading_button' );\n\t\tresetOptionTextDetails();\n\t\tfieldsUpdated = 0;\n\t\tbutton.setAttribute( 'aria-busy', 'false' );\n\n\t\tsetTimeout( function() {\n\t\t\tjQuery( '.frm_updated_message' ).fadeOut( 'slow', function() {\n\t\t\t\tthis.parentNode.removeChild( this );\n\t\t\t} );\n\t\t}, 5000 );\n\t}\n\n\tfunction initUpgradeModal() {\n\t\tconst $info = initModal( '#frm_upgrade_modal' );\n\t\tif ( $info === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdocument.addEventListener( 'click', handleUpgradeClick );\n\t\tfrmDom.util.documentOn( 'change', 'select.frm_select_with_upgrade', handleUpgradeClick );\n\n\t\tfunction handleUpgradeClick( event ) {\n\t\t\tlet element, link, content;\n\n\t\t\telement = event.target;\n\n\t\t\tif ( ! element.classList ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst showExpiredModal = element.classList.contains( 'frm_show_expired_modal' ) || null !== element.querySelector( '.frm_show_expired_modal' ) || element.closest( '.frm_show_expired_modal' );\n\n\t\t\t// If a `select` element is clicked, check if the selected option has a 'data-upgrade' attribute\n\t\t\tif ( event.type === 'change' && element.classList.contains( 'frm_select_with_upgrade' ) ) {\n\t\t\t\tconst selectedOption = element.options[ element.selectedIndex ];\n\t\t\t\tif ( selectedOption && selectedOption.dataset.upgrade ) {\n\t\t\t\t\telement = selectedOption;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( ! element.dataset.upgrade ) {\n\t\t\t\tlet parent = element.closest( '[data-upgrade]' );\n\t\t\t\tif ( ! parent ) {\n\t\t\t\t\tparent = element.closest( '.frm_field_box' );\n\t\t\t\t\tif ( ! parent ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// Fake it if it's missing to avoid error.\n\t\t\t\t\telement.dataset.upgrade = '';\n\t\t\t\t}\n\t\t\t\telement = parent;\n\t\t\t}\n\n\t\t\tif ( showExpiredModal ) {\n\t\t\t\tconst hookName = 'frm_show_expired_modal';\n\t\t\t\twp.hooks.doAction( hookName, element );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst upgradeLabel = element.dataset.upgrade;\n\t\t\tif ( ! upgradeLabel || element.classList.contains( 'frm_show_upgrade_tab' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\tconst modal = $info.get( 0 );\n\t\t\tconst lockIcon = modal.querySelector( '.frm_lock_icon' );\n\n\t\t\tif ( lockIcon ) {\n\t\t\t\tlockIcon.style.display = 'block';\n\t\t\t\tlockIcon.classList.remove( 'frm_lock_open_icon' );\n\t\t\t\tlockIcon.querySelector( 'use' ).setAttribute( 'href', '#frm_lock_icon' );\n\t\t\t}\n\n\t\t\tconst upgradeImageId = 'frm_upgrade_modal_image';\n\t\t\tconst oldImage = document.getElementById( upgradeImageId );\n\t\t\tif ( oldImage ) {\n\t\t\t\toldImage.remove();\n\t\t\t}\n\n\t\t\tif ( element.dataset.image ) {\n\t\t\t\tif ( lockIcon ) {\n\t\t\t\t\tlockIcon.style.display = 'none';\n\t\t\t\t}\n\t\t\t\tlockIcon.parentNode.insertBefore( img( { id: upgradeImageId, src: frmGlobal.url + '/images/' + element.dataset.image } ), lockIcon );\n\t\t\t}\n\n\t\t\tconst level = modal.querySelector( '.license-level' );\n\t\t\tif ( level ) {\n\t\t\t\tlevel.textContent = getRequiredLicenseFromTrigger( element );\n\t\t\t}\n\n\t\t\t// If one click upgrade, hide other content\n\t\t\taddOneClick( element, 'modal', upgradeLabel );\n\n\t\t\tmodal.querySelector( '.frm_are_not_installed' ).style.display = element.dataset.image ? 'none' : 'inline-block';\n\t\t\tmodal.querySelector( '.frm_feature_label' ).textContent = upgradeLabel;\n\t\t\tmodal.querySelector( 'h2' ).style.display = 'block';\n\n\t\t\t$info.dialog( 'open' );\n\n\t\t\t// set the utm medium\n\t\t\tconst button = modal.querySelector( '.button-primary:not(.frm-oneclick-button)' );\n\t\t\tlink = button.getAttribute( 'href' ).replace( /(medium=)[a-z_-]+/ig, '$1' + element.getAttribute( 'data-medium' ) );\n\t\t\tcontent = element.getAttribute( 'data-content' );\n\t\t\tif ( content === null ) {\n\t\t\t\tcontent = '';\n\t\t\t}\n\t\t\tlink = link.replace( /(content=)[a-z_-]+/ig, '$1' + content );\n\t\t\tbutton.setAttribute( 'href', link );\n\t\t}\n\t}\n\n\t/**\n\t * Opens a basic modal with the given title and content.\n\t *\n\t * @param {Event} event The event object.\n\t * @return {void}\n\t */\n\tfunction showBasicModal( event ) {\n\t\tconst button = event.target.dataset?.modalTitle ? event.target : event.target.closest( '[data-modal-title]' );\n\t\tif ( ! button ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { modalTitle, modalContent } = button.dataset;\n\t\tif ( ! modalTitle || ! modalContent ) {\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\n\t\tfrmDom.modal.maybeCreateModal(\n\t\t\t'frmBasicModal',\n\t\t\t{\n\t\t\t\ttitle: modalTitle,\n\t\t\t\tcontent: div( {\n\t\t\t\t\tclassName: 'inside',\n\t\t\t\t\tchild: span( modalContent ),\n\t\t\t\t} ),\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction getRequiredLicenseFromTrigger( element ) {\n\t\tif ( element.dataset.requires ) {\n\t\t\treturn element.dataset.requires;\n\t\t}\n\t\treturn 'Pro';\n\t}\n\n\tfunction populateUpgradeTab( element ) {\n\t\tconst title = element.dataset.upgrade;\n\n\t\tconst tab = element.getAttribute( 'href' ).replace( '#', '' );\n\t\tconst container = document.querySelector( '.frm_' + tab ) || document.querySelector( '.' + tab );\n\n\t\tif ( ! container ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( container.querySelector( '.frm-upgrade-message' ) ) {\n\t\t\t// Tab has already been populated.\n\t\t\treturn;\n\t\t}\n\n\t\tconst h2 = container.querySelector( 'h2' );\n\t\th2.style.borderBottom = 'none';\n\n\t\t/* translators: %s: Form Setting section name (ie Form Permissions, Form Scheduling). */\n\t\th2.textContent = sprintf( __( '%s are not installed', 'formidable' ), title );\n\n\t\tcontainer.classList.add( 'frmcenter' );\n\n\t\tconst upgradeModal = document.getElementById( 'frm_upgrade_modal' );\n\t\tappendClonedModalElementToContainer( 'frm-oneclick' );\n\t\tappendClonedModalElementToContainer( 'frm-addon-status' );\n\n\t\t// Borrow the call to action from the Upgrade upgradeModal which should exist on the settings page (it is still used for other upgrades including Actions).\n\t\tconst upgradeModalLink = upgradeModal.querySelector( '.frm-upgrade-link' );\n\t\tif ( upgradeModalLink ) {\n\t\t\tconst upgradeButton = upgradeModalLink.cloneNode( true );\n\t\t\tconst level = upgradeButton.querySelector( '.license-level' );\n\n\t\t\tif ( level ) {\n\t\t\t\tlevel.textContent = getRequiredLicenseFromTrigger( element );\n\t\t\t}\n\n\t\t\tcontainer.appendChild( upgradeButton );\n\n\t\t\t// Maybe append the secondary \"Already purchased?\" link from the upgradeModal as well.\n\t\t\tif ( upgradeModalLink.nextElementSibling && upgradeModalLink.nextElementSibling.querySelector( '.frm-link-secondary' ) ) {\n\t\t\t\tcontainer.appendChild( upgradeModalLink.nextElementSibling.cloneNode( true ) );\n\t\t\t}\n\n\t\t\tappendClonedModalElementToContainer( 'frm-oneclick-button' );\n\t\t}\n\n\t\tappendClonedModalElementToContainer( 'frm-upgrade-message' );\n\n\t\tlet upgradeLabel = element.dataset.message;\n\n\t\tif ( upgradeLabel === undefined ) {\n\t\t\tupgradeLabel = element.dataset.upgrade;\n\t\t}\n\t\taddOneClick( element, 'tab', upgradeLabel );\n\n\t\tif ( element.dataset.screenshot ) {\n\t\t\tcontainer.appendChild( getScreenshotWrapper( element.dataset.screenshot ) );\n\t\t}\n\n\t\tfunction appendClonedModalElementToContainer( className ) {\n\t\t\tcontainer.appendChild( upgradeModal.querySelector( '.' + className ).cloneNode( true ) );\n\t\t}\n\t}\n\n\tfunction getScreenshotWrapper( screenshot ) {\n\t\tconst folderUrl = frmGlobal.url + '/images/screenshots/';\n\t\tconst wrapper = div( {\n\t\t\tclassName: 'frm-settings-screenshot-wrapper',\n\t\t\tchildren: [\n\t\t\t\tgetToolbar(),\n\t\t\t\tdiv( { child: img( { src: folderUrl + screenshot } ) } )\n\t\t\t]\n\t\t} );\n\n\t\tfunction getToolbar() {\n\t\t\tconst children = getColorIcons();\n\t\t\tchildren.push( img( { src: frmGlobal.url + '/images/tab.svg' } ) );\n\t\t\treturn div( {\n\t\t\t\tclassName: 'frm-settings-screenshot-toolbar',\n\t\t\t\tchildren\n\t\t\t} );\n\t\t}\n\n\t\tfunction getColorIcons() {\n\t\t\treturn [ '#ED8181', '#EDE06A', '#80BE30' ].map(\n\t\t\t\tcolor => {\n\t\t\t\t\tconst circle = div( { className: 'frm-minmax-icon' } );\n\t\t\t\t\tcircle.style.backgroundColor = color;\n\t\t\t\t\treturn circle;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn wrapper;\n\t}\n\n\t/**\n\t * Allow addons to be installed from the upgrade modal.\n\t *\n\t * @param {Element}          link\n\t * @param {string}           context      Either 'modal' or 'tab'.\n\t * @param {string|undefined} upgradeLabel\n\t */\n\tfunction addOneClick( link, context, upgradeLabel ) {\n\t\tlet container;\n\n\t\tif ( 'modal' === context ) {\n\t\t\tcontainer = document.getElementById( 'frm_upgrade_modal' );\n\t\t} else if ( 'tab' === context ) {\n\t\t\tcontainer = document.getElementById( link.getAttribute( 'href' ).substr( 1 ) );\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tconst oneclickMessage = container.querySelector( '.frm-oneclick' );\n\t\tconst upgradeMessage = container.querySelector( '.frm-upgrade-message' );\n\t\tconst showLink = container.querySelector( '.frm-upgrade-link' );\n\t\tconst button = container.querySelector( '.frm-oneclick-button' );\n\t\tconst addonStatus = container.querySelector( '.frm-addon-status' );\n\n\t\tlet oneclick = link.getAttribute( 'data-oneclick' );\n\t\tlet newMessage = link.getAttribute( 'data-message' );\n\t\tlet showIt = 'block';\n\t\tlet showMsg = 'block';\n\t\tlet hideIt = 'none';\n\n\t\t// If one click upgrade, hide other content.\n\t\tif ( oneclickMessage !== null && typeof oneclick !== 'undefined' && oneclick ) {\n\t\t\tif ( newMessage === null ) {\n\t\t\t\tshowMsg = 'none';\n\t\t\t}\n\t\t\tshowIt = 'none';\n\t\t\thideIt = 'block';\n\t\t\toneclick = JSON.parse( oneclick );\n\n\t\t\tbutton.className = button.className.replace( ' frm-install-addon', '' ).replace( ' frm-activate-addon', '' );\n\t\t\tbutton.className = button.className + ' ' + oneclick.class;\n\t\t\tbutton.rel = oneclick.url;\n\n\t\t\tif ( oneclick.class === 'frm-activate-addon' ) {\n\t\t\t\toneclickMessage.textContent = __( 'This plugin is not activated. Would you like to activate it now?', 'formidable' );\n\t\t\t\tbutton.textContent = __( 'Activate', 'formidable' );\n\t\t\t} else {\n\t\t\t\toneclickMessage.textContent = __( 'That add-on is not installed. Would you like to install it now?', 'formidable' );\n\t\t\t\tbutton.textContent = __( 'Install', 'formidable' );\n\t\t\t}\n\t\t}\n\n\t\tif ( ! newMessage ) {\n\t\t\tnewMessage = upgradeMessage.getAttribute( 'data-default' );\n\t\t}\n\t\tif ( undefined !== upgradeLabel ) {\n\t\t\tnewMessage = newMessage.replace( '<span class=\"frm_feature_label\"></span>', upgradeLabel );\n\t\t}\n\n\t\tupgradeMessage.innerHTML = newMessage;\n\n\t\tif ( link.dataset.upsellImage ) {\n\t\t\tupgradeMessage.appendChild(\n\t\t\t\timg( {\n\t\t\t\t\tsrc: link.dataset.upsellImage,\n\t\t\t\t\talt: link.dataset.upgrade\n\t\t\t\t} )\n\t\t\t);\n\t\t}\n\n\t\t// Either set the link or use the default.\n\t\tshowLink.href = getShowLinkHrefValue( link, showLink );\n\n\t\taddonStatus.style.display = 'none';\n\n\t\toneclickMessage.style.display = hideIt;\n\t\tbutton.style.display = hideIt === 'block' ? 'inline-block' : hideIt;\n\t\tupgradeMessage.style.display = showMsg;\n\t\tshowLink.style.display = showIt === 'block' ? 'inline-block' : showIt;\n\t}\n\n\tfunction getShowLinkHrefValue( link, showLink ) {\n\t\tlet customLink = link.getAttribute( 'data-link' );\n\t\tif ( customLink === null || typeof customLink === 'undefined' || customLink === '' ) {\n\t\t\tcustomLink = showLink.getAttribute( 'data-default' );\n\t\t}\n\t\treturn customLink;\n\t}\n\n\t/* Form settings */\n\n\tfunction showInputIcon( parentClass ) {\n\t\tif ( typeof parentClass === 'undefined' ) {\n\t\t\tparentClass = '';\n\t\t}\n\t\tmaybeAddFieldSelection( parentClass );\n\t\tjQuery( parentClass + ' .frm_has_shortcodes:not(.frm-with-right-icon) input,' + parentClass + ' .frm_has_shortcodes:not(.frm-with-right-icon) textarea' ).wrap( '<span class=\"frm-with-right-icon\"></span>' ).before( '<svg class=\"frmsvg frm-show-box\"><use xlink:href=\"#frm_more_horiz_solid_icon\"/></svg>' );\n\t}\n\n\t/**\n\t * For reverse compatibility. Check for fields that were\n\t * using the old sidebar.\n\t */\n\tfunction maybeAddFieldSelection( parentClass ) {\n\t\tlet i,\n\t\t\tmissingClass = jQuery( parentClass + ' :not(.frm_has_shortcodes) .frm_not_email_message, ' + parentClass + ' :not(.frm_has_shortcodes) .frm_not_email_to, ' + parentClass + ' :not(.frm_has_shortcodes) .frm_not_email_subject' );\n\t\tfor ( i = 0; i < missingClass.length; i++ ) {\n\t\t\tmissingClass[ i ].parentNode.classList.add( 'frm_has_shortcodes' );\n\t\t}\n\t}\n\n\tfunction showSuccessOpt() {\n\t\t/*jshint validthis:true */\n\t\tlet c = 'success';\n\t\tif ( this.name === 'options[edit_action]' ) {\n\t\t\tc = 'edit';\n\t\t}\n\t\tconst v = jQuery( this ).val();\n\t\tjQuery( '.' + c + '_action_box' ).hide();\n\t\tif ( v === 'redirect' ) {\n\t\t\tjQuery( '.' + c + '_action_redirect_box.' + c + '_action_box' ).fadeIn( 'slow' );\n\t\t} else if ( v === 'page' ) {\n\t\t\tjQuery( '.' + c + '_action_page_box.' + c + '_action_box' ).fadeIn( 'slow' );\n\t\t} else {\n\t\t\tjQuery( '.' + c + '_action_message_box.' + c + '_action_box' ).fadeIn( 'slow' );\n\t\t}\n\t}\n\n\tfunction copyFormAction( event ) {\n\t\tif ( waitForActionToLoadBeforeCopy( event.target ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst targetSettings = event.target.closest( '.frm_form_action_settings' );\n\t\tconst wysiwygs = targetSettings.querySelectorAll( '.wp-editor-area' );\n\t\tif ( wysiwygs.length ) {\n\t\t\t// Temporary remove TinyMCE before cloning to avoid TinyMCE conflicts.\n\t\t\twysiwygs.forEach( wysiwyg => {\n\t\t\t\ttinymce.EditorManager.execCommand( 'mceRemoveEditor', true, wysiwyg.id );\n\t\t\t} );\n\t\t}\n\n\t\tconst $action = jQuery( targetSettings ).clone();\n\t\tconst currentID = $action.attr( 'id' ).replace( 'frm_form_action_', '' );\n\t\tconst newID = newActionId( currentID );\n\n\t\t$action.find( '.frm_action_id, .frm-btn-group' ).remove();\n\t\t$action.find( 'input[name$=\"[' + currentID + '][ID]\"]' ).val( '' );\n\t\t$action.find( '.widget-inside' ).hide();\n\n\t\t// the .html() gets original values, so they need to be set\n\t\t$action.find( 'input[type=text], textarea, input[type=number]' ).prop( 'defaultValue', function() {\n\t\t\treturn this.value;\n\t\t} );\n\n\t\t$action.find( 'input[type=checkbox], input[type=radio]' ).prop( 'defaultChecked', function() {\n\t\t\treturn this.checked;\n\t\t} );\n\n\t\tconst rename = new RegExp( '\\\\[' + currentID + '\\\\]', 'g' );\n\t\tconst reid = new RegExp( '_' + currentID + '\"', 'g' );\n\t\tconst reclass = new RegExp( '-' + currentID + '\"', 'g' );\n\t\tconst revalue = new RegExp( '\"' + currentID + '\"', 'g' ); // if a field id matches, this could cause trouble\n\n\t\tlet html = $action.html().replace( rename, '[' + newID + ']' ).replace( reid, '_' + newID + '\"' );\n\t\thtml = html.replace( reclass, '-' + newID + '\"' ).replace( revalue, '\"' + newID + '\"' );\n\n\t\tconst newAction = div( {\n\t\t\tid: 'frm_form_action_' + newID,\n\t\t\tclassName: $action.get( 0 ).className\n\t\t} );\n\t\tnewAction.setAttribute( 'data-actionkey', newID );\n\t\tnewAction.innerHTML = html;\n\t\tnewAction.querySelectorAll( '.wp-editor-wrap, .wp-editor-wrap *' ).forEach(\n\t\t\telement => {\n\t\t\t\tif ( 'string' === typeof element.className ) {\n\t\t\t\t\telement.className = element.className.replace( currentID, newID );\n\t\t\t\t}\n\t\t\t\telement.id = element.id.replace( currentID, newID );\n\t\t\t}\n\t\t);\n\t\tnewAction.classList.remove( 'open' );\n\t\tdocument.getElementById( 'frm_notification_settings' ).appendChild( newAction );\n\n\t\tif ( wysiwygs.length ) {\n\t\t\t// Re-initialize the original wysiwyg which was removed before cloning.\n\t\t\twysiwygs.forEach( wysiwyg => {\n\t\t\t\tfrmDom.wysiwyg.init( wysiwyg );\n\t\t\t} );\n\n\t\t\tnewAction.querySelectorAll( '.wp-editor-area' ).forEach( wysiwyg => {\n\t\t\t\tfrmDom.wysiwyg.init( wysiwyg );\n\t\t\t} );\n\t\t}\n\n\t\tif ( newAction.classList.contains( 'frm_single_on_submit_settings' ) ) {\n\t\t\tconst autocompleteInput = newAction.querySelector( 'input.frm-page-search' );\n\t\t\tif ( autocompleteInput ) {\n\t\t\t\tinitAutocomplete( newAction );\n\t\t\t}\n\t\t}\n\n\t\tinitiateMultiselect();\n\n\t\tconst hookName = 'frm_after_duplicate_action';\n\t\twp.hooks.doAction( hookName, newAction );\n\t}\n\n\tfunction waitForActionToLoadBeforeCopy( element ) {\n\t\tlet $trigger = jQuery( element ),\n\t\t\t$original = $trigger.closest( '.frm_form_action_settings' ),\n\t\t\t$inside = $original.find( '.widget-inside' ),\n\t\t\t$top;\n\n\t\tif ( $inside.find( 'p, div, table' ).length ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t$top = $original.find( '.widget-top' );\n\t\t$top.on( 'frm-action-loaded', function() {\n\t\t\t$trigger.trigger( 'click' );\n\t\t\t$original.removeClass( 'open' );\n\t\t\t$inside.hide();\n\t\t} );\n\t\t$top.trigger( 'click' );\n\t\treturn true;\n\t}\n\n\tfunction newActionId( currentID ) {\n\t\tlet newID = parseInt( currentID, 10 ) + 11;\n\t\tconst exists = document.getElementById( 'frm_form_action_' + newID );\n\t\tif ( exists !== null ) {\n\t\t\tnewID++;\n\t\t\tnewID = newActionId( newID );\n\t\t}\n\t\treturn newID;\n\t}\n\n\tfunction addFormAction() {\n\t\t/*jshint validthis:true */\n\t\tconst type = jQuery( this ).data( 'actiontype' );\n\n\t\tif ( isAtLimitForActionType( type ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst actionId = getNewActionId();\n\t\tconst formId = thisFormId;\n\n\t\tconst placeholderSetting = document.createElement( 'div' );\n\t\tplaceholderSetting.classList.add( 'frm_single_' + type + '_settings' );\n\n\t\tconst actionsList = document.getElementById( 'frm_notification_settings' );\n\t\tactionsList.appendChild( placeholderSetting );\n\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_add_form_action',\n\t\t\t\ttype: type,\n\t\t\t\tlist_id: actionId,\n\t\t\t\tform_id: formId,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: handleAddFormActionSuccess\n\t\t} );\n\n\t\tfunction handleAddFormActionSuccess( html ) {\n\t\t\tfieldUpdated();\n\t\t\tplaceholderSetting.remove();\n\n\t\t\tcloseOpenActions();\n\n\t\t\tconst newActionContainer = div();\n\t\t\tnewActionContainer.innerHTML = html;\n\n\t\t\tconst widgetTop = newActionContainer.querySelector( '.widget-top' );\n\t\t\tArray.from( newActionContainer.children ).forEach( child => actionsList.appendChild( child ) );\n\n\t\t\tjQuery( '.frm_form_action_settings' ).fadeIn( 'slow' );\n\n\t\t\tconst newAction = document.getElementById( 'frm_form_action_' + actionId );\n\n\t\t\tnewAction.classList.add( 'open' );\n\t\t\tdocument.getElementById( 'post-body-content' ).scroll( {\n\t\t\t\ttop: newAction.offsetTop + 10,\n\t\t\t\tleft: 0,\n\t\t\t\tbehavior: 'smooth'\n\t\t\t} );\n\n\t\t\t// Check if icon should be active\n\t\t\tcheckActiveAction( type );\n\t\t\tshowInputIcon( '#frm_form_action_' + actionId );\n\n\t\t\tinitiateMultiselect();\n\t\t\tinitAutocomplete( newAction );\n\n\t\t\tif ( widgetTop ) {\n\t\t\t\tjQuery( widgetTop ).trigger( 'frm-action-loaded' );\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Fires after added a new form action.\n\t\t\t *\n\t\t\t * @since 5.5.4\n\t\t\t *\n\t\t\t * @param {HTMLElement} formAction Form action element.\n\t\t\t */\n\t\t\tfrmAdminBuild.hooks.doAction( 'frm_added_form_action', newAction );\n\t\t}\n\t}\n\n\tfunction closeOpenActions() {\n\t\tdocument.querySelectorAll( '.frm_form_action_settings.open' ).forEach(\n\t\t\tsetting => setting.classList.remove( 'open' )\n\t\t);\n\t}\n\n\tfunction toggleActionGroups() {\n\t\t/*jshint validthis:true */\n\t\tconst actions = document.getElementById( 'frm_email_addon_menu' ).classList,\n\t\t\tsearch = document.getElementById( 'actions-search-input' );\n\n\t\tif ( actions.contains( 'frm-all-actions' ) ) {\n\t\t\tactions.remove( 'frm-all-actions' );\n\t\t\tactions.add( 'frm-limited-actions' );\n\t\t} else {\n\t\t\tactions.add( 'frm-all-actions' );\n\t\t\tactions.remove( 'frm-limited-actions' );\n\t\t}\n\n\t\t// Reset search.\n\t\tsearch.value = '';\n\t\ttriggerEvent( search, 'input' );\n\t}\n\n\tfunction getNewActionId() {\n\t\tlet actionSettings = document.querySelectorAll( '.frm_form_action_settings' ),\n\t\t\tlen = getNewRowId( actionSettings, 'frm_form_action_' );\n\t\tif ( typeof document.getElementById( 'frm_form_action_' + len ) !== 'undefined' ) {\n\t\t\tlen = len + 100;\n\t\t}\n\t\tif ( lastNewActionIdReturned >= len ) {\n\t\t\tlen = lastNewActionIdReturned + 1;\n\t\t}\n\t\tlastNewActionIdReturned = len;\n\t\treturn len;\n\t}\n\n\tfunction clickAction( obj ) {\n\t\tconst $thisobj = jQuery( obj );\n\n\t\tif ( obj.className.indexOf( 'selected' ) !== -1 ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( obj.className.indexOf( 'edit_field_type_end_divider' ) !== -1 && $thisobj.closest( '.edit_field_type_divider' ).hasClass( 'no_repeat_section' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdeselectFields();\n\t\t$thisobj.addClass( 'selected' );\n\t\tshowFieldOptions( obj );\n\t}\n\n\t/**\n\t * When a field is selected, show the field settings in the sidebar.\n\t */\n\tfunction showFieldOptions( obj ) {\n\t\tlet i, singleField,\n\t\t\tfieldId = obj.getAttribute( 'data-fid' ),\n\t\t\tfieldType = obj.getAttribute( 'data-type' ),\n\t\t\tallFieldSettings = document.querySelectorAll( '.frm-single-settings:not(.frm_hidden)' );\n\n\t\tfor ( i = 0; i < allFieldSettings.length; i++ ) {\n\t\t\tallFieldSettings[ i ].classList.add( 'frm_hidden' );\n\t\t}\n\n\t\tsingleField = document.getElementById( 'frm-single-settings-' + fieldId );\n\t\tmoveFieldSettings( singleField );\n\n\t\tif ( fieldType && 'quantity' === fieldType ) {\n\t\t\tpopProductFields( jQuery( singleField ).find( '.frmjs_prod_field_opt' )[ 0 ] );\n\t\t}\n\n\t\t// Scroll settings panel to top\n\t\tdocument.querySelector( '.frm-settings-panel.frm-scrollbar-wrapper' )?.scrollTo( {\n\t\t\ttop: 0,\n\t\t\tbehavior: 'instant'\n\t\t} );\n\n\t\tsingleField.classList.remove( 'frm_hidden' );\n\t\tdocument.getElementById( 'frm-options-panel-tab' ).click();\n\n\t\tconst editor = singleField.querySelector( '.wp-editor-area' );\n\t\tif ( editor ) {\n\t\t\tfrmDom.wysiwyg.init(\n\t\t\t\teditor,\n\t\t\t\t{ setupCallback: setupTinyMceEventHandlers }\n\t\t\t);\n\t\t}\n\n\t\twp.hooks.doAction( 'frmShowedFieldSettings', obj, singleField );\n\t\tmaybeAddShortcodesModalTriggerIcon( fieldType, fieldId, singleField );\n\t}\n\n\tfunction maybeAddShortcodesModalTriggerIcon( fieldType, fieldId, singleField ) {\n\t\tif ( ! shouldAddShortcodesModalTriggerIcon( fieldType ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst fieldSettingsSelector = '#frm-single-settings-' + fieldId;\n\t\tif ( document.querySelector( fieldSettingsSelector + ' .frm-show-box' ) ) {\n\t\t\treturn;\n\t\t}\n\t\tsingleField.querySelector( '.wp-editor-container' )?.classList.add( 'frm_has_shortcodes' );\n\n\t\tconst wrapTextareaWithIconContainer = () => {\n\t\t\tconst textareas = document.querySelectorAll( fieldSettingsSelector + ' .frm_has_shortcodes textarea' );\n\t\t\ttextareas.forEach( textarea => {\n\t\t\t\tconst wrapperSpan = span( { className: 'frm-with-right-icon' } );\n\t\t\t\ttextarea.parentNode.insertBefore( wrapperSpan, textarea );\n\t\t\t\twrapperSpan.appendChild( createModalTriggerIcon() );\n\t\t\t\twrapperSpan.appendChild( textarea );\n\t\t\t} );\n\t\t};\n\n\t\tconst createModalTriggerIcon = () => {\n\t\t\treturn frmDom.svg( { href: '#frm_more_horiz_solid_icon', classList: [ 'frm-show-box' ] } );\n\t\t};\n\n\t\twrapTextareaWithIconContainer();\n\t}\n\n\tfunction shouldAddShortcodesModalTriggerIcon( fieldType ) {\n\t\tconst fieldsWithShortcodesBox = wp.hooks.applyFilters( 'frm_fields_with_shortcode_popup', [ 'html' ] );\n\n\t\treturn fieldsWithShortcodesBox.includes( fieldType );\n\t}\n\n\tfunction setupTinyMceEventHandlers( editor ) {\n\t\teditor.on( 'Change', function() {\n\t\t\thandleTinyMceChange( editor );\n\t\t} );\n\t}\n\n\tfunction handleTinyMceChange( editor ) {\n\t\tif ( ! isTinyMceActive() || tinyMCE.activeEditor.isHidden() ) {\n\t\t\treturn;\n\t\t}\n\n\t\teditor.targetElm.value = editor.getContent();\n\t\tjQuery( editor.targetElm ).trigger( 'change' );\n\t}\n\n\tfunction isTinyMceActive() {\n\t\tlet activeSettings, wrapper;\n\n\t\tactiveSettings = document.querySelector( '.frm-single-settings:not(.frm_hidden)' );\n\t\tif ( ! activeSettings ) {\n\t\t\treturn false;\n\t\t}\n\n\t\twrapper = activeSettings.querySelector( '.wp-editor-wrap' );\n\t\treturn null !== wrapper && wrapper.classList.contains( 'tmce-active' );\n\t}\n\n\t/**\n\t * Move the settings to the sidebar the first time they are changed or selected.\n\t * Keep the end marker at the end of the form.\n\t */\n\tfunction moveFieldSettings( singleField ) {\n\t\tlet self = this;\n\n\t\tif ( singleField === null ) {\n\t\t\t// The field may have not been loaded yet via ajax.\n\t\t\treturn;\n\t\t}\n\n\t\tthis.fragment = document.createDocumentFragment();\n\n\t\tthis.initOnceInAllInstances = function() {\n\t\t\tif ( 'undefined' !== typeof moveFieldSettings.prototype.endMarker ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// perform a single search in the DOM and use it across all moveFieldSettings instances\n\t\t\tmoveFieldSettings.prototype.endMarker = document.getElementById( 'frm-end-form-marker' );\n\t\t};\n\n\t\tthis.append = function( field ) {\n\t\t\tconst classname = null !== field ? field.parentElement.classList : '';\n\t\t\tif ( null === field || ( ! classname.contains( 'frm_field_box' ) && ! classname.contains( 'divider_section_only' ) ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tself.fragment.appendChild( field );\n\t\t};\n\n\t\tthis.moveFields = function() {\n\t\t\tbuilderForm.insertBefore( self.fragment, moveFieldSettings.prototype.endMarker );\n\t\t};\n\n\t\tthis.initOnceInAllInstances();\n\n\t\t// Move the field if function is called as function with a singleField passed as arg.\n\t\t// In this particular case only 1 field is needed to be moved so the field will get instantly moved.\n\t\t// \"singleField\" may be undefined when it's called as a constructor instead of a function. Use the constructor to add multiple fields which are passed through \"append\" and move these all at once via \"moveFields\".\n\t\tif ( 'undefined' !== typeof singleField ) {\n\t\t\tthis.append( singleField );\n\t\t\tthis.moveFields();\n\t\t\treturn;\n\t\t}\n\n\t\treturn {\n\t\t\tappend: this.append,\n\t\t\tmoveFields: this.moveFields\n\t\t};\n\t}\n\n\tfunction showEmailRow() {\n\t\t/*jshint validthis:true */\n\t\tconst actionKey = jQuery( this ).closest( '.frm_form_action_settings' ).data( 'actionkey' );\n\t\tconst rowType = this.getAttribute( 'data-emailrow' );\n\n\t\tjQuery( '#frm_form_action_' + actionKey + ' .frm_' + rowType + '_row' ).fadeIn( 'slow' );\n\t\tjQuery( this ).fadeOut( 'slow' );\n\t}\n\n\tfunction hideEmailRow() {\n\t\t/*jshint validthis:true */\n\t\tconst actionBox = jQuery( this ).closest( '.frm_form_action_settings' ),\n\t\t\trowType = this.getAttribute( 'data-emailrow' ),\n\t\t\temailRowSelector = '.frm_' + rowType + '_row',\n\t\t\temailButtonSelector = '.frm_' + rowType + '_button';\n\n\t\tjQuery( actionBox ).find( emailButtonSelector ).fadeIn( 'slow' );\n\t\tjQuery( actionBox ).find( emailRowSelector ).fadeOut( 'slow', function() {\n\t\t\tjQuery( actionBox ).find( emailRowSelector + ' input' ).val( '' );\n\t\t} );\n\t}\n\n\tfunction showEmailWarning() {\n\t\t/*jshint validthis:true */\n\t\tconst actionBox = jQuery( this ).closest( '.frm_form_action_settings' ),\n\t\t\temailRowSelector = '.frm_from_to_match_row',\n\t\t\tfromVal = actionBox.find( 'input[name$=\"[post_content][from]\"]' ).val(),\n\t\t\ttoVal = actionBox.find( 'input[name$=\"[post_content][email_to]\"]' ).val();\n\n\t\tif ( fromVal === toVal ) {\n\t\t\tjQuery( actionBox ).find( emailRowSelector ).fadeIn( 'slow' );\n\t\t} else {\n\t\t\tjQuery( actionBox ).find( emailRowSelector ).fadeOut( 'slow' );\n\t\t}\n\t}\n\n\tfunction checkActiveAction( type ) {\n\t\tconst actionTriggers = document.querySelectorAll( '.frm_' + type + '_action' );\n\n\t\tif ( isAtLimitForActionType( type ) ) {\n\t\t\tconst addAlreadyUsedClass = getLimitForActionType( type ) > 0;\n\t\t\tmarkActionTriggersInactive( actionTriggers, addAlreadyUsedClass );\n\t\t\treturn;\n\t\t}\n\n\t\tmarkActionTriggersActive( actionTriggers );\n\t}\n\n\tfunction markActionTriggersActive( triggers ) {\n\t\ttriggers.forEach(\n\t\t\ttrigger => {\n\t\t\t\tif ( trigger.querySelector( '.frm_show_upgrade' ) ) {\n\t\t\t\t\t// Prevent disabled action becoming active.\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttrigger.classList.remove( 'frm_inactive_action', 'frm_already_used' );\n\t\t\t\ttrigger.classList.add( 'frm_active_action' );\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction markActionTriggersInactive( triggers, addAlreadyUsedClass ) {\n\t\ttriggers.forEach(\n\t\t\ttrigger => {\n\t\t\t\ttrigger.classList.remove( 'frm_active_action' );\n\t\t\t\ttrigger.classList.add( 'frm_inactive_action' );\n\t\t\t\tif ( addAlreadyUsedClass ) {\n\t\t\t\t\ttrigger.classList.add( 'frm_already_used' );\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction isAtLimitForActionType( type ) {\n\t\tlet atLimit = getNumberOfActionsForType( type ) >= getLimitForActionType( type );\n\n\t\tconst hookName = 'frm_action_at_limit';\n\t\tconst hookArgs = { type };\n\t\tatLimit = wp.hooks.applyFilters( hookName, atLimit, hookArgs );\n\n\t\treturn atLimit;\n\t}\n\n\tfunction getLimitForActionType( type ) {\n\t\treturn parseInt( jQuery( '.frm_' + type + '_action' ).data( 'limit' ), 10 );\n\t}\n\n\tfunction getNumberOfActionsForType( type ) {\n\t\treturn jQuery( '.frm_single_' + type + '_settings' ).length;\n\t}\n\n\tfunction actionLimitMessage() {\n\t\tlet message = frmAdminJs.only_one_action;\n\t\tlet limit = this.dataset.limit;\n\n\t\tif ( 'undefined' !== typeof limit ) {\n\t\t\tlimit = parseInt( limit );\n\t\t\tif ( limit > 1 ) {\n\t\t\t\tmessage = message.replace( 1, limit ).trim();\n\t\t\t} else {\n\t\t\t\tmessage += ' ' + frmAdminJs.edit_action_text;\n\t\t\t}\n\t\t}\n\n\t\tinfoModal( message );\n\t}\n\n\tfunction addFormLogicRow() {\n\t\t/*jshint validthis:true */\n\t\tconst id = jQuery( this ).data( 'emailkey' );\n\t\tconst type = jQuery( this ).closest( '.frm_form_action_settings' ).find( '.frm_action_name' ).val();\n\t\tconst formId = document.getElementById( 'form_id' ).value;\n\t\tconst logicRowsContainer = document.getElementById( 'frm_logic_row_' + id );\n\t\tconst logicRows = logicRowsContainer.querySelectorAll( '.frm_logic_row' );\n\t\tconst newRowID = getNewRowId( logicRows, 'frm_logic_' + id + '_' );\n\t\tconst placeholder = div( {\n\t\t\tid: 'frm_logic_' + id + '_' + newRowID,\n\t\t\tclassName: 'frm_logic_row frm_hidden'\n\t\t} );\n\n\t\tlogicRowsContainer.appendChild( placeholder );\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST', url: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_add_form_logic_row',\n\t\t\t\temail_id: id,\n\t\t\t\tform_id: formId,\n\t\t\t\tmeta_name: newRowID,\n\t\t\t\ttype: type,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: function( html ) {\n\t\t\t\tjQuery( document.getElementById( 'logic_link_' + id ) ).fadeOut( 'slow', () => {\n\t\t\t\t\tplaceholder.insertAdjacentHTML( 'beforebegin', html );\n\t\t\t\t\tplaceholder.remove();\n\n\t\t\t\t\t// Show conditional logic options after \"Add Conditional Logic\" is clicked.\n\t\t\t\t\tjQuery( logicRowsContainer ).parent( '.frm_logic_rows' ).fadeIn( 'slow' );\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t\treturn false;\n\t}\n\n\tfunction checkDupPost() {\n\t\t/*jshint validthis:true */\n\t\tconst postField = jQuery( 'select.frm_single_post_field' );\n\t\tpostField.css( 'border-color', '' );\n\t\tconst $t = this;\n\t\tconst v = jQuery( $t ).val();\n\t\tif ( v === '' || v === 'checkbox' ) {\n\t\t\treturn false;\n\t\t}\n\t\tpostField.each( function() {\n\t\t\tif ( jQuery( this ).val() === v && this.name !== $t.name ) {\n\t\t\t\tthis.style.borderColor = 'red';\n\t\t\t\tjQuery( $t ).val( '' );\n\t\t\t\tinfoModal( frmAdminJs.field_already_used );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction togglePostContent() {\n\t\t/*jshint validthis:true */\n\t\tconst v = jQuery( this ).val();\n\t\tif ( '' === v ) {\n\t\t\tjQuery( '.frm_post_content_opt, select.frm_dyncontent_opt' ).hide().val( '' );\n\t\t\tjQuery( '.frm_dyncontent_opt' ).hide();\n\t\t} else if ( 'post_content' === v ) {\n\t\t\tjQuery( '.frm_post_content_opt' ).show();\n\t\t\tjQuery( '.frm_dyncontent_opt' ).hide();\n\t\t\tjQuery( 'select.frm_dyncontent_opt' ).val( '' );\n\t\t} else {\n\t\t\tjQuery( '.frm_post_content_opt' ).hide().val( '' );\n\t\t\tjQuery( 'select.frm_dyncontent_opt, .frm_form_field.frm_dyncontent_opt' ).show();\n\t\t}\n\t}\n\n\tfunction fillDyncontent() {\n\t\t/*jshint validthis:true */\n\t\tconst v = jQuery( this ).val();\n\t\tconst $dyn = jQuery( document.getElementById( 'frm_dyncontent' ) );\n\t\tif ( '' === v || 'new' === v ) {\n\t\t\t$dyn.val( '' );\n\t\t\tjQuery( '.frm_dyncontent_opt' ).show();\n\t\t} else {\n\t\t\tjQuery.ajax( {\n\t\t\t\ttype: 'POST', url: ajaxurl,\n\t\t\t\tdata: { action: 'frm_display_get_content', id: v, nonce: frmGlobal.nonce },\n\t\t\t\tsuccess: function( val ) {\n\t\t\t\t\t$dyn.val( val );\n\t\t\t\t\tjQuery( '.frm_dyncontent_opt' ).show();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction switchPostType() {\n\t\t/*jshint validthis:true */\n\t\t// update all rows of categories/taxonomies\n\t\tlet curSelect, newSelect,\n\t\t\tcatRows = document.getElementById( 'frm_posttax_rows' ).childNodes,\n\t\t\tpostParentField = document.querySelector( '.frm_post_parent_field' ),\n\t\t\tpostMenuOrderField = document.querySelector( '.frm_post_menu_order_field' ),\n\t\t\tpostType = this.value;\n\n\t\t// Get new category/taxonomy options\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_replace_posttax_options',\n\t\t\t\tpost_type: postType,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: function( html ) {\n\t\t\t\t// Loop through each category row, and replace the first dropdown\n\t\t\t\tfor ( i = 0; i < catRows.length; i++ ) {\n\t\t\t\t\t// Check if current element is a div\n\t\t\t\t\tif ( catRows[ i ].tagName !== 'DIV' ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Get current category select\n\t\t\t\t\tcurSelect = catRows[ i ].getElementsByTagName( 'select' )[ 0 ];\n\n\t\t\t\t\t// Set up new select\n\t\t\t\t\tnewSelect = document.createElement( 'select' );\n\t\t\t\t\tnewSelect.innerHTML = html;\n\t\t\t\t\tnewSelect.className = curSelect.className;\n\t\t\t\t\tnewSelect.name = curSelect.name;\n\n\t\t\t\t\t// Replace the old select with the new select\n\t\t\t\t\tcatRows[ i ].replaceChild( newSelect, curSelect );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\t// Get new post parent option.\n\t\tif ( postParentField ) {\n\t\t\tgetActionOption(\n\t\t\t\tpostParentField,\n\t\t\t\tpostType,\n\t\t\t\t'frm_get_post_parent_option',\n\t\t\t\tfunction( response, optName ) {\n\t\t\t\t\t// The replaced string is declared in FrmProFormActionController::ajax_get_post_menu_order_option() in the pro version.\n\t\t\t\t\tpostParentField.querySelector( '.frm_post_parent_opt_wrapper' ).innerHTML = response.replaceAll( 'REPLACETHISNAME', optName );\n\t\t\t\t\tinitAutocomplete( postParentField );\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif ( postMenuOrderField ) {\n\t\t\tgetActionOption( postMenuOrderField, postType, 'frm_should_use_post_menu_order_option' );\n\t\t}\n\t}\n\n\tfunction getActionOption( field, postType, action, successHandler ) {\n\t\tconst opt = field.querySelector( '.frm_autocomplete_value_input' ) || field.querySelector( 'select' ),\n\t\t\toptName = opt.getAttribute( 'name' );\n\n\t\tjQuery.ajax( {\n\t\t\turl: ajaxurl,\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\taction: action,\n\t\t\t\tpost_type: postType,\n\t\t\t\t_wpnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: response => {\n\t\t\t\tif ( 'string' !== typeof response ) {\n\t\t\t\t\tconsole.error( response );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( '0' === response ) {\n\t\t\t\t\t// This post type does not support this field.\n\t\t\t\t\tfield.classList.add( 'frm_hidden' );\n\t\t\t\t\tfield.value = '';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfield.classList.remove( 'frm_hidden' );\n\n\t\t\t\tif ( 'function' === typeof successHandler ) {\n\t\t\t\t\tsuccessHandler( response, optName );\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: response => console.error( response )\n\t\t} );\n\t}\n\n\tfunction addPosttaxRow() {\n\t\t/*jshint validthis:true */\n\t\taddPostRow( 'tax', this );\n\t}\n\n\tfunction addPostmetaRow() {\n\t\t/*jshint validthis:true */\n\t\taddPostRow( 'meta', this );\n\t}\n\n\tfunction addPostRow( type, button ) {\n\t\tlet name,\n\t\t\tid = jQuery( 'input[name=\"id\"]' ).val(),\n\t\t\tsettings = jQuery( button ).closest( '.frm_form_action_settings' ),\n\t\t\tkey = settings.data( 'actionkey' ),\n\t\t\tpostType = settings.find( '.frm_post_type' ).val(),\n\t\t\tmetaName = 0,\n\t\t\tpostTypeRows = document.querySelectorAll( '.frm_post' + type + '_row' );\n\n\t\tif ( postTypeRows.length ) {\n\t\t\tname = postTypeRows[ postTypeRows.length - 1 ].id.replace( 'frm_post' + type + '_', '' );\n\t\t\tif ( isNumeric( name ) ) {\n\t\t\t\tmetaName = 1 + parseInt( name, 10 );\n\t\t\t} else {\n\t\t\t\tmetaName = 1;\n\t\t\t}\n\t\t}\n\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST', url: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_add_post' + type + '_row',\n\t\t\t\tform_id: id,\n\t\t\t\tmeta_name: metaName,\n\t\t\t\ttax_key: metaName,\n\t\t\t\tpost_type: postType,\n\t\t\t\taction_key: key,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: function( html ) {\n\t\t\t\tlet cfOpts, optIndex;\n\t\t\t\tjQuery( document.getElementById( 'frm_post' + type + '_rows' ) ).append( html );\n\t\t\t\tjQuery( '.frm_add_post' + type + '_row.button' ).hide();\n\n\t\t\t\tif ( type === 'meta' ) {\n\t\t\t\t\tjQuery( '.frm_name_value' ).show();\n\t\t\t\t\tcfOpts = document.querySelectorAll( '.frm_toggle_cf_opts' );\n\t\t\t\t\tfor ( optIndex = 0; optIndex < cfOpts.length - 1; ++optIndex ) {\n\t\t\t\t\t\tcfOpts[ optIndex ].style.display = 'none';\n\t\t\t\t\t}\n\t\t\t\t} else if ( type === 'tax' ) {\n\t\t\t\t\tjQuery( '.frm_posttax_labels' ).show();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction isNumeric( value ) {\n\t\treturn ! isNaN( parseFloat( value ) ) && isFinite( value );\n\t}\n\n\tfunction changePosttaxRow() {\n\t\t/*jshint validthis:true */\n\t\tif ( ! jQuery( this ).closest( '.frm_posttax_row' ).find( '.frm_posttax_opt_list' ).length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tjQuery( this ).closest( '.frm_posttax_row' ).find( '.frm_posttax_opt_list' ).html( '<div class=\"spinner frm_spinner\" style=\"display:block\"></div>' );\n\n\t\tconst postType = jQuery( this ).closest( '.frm_form_action_settings' ).find( 'select[name$=\"[post_content][post_type]\"]' ).val(),\n\t\t\tactionKey = jQuery( this ).closest( '.frm_form_action_settings' ).data( 'actionkey' ),\n\t\t\ttaxKey = jQuery( this ).closest( '.frm_posttax_row' ).attr( 'id' ).replace( 'frm_posttax_', '' ),\n\t\t\tmetaName = jQuery( this ).val(),\n\t\t\tshowExclude = jQuery( document.getElementById( taxKey + '_show_exclude' ) ).is( ':checked' ) ? 1 : 0,\n\t\t\tfieldId = jQuery( 'select[name$=\"[post_category][' + taxKey + '][field_id]\"]' ).val(),\n\t\t\tid = jQuery( 'input[name=\"id\"]' ).val();\n\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: ajaxurl,\n\t\t\tdata: {\n\t\t\t\taction: 'frm_add_posttax_row',\n\t\t\t\tform_id: id,\n\t\t\t\tpost_type: postType,\n\t\t\t\ttax_key: taxKey,\n\t\t\t\taction_key: actionKey,\n\t\t\t\tmeta_name: metaName,\n\t\t\t\tfield_id: fieldId,\n\t\t\t\tshow_exclude: showExclude,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t},\n\t\t\tsuccess: function( html ) {\n\t\t\t\tconst $tax = jQuery( document.getElementById( 'frm_posttax_' + taxKey ) );\n\t\t\t\t$tax.replaceWith( html );\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction toggleCfOpts() {\n\t\t/*jshint validthis:true */\n\t\tconst row = jQuery( this ).closest( '.frm_postmeta_row' );\n\t\tconst cancel = row.find( '.frm_cancelnew' );\n\t\tconst select = row.find( '.frm_enternew' );\n\t\tif ( row.find( 'select.frm_cancelnew' ).is( ':visible' ) ) {\n\t\t\tcancel.hide();\n\t\t\tselect.show();\n\t\t} else {\n\t\t\tcancel.show();\n\t\t\tselect.hide();\n\t\t}\n\n\t\trow.find( 'input.frm_enternew, select.frm_cancelnew' ).val( '' );\n\t\treturn false;\n\t}\n\n\tfunction toggleFormOpts() {\n\t\t/*jshint validthis:true */\n\t\tconst changedOpt = jQuery( this );\n\t\tlet val = changedOpt.val();\n\t\tif ( changedOpt.attr( 'type' ) === 'checkbox' ) {\n\t\t\tif ( this.checked === false ) {\n\t\t\t\tval = '';\n\t\t\t}\n\t\t}\n\n\t\tconst toggleClass = changedOpt.data( 'toggleclass' );\n\t\tif ( val === '' ) {\n\t\t\tjQuery( '.' + toggleClass ).hide();\n\t\t} else {\n\t\t\tjQuery( '.' + toggleClass ).show();\n\t\t\tjQuery( '.hide_' + toggleClass + '_' + val ).hide();\n\t\t}\n\t}\n\n\tfunction submitSettings() {\n\t\tif ( showNameYourFormModal() ) {\n\t\t\treturn;\n\t\t}\n\n\t\t/*jshint validthis:true */\n\t\tpreFormSave( this );\n\t\ttriggerSubmit( document.querySelector( '.frm_form_settings' ) );\n\t}\n\n\t/* Customization Panel */\n\tfunction insertCode( e ) {\n\t\t/*jshint validthis:true */\n\t\te.preventDefault();\n\t\tinsertFieldCode( jQuery( this ), this.getAttribute( 'data-code' ) );\n\t\treturn false;\n\t}\n\n\tfunction insertFieldCode( element, variable ) {\n\t\tlet rich = false,\n\t\t\telementId = element;\n\t\tif ( typeof element === 'object' ) {\n\t\t\tif ( element.hasClass( 'frm_noallow' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\telementId = jQuery( element ).closest( '[data-fills]' ).attr( 'data-fills' );\n\t\t\tif ( typeof elementId === 'undefined' ) {\n\t\t\t\telementId = element.closest( 'div' ).attr( 'class' );\n\t\t\t\tif ( typeof elementId !== 'undefined' ) {\n\t\t\t\t\telementId = elementId.split( ' ' )[ 1 ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( typeof elementId === 'undefined' ) {\n\t\t\tlet active = document.activeElement;\n\t\t\tif ( active.type === 'search' ) {\n\t\t\t\t// If the search field has focus, find the correct field.\n\t\t\t\telementId = active.id.replace( '-search-input', '' );\n\t\t\t\tif ( elementId.match( /\\d/gi ) === null ) {\n\t\t\t\t\tactive = jQuery( '.frm-single-settings:visible .' + elementId );\n\t\t\t\t\telementId = active.attr( 'id' );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\telementId = active.id;\n\t\t\t}\n\t\t}\n\n\t\tif ( elementId ) {\n\t\t\trich = jQuery( '#wp-' + elementId + '-wrap.wp-editor-wrap' ).length > 0;\n\t\t}\n\n\t\tconst contentBox = jQuery( document.getElementById( elementId ) );\n\t\tif ( typeof element.attr( 'data-shortcode' ) === 'undefined' && ( ! contentBox.length || typeof contentBox.attr( 'data-shortcode' ) === 'undefined' ) ) {\n\t\t\t// this helps to exclude those that don't want shortcode-like inserted content e.g. frm-pro's summary field\n\t\t\tconst doShortcode = element.parents( 'ul.frm_code_list' ).attr( 'data-shortcode' );\n\t\t\tif ( doShortcode === 'undefined' || doShortcode !== 'no' ) {\n\t\t\t\tvariable = '[' + variable + ']';\n\t\t\t}\n\t\t}\n\n\t\tif ( rich ) {\n\t\t\twpActiveEditor = elementId;\n\t\t}\n\n\t\tif ( ! contentBox.length ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( variable === '[default-html]' || variable === '[default-plain]' ) {\n\t\t\tlet p = 0;\n\t\t\tif ( variable === '[default-plain]' ) {\n\t\t\t\tp = 1;\n\t\t\t}\n\t\t\tjQuery.ajax( {\n\t\t\t\ttype: 'POST', url: ajaxurl,\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'frm_get_default_html',\n\t\t\t\t\tform_id: jQuery( 'input[name=\"id\"]' ).val(),\n\t\t\t\t\tplain_text: p,\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t},\n\t\t\t\telementId: elementId,\n\t\t\t\tsuccess: function( msg ) {\n\t\t\t\t\tif ( rich ) {\n\t\t\t\t\t\tconst p = document.createElement( 'p' );\n\t\t\t\t\t\tp.innerText = msg;\n\t\t\t\t\t\tsend_to_editor( p.innerHTML );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinsertContent( contentBox, msg );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\tvariable = maybeAddSanitizeUrlToShortcodeVariable( variable, element, contentBox );\n\t\t\tif ( rich ) {\n\t\t\t\tsend_to_editor( variable );\n\t\t\t} else {\n\t\t\t\tinsertContent( contentBox, variable );\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction maybeAddSanitizeUrlToShortcodeVariable( variable, element, contentBox ) {\n\t\tif ( 'object' !== typeof element || ! ( element instanceof jQuery ) || 0 !== contentBox[ 0 ].id.indexOf( 'success_url_' ) ) {\n\t\t\treturn variable;\n\t\t}\n\n\t\telement = element[ 0 ];\n\t\tif ( ! element.closest( '#frm-insert-fields-box' ) ) {\n\t\t\t// Only add sanitize_url=1 to field shortcodes.\n\t\t\treturn variable;\n\t\t}\n\n\t\tif ( ! element.parentNode.classList.contains( 'frm_insert_url' ) ) {\n\t\t\tvariable = variable.replace( ']', ' sanitize_url=1]' );\n\t\t}\n\n\t\treturn variable;\n\t}\n\n\tfunction insertContent( contentBox, variable ) {\n\t\tif ( document.selection ) {\n\t\t\tcontentBox[ 0 ].focus();\n\t\t\tdocument.selection.createRange().text = variable;\n\t\t} else {\n\t\t\tobj = contentBox[ 0 ];\n\t\t\tconst e = obj.selectionEnd;\n\n\t\t\tvariable = maybeFormatInsertedContent( contentBox, variable, obj.selectionStart, e );\n\n\t\t\tobj.value = obj.value.substr( 0, obj.selectionStart ) + variable + obj.value.substr( obj.selectionEnd, obj.value.length );\n\n\t\t\tconst s = e + variable.length;\n\n\t\t\tmaybeRemoveLayoutClasses( obj, variable );\n\n\t\t\tobj.focus();\n\t\t\tobj.setSelectionRange( s, s );\n\t\t}\n\t\ttriggerChange( contentBox );\n\t}\n\n\t/**\n\t * When a layout class is added, remove any previous layout classes to avoid conflicts.\n\t * We only expect one layout class to exist for a given field.\n\t * For example, if a field has frm_half and we set it to frm_third, frm_half will be removed.\n\t *\n\t * @since 6.11\n\t *\n\t * @param {HTMLElement} obj\n\t * @param {string}      variable\n\t * @return {void}\n\t */\n\tfunction maybeRemoveLayoutClasses( obj, variable ) {\n\t\tif ( ! obj.classList.contains( 'frm_classes' ) || ! isALayoutClass( variable ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst removeClasses = obj.value.split( ' ' ).filter( isALayoutClass );\n\t\tif ( removeClasses.length ) {\n\t\t\tobj.value = maybeRemoveClasses( obj.value, removeClasses, variable.trim() );\n\t\t}\n\t}\n\n\t/**\n\t * Check if a given class is a layout class.\n\t *\n\t * @since 6.11\n\t *\n\t * @param {string} className\n\t * @return {boolean}\n\t */\n\tfunction isALayoutClass( className ) {\n\t\tlet layoutClasses = [ 'frm_half', 'frm_third', 'frm_two_thirds', 'frm_fourth', 'frm_three_fourths', 'frm_fifth', 'frm_sixth', 'frm2', 'frm3', 'frm4', 'frm6', 'frm8', 'frm9', 'frm10', 'frm12' ];\n\t\treturn layoutClasses.includes( className.trim() );\n\t}\n\n\t/**\n\t * @since 6.11\n\t *\n\t * @param {string} beforeValue\n\t * @param {Array}  removeClasses\n\t * @param {string} variable\n\t * @return {string}\n\t */\n\tfunction maybeRemoveClasses( beforeValue, removeClasses, variable ) {\n\t\tconst currentClasses = beforeValue.split( ' ' ).filter(\n\t\t\tcurrentClass => {\n\t\t\t\tcurrentClass = currentClass.trim();\n\t\t\t\treturn currentClass.length && ! removeClasses.includes( currentClass );\n\t\t\t}\n\t\t);\n\t\tif ( ! currentClasses.includes( variable ) ) {\n\t\t\tcurrentClasses.push( variable );\n\t\t}\n\t\treturn currentClasses.join( ' ' );\n\t}\n\n\tfunction maybeFormatInsertedContent( input, textToInsert, selectionStart, selectionEnd ) {\n\t\tconst separator = input.data( 'sep' );\n\t\tif ( undefined === separator ) {\n\t\t\treturn textToInsert;\n\t\t}\n\n\t\tconst value = input.val();\n\n\t\tif ( ! value.trim().length ) {\n\t\t\treturn textToInsert;\n\t\t}\n\n\t\tconst startPattern = new RegExp( separator + '\\\\s*$' );\n\t\tconst endPattern = new RegExp( '^\\\\s*' + separator );\n\n\t\tif ( value.substr( 0, selectionStart ).trim().length && false === startPattern.test( value.substr( 0, selectionStart ) ) ) {\n\t\t\ttextToInsert = separator + textToInsert;\n\t\t}\n\n\t\tif ( value.substr( selectionEnd, value.length ).trim().length && false === endPattern.test( value.substr( selectionEnd, value.length ) ) ) {\n\t\t\ttextToInsert += separator;\n\t\t}\n\n\t\treturn textToInsert;\n\t}\n\n\tfunction resetLogicBuilder() {\n\t\t/*jshint validthis:true */\n\t\tconst id = document.getElementById( 'frm-id-condition' ),\n\t\t\tkey = document.getElementById( 'frm-key-condition' );\n\n\t\tif ( this.value === 'id' ) {\n\t\t\tid.classList.remove( 'frm_hidden' );\n\t\t\tkey.classList.add( 'frm_hidden' );\n\t\t\ttriggerEvent( key, 'change' );\n\t\t} else {\n\t\t\tid.classList.add( 'frm_hidden' );\n\t\t\tkey.classList.remove( 'frm_hidden' );\n\t\t\ttriggerEvent( id, 'change' );\n\t\t}\n\t}\n\n\tfunction setLogicExample() {\n\t\tlet field, code,\n\t\t\tidKey = document.getElementById( 'frm-id-key-condition-id' ).checked ? 'frm-id-condition' : 'frm-key-condition',\n\t\t\tis = document.getElementById( 'frm-is-condition' ).value,\n\t\t\ttext = document.getElementById( 'frm-text-condition' ).value,\n\t\t\tresult = document.getElementById( 'frm-insert-condition' );\n\n\t\tidKey = document.getElementById( idKey );\n\t\tfield = idKey.options[ idKey.selectedIndex ].value;\n\t\tcode = 'if ' + field + ' ' + is + '=\"' + text + '\"]';\n\t\tresult.setAttribute( 'data-code', code + frmAdminJs.conditional_text + '[/if ' + field );\n\t\tresult.innerHTML = '[' + code + '[/if ' + field + ']';\n\t}\n\n\tfunction maybeShowModal( input ) {\n\t\tlet moreIcon;\n\t\tif ( input.parentNode.parentNode.classList.contains( 'frm_has_shortcodes' ) ) {\n\t\t\thideShortcodes();\n\t\t\tmoreIcon = getIconForInput( input );\n\t\t\tif ( moreIcon.tagName === 'use' ) {\n\t\t\t\tmoreIcon = moreIcon.firstElementChild;\n\n\t\t\t\tif ( moreIcon.getAttributeNS( 'http://www.w3.org/1999/xlink', 'href' ).indexOf( 'frm_close_icon' ) === -1 ) {\n\t\t\t\t\tshowShortcodeBox( moreIcon, 'nofocus' );\n\t\t\t\t}\n\t\t\t} else if ( ! moreIcon.classList.contains( 'frm_close_icon' ) ) {\n\t\t\t\tshowShortcodeBox( moreIcon, 'nofocus' );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction showShortcodes( e ) {\n\t\t/*jshint validthis:true */\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tshowShortcodeBox( this );\n\t}\n\n\t/**\n\t * Handles 'change' event on the document.\n\t *\n\t * @since 6.16.3\n\t *\n\t * @param {Event} event\n\t * @return {void}\n\t */\n\tfunction handleBuilderChangeEvent( event ) {\n\t\tmaybeShowSaveAndReloadModal( event.target );\n\t}\n\n\t/**\n\t * Shows 'Save and Reload' modal if the target field's type is changed.\n\t *\n\t * @since 6.16.3\n\t *\n\t * @param {HTMLElement} target\n\t * @return {void}\n\t */\n\tfunction maybeShowSaveAndReloadModal( target ) {\n\t\tif ( ! target.id.startsWith( 'field_options_type_' ) ) {\n\t\t\treturn;\n\t\t}\n\t\tconst idParts = target.id.split( '_' );\n\t\tconst fieldId = idParts.length && idParts[ idParts.length - 1 ];\n\n\t\tif ( document.querySelector( `#frm-single-settings-${ fieldId }` )?.classList.contains( `frm-type-${ target.value }` ) ) {\n\t\t\t// Do not show modal if the field type is reverted back to the original type when builder is loaded.\n\t\t\treturn;\n\t\t}\n\t\tshowSaveAndReloadModal();\n\t}\n\n\t/**\n\t * Shows 'Save and Reload' modal with the given message.\n\t *\n\t * @since 6.16.3\n\t *\n\t * @param {string} message\n\t * @return {void}\n\t */\n\tfunction showSaveAndReloadModal( message ) {\n\t\tif ( 'undefined' === typeof message ) {\n\t\t\tmessage = __( 'You are changing the field type. Not all field settings will appear as expected until you reload the page. Would you like to reload the page now?', 'formidable' );\n\t\t}\n\t\tfrmDom.modal.maybeCreateModal(\n\t\t\t'frmSaveAndReloadModal',\n\t\t\t{\n\t\t\t\ttitle: __( 'Save and Reload?', 'formidable' ),\n\t\t\t\tcontent: getModalContent(),\n\t\t\t\tfooter: getModalFooter()\n\t\t\t}\n\t\t);\n\n\t\tfunction getModalContent() {\n\t\t\tconst modalContent = div( message );\n\t\t\tmodalContent.style.padding = 'var(--gap-md)';\n\t\t\treturn modalContent;\n\t\t}\n\n\t\tfunction getModalFooter() {\n\t\t\tconst continueButton = frmDom.modal.footerButton( {\n\t\t\t\ttext: __( 'Save and Reload', 'formidable' ),\n\t\t\t\tbuttonType: 'primary'\n\t\t\t} );\n\n\t\t\tonClickPreventDefault( continueButton, () => {\n\t\t\t\tsaveAndReloadFormBuilder();\n\t\t\t} );\n\n\t\t\tconst cancelButton = frmDom.modal.footerButton( {\n\t\t\t\ttext: __( 'Cancel', 'formidable' ),\n\t\t\t\tbuttonType: 'cancel'\n\t\t\t} );\n\t\t\tcancelButton.classList.add( 'dismiss' );\n\n\t\t\treturn frmDom.div( {\n\t\t\t\tchildren: [ cancelButton, continueButton ]\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction updateShortcodesPopupPosition( target ) {\n\t\tlet moreIcon;\n\t\tif ( target instanceof Event ) {\n\t\t\tconst useElements = document.querySelectorAll( '.frm-single-settings .frm-show-box.frmsvg use' );\n\t\t\tconst openTrigger = Array.from( useElements ).find( use => use.getAttribute( 'href' ) === '#frm_close_icon' );\n\t\t\tif ( 'undefined' === typeof openTrigger ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tmoreIcon = openTrigger.parentElement;\n\t\t} else {\n\t\t\tmoreIcon = target;\n\t\t}\n\n\t\tconst moreIconPosition = moreIcon.getBoundingClientRect();\n\t\tconst shortCodesPopup = document.getElementById( 'frm_adv_info' );\n\t\tconst parentPos = shortCodesPopup.parentElement.getBoundingClientRect();\n\n\t\tshortCodesPopup.style.top = ( moreIconPosition.top - parentPos.top + 32 ) + 'px';\n\t\tshortCodesPopup.style.left = ( moreIconPosition.left - parentPos.left - 280 ) + 'px';\n\t}\n\n\tfunction showShortcodeBox( moreIcon, shouldFocus ) {\n\t\tlet input = getInputForIcon( moreIcon ),\n\t\t\tbox = document.getElementById( 'frm_adv_info' ),\n\t\t\tclasses = moreIcon.className;\n\n\t\tif ( moreIcon.tagName === 'svg' ) {\n\t\t\tmoreIcon = moreIcon.firstElementChild;\n\t\t}\n\t\tif ( moreIcon.tagName === 'use' ) {\n\t\t\tclasses = moreIcon.getAttributeNS( 'http://www.w3.org/1999/xlink', 'href' );\n\n\t\t\tif ( null === classes ) {\n\t\t\t\t// If the deprecated xlink:href is not defined, check for href.\n\t\t\t\tclasses = moreIcon.getAttribute( 'href' );\n\t\t\t}\n\t\t}\n\n\t\tif ( classes.indexOf( 'frm_close_icon' ) !== -1 ) {\n\t\t\thideShortcodes( box );\n\t\t} else {\n\t\t\tupdateShortcodesPopupPosition( moreIcon );\n\n\t\t\tjQuery( '.frm_code_list a' ).removeClass( 'frm_noallow' );\n\t\t\tif ( input.classList.contains( 'frm_not_email_to' ) ) {\n\t\t\t\tjQuery( '#frm-insert-fields-box .frm_code_list li:not(.show_frm_not_email_to) a' ).addClass( 'frm_noallow' );\n\t\t\t} else if ( input.classList.contains( 'frm_not_email_subject' ) ) {\n\t\t\t\tjQuery( '.frm_code_list li.hide_frm_not_email_subject a' ).addClass( 'frm_noallow' );\n\t\t\t}\n\n\t\t\tbox.setAttribute( 'data-fills', input.id );\n\t\t\tbox.style.display = 'block';\n\n\t\t\tif ( moreIcon.tagName === 'use' ) {\n\t\t\t\tif ( moreIcon.hasAttributeNS( 'http://www.w3.org/1999/xlink', 'href' ) ) {\n\t\t\t\t\tmoreIcon.setAttributeNS( 'http://www.w3.org/1999/xlink', 'href', '#frm_close_icon' );\n\t\t\t\t} else {\n\t\t\t\t\tconst newMoreIcon = document.createElementNS( 'http://www.w3.org/2000/svg', 'use' );\n\t\t\t\t\tnewMoreIcon.setAttributeNS( 'http://www.w3.org/1999/xlink', 'href', '#frm_close_icon' );\n\t\t\t\t\tmoreIcon.parentNode.replaceChild( newMoreIcon, moreIcon );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmoreIcon.className = classes.replace( 'frm_more_horiz_solid_icon', 'frm_close_icon' );\n\t\t\t}\n\n\t\t\tif ( shouldFocus !== 'nofocus' ) {\n\t\t\t\tif ( 'none' !== input.style.display ) {\n\t\t\t\t\tinput.focus();\n\t\t\t\t} else {\n\t\t\t\t\tjQuery( tinymce.get( input.id ) ).trigger( 'focus' );\n\t\t\t\t}\n\t\t\t}\n\t\t\tshowOrHideContextualShortcodes( input );\n\t\t}\n\t}\n\n\t/**\n\t * Returns true if a shortcode could be shown in the search result.\n\t *\n\t * @since 6.16.3\n\t *\n\t * @param {HTMLElement} item\n\t * @return {Boolean}\n\t */\n\tfunction checkContextualShortcode( item ) {\n\t\tif ( frmAdminJs.contextualShortcodes.length === 0 ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn ! isContextualShortcode( item ) || canShowContextualShortcode( item );\n\t}\n\n\t/**\n\t * Returns true if a shortcode is contextual to fields.\n\t *\n\t * @since 6.16.3\n\t *\n\t * @param {HTMLElement} item\n\t * @return {Boolean}\n\t */\n\tfunction isContextualShortcode( item ) {\n\t\tconst anchor = item.querySelector( 'a' );\n\t\tif ( ! anchor ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst shortcode = anchor.dataset.code;\n\t\treturn frmAdminJs.contextualShortcodes.address.includes( shortcode ) || frmAdminJs.contextualShortcodes.body.includes( shortcode );\n\t}\n\n\t/**\n\t * @since 6.16.3\n\t *\n\t * @param {HTMLElement} item\n\t * @return {Boolean}\n\t */\n\tfunction canShowContextualShortcode( item ) {\n\t\tconst shortcode = item.querySelector( 'a' ).dataset.code;\n\t\tconst inputId = document.getElementById( 'frm_adv_info' ).dataset.fills;\n\t\tconst input = document.getElementById( inputId );\n\t\tconst contextualShortcodes = frmAdminJs.contextualShortcodes;\n\t\tif ( contextualShortcodes.address.includes( shortcode ) ) {\n\t\t\treturn input.matches( contextualShortcodes.addressSelector );\n\t\t}\n\t\treturn input.matches( contextualShortcodes.bodySelector );\n\t}\n\n\t/**\n\t * @since 6.16.3\n\t *\n\t * @param {HTMLElement} input\n\t * @return {void}\n\t */\n\tfunction showOrHideContextualShortcodes( input ) {\n\t\t[ 'address', 'body' ].forEach( type => {\n\t\t\ttoggleContextualShortcodes( input, type );\n\t\t} );\n\t}\n\n\t/**\n\t * @since 6.16.3\n\t *\n\t * @param {HTMLElement} input\n\t * @param {string}      type\n\t *\n\t * @return {void}\n\t */\n\tfunction toggleContextualShortcodes( input, type ) {\n\t\tlet selector, contextualShortcodes;\n\t\tselector = frmAdminJs.contextualShortcodes[ type + 'Selector' ];\n\t\tcontextualShortcodes = frmAdminJs.contextualShortcodes[ type ];\n\t\tlet shouldShowShortcodes = input.matches( selector );\n\t\tfor ( let shortcode of contextualShortcodes ) {\n\t\t\tconst shortcodeLi = document.querySelector( '#frm-adv-info-tab .frm_code_list [data-code=\"' + shortcode + '\"]' )?.closest( 'li' );\n\t\t\tshortcodeLi?.classList.toggle( 'frm_hidden', ! shouldShowShortcodes );\n\t\t}\n\t}\n\n\t/**\n\t * Returns shortcodes that are contextual to the current input field.\n\t *\n\t * @since 6.16.3\n\t *\n\t * @return {Array}\n\t */\n\tfunction getContextualShortcodes() {\n\t\tlet contextualShortcodes = document.getElementById( 'frm_adv_info' )?.dataset.contextualShortcodes;\n\t\tif ( ! contextualShortcodes ) {\n\t\t\treturn [];\n\t\t}\n\t\tcontextualShortcodes = JSON.parse( contextualShortcodes );\n\t\tcontextualShortcodes.addressSelector = '[id^=email_to], [id^=from_], [id^=cc], [id^=bcc]';\n\t\tcontextualShortcodes.bodySelector = '[id^=email_message_]';\n\t\treturn contextualShortcodes;\n\t}\n\n\tfunction fieldUpdated() {\n\t\tif ( ! fieldsUpdated ) {\n\t\t\tfieldsUpdated = 1;\n\t\t\twindow.addEventListener( 'beforeunload', confirmExit );\n\t\t}\n\t}\n\n\tfunction buildSubmittedNoAjax() {\n\t\t// set fieldsUpdated to 0 to avoid the unsaved changes pop up\n\t\tfieldsUpdated = 0;\n\t}\n\n\tfunction settingsSubmitted() {\n\t\t// set fieldsUpdated to 0 to avoid the unsaved changes pop up\n\t\tfieldsUpdated = 0;\n\t}\n\n\tfunction saveAndReloadSettings() {\n\t\tlet page, form;\n\t\tpage = document.getElementById( 'form_settings_page' );\n\t\tif ( null !== page ) {\n\t\t\tform = page.querySelector( 'form.frm_form_settings' );\n\t\t\tif ( null !== form ) {\n\t\t\t\tfieldsUpdated = 0;\n\t\t\t\tform.submit();\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction reloadIfAddonActivatedAjaxSubmitOnly() {\n\t\tconst submitButton = document.getElementById( 'frm_submit_side_top' );\n\t\tif ( submitButton.hasAttribute( 'data-new-addon-installed' ) && 'true' === submitButton.getAttribute( 'data-new-addon-installed' ) ) {\n\t\t\tsubmitButton.removeAttribute( 'data-new-addon-installed' );\n\t\t\twindow.location.reload();\n\t\t}\n\t}\n\n\tfunction saveAndReloadFormBuilder() {\n\t\tconst submitButton = document.getElementById( 'frm_submit_side_top' );\n\t\tif ( submitButton.classList.contains( 'frm_submit_ajax' ) ) {\n\t\t\tsubmitButton.setAttribute( 'data-new-addon-installed', true );\n\t\t}\n\t\tsubmitButton.click();\n\t}\n\n\tfunction confirmExit( event ) {\n\t\tif ( fieldsUpdated ) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.returnValue = '';\n\t\t}\n\t}\n\n\tfunction bindClickForDialogClose( $modal ) {\n\t\tconst closeModal = function() {\n\t\t\t$modal.dialog( 'close' );\n\t\t};\n\t\tjQuery( '.ui-widget-overlay' ).on( 'click', closeModal );\n\t\t$modal.on( 'click', 'a.dismiss', closeModal );\n\t}\n\n\tfunction offsetModalY( $modal, amount ) {\n\t\tconst position = {\n\t\t\tmy: 'top',\n\t\t\tat: 'top+' + amount,\n\t\t\tof: window\n\t\t};\n\t\t$modal.dialog( 'option', 'position', position );\n\t}\n\n\t/**\n\t * Get the input box for the selected icon or calculation field.\n\t *\n\t * @param {Element} moreIcon The icon element\n\t * @return {Element} The associated input or textarea\n\t */\n\tfunction getInputForIcon( moreIcon ) {\n\t\tif ( moreIcon.classList.contains( 'frm-input-icon' ) ) {\n\t\t\treturn moreIcon.previousElementSibling;\n\t\t}\n\n\t\t// For regular fields\n\t\tlet input = moreIcon.nextElementSibling;\n\t\twhile ( input !== null && (\n\t\t\t( input.tagName !== 'INPUT' && input.tagName !== 'TEXTAREA' ) || input.classList.contains( 'frm-token-input-field' )\n\t\t) ) {\n\t\t\tinput = getInputForIcon( input );\n\t\t}\n\n\t\t// For calculation fields\n\t\tif ( ! input ) {\n\t\t\tinput = moreIcon.closest( '.frm-field-formula' )?.querySelector( '.frm-calc-field' );\n\t\t}\n\n\t\treturn input;\n\t}\n\n\t/**\n\t * Get the ... icon for the selected input box.\n\t */\n\tfunction getIconForInput( input ) {\n\t\tif ( input.nextElementSibling?.classList.contains( 'frm-input-icon' ) ) {\n\t\t\treturn input.nextElementSibling;\n\t\t}\n\n\t\tlet moreIcon = input.previousElementSibling;\n\n\t\twhile ( moreIcon !== null && moreIcon.tagName !== 'I' && moreIcon.tagName !== 'svg' ) {\n\t\t\tmoreIcon = getIconForInput( moreIcon );\n\t\t}\n\n\t\treturn moreIcon;\n\t}\n\n\tfunction hideShortcodes( box ) {\n\t\tlet i, u, closeIcons, closeSvg;\n\t\tif ( typeof box === 'undefined' ) {\n\t\t\tbox = document.getElementById( 'frm_adv_info' );\n\t\t\tif ( box === null ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif ( document.getElementById( 'frm_dyncontent' ) !== null ) {\n\t\t\t// Don't run when in the sidebar.\n\t\t\treturn;\n\t\t}\n\n\t\tbox.style.display = 'none';\n\n\t\tcloseIcons = document.querySelectorAll( '.frm-show-box.frm_close_icon' );\n\t\tfor ( i = 0; i < closeIcons.length; i++ ) {\n\t\t\tcloseIcons[ i ].classList.remove( 'frm_close_icon' );\n\t\t\tcloseIcons[ i ].classList.add( 'frm_more_horiz_solid_icon' );\n\t\t}\n\n\t\tcloseSvg = document.querySelectorAll( '.frm_has_shortcodes use' );\n\t\tfor ( u = 0; u < closeSvg.length; u++ ) {\n\t\t\tif ( closeSvg[ u ].getAttributeNS( 'http://www.w3.org/1999/xlink', 'href' ) === '#frm_close_icon' ) {\n\t\t\t\tif ( closeSvg[ u ].closest( '.frm_remove_field' ) ) {\n\t\t\t\t\t// Don't change the icon for the email fields remove button.\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcloseSvg[ u ].setAttributeNS( 'http://www.w3.org/1999/xlink', 'href', '#frm_more_horiz_solid_icon' );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction toggleAllowedHTML( input ) {\n\t\tlet b,\n\t\t\tid = input.id;\n\t\tif ( typeof id === 'undefined' || id.indexOf( '-search-input' ) !== -1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tjQuery( '#frm-adv-info-tab' ).attr( 'data-fills', id.trim() );\n\t\tif ( input.classList.contains( 'field_custom_html' ) ) {\n\t\t\tid = 'field_custom_html';\n\t\t}\n\n\t\tb = [ 'after_html', 'before_html', 'submit_html', 'field_custom_html' ];\n\t\tif ( jQuery.inArray( id, b ) >= 0 ) {\n\t\t\tjQuery( '.frm_code_list li:not(.show_' + id + ')' ).addClass( 'frm_hidden' );\n\t\t\tjQuery( '.frm_code_list li.show_' + id ).removeClass( 'frm_hidden' );\n\t\t}\n\t}\n\n\tfunction toggleKeyID( switchTo, e ) {\n\t\te.stopPropagation();\n\t\tjQuery( '.frm_code_list .frmids, .frm_code_list .frmkeys' ).addClass( 'frm_hidden' );\n\t\tjQuery( '.frm_code_list .' + switchTo ).removeClass( 'frm_hidden' );\n\t\tjQuery( '.frmids, .frmkeys' ).removeClass( 'current' );\n\t\tjQuery( '.' + switchTo ).addClass( 'current' );\n\t}\n\n\tfunction onActionLoaded( event ) {\n\t\tconst settings = event.target.closest( '.frm_form_action_settings' );\n\t\tif ( settings && ( settings.classList.contains( 'frm_single_email_settings' ) || settings.classList.contains( 'frm_single_on_submit_settings' ) ) ) {\n\t\t\tinitWysiwygOnActionLoaded( settings );\n\t\t}\n\t}\n\n\tfunction initWysiwygOnActionLoaded( settings ) {\n\t\tsettings.querySelectorAll( '.wp-editor-area' ).forEach( wysiwyg => {\n\t\t\tfrmDom.wysiwyg.init(\n\t\t\t\twysiwyg,\n\t\t\t\t{ height: 160, addFocusEvents: true }\n\t\t\t);\n\t\t} );\n\t}\n\n\t/* Global settings page */\n\tfunction loadSettingsTab( anchor ) {\n\t\tconst holder = anchor.replace( '#', '' );\n\t\tconst holderContainer = jQuery( '.frm_' + holder + '_ajax' );\n\t\tif ( holderContainer.length ) {\n\t\t\tjQuery.ajax( {\n\t\t\t\ttype: 'POST', url: ajaxurl,\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'frm_settings_tab',\n\t\t\t\t\ttab: holder.replace( '_settings', '' ),\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t},\n\t\t\t\tsuccess: function( html ) {\n\t\t\t\t\tholderContainer.replaceWith( html );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction uninstallNow() {\n\t\t/*jshint validthis:true */\n\t\tif ( confirmLinkClick( this ) === true ) {\n\t\t\tjQuery( '.frm_uninstall .frm-wait' ).css( 'visibility', 'visible' );\n\t\t\tjQuery.ajax( {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: ajaxurl,\n\t\t\t\tdata: 'action=frm_uninstall&nonce=' + frmGlobal.nonce,\n\t\t\t\tsuccess: function( msg ) {\n\t\t\t\t\tjQuery( '.frm_uninstall' ).fadeOut( 'slow' );\n\t\t\t\t\twindow.location = msg;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction saveAddonLicense() {\n\t\t/*jshint validthis:true */\n\t\tconst button = jQuery( this );\n\t\tconst buttonName = this.name;\n\t\tconst pluginSlug = this.getAttribute( 'data-plugin' );\n\t\tconst action = buttonName.replace( 'edd_' + pluginSlug + '_license_', '' );\n\t\tlet license = document.getElementById( 'edd_' + pluginSlug + '_license_key' ).value;\n\t\tbutton.get( 0 ).disabled = true;\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST', url: ajaxurl, dataType: 'json',\n\t\t\tdata: { action: 'frm_addon_' + action, license: license, plugin: pluginSlug, nonce: frmGlobal.nonce },\n\t\t\tsuccess: function( msg ) {\n\t\t\t\tbutton.get( 0 ).disabled = false;\n\t\t\t\tconst thisRow = button.closest( '.edd_frm_license_row' );\n\t\t\t\tif ( action === 'deactivate' ) {\n\t\t\t\t\tlicense = '';\n\t\t\t\t\tdocument.getElementById( 'edd_' + pluginSlug + '_license_key' ).value = '';\n\t\t\t\t}\n\t\t\t\tthisRow.find( '.edd_frm_license' ).html( license );\n\t\t\t\tconst eddWrapper = button.get( 0 ).closest( '.frm_form_field' );\n\t\t\t\tconst actionIsSuccess = msg.success === true;\n\t\t\t\teddWrapper.querySelector( `.frm_icon_font.frm_action_success` ).classList.toggle( 'frm_hidden', ! actionIsSuccess || action === 'deactivate' );\n\t\t\t\teddWrapper.querySelector( `.frm_icon_font.frm_action_error` ).classList.toggle( 'frm_hidden', actionIsSuccess );\n\n\t\t\t\tconst messageBox = thisRow.find( '.frm_license_msg' );\n\t\t\t\tmessageBox.html( msg.message );\n\t\t\t\tif ( msg.message !== '' ) {\n\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\tmessageBox.html( '' );\n\t\t\t\t\t\tthisRow.find( '.frm_icon_font' ).addClass( 'frm_hidden' );\n\t\t\t\t\t\tif ( actionIsSuccess ) {\n\t\t\t\t\t\t\tconst actionIsActivate = action === 'activate';\n\t\t\t\t\t\t\tthisRow.get( 0 ).querySelector( '.edd_frm_unauthorized' ).classList.toggle( 'frm_hidden', actionIsActivate );\n\t\t\t\t\t\t\tthisRow.get( 0 ).querySelector( '.edd_frm_authorized' ).classList.toggle( 'frm_hidden', ! actionIsActivate );\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 2000 );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/* Import/Export page */\n\n\tfunction startFormMigration( event ) {\n\t\tevent.preventDefault();\n\n\t\tconst checkedBoxes = jQuery( event.target ).find( 'input:checked' );\n\t\tif ( ! checkedBoxes.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst ids = [];\n\t\tcheckedBoxes.each( function( i ) {\n\t\t\tids[ i ] = this.value;\n\t\t} );\n\n\t\t// Begin the import process.\n\t\timportForms( ids, event.target );\n\t}\n\n\t/**\n\t * Begins the process of importing the forms.\n\t */\n\tfunction importForms( forms, targetForm ) {\n\t\t// Hide the form select section.\n\t\tconst $form = jQuery( targetForm ),\n\t\t\t$processSettings = $form.next( '.frm-importer-process' );\n\n\t\t// Display total number of forms we have to import.\n\t\t$processSettings.find( '.form-total' ).text( forms.length );\n\t\t$processSettings.find( '.form-current' ).text( '1' );\n\n\t\t$form.hide();\n\n\t\t// Show processing status.\n\t\t// '.process-completed' might have been shown earlier during a previous import, so hide now.\n\t\t$processSettings.find( '.process-completed' ).hide();\n\t\t$processSettings.show();\n\n\t\t// Create global import queue.\n\t\ts.importQueue = forms;\n\t\ts.imported = 0;\n\n\t\t// Import the first form in the queue.\n\t\timportForm( $processSettings );\n\t}\n\n\t/**\n\t * Imports a single form from the import queue.\n\t */\n\tfunction importForm( $processSettings ) {\n\t\tconst formID = s.importQueue[ 0 ],\n\t\t\tprovider = jQuery( '#welcome-panel' ).find( 'input[name=\"slug\"]' ).val(),\n\t\t\tdata = {\n\t\t\t\taction: 'frm_import_' + provider,\n\t\t\t\tform_id: formID,\n\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t};\n\n\t\t// Trigger AJAX import for this form.\n\t\tjQuery.post( ajaxurl, data, function( res ) {\n\t\t\tif ( res.success ) {\n\t\t\t\tlet statusUpdate;\n\n\t\t\t\tif ( res.data.error ) {\n\t\t\t\t\tstatusUpdate = '<p>' + res.data.name + ': ' + res.data.msg + '</p>';\n\t\t\t\t} else {\n\t\t\t\t\tstatusUpdate = '<p>Imported <a href=\"' + res.data.link + '\" target=\"_blank\">' + res.data.name + '</a></p>';\n\t\t\t\t}\n\n\t\t\t\t$processSettings.find( '.status' ).prepend( statusUpdate );\n\t\t\t\t$processSettings.find( '.status' ).show();\n\n\t\t\t\t// Remove this form ID from the queue.\n\t\t\t\ts.importQueue = jQuery.grep( s.importQueue, function( value ) {\n\t\t\t\t\treturn value != formID;\n\t\t\t\t} );\n\t\t\t\ts.imported++;\n\n\t\t\t\tif ( s.importQueue.length === 0 ) {\n\t\t\t\t\t$processSettings.find( '.process-count' ).hide();\n\t\t\t\t\t$processSettings.find( '.forms-completed' ).text( s.imported );\n\t\t\t\t\t$processSettings.find( '.process-completed' ).show();\n\t\t\t\t} else {\n\t\t\t\t\t// Import next form in the queue.\n\t\t\t\t\t$processSettings.find( '.form-current' ).text( s.imported + 1 );\n\t\t\t\t\timportForm( $processSettings );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction validateExport( e ) {\n\t\t/*jshint validthis:true */\n\t\te.preventDefault();\n\n\t\tlet s = false;\n\t\tconst $exportForms = jQuery( 'input[name=\"frm_export_forms[]\"]' );\n\n\t\tif ( ! jQuery( 'input[name=\"frm_export_forms[]\"]:checked' ).val() ) {\n\t\t\t$exportForms.closest( '.frm-table-box' ).addClass( 'frm_blank_field' );\n\t\t\ts = 'stop';\n\t\t}\n\n\t\tconst $exportType = jQuery( 'input[name=\"type[]\"]' );\n\t\tif ( ! jQuery( 'input[name=\"type[]\"]:checked' ).val() && $exportType.attr( 'type' ) === 'checkbox' ) {\n\t\t\t$exportType.closest( 'p' ).addClass( 'frm_blank_field' );\n\t\t\ts = 'stop';\n\t\t}\n\n\t\tif ( s === 'stop' ) {\n\t\t\treturn false;\n\t\t}\n\n\t\te.stopPropagation();\n\t\tthis.submit();\n\t}\n\n\tfunction removeExportError() {\n\t\t/*jshint validthis:true */\n\t\tconst t = jQuery( this ).closest( '.frm_blank_field' );\n\t\tif ( typeof t === 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst $thisName = this.name;\n\t\tif ( $thisName === 'type[]' && jQuery( 'input[name=\"type[]\"]:checked' ).val() ) {\n\t\t\tt.removeClass( 'frm_blank_field' );\n\t\t} else if ( $thisName === 'frm_export_forms[]' && jQuery( this ).val() ) {\n\t\t\tt.removeClass( 'frm_blank_field' );\n\t\t}\n\t}\n\n\tfunction checkCSVExtension() {\n\t\t/*jshint validthis:true */\n\t\tconst f = jQuery( this ).val();\n\t\tconst re = /\\.csv$/i;\n\t\tif ( f.match( re ) !== null ) {\n\t\t\tjQuery( '.show_csv' ).fadeIn();\n\t\t} else {\n\t\t\tjQuery( '.show_csv' ).fadeOut();\n\t\t}\n\t}\n\n\tfunction getExportOption() {\n\t\tconst exportFormatSelect = document.querySelector( 'select[name=\"format\"]' );\n\t\tif ( exportFormatSelect ) {\n\t\t\treturn exportFormatSelect.value;\n\t\t}\n\t\treturn '';\n\t}\n\n\tfunction exportTypeChanged( event ) {\n\t\tconst value = event.target.value;\n\t\tshowOrHideRepeaters( value );\n\t\tcheckExportTypes.call( event.target );\n\t\tcheckSelectedAllFormsCheckbox( value );\n\t}\n\n\tfunction checkSelectedAllFormsCheckbox( exportType ) {\n\t\tconst selectAllCheckbox = document.getElementById( 'frm-export-select-all' );\n\t\tif ( exportType === 'csv' ) {\n\t\t\tselectAllCheckbox.checked = false;\n\t\t\tselectAllCheckbox.disabled = true;\n\t\t} else {\n\t\t\tselectAllCheckbox.disabled = false;\n\t\t}\n\t}\n\n\tfunction checkExportTypes() {\n\t\t/*jshint validthis:true */\n\t\tconst $dropdown = jQuery( this );\n\t\tconst $selected = $dropdown.find( ':selected' );\n\t\tconst s = $selected.data( 'support' );\n\n\t\tconst multiple = s.indexOf( '|' );\n\t\tjQuery( 'input[name=\"type[]\"]' ).each( function() {\n\t\t\tthis.checked = false;\n\t\t\tif ( s.indexOf( this.value ) >= 0 ) {\n\t\t\t\tthis.disabled = false;\n\t\t\t\tif ( multiple === -1 ) {\n\t\t\t\t\tthis.checked = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.disabled = true;\n\t\t\t}\n\t\t} );\n\n\t\tif ( $dropdown.val() === 'csv' ) {\n\t\t\tjQuery( '.csv_opts' ).show();\n\t\t\tjQuery( '.xml_opts' ).hide();\n\t\t} else {\n\t\t\tjQuery( '.csv_opts' ).hide();\n\t\t\tjQuery( '.xml_opts' ).show();\n\t\t}\n\n\t\tconst c = $selected.data( 'count' );\n\t\tconst exportField = jQuery( 'input[name=\"frm_export_forms[]\"]' );\n\t\tif ( c === 'single' ) {\n\t\t\texportField.prop( 'multiple', false );\n\t\t\texportField.prop( 'checked', false );\n\t\t} else {\n\t\t\texportField.prop( 'multiple', true );\n\t\t\texportField.prop( 'disabled', false );\n\t\t}\n\t\t$dropdown.trigger( 'change' );\n\t}\n\n\tfunction showOrHideRepeaters( exportOption ) {\n\t\tif ( exportOption === '' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst repeaters = document.querySelectorAll( '.frm-is-repeater' );\n\t\tif ( ! repeaters.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( exportOption === 'csv' ) {\n\t\t\trepeaters.forEach( form => {\n\t\t\t\tform.classList.remove( 'frm_hidden' );\n\t\t\t} );\n\t\t} else {\n\t\t\trepeaters.forEach( form => {\n\t\t\t\tform.classList.add( 'frm_hidden' );\n\t\t\t} );\n\t\t}\n\n\t\tsearchContent.call( document.querySelector( '.frm-auto-search' ) );\n\t}\n\n\tfunction preventMultipleExport() {\n\t\tconst type = jQuery( 'select[name=format]' ),\n\t\t\tselected = type.find( ':selected' ),\n\t\t\tcount = selected.data( 'count' ),\n\t\t\texportField = jQuery( 'input[name=\"frm_export_forms[]\"]' );\n\n\t\tif ( count === 'single' ) {\n\t\t\t// Disable all other fields to prevent multiple selections.\n\t\t\tif ( this.checked ) {\n\t\t\t\texportField.prop( 'disabled', true );\n\t\t\t\tthis.removeAttribute( 'disabled' );\n\t\t\t} else {\n\t\t\t\texportField.prop( 'disabled', false );\n\t\t\t}\n\t\t} else {\n\t\t\texportField.prop( 'disabled', false );\n\t\t}\n\t}\n\n\tfunction initiateMultiselect() {\n\t\tjQuery( '.frm_multiselect' ).hide().each( frmDom.bootstrap.multiselect.init );\n\t}\n\n\t/* Addons page */\n\tfunction installMultipleAddons( e ) {\n\t\te.preventDefault();\n\t\ttoggleAddonState( this, 'frm_multiple_addons' );\n\t}\n\n\tfunction activateAddon( e ) {\n\t\te.preventDefault();\n\t\ttoggleAddonState( this, 'frm_activate_addon' );\n\t}\n\n\tfunction installAddon( e ) {\n\t\te.preventDefault();\n\t\ttoggleAddonState( this, 'frm_install_addon' );\n\t}\n\n\tfunction toggleAddonState( clicked, action ) {\n\t\tlet button, plugin, el, message;\n\n\t\t// Remove any leftover error messages, output an icon and get the plugin basename that needs to be activated.\n\t\tjQuery( '.frm-addon-error' ).remove();\n\t\tbutton = jQuery( clicked );\n\t\tplugin = button.attr( 'rel' );\n\t\tel = button.parent();\n\t\tmessage = el.parent().find( '.addon-status-label' );\n\n\t\tbutton.addClass( 'frm_loading_button' );\n\n\t\t// Process the Ajax to perform the activation.\n\t\tjQuery.ajax( {\n\t\t\turl: ajaxurl,\n\t\t\ttype: 'POST',\n\t\t\tasync: true,\n\t\t\tcache: false,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\taction: action,\n\t\t\t\tnonce: frmGlobal.nonce,\n\t\t\t\tplugin: plugin\n\t\t\t},\n\t\t\tsuccess: function( response ) {\n\t\t\t\tresponse = response?.data ?? response;\n\n\t\t\t\tlet saveAndReload;\n\n\t\t\t\tif ( 'string' !== typeof response && 'string' === typeof response.message ) {\n\t\t\t\t\tif ( 'undefined' !== typeof response.saveAndReload ) {\n\t\t\t\t\t\tsaveAndReload = response.saveAndReload;\n\t\t\t\t\t}\n\t\t\t\t\tresponse = response.message;\n\t\t\t\t}\n\n\t\t\t\tconst error = extractErrorFromAddOnResponse( response );\n\t\t\t\tif ( error ) {\n\t\t\t\t\taddonError( error, el, button );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tafterAddonInstall( response, button, message, el, saveAndReload, action );\n\n\t\t\t\t/**\n\t\t\t\t * Trigger an action after successfully toggling the addon state.\n\t\t\t\t *\n\t\t\t\t * @param {Object} response\n\t\t\t\t */\n\t\t\t\twp.hooks.doAction( 'frm_update_addon_state', response );\n\t\t\t},\n\t\t\terror: function() {\n\t\t\t\tbutton.removeClass( 'frm_loading_button' );\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction installAddonWithCreds( e ) {\n\t\t// Prevent the default action, let the user know we are attempting to install again and go with it.\n\t\te.preventDefault();\n\n\t\t// Now let's make another Ajax request once the user has submitted their credentials.\n\t\tconst proceed = jQuery( this );\n\t\tconst el = proceed.parent().parent();\n\t\tconst plugin = proceed.attr( 'rel' );\n\n\t\tproceed.addClass( 'frm_loading_button' );\n\n\t\tjQuery.ajax( {\n\t\t\turl: ajaxurl,\n\t\t\ttype: 'POST',\n\t\t\tasync: true,\n\t\t\tcache: false,\n\t\t\tdataType: 'json',\n\t\t\tdata: {\n\t\t\t\taction: 'frm_install_addon',\n\t\t\t\tnonce: frmAdminJs.nonce,\n\t\t\t\tplugin: plugin,\n\t\t\t\thostname: el.find( '#hostname' ).val(),\n\t\t\t\tusername: el.find( '#username' ).val(),\n\t\t\t\tpassword: el.find( '#password' ).val()\n\t\t\t},\n\t\t\tsuccess: function( response ) {\n\t\t\t\tresponse = response?.data ?? response;\n\n\t\t\t\tconst error = extractErrorFromAddOnResponse( response );\n\t\t\t\tif ( error ) {\n\t\t\t\t\taddonError( error, el, proceed );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tafterAddonInstall( response, proceed, message, el );\n\t\t\t},\n\t\t\terror: function() {\n\t\t\t\tproceed.removeClass( 'frm_loading_button' );\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction afterAddonInstall( response, button, message, el, saveAndReload, action = 'frm_activate_addon' ) {\n\t\tconst addonStatuses = document.querySelectorAll( '.frm-addon-status' );\n\t\taddonStatuses.forEach(\n\t\t\taddonStatus => {\n\t\t\t\taddonStatus.textContent = response;\n\t\t\t\taddonStatus.style.display = 'block';\n\t\t\t}\n\t\t);\n\n\t\t// The Ajax request was successful, so let's update the output.\n\t\tbutton.css( { opacity: '0' } );\n\n\t\tdocument.querySelectorAll( '.frm-oneclick' ).forEach(\n\t\t\toneClick => {\n\t\t\t\toneClick.style.display = 'none';\n\t\t\t}\n\t\t);\n\n\t\tjQuery( '#frm_upgrade_modal h2' ).hide();\n\t\tjQuery( '#frm_upgrade_modal .frm_lock_icon' ).addClass( 'frm_lock_open_icon' );\n\t\tjQuery( '#frm_upgrade_modal .frm_lock_icon use' ).attr( 'xlink:href', '#frm_lock_open_icon' );\n\n\t\t// Proceed with CSS changes\n\t\tconst actionMap = {\n\t\t\tfrm_activate_addon: { class: 'frm-addon-active', message: frmAdminJs.active },\n\t\t\tfrm_deactivate_addon: { class: 'frm-addon-installed', message: frmAdminJs.installed },\n\t\t\tfrm_uninstall_addon: { class: 'frm-addon-not-installed', message: frmAdminJs.not_installed }\n\t\t};\n\t\tactionMap.frm_install_addon = actionMap.frm_activate_addon;\n\n\t\tconst messageElement = message[ 0 ];\n\t\tif ( messageElement ) {\n\t\t\tmessageElement.textContent = actionMap[ action ].message;\n\t\t}\n\n\t\tconst parentElement = el[ 0 ].parentElement;\n\t\tparentElement.classList.remove( 'frm-addon-not-installed', 'frm-addon-installed', 'frm-addon-active' );\n\t\tparentElement.classList.add( actionMap[ action ].class );\n\n\t\tconst buttonElement = button[ 0 ];\n\t\tbuttonElement.classList.remove( 'frm_loading_button' );\n\n\t\t// Maybe refresh import and SMTP pages\n\t\tconst refreshPage = document.querySelectorAll( '.frm-admin-page-import, #frm-admin-smtp, #frm-welcome' );\n\t\tif ( refreshPage.length > 0 ) {\n\t\t\twindow.location.reload();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( [ 'settings', 'form_builder' ].includes( saveAndReload ) ) {\n\t\t\taddonStatuses.forEach(\n\t\t\t\taddonStatus => {\n\t\t\t\t\tconst inModal = null !== addonStatus.closest( '#frm_upgrade_modal' );\n\t\t\t\t\taddonStatus.appendChild( getSaveAndReloadSettingsOptions( saveAndReload, inModal ) );\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction getSaveAndReloadSettingsOptions( saveAndReload, inModal ) {\n\t\tconst className = 'frm-save-and-reload-options';\n\t\tconst children = [ saveAndReloadSettingsButton( saveAndReload ) ];\n\t\tif ( inModal ) {\n\t\t\tchildren.push( closePopupButton() );\n\t\t}\n\t\treturn div( { className, children } );\n\t}\n\n\tfunction saveAndReloadSettingsButton( saveAndReload ) {\n\t\tconst button = document.createElement( 'button' );\n\t\tbutton.classList.add( 'frm-save-and-reload', 'button', 'button-primary', 'frm-button-primary' );\n\t\tbutton.textContent = __( 'Save and Reload', 'formidable' );\n\t\tbutton.addEventListener( 'click', () => {\n\t\t\tif ( saveAndReload === 'form_builder' ) {\n\t\t\t\tsaveAndReloadFormBuilder();\n\t\t\t} else if ( saveAndReload === 'settings' ) {\n\t\t\t\tsaveAndReloadSettings();\n\t\t\t}\n\t\t} );\n\t\treturn button;\n\t}\n\n\tfunction closePopupButton() {\n\t\tconst a = document.createElement( 'a' );\n\t\ta.setAttribute( 'href', '#' );\n\t\ta.classList.add( 'button', 'button-secondary', 'frm-button-secondary', 'dismiss' );\n\t\ta.textContent = __( 'Close', 'formidable' );\n\t\treturn a;\n\t}\n\n\tfunction extractErrorFromAddOnResponse( response ) {\n\t\tif ( typeof response !== 'string' ) {\n\t\t\tif ( typeof response.success !== 'undefined' && response.success ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif ( response.form ) {\n\t\t\t\tif ( jQuery( response.form ).is( '#message' ) ) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tmessage: jQuery( response.form ).find( 'p' ).html()\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn response;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfunction addonError( response, el, button ) {\n\t\tif ( response.form ) {\n\t\t\tjQuery( '.frm-inline-error' ).remove();\n\t\t\tbutton.closest( '.frm-card' )\n\t\t\t\t.html( response.form )\n\t\t\t\t.css( { padding: 5 } )\n\t\t\t\t.find( '#upgrade' )\n\t\t\t\t.attr( 'rel', button.attr( 'rel' ) )\n\t\t\t\t.on( 'click', installAddonWithCreds );\n\t\t} else {\n\t\t\tel.append( '<div class=\"frm-addon-error frm_error_style\"><p><strong>' + response.message + '</strong></p></div>' );\n\t\t\tbutton.removeClass( 'frm_loading_button' );\n\t\t\tjQuery( '.frm-addon-error' ).delay( 4000 ).fadeOut();\n\t\t}\n\t}\n\n\t/* Templates */\n\tfunction showActiveCampaignForm() {\n\t\tloadApiEmailForm();\n\t}\n\n\tfunction handleApiFormError( inputId, errorId, type, message ) {\n\t\tconst $error = jQuery( errorId );\n\t\t$error.removeClass( 'frm_hidden' ).attr( 'frm-error', type );\n\n\t\tif ( typeof message !== 'undefined' ) {\n\t\t\t$error.find( 'span[frm-error=\"' + type + '\"]' ).text( message );\n\t\t}\n\n\t\tjQuery( inputId ).one( 'keyup', function() {\n\t\t\t$error.addClass( 'frm_hidden' );\n\t\t} );\n\t}\n\n\tfunction handleEmailAddressError( type ) {\n\t\thandleApiFormError( '#frm_leave_email', '#frm_leave_email_error', type );\n\t}\n\n\tfunction loadApiEmailForm() {\n\t\tconst formContainer = document.getElementById( 'frmapi-email-form' );\n\t\tjQuery.ajax( {\n\t\t\tdataType: 'json',\n\t\t\turl: formContainer.getAttribute( 'data-url' ),\n\t\t\tsuccess: function( json ) {\n\t\t\t\tlet form = json.renderedHtml;\n\t\t\t\tform = form.replace( /<link\\b[^>]*(formidableforms.css|action=frmpro_css)[^>]*>/gi, '' );\n\t\t\t\tformContainer.innerHTML = form;\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction initAutocomplete( container ) {\n\t\tfrmDom.autocomplete.initSelectionAutocomplete( container );\n\t}\n\n\tfunction nextInstallStep( thisStep ) {\n\t\tthisStep.classList.add( 'frm_grey' );\n\t\tthisStep.nextElementSibling.classList.remove( 'frm_grey' );\n\t}\n\n\tfunction installTemplateFieldset( e ) {\n\t\t/*jshint validthis:true */\n\t\tconst fieldset = this.parentNode.parentNode,\n\t\t\taction = fieldset.elements.type.value,\n\t\t\tbutton = this;\n\t\te.preventDefault();\n\t\tbutton.classList.add( 'frm_loading_button' );\n\t\tinstallNewForm( fieldset, action, button );\n\t}\n\n\tfunction installTemplate( e ) {\n\t\t/*jshint validthis:true */\n\t\tconst action = this.elements.type.value,\n\t\t\tbutton = this.querySelector( 'button' );\n\t\te.preventDefault();\n\t\tbutton.classList.add( 'frm_loading_button' );\n\t\tinstallNewForm( this, action, button );\n\t}\n\n\tfunction installNewForm( form, action, button ) {\n\t\tconst formData = formToData( form );\n\t\tconst formName = formData.template_name;\n\t\tconst formDesc = formData.template_desc;\n\t\tconst link = form.elements.link.value;\n\n\t\tlet data = {\n\t\t\taction: action,\n\t\t\txml: link,\n\t\t\tname: formName,\n\t\t\tdesc: formDesc,\n\t\t\tform: JSON.stringify( formData ),\n\t\t\tnonce: frmGlobal.nonce\n\t\t};\n\n\t\tconst hookName = 'frm_before_install_new_form';\n\t\tconst filterArgs = { formData };\n\t\tdata = wp.hooks.applyFilters( hookName, data, filterArgs );\n\n\t\tpostAjax( data, function( response ) {\n\t\t\tif ( typeof response.redirect !== 'undefined' ) {\n\t\t\t\tconst redirect = response.redirect;\n\t\t\t\tif ( typeof form.elements.redirect === 'undefined' ) {\n\t\t\t\t\twindow.location = redirect;\n\t\t\t\t} else {\n\t\t\t\t\tconst href = document.getElementById( 'frm-redirect-link' );\n\t\t\t\t\tif ( typeof link !== 'undefined' && href !== null ) {\n\t\t\t\t\t\t// Show the next installation step.\n\t\t\t\t\t\thref.setAttribute( 'href', redirect );\n\t\t\t\t\t\thref.classList.remove( 'frm_grey', 'disabled' );\n\t\t\t\t\t\tnextInstallStep( form.parentNode.parentNode );\n\t\t\t\t\t\tbutton.classList.add( 'frm_grey', 'disabled' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tjQuery( '.spinner' ).css( 'visibility', 'hidden' );\n\n\t\t\t\t// Show response.message\n\t\t\t\tif ( 'string' === typeof response.message ) {\n\t\t\t\t\tshowInstallFormErrorModal( response.message );\n\t\t\t\t}\n\t\t\t}\n\t\t\tbutton.classList.remove( 'frm_loading_button' );\n\t\t} );\n\t}\n\n\tfunction showInstallFormErrorModal( message ) {\n\t\tconst modalContent = div( message );\n\t\tmodalContent.style.padding = '20px 40px';\n\t\tconst modal = frmDom.modal.maybeCreateModal(\n\t\t\t'frmInstallFormErrorModal',\n\t\t\t{\n\t\t\t\ttitle: __( 'Unable to install template', 'formidable' ),\n\t\t\t\tcontent: modalContent\n\t\t\t}\n\t\t);\n\t\tmodal.classList.add( 'frm_common_modal' );\n\t}\n\n\tfunction handleCaptchaTypeChange( e ) {\n\t\tconst thresholdContainer = document.getElementById( 'frm_captcha_threshold_container' );\n\t\tif ( thresholdContainer ) {\n\t\t\tthresholdContainer.classList.toggle( 'frm_hidden', 'v3' !== e.target.value );\n\t\t}\n\t}\n\n\tfunction trashTemplate( e ) {\n\t\t/*jshint validthis:true */\n\t\tconst id = this.getAttribute( 'data-id' );\n\t\te.preventDefault();\n\n\t\tdata = {\n\t\t\taction: 'frm_forms_trash',\n\t\t\tid: id,\n\t\t\tnonce: frmGlobal.nonce\n\t\t};\n\t\tpostAjax( data, function() {\n\t\t\tconst card = document.getElementById( 'frm-template-custom-' + id );\n\t\t\tfadeOut( card, function() {\n\t\t\t\tcard.parentNode.removeChild( card );\n\t\t\t} );\n\t\t} );\n\t}\n\n\tfunction searchContent() {\n\t\t/*jshint validthis:true */\n\t\tlet i,\n\t\t\tregEx = false,\n\t\t\tsearchText = this.value.toLowerCase(),\n\t\t\ttoSearch = this.getAttribute( 'data-tosearch' ),\n\t\t\titems = document.getElementsByClassName( toSearch );\n\n\t\tif ( this.tagName === 'SELECT' ) {\n\t\t\tsearchText = selectedOptions( this );\n\t\t\tsearchText = searchText.join( '|' ).toLowerCase();\n\t\t\tregEx = true;\n\t\t}\n\n\t\tif ( toSearch === 'frm-action' && searchText !== '' ) {\n\t\t\tconst addons = document.getElementById( 'frm_email_addon_menu' ).classList;\n\t\t\taddons.remove( 'frm-all-actions' );\n\t\t\taddons.add( 'frm-limited-actions' );\n\t\t}\n\n\t\tfor ( i = 0; i < items.length; i++ ) {\n\t\t\tconst innerText = items[ i ].innerText.toLowerCase();\n\n\t\t\tconst itemCanBeShown = ! ( getExportOption() === 'xml' && items[ i ].classList.contains( 'frm-is-repeater' ) );\n\t\t\tif ( searchText === '' ) {\n\t\t\t\tif ( itemCanBeShown && checkContextualShortcode( items[ i ] ) ) {\n\t\t\t\t\titems[ i ].classList.remove( 'frm_hidden' );\n\t\t\t\t}\n\t\t\t\titems[ i ].classList.remove( 'frm-search-result' );\n\t\t\t} else if ( ( regEx && new RegExp( searchText ).test( innerText ) ) || innerText.indexOf( searchText ) >= 0 || textMatchesPlural( innerText, searchText ) ) {\n\t\t\t\tif ( itemCanBeShown && checkContextualShortcode( items[ i ] ) ) {\n\t\t\t\t\titems[ i ].classList.remove( 'frm_hidden' );\n\t\t\t\t}\n\t\t\t\titems[ i ].classList.add( 'frm-search-result' );\n\t\t\t} else {\n\t\t\t\titems[ i ].classList.add( 'frm_hidden' );\n\t\t\t\titems[ i ].classList.remove( 'frm-search-result' );\n\t\t\t}\n\t\t}\n\n\t\t// Updates the visibility of category headings based on search results.\n\t\tupdateCatHeadingVisibility();\n\n\t\tjQuery( this ).trigger( 'frmAfterSearch' );\n\t}\n\n\t/**\n\t * Allow a search for \"signatures\" to still match \"signature\" for example when searching fields.\n\t *\n\t * @since 6.15\n\t *\n\t * @param {string} text       The text in the element we are checking for a match.\n\t * @param {string} searchText The text value that is being searched.\n\t * @return {boolean}\n\t */\n\tfunction textMatchesPlural( text, searchText ) {\n\t\tif ( searchText === 's' ) {\n\t\t\t// Don't match everything when just \"s\" is searched.\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( text[ text.length - 1 ] === 's' ) {\n\t\t\t// Do not match something with double s if the text already ends in s.\n\t\t\treturn false;\n\t\t}\n\n\t\treturn ( text + 's' ).indexOf( searchText ) >= 0;\n\t}\n\n\t/**\n\t * Updates the visibility of category headings based on search results.\n\t * If all associated fields are hidden (indicating no search matches),\n\t * the heading is hidden.\n\t *\n\t * @since 6.4.1\n\t */\n\tfunction updateCatHeadingVisibility() {\n\t\tconst insertFieldsElement = document.querySelector( '#frm-insert-fields' );\n\t\tif ( ! insertFieldsElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst headingElements = insertFieldsElement.querySelectorAll( ':scope > .frm-with-line' );\n\t\theadingElements.forEach( heading => {\n\t\t\tconst fieldsListElement = heading.nextElementSibling;\n\t\t\tif ( ! fieldsListElement ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst listItemElements = fieldsListElement.querySelectorAll( ':scope > li.frmbutton' );\n\t\t\tconst allHidden = Array.from( listItemElements ).every( li => li.classList.contains( 'frm_hidden' ) );\n\n\t\t\t// Add or remove class based on `allHidden` condition\n\t\t\theading.classList.toggle( 'frm_hidden', allHidden );\n\t\t} );\n\t}\n\n\tfunction stopPropagation( e ) {\n\t\te.stopPropagation();\n\t}\n\n\t/* Helpers */\n\n\tfunction selectedOptions( select ) {\n\t\tlet opt,\n\t\t\tresult = [],\n\t\t\toptions = select && select.options;\n\n\t\tfor ( let i = 0, iLen = options.length; i < iLen; i++ ) {\n\t\t\topt = options[ i ];\n\n\t\t\tif ( opt.selected ) {\n\t\t\t\tresult.push( opt.value );\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction triggerEvent( element, event ) {\n\t\tconst evt = document.createEvent( 'HTMLEvents' );\n\t\tevt.initEvent( event, false, true );\n\t\telement.dispatchEvent( evt );\n\t}\n\n\tfunction postAjax( data, success ) {\n\t\tlet response;\n\n\t\tconst xmlHttp = new XMLHttpRequest();\n\t\tconst params = typeof data === 'string' ? data : Object.keys( data ).map(\n\t\t\tfunction( k ) {\n\t\t\t\treturn encodeURIComponent( k ) + '=' + encodeURIComponent( data[ k ] );\n\t\t\t}\n\t\t).join( '&' );\n\n\t\txmlHttp.open( 'post', ajaxurl, true );\n\t\txmlHttp.onreadystatechange = function() {\n\t\t\tif ( xmlHttp.readyState > 3 && xmlHttp.status == 200 ) {\n\t\t\t\tresponse = xmlHttp.responseText;\n\t\t\t\ttry {\n\t\t\t\t\tresponse = JSON.parse( response );\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\t// The response may not be JSON, so just return it.\n\t\t\t\t}\n\t\t\t\tsuccess( response );\n\t\t\t}\n\t\t};\n\t\txmlHttp.setRequestHeader( 'X-Requested-With', 'XMLHttpRequest' );\n\t\txmlHttp.setRequestHeader( 'Content-type', 'application/x-www-form-urlencoded' );\n\t\txmlHttp.send( params );\n\t\treturn xmlHttp;\n\t}\n\n\tfunction fadeOut( element, success ) {\n\t\telement.classList.add( 'frm-fade' );\n\t\tsetTimeout( success, 1000 );\n\t}\n\n\tfunction invisible( classes ) {\n\t\tjQuery( classes ).css( 'visibility', 'hidden' );\n\t}\n\n\tfunction visible( classes ) {\n\t\tjQuery( classes ).css( 'visibility', 'visible' );\n\t}\n\n\tfunction initModal( id, width ) {\n\t\tconst $info = jQuery( id );\n\t\tif ( ! $info.length ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( typeof width === 'undefined' ) {\n\t\t\twidth = '550px';\n\t\t}\n\n\t\tconst dialogArgs = {\n\t\t\tdialogClass: 'frm-dialog',\n\t\t\tmodal: true,\n\t\t\tautoOpen: false,\n\t\t\tcloseOnEscape: true,\n\t\t\twidth: width,\n\t\t\tresizable: false,\n\t\t\tdraggable: false,\n\t\t\topen: function() {\n\t\t\t\tjQuery( '.ui-dialog-titlebar' ).addClass( 'frm_hidden' ).removeClass( 'ui-helper-clearfix' );\n\t\t\t\tjQuery( '#wpwrap' ).addClass( 'frm_overlay' );\n\t\t\t\tjQuery( '.frm-dialog' ).removeClass( 'ui-widget ui-widget-content ui-corner-all' );\n\t\t\t\t$info.removeClass( 'ui-dialog-content ui-widget-content' );\n\t\t\t\tbindClickForDialogClose( $info );\n\t\t\t},\n\t\t\tclose: function() {\n\t\t\t\tjQuery( '#wpwrap' ).removeClass( 'frm_overlay' );\n\t\t\t\tjQuery( '.spinner' ).css( 'visibility', 'hidden' );\n\n\t\t\t\tthis.removeAttribute( 'data-option-type' );\n\t\t\t\tconst optionType = document.getElementById( 'bulk-option-type' );\n\t\t\t\tif ( optionType ) {\n\t\t\t\t\toptionType.value = '';\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t$info.dialog( dialogArgs );\n\n\t\treturn $info;\n\t}\n\n\tfunction toggle( cname, id ) {\n\t\tif ( id === '#' ) {\n\t\t\tconst cont = document.getElementById( cname );\n\t\t\tconst hidden = cont.style.display;\n\t\t\tif ( hidden === 'none' ) {\n\t\t\t\tcont.style.display = 'block';\n\t\t\t} else {\n\t\t\t\tcont.style.display = 'none';\n\t\t\t}\n\t\t} else {\n\t\t\tconst vis = cname.is( ':visible' );\n\t\t\tif ( vis ) {\n\t\t\t\tcname.hide();\n\t\t\t} else {\n\t\t\t\tcname.show();\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction removeWPUnload() {\n\t\twindow.onbeforeunload = null;\n\t\tconst w = jQuery( window );\n\t\tw.off( 'beforeunload.widgets' );\n\t\tw.off( 'beforeunload.edit-post' );\n\t}\n\n\tfunction addMultiselectLabelListener() {\n\t\tconst clickListener = e => {\n\t\t\tif ( 'LABEL' !== e.target.nodeName ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst labelFor = e.target.getAttribute( 'for' );\n\t\t\tif ( ! labelFor ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst input = document.getElementById( labelFor );\n\t\t\tif ( ! input || ! input.nextElementSibling ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst buttonToggle = input.nextElementSibling.querySelector( 'button.dropdown-toggle.multiselect' );\n\t\t\tif ( ! buttonToggle ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst triggerMultiselectClick = () => buttonToggle.click();\n\t\t\tsetTimeout( triggerMultiselectClick, 0 );\n\t\t};\n\t\tdocument.addEventListener( 'click', clickListener );\n\t}\n\n\tfunction maybeChangeEmbedFormMsg() {\n\t\tconst fieldId = jQuery( this ).closest( '.frm-single-settings' ).data( 'fid' );\n\t\tlet fieldItem = document.getElementById( 'frm_field_id_' + fieldId );\n\t\tif ( null === fieldItem || 'form' !== fieldItem.dataset.type ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfieldItem = jQuery( fieldItem );\n\n\t\tif ( this.options[ this.selectedIndex ].value ) {\n\t\t\tfieldItem.find( '.frm-not-set' )[ 0 ].classList.add( 'frm_hidden' );\n\t\t\tconst embedMsg = fieldItem.find( '.frm-embed-message' );\n\t\t\tembedMsg.html( embedMsg.data( 'embedmsg' ) + this.options[ this.selectedIndex ].text );\n\t\t\tfieldItem.find( '.frm-embed-field-placeholder' )[ 0 ].classList.remove( 'frm_hidden' );\n\t\t} else {\n\t\t\tfieldItem.find( '.frm-not-set' )[ 0 ].classList.remove( 'frm_hidden' );\n\t\t\tfieldItem.find( '.frm-embed-field-placeholder' )[ 0 ].classList.add( 'frm_hidden' );\n\t\t}\n\t}\n\n\tfunction toggleProductType() {\n\t\tconst settings = jQuery( this ).closest( '.frm-single-settings' ),\n\t\t\tcontainer = settings.find( '.frmjs_product_choices' ),\n\t\t\theading = settings.find( '.frm_prod_options_heading' ),\n\t\t\tcurrentVal = this.options[ this.selectedIndex ].value;\n\n\t\tcontainer.removeClass( 'frm_prod_type_single frm_prod_type_user_def' );\n\t\theading.removeClass( 'frm_prod_user_def' );\n\n\t\tif ( 'single' === currentVal ) {\n\t\t\tcontainer.addClass( 'frm_prod_type_single' );\n\t\t} else if ( 'user_def' === currentVal ) {\n\t\t\tcontainer.addClass( 'frm_prod_type_user_def' );\n\t\t\theading.addClass( 'frm_prod_user_def' );\n\t\t}\n\t}\n\n\t/**\n\t * @param {Number | string} fieldId\n\t * @return {boolean} True if the field is a product field.\n\t */\n\tfunction isProductField( fieldId ) {\n\t\tconst field = document.getElementById( 'frm_field_id_' + fieldId );\n\t\tif ( field === null ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn 'product' === field.getAttribute( 'data-type' );\n\t}\n\n\t/**\n\t * Serialize form data with vanilla JS.\n\t */\n\tfunction formToData( form ) {\n\t\tlet subKey, i,\n\t\t\tobject = {},\n\t\t\tformData = form.elements;\n\n\t\tfor ( i = 0; i < formData.length; i++ ) {\n\t\t\tlet input = formData[ i ],\n\t\t\t\tkey = input.name,\n\t\t\t\tvalue = input.value,\n\t\t\t\tnames = key.match( /(.*)\\[(.*)\\]/ );\n\n\t\t\tif ( ( input.type === 'radio' || input.type === 'checkbox' ) && ! input.checked ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( names !== null ) {\n\t\t\t\tkey = names[ 1 ];\n\t\t\t\tsubKey = names[ 2 ];\n\t\t\t\tif ( ! Reflect.has( object, key ) ) {\n\t\t\t\t\tobject[ key ] = {};\n\t\t\t\t}\n\t\t\t\tobject[ key ][ subKey ] = value;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Reflect.has in favor of: object.hasOwnProperty(key)\n\t\t\tif ( ! Reflect.has( object, key ) ) {\n\t\t\t\tobject[ key ] = value;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ( ! Array.isArray( object[ key ] ) ) {\n\t\t\t\tobject[ key ] = [ object[ key ] ];\n\t\t\t}\n\t\t\tobject[ key ].push( value );\n\t\t}\n\n\t\treturn object;\n\t}\n\n\t/**\n\t * Show, hide, and sort subfields of Name field on form builder.\n\t *\n\t * @since 4.11\n\t */\n\tfunction handleNameFieldOnFormBuilder() {\n\t\t/**\n\t\t * Gets subfield element from cache.\n\t\t *\n\t\t * @param {string} fieldId Field ID.\n\t\t * @param {string} key     Cache key.\n\t\t * @return {HTMLElement|undefined} Return the element from cache or undefined if not found.\n\t\t */\n\t\tconst getSubFieldElFromCache = ( fieldId, key ) => {\n\t\t\twindow.frmCachedSubFields = window.frmCachedSubFields || {};\n\t\t\twindow.frmCachedSubFields[ fieldId ] = window.frmCachedSubFields[ fieldId ] || {};\n\t\t\treturn window.frmCachedSubFields[ fieldId ][ key ];\n\t\t};\n\n\t\t/**\n\t\t * Sets subfield element to cache.\n\t\t *\n\t\t * @param {string}      fieldId Field ID.\n\t\t * @param {string}      key     Cache key.\n\t\t * @param {HTMLElement} el      Element.\n\t\t */\n\t\tconst setSubFieldElToCache = ( fieldId, key, el ) => {\n\t\t\twindow.frmCachedSubFields = window.frmCachedSubFields || {};\n\t\t\twindow.frmCachedSubFields[ fieldId ] = window.frmCachedSubFields[ fieldId ] || {};\n\t\t\twindow.frmCachedSubFields[ fieldId ][ key ] = el;\n\t\t};\n\n\t\t/**\n\t\t * Gets column class from the number of columns.\n\t\t *\n\t\t * @param {Number} colCount Number of columns.\n\t\t * @return {string}\n\t\t */\n\t\tconst getColClass = colCount => 'frm' + parseInt( 12 / colCount );\n\n\t\tconst colClasses = [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12 ].map( num => 'frm' + num );\n\n\t\tconst allSubFieldNames = [ 'first', 'middle', 'last' ];\n\n\t\t/**\n\t\t * Handles name layout change.\n\t\t *\n\t\t * @param {Event} event Event object.\n\t\t */\n\t\tconst onChangeLayout = event => {\n\t\t\tconst value = event.target.value;\n\t\t\tconst subFieldNames = value.split( '_' );\n\t\t\tconst fieldId = event.target.dataset.fieldId;\n\n\t\t\t/*\n\t\t\t * Live update form on the form builder.\n\t\t\t */\n\t\t\tconst container = document.querySelector( '#field_' + fieldId + '_inner_container .frm_combo_inputs_container' );\n\t\t\tconst newColClass = getColClass( subFieldNames.length );\n\n\t\t\t// Set all sub field elements to cache and hide all of them first.\n\t\t\tallSubFieldNames.forEach( name => {\n\t\t\t\tconst subFieldEl = container.querySelector( '[data-sub-field-name=\"' + name + '\"]' );\n\t\t\t\tif ( subFieldEl ) {\n\t\t\t\t\tsubFieldEl.classList.add( 'frm_hidden' );\n\t\t\t\t\tsubFieldEl.classList.remove( ...colClasses );\n\t\t\t\t\tsetSubFieldElToCache( fieldId, name, subFieldEl );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tsubFieldNames.forEach( subFieldName => {\n\t\t\t\tconst subFieldEl = getSubFieldElFromCache( fieldId, subFieldName );\n\t\t\t\tif ( ! subFieldEl ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsubFieldEl.classList.remove( 'frm_hidden' );\n\t\t\t\tsubFieldEl.classList.add( newColClass );\n\n\t\t\t\tcontainer.append( subFieldEl );\n\t\t\t} );\n\n\t\t\t/*\n\t\t\t * Live update subfield options.\n\t\t\t */\n\t\t\t// Hide all subfield options.\n\t\t\tallSubFieldNames.forEach( name => {\n\t\t\t\tconst optionsEl = document.querySelector( '.frm_sub_field_options-' + name + '[data-field-id=\"' + fieldId + '\"]' );\n\t\t\t\tif ( optionsEl ) {\n\t\t\t\t\toptionsEl.classList.add( 'frm_hidden' );\n\t\t\t\t\tsetSubFieldElToCache( fieldId, name + '_options', optionsEl );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tsubFieldNames.forEach( subFieldName => {\n\t\t\t\tconst optionsEl = getSubFieldElFromCache( fieldId, subFieldName + '_options' );\n\t\t\t\tif ( ! optionsEl ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\toptionsEl.classList.remove( 'frm_hidden' );\n\t\t\t} );\n\t\t};\n\n\t\tconst dropdownSelector = '.frm_name_layout_dropdown';\n\t\tdocument.addEventListener( 'change', event => {\n\t\t\tif ( event.target.matches( dropdownSelector ) ) {\n\t\t\t\tonChangeLayout( event );\n\t\t\t}\n\t\t}, false );\n\t}\n\n\tfunction debounce( func, wait = 100 ) {\n\t\treturn frmDom.util.debounce( func, wait );\n\t}\n\n\tfunction addSaveAndDragIconsToOption( fieldId, liObject ) {\n\t\tlet li, useTag, useTagHref;\n\t\tlet hasDragIcon = false;\n\t\tlet hasSaveIcon = false;\n\n\t\tif ( liObject.newOption ) {\n\t\t\tconst parser = new DOMParser();\n\t\t\tli = parser.parseFromString( liObject.newOption, 'text/html' ).body.childNodes[ 0 ];\n\t\t} else {\n\t\t\tli = liObject;\n\t\t}\n\n\t\tconst liIcons = li.querySelectorAll( 'svg' );\n\n\t\tliIcons.forEach( ( svg, key ) => {\n\t\t\tuseTag = svg.getElementsByTagNameNS( 'http://www.w3.org/2000/svg', 'use' )[ 0 ];\n\t\t\tif ( ! useTag ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tuseTagHref = useTag.getAttributeNS( 'http://www.w3.org/1999/xlink', 'href' ) || useTag.getAttribute( 'href' );\n\n\t\t\tif ( useTagHref === '#frm_drag_icon' ) {\n\t\t\t\thasDragIcon = true;\n\t\t\t}\n\n\t\t\tif ( useTagHref === '#frm_save_icon' ) {\n\t\t\t\thasSaveIcon = true;\n\t\t\t}\n\t\t} );\n\n\t\tif ( ! hasDragIcon ) {\n\t\t\tli.prepend( icons.drag.cloneNode( true ) );\n\t\t}\n\n\t\tif ( li.querySelector( `[id^=field_key_${ fieldId }-]` ) && ! hasSaveIcon ) {\n\t\t\tli.querySelector( `[id^=field_key_${ fieldId }-]` ).after( icons.save.cloneNode( true ) );\n\t\t}\n\n\t\tif ( liObject.newOption ) {\n\t\t\tliObject.newOption = li;\n\t\t}\n\t}\n\n\tfunction maybeAddSaveAndDragIcons( fieldId ) {\n\t\tconst fieldOptions = document.querySelectorAll( `[id^=frm_delete_field_${ fieldId }-]` );\n\t\t// return if there are no options.\n\t\tif ( fieldOptions.length < 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst options = [ ...fieldOptions ].slice( 1 );\n\t\toptions.forEach( ( li, _key ) => {\n\t\t\tif ( li.classList.contains( 'frm_other_option' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\taddSaveAndDragIconsToOption( fieldId, li );\n\t\t} );\n\t}\n\n\t/**\n\t * Enforce the maximum number of entries list columns dynamically.\n\t *\n\t * @since 6.24\n\t *\n\t * @return {void}\n\t */\n\tfunction maybeInitEntriesListPage() {\n\t\tif ( ! document.body.classList.contains( 'frm-admin-page-entries' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst screenOptionsWrapper = document.getElementById( 'screen-options-wrap' );\n\t\tif ( ! screenOptionsWrapper ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst maxSelectionsNote = div( {\n\t\t\tclassName: 'frm_warning_style',\n\t\t\ttext: __( 'Only 10 columns can be selected at a time.', 'formidable' ),\n\t\t} );\n\t\tmaxSelectionsNote.style.margin = 0;\n\n\t\tconst legend = screenOptionsWrapper.querySelector( 'legend' );\n\t\tlegend.parentNode.insertBefore( maxSelectionsNote, legend.nextElementSibling );\n\n\t\tconst checkboxes = Array.from( screenOptionsWrapper.querySelectorAll( 'input[type=\"checkbox\"]' ) );\n\t\tconst maximumColumns = 10;\n\t\tconst getSelectedCount = () => {\n\t\t\treturn checkboxes.reduce( ( count, checkbox ) => {\n\t\t\t\treturn checkbox.checked ? count + 1 : count;\n\t\t\t}, 0 );\n\t\t};\n\t\tconst disableCheckboxesIfAtMax = () => {\n\t\t\tif ( getSelectedCount() >= maximumColumns ) {\n\t\t\t\tmaxSelectionsNote.classList.remove( 'frm_hidden' );\n\t\t\t\tcheckboxes.forEach( checkbox => {\n\t\t\t\t\tif ( ! checkbox.checked ) {\n\t\t\t\t\t\tcheckbox.parentNode.classList.add( 'frm_noallow' );\n\t\t\t\t\t\tcheckbox.disabled = true;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tmaxSelectionsNote.classList.add( 'frm_hidden' );\n\t\t\t}\n\t\t};\n\t\tconst addCheckboxListeners = () => {\n\t\t\tcheckboxes.forEach(\n\t\t\t\tcheckbox => {\n\t\t\t\t\tcheckbox.addEventListener(\n\t\t\t\t\t\t'change',\n\t\t\t\t\t\tevent => {\n\t\t\t\t\t\t\tif ( event.target.checked ) {\n\t\t\t\t\t\t\t\tdisableCheckboxesIfAtMax();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmaxSelectionsNote.classList.add( 'frm_hidden' );\n\n\t\t\t\t\t\t\t\t// Enable all checkboxes when a checkbox is unchecked.\n\t\t\t\t\t\t\t\tcheckboxes.forEach(\n\t\t\t\t\t\t\t\t\tcheckbox => {\n\t\t\t\t\t\t\t\t\t\tcheckbox.parentNode.classList.remove( 'frm_noallow' );\n\t\t\t\t\t\t\t\t\t\tcheckbox.disabled = false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t};\n\n\t\tdisableCheckboxesIfAtMax();\n\t\taddCheckboxListeners();\n\t}\n\n\tfunction initOnSubmitAction() {\n\t\tconst onChangeType = event => {\n\t\t\tif ( ! event.target.checked ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst actionEl = event.target.closest( '.frm_form_action_settings' );\n\t\t\tactionEl.querySelectorAll( '.frm_on_submit_dependent_setting:not(.frm_hidden)' ).forEach( el => {\n\t\t\t\tel.classList.add( 'frm_hidden' );\n\t\t\t} );\n\n\t\t\tconst activeEls = actionEl.querySelectorAll( '.frm_on_submit_dependent_setting[data-show-if-' + event.target.value + ']' );\n\t\t\tactiveEls.forEach( activeEl => {\n\t\t\t\tactiveEl.classList.remove( 'frm_hidden' );\n\t\t\t} );\n\n\t\t\tactionEl.setAttribute( 'data-on-submit-type', event.target.value );\n\t\t};\n\n\t\tfrmDom.util.documentOn( 'change', '.frm_on_submit_type input[type=\"radio\"]', onChangeType );\n\t}\n\n\t/**\n\t * Listen for click events for an API-loaded email collection form.\n\t *\n\t * This is used for the Active Campaign sign-up form in the inbox page (when there are no messages).\n\t */\n\tfunction initAddMyEmailAddress() {\n\t\tjQuery( document ).on(\n\t\t\t'click',\n\t\t\t'#frm-add-my-email-address',\n\t\t\tevent => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\taddMyEmailAddress();\n\t\t\t}\n\t\t);\n\n\t\tconst emptyInbox = document.getElementById( 'frm_empty_inbox' );\n\t\tconst leaveEmailInput = document.getElementById( 'frm_leave_email' );\n\n\t\tif ( emptyInbox && leaveEmailInput ) {\n\t\t\tconst leaveEmailModal = document.getElementById( 'frm-leave-email-modal' );\n\t\t\tleaveEmailModal.classList.remove( 'frm_hidden' );\n\t\t\tleaveEmailModal.querySelector( '.frm_modal_footer' ).classList.add( 'frm_hidden' );\n\n\t\t\tleaveEmailInput.addEventListener(\n\t\t\t\t'keyup',\n\t\t\t\tevent => {\n\t\t\t\t\tif ( 'Enter' === event.key ) {\n\t\t\t\t\t\tconst button = document.getElementById( 'frm-add-my-email-address' );\n\t\t\t\t\t\tif ( button ) {\n\t\t\t\t\t\t\tbutton.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction addMyEmailAddress() {\n\t\tconst email = document.getElementById( 'frm_leave_email' ).value.trim();\n\t\tif ( '' === email ) {\n\t\t\thandleEmailAddressError( 'empty' );\n\t\t\treturn;\n\t\t}\n\n\t\tconst regex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/i;\n\t\tif ( regex.test( email ) === false ) {\n\t\t\thandleEmailAddressError( 'invalid' );\n\t\t\treturn;\n\t\t}\n\n\t\tconst $hiddenForm = jQuery( '#frmapi-email-form' ).find( 'form' );\n\t\tconst $hiddenEmailField = $hiddenForm.find( '[type=\"email\"]' ).not( '.frm_verify' );\n\t\tif ( ! $hiddenEmailField.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst emptyInbox = document.getElementById( 'frm_empty_inbox' );\n\t\tif ( emptyInbox ) {\n\t\t\tdocument.getElementById( 'frm-add-my-email-address' ).remove();\n\n\t\t\tconst emailWrapper = document.getElementById( 'frm_leave_email_wrapper' );\n\t\t\tif ( emailWrapper ) {\n\t\t\t\temailWrapper.classList.add( 'frm_hidden' );\n\t\t\t\tconst spinner = span( { className: 'frm-wait frm_spinner' } );\n\t\t\t\tspinner.style.visibility = 'visible';\n\t\t\t\tspinner.style.float = 'none';\n\t\t\t\tspinner.style.width = 'unset';\n\t\t\t\temailWrapper.parentElement.insertBefore(\n\t\t\t\t\tspinner,\n\t\t\t\t\temailWrapper.nextElementSibling\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t$hiddenEmailField.val( email );\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: $hiddenForm.attr( 'action' ),\n\t\t\tdata: $hiddenForm.serialize() + '&action=frm_forms_preview'\n\t\t} ).done( function( data ) {\n\t\t\tconst message = jQuery( data ).find( '.frm_message' ).text().trim();\n\t\t\tif ( message.indexOf( 'Thanks!' ) === -1 ) {\n\t\t\t\thandleEmailAddressError( 'invalid' );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst apiForm = document.getElementById( 'frmapi-email-form' );\n\t\t\tconst spinner = apiForm.parentElement.querySelector( '.frm_spinner' );\n\t\t\tif ( spinner ) {\n\t\t\t\tspinner.remove();\n\t\t\t}\n\n\t\t\tconst showSuccessMessage = wp.hooks.applyFilters( 'frm_thank_you_on_signup', true );\n\t\t\tif ( showSuccessMessage ) {\n\t\t\t\t// Handle successful form submission.\n\t\t\t\t// handle the Active Campaign form on the inbox page.\n\t\t\t\tdocument.getElementById( 'frm_leave_email_wrapper' ).replaceWith(\n\t\t\t\t\tspan( __( 'Thank you for signing up!', 'formidable' ) )\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Adds footer links to the admin body content.\n\t *\n\t * @return {void}\n\t */\n\tfunction addAdminFooterLinks() {\n\t\tconst footerLinks = document.querySelector( '.frm-admin-footer-links' );\n\t\tconst container = document.querySelector( '.frm_page_container' ) ?? document.getElementById( 'wpbody-content' );\n\n\t\tif ( ! footerLinks || ! container ) {\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.appendChild( footerLinks );\n\t\tfooterLinks.classList.remove( 'frm_hidden' );\n\t}\n\n\t/**\n\t * Apply zebra striping to a table while ignoring empty rows.\n\t *\n\t * @param {string} tableSelector The CSS selector for the table.\n\t * @param {string} emptyRowClass The class name used to identify empty rows.\n\t */\n\tfunction applyZebraStriping( tableSelector, emptyRowClass ) {\n\t\t// Get all non-empty table rows within the specified table\n\t\tconst rows = document.querySelectorAll( `${ tableSelector } tr${ emptyRowClass ? `:not(.${ emptyRowClass })` : '' }` );\n\t\tif ( rows.length < 1 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet isOdd = true;\n\t\trows.forEach( row => {\n\t\t\t// Clean old \"frm-odd\" or \"frm-even\" classes and add the appropriate new class\n\t\t\trow.classList.remove( 'frm-odd', 'frm-even' );\n\t\t\trow.classList.add( isOdd ? 'frm-odd' : 'frm-even' );\n\n\t\t\tisOdd = ! isOdd;\n\t\t} );\n\n\t\tconst tables = document.querySelectorAll( tableSelector );\n\t\ttables.forEach( table => table.classList.add( 'frm-zebra-striping' ) );\n\t}\n\n\tfunction maybeHideShortcodes( e ) {\n\t\tif ( ! builderPage ) {\n\t\t\te.stopPropagation();\n\t\t}\n\n\t\tif ( e.target.classList.contains( 'frm-show-box' ) || ( e.target.parentElement && e.target.parentElement.classList.contains( 'frm-show-box' ) ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst sidebar = document.getElementById( 'frm_adv_info' );\n\t\tif ( ! sidebar ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( sidebar.dataset.fills === e.target.id && typeof e.target.id !== 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isChild = e.target.closest( '#frm_adv_info' );\n\n\t\tif ( ! isChild && sidebar.style.display !== 'none' ) {\n\t\t\thideShortcodes( sidebar );\n\t\t}\n\t}\n\n\t/**\n\t * Initializes and manages the visibility of dependent elements based on the selected options in dropdowns with the 'frm_select_with_dependency' class.\n\t * It sets up initial visibility at page load and updates it on each dropdown change.\n\t *\n\t * @since 6.9\n\t *\n\t * @return {void}\n\t */\n\tfunction initSelectDependencies() {\n\t\tconst selects = document.querySelectorAll( 'select.frm_select_with_dependency' );\n\n\t\t/**\n\t\t * Toggles the visibility of dependent elements associated with a select element based on its current selection.\n\t\t *\n\t\t * @since 6.9\n\t\t *\n\t\t * @param {HTMLElement} select The select element whose dependencies need to be managed.\n\t\t * @return {void}\n\t\t */\n\t\tfunction toggleDependencyVisibility( select ) {\n\t\t\tconst selectedOption = select.options[ select.selectedIndex ];\n\t\t\tselect.querySelectorAll( 'option[data-dependency]:not([data-dependency-skip])' ).forEach( option => {\n\t\t\t\tconst dependencyElement = document.querySelector( option.dataset.dependency );\n\t\t\t\tdependencyElement?.classList.toggle( 'frm_hidden', selectedOption !== option );\n\t\t\t} );\n\t\t}\n\n\t\t// Initial setup: Show dependencies based on the current selection in each dropdown\n\t\tselects.forEach( toggleDependencyVisibility );\n\n\t\t// Update dependencies visibility on dropdown change\n\t\tfrmDom.util.documentOn( 'change', 'select.frm_select_with_dependency', event => toggleDependencyVisibility( event.target ) );\n\t}\n\n\t/**\n\t * Moves the focus to the next single option input field in the list and positions the cursor at the end of the text.\n\t *\n\t * @param {HTMLElement} currentInput The currently focused input element.\n\t */\n\tfunction focusNextSingleOptionInput( currentInput ) {\n\t\tconst optionsList = currentInput.closest( '.frm_single_option' ).parentElement;\n\t\tconst inputs = optionsList.querySelectorAll( '.frm_single_option input[name^=\"field_options[\" ], .frm_single_option input[name^=\"rows_\"]' );\n\t\tconst inputsArray = Array.from( inputs );\n\n\t\t// Find the index of the currently focused input\n\t\tconst currentIndex = inputsArray.indexOf( currentInput );\n\n\t\tif ( currentIndex < 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Find the next visible input field\n\t\tconst nextInput = inputsArray.slice( currentIndex + 1 ).find( input => input.offsetParent !== null );\n\n\t\tif ( nextInput ) {\n\t\t\tnextInput.focus();\n\n\t\t\t// Move the cursor to the end of the text in the next input field\n\t\t\tconst textLength = nextInput.value.length;\n\t\t\tnextInput.setSelectionRange( textLength, textLength );\n\t\t}\n\t}\n\n\treturn {\n\t\tinit: function() {\n\t\t\tinitAddMyEmailAddress();\n\t\t\taddAdminFooterLinks();\n\n\t\t\ts = {};\n\n\t\t\t// Bootstrap dropdown button\n\t\t\tjQuery( '.wp-admin' ).on( 'click', function( e ) {\n\t\t\t\tconst t = jQuery( e.target );\n\t\t\t\tconst $openDrop = jQuery( '.dropdown.open' );\n\t\t\t\tif ( $openDrop.length && ! t.hasClass( 'dropdown' ) && ! t.closest( '.dropdown' ).length ) {\n\t\t\t\t\t$openDrop.removeClass( 'open' );\n\t\t\t\t}\n\t\t\t} );\n\t\t\tjQuery( '#frm_bs_dropdown:not(.open) a' ).on( 'click', focusSearchBox );\n\n\t\t\tif ( typeof thisFormId === 'undefined' ) {\n\t\t\t\tthisFormId = jQuery( document.getElementById( 'form_id' ) ).val();\n\t\t\t}\n\n\t\t\t// Add event listener for dismissible warning messages.\n\t\t\tdocument.querySelectorAll( '.frm-warning-dismiss' ).forEach( dismissIcon => {\n\t\t\t\tonClickPreventDefault( dismissIcon, dismissWarningMessage );\n\t\t\t} );\n\n\t\t\tfrmAdminBuild.inboxBannerInit();\n\n\t\t\tif ( $newFields.length > 0 ) {\n\t\t\t\t// only load this on the form builder page\n\t\t\t\tfrmAdminBuild.buildInit();\n\t\t\t} else if ( document.getElementById( 'frm_notification_settings' ) !== null ) {\n\t\t\t\t// only load on form settings page\n\t\t\t\tfrmAdminBuild.settingsInit();\n\t\t\t} else if ( document.getElementById( 'frm_styling_form' ) !== null ) {\n\t\t\t\t// load styling settings js\n\t\t\t\tfrmAdminBuild.styleInit();\n\t\t\t} else if ( document.getElementById( 'form_global_settings' ) !== null ) {\n\t\t\t\t// global settings page\n\t\t\t\tfrmAdminBuild.globalSettingsInit();\n\t\t\t} else if ( document.getElementById( 'frm_export_xml' ) !== null ) {\n\t\t\t\t// import/export page\n\t\t\t\tfrmAdminBuild.exportInit();\n\t\t\t} else if ( null !== document.querySelector( '.frm-inbox-wrapper' ) ) {\n\t\t\t\t// Dashboard page inbox.\n\t\t\t\tfrmAdminBuild.inboxInit();\n\t\t\t} else if ( document.getElementById( 'frm-welcome' ) !== null ) {\n\t\t\t\t// Solution install page\n\t\t\t\tfrmAdminBuild.solutionInit();\n\t\t\t} else {\n\t\t\t\tmaybeInitEntriesListPage();\n\n\t\t\t\tinitAutocomplete();\n\n\t\t\t\tjQuery( '[data-frmprint]' ).on( 'click', function() {\n\t\t\t\t\twindow.print();\n\t\t\t\t\treturn false;\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tjQuery( document ).on( 'change', 'select[data-toggleclass], input[data-toggleclass]', toggleFormOpts );\n\t\t\tinitSelectDependencies();\n\n\t\t\tconst $advInfo = jQuery( document.getElementById( 'frm_adv_info' ) );\n\t\t\tif ( $advInfo.length > 0 || jQuery( '.frm_field_list' ).length > 0 ) {\n\t\t\t\t// only load on the form, form settings, and view settings pages\n\t\t\t\tfrmAdminBuild.panelInit();\n\t\t\t}\n\n\t\t\tloadTooltips();\n\t\t\tinitUpgradeModal();\n\t\t\tfrmDom.util.documentOn( 'click', '[data-modal-title]', showBasicModal );\n\n\t\t\t// used on build, form settings, and view settings\n\t\t\tconst $shortCodeDiv = jQuery( document.getElementById( 'frm_shortcodediv' ) );\n\t\t\tif ( $shortCodeDiv.length > 0 ) {\n\t\t\t\tjQuery( 'a.edit-frm_shortcode' ).on( 'click', function() {\n\t\t\t\t\tif ( $shortCodeDiv.is( ':hidden' ) ) {\n\t\t\t\t\t\t$shortCodeDiv.slideDown( 'fast' );\n\t\t\t\t\t\tthis.style.display = 'none';\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t} );\n\n\t\t\t\tjQuery( '.cancel-frm_shortcode', '#frm_shortcodediv' ).on( 'click', function() {\n\t\t\t\t\t$shortCodeDiv.slideUp( 'fast' );\n\t\t\t\t\t$shortCodeDiv.siblings( 'a.edit-frm_shortcode' ).show();\n\t\t\t\t\treturn false;\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// tabs\n\t\t\tjQuery( document ).on( 'click', '#frm-nav-tabs a', clickNewTab );\n\t\t\tjQuery( '.post-type-frm_display .frm-nav-tabs a, .frm-category-tabs a' ).on( 'click', function() {\n\t\t\t\tconst showUpgradeTab = this.classList.contains( 'frm_show_upgrade_tab' );\n\t\t\t\tif ( this.classList.contains( 'frm_noallow' ) && ! showUpgradeTab ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( showUpgradeTab ) {\n\t\t\t\t\tpopulateUpgradeTab( this );\n\t\t\t\t}\n\n\t\t\t\tclickTab( this );\n\t\t\t\treturn false;\n\t\t\t} );\n\t\t\tclickTab( jQuery( '.starttab a' ), 'auto' );\n\n\t\t\t// submit the search form with dropdown\n\t\t\tjQuery( document ).on( 'click', '#frm-fid-search-menu a', function() {\n\t\t\t\tconst val = this.id.replace( 'fid-', '' );\n\t\t\t\tjQuery( 'select[name=\"fid\"]' ).val( val );\n\t\t\t\ttriggerSubmit( document.getElementById( 'posts-filter' ) );\n\t\t\t\treturn false;\n\t\t\t} );\n\n\t\t\tjQuery( '.frm_select_box' ).on( 'click focus', function() {\n\t\t\t\tthis.select();\n\t\t\t} );\n\n\t\t\tjQuery( document ).on( 'input search change', '.frm-auto-search:not(#frm-form-templates-page #template-search-input)', searchContent );\n\t\t\tjQuery( document ).on( 'focusin click', '.frm-auto-search', stopPropagation );\n\t\t\tconst autoSearch = jQuery( '.frm-auto-search' );\n\t\t\tif ( autoSearch.val() !== '' ) {\n\t\t\t\tautoSearch.trigger( 'keyup' );\n\t\t\t}\n\n\t\t\t// Initialize Formidable Connection.\n\t\t\tFrmFormsConnect.init();\n\n\t\t\tjQuery( document ).on( 'click', '.frm-install-addon', installAddon );\n\t\t\tjQuery( document ).on( 'click', '.frm-activate-addon', activateAddon );\n\t\t\tjQuery( document ).on( 'click', '.frm-solution-multiple', installMultipleAddons );\n\n\t\t\t// prevent annoying confirmation message from WordPress\n\t\t\tjQuery( 'button, input[type=submit]' ).on( 'click', removeWPUnload );\n\n\t\t\taddMultiselectLabelListener();\n\n\t\t\tfrmAdminBuild.hooks.addFilter(\n\t\t\t\t'frm_before_embed_modal',\n\t\t\t\t( ids, { element, type } ) => {\n\t\t\t\t\tif ( 'form' !== type ) {\n\t\t\t\t\t\treturn ids;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet formId, formKey;\n\t\t\t\t\tconst row = element.closest( 'tr' );\n\n\t\t\t\t\tif ( row ) {\n\t\t\t\t\t\t// Embed icon on form index.\n\t\t\t\t\t\tformId = parseInt( row.querySelector( '.column-id' ).textContent );\n\t\t\t\t\t\tformKey = row.querySelector( '.column-form_key' ).textContent;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Embed button in form builder / form settings.\n\t\t\t\t\t\tformId = document.getElementById( 'form_id' ).value;\n\n\t\t\t\t\t\tconst formKeyInput = document.getElementById( 'frm_form_key' );\n\t\t\t\t\t\tif ( formKeyInput ) {\n\t\t\t\t\t\t\tformKey = formKeyInput.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst previewDrop = document.getElementById( 'frm-previewDrop' );\n\t\t\t\t\t\t\tif ( previewDrop ) {\n\t\t\t\t\t\t\t\tformKey = previewDrop.nextElementSibling.querySelector( '.dropdown-item a' ).getAttribute( 'href' ).split( 'form=' )[ 1 ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn [ formId, formKey ];\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tdocument.querySelectorAll( '#frm-show-fields > li, .frm_grid_container li' ).forEach( ( el, _key ) => {\n\t\t\t\tel.addEventListener( 'click', function() {\n\t\t\t\t\tconst fieldId = this.querySelector( 'li' )?.dataset.fid || this.dataset.fid;\n\t\t\t\t\tmaybeAddSaveAndDragIcons( fieldId );\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\tconst smallScreenProceedButton = document.getElementById( 'frm_small_screen_proceed_button' );\n\t\t\tif ( smallScreenProceedButton ) {\n\t\t\t\tonClickPreventDefault( smallScreenProceedButton, () => {\n\t\t\t\t\tdocument.getElementById( 'frm_small_device_message_container' )?.remove();\n\t\t\t\t\tdoJsonPost( 'small_screen_proceed', new FormData() );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tconst saleBanner = document.getElementById( 'frm_sale_banner' );\n\t\t\tconst saleDismiss = saleBanner?.querySelector( '.dismiss' );\n\t\t\tif ( saleBanner ) {\n\t\t\t\tonClickPreventDefault( saleBanner, event => {\n\t\t\t\t\tconst target = event.target;\n\t\t\t\t\tif ( target.closest( '.dismiss' ) ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\twindow.location.href = saleBanner.getAttribute( 'data-url' );\n\t\t\t\t} );\n\n\t\t\t\tif ( saleDismiss ) {\n\t\t\t\t\tonClickPreventDefault( saleDismiss, () => {\n\t\t\t\t\t\tsaleBanner.remove();\n\n\t\t\t\t\t\tconst formData = new FormData();\n\t\t\t\t\t\tdoJsonPost( 'sale_banner_dismiss', formData );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tbuildInit: function() {\n\t\t\tjQuery( '#frm_builder_page' ).on( 'mouseup', '*:not(.frm-show-box)', maybeHideShortcodes );\n\n\t\t\tlet loadFieldId, $builderForm, builderArea;\n\n\t\t\tdebouncedSyncAfterDragAndDrop = debounce( syncAfterDragAndDrop, 10 );\n\t\t\tpostBodyContent = document.getElementById( 'post-body-content' );\n\t\t\t$postBodyContent = jQuery( postBodyContent );\n\n\t\t\tif ( jQuery( '.frm_field_loading' ).length ) {\n\t\t\t\tloadFieldId = jQuery( '.frm_field_loading' ).first().attr( 'id' );\n\t\t\t\tloadFields( loadFieldId );\n\t\t\t}\n\n\t\t\tsetupSortable( 'ul.frm_sorting' );\n\n\t\t\tdocument.querySelectorAll( '.field_type_list > li:not(.frm_show_upgrade)' ).forEach( makeDraggable );\n\n\t\t\tjQuery( 'ul.field_type_list, .field_type_list li, ul.frm_code_list, .frm_code_list li, .frm_code_list li a, #frm_adv_info #category-tabs li, #frm_adv_info #category-tabs li a' ).disableSelection();\n\n\t\t\tjQuery( '.frm_submit_ajax' ).on( 'click', submitBuild );\n\t\t\tjQuery( '.frm_submit_no_ajax' ).on( 'click', submitNoAjax );\n\n\t\t\taddFormNameModalEvents();\n\n\t\t\tjQuery( 'a.edit-form-status' ).on( 'click', slideDown );\n\t\t\tjQuery( '.cancel-form-status' ).on( 'click', slideUp );\n\t\t\tjQuery( '.save-form-status' ).on( 'click', function() {\n\t\t\t\tconst newStatus = jQuery( document.getElementById( 'form_change_status' ) ).val();\n\t\t\t\tjQuery( 'input[name=\"new_status\"]' ).val( newStatus );\n\t\t\t\tjQuery( document.getElementById( 'form-status-display' ) ).html( newStatus );\n\t\t\t\tjQuery( '.cancel-form-status' ).trigger( 'click' );\n\t\t\t\treturn false;\n\t\t\t} );\n\n\t\t\tjQuery( '.frm_form_builder form' ).first().on( 'submit', function() {\n\t\t\t\tjQuery( '.inplace_field' ).trigger( 'blur' );\n\t\t\t} );\n\n\t\t\tinitiateMultiselect();\n\t\t\trenumberPageBreaks();\n\n\t\t\t$builderForm = jQuery( builderForm );\n\t\t\tbuilderArea = document.getElementById( 'frm_form_editor_container' );\n\t\t\t$builderForm.on( 'click', '.frm_add_logic_row', addFieldLogicRow );\n\t\t\t$builderForm.on( 'click', '.frm_add_watch_lookup_row', addWatchLookupRow );\n\t\t\t$builderForm.on( 'change', '.frm_get_values_form', updateGetValueFieldSelection );\n\t\t\t$builderForm.on( 'change', '.frm_logic_field_opts', getFieldValues );\n\t\t\t$builderForm.on( 'frm-multiselect-changed', 'select[name^=\"field_options[admin_only_\"]', adjustVisibilityValuesForEveryoneValues );\n\n\t\t\tjQuery( document.getElementById( 'frm-insert-fields' ) ).on( 'click', '.frm_add_field', addFieldClick );\n\t\t\t$newFields.on( 'click', '.frm_clone_field', duplicateField );\n\t\t\t$builderForm.on( 'blur', 'input[id^=\"frm_calc\"]', checkCalculationCreatedByUser );\n\t\t\t$builderForm.on( 'change', 'input.frm_format_opt, input.frm_max_length_opt', toggleInvalidMsg );\n\t\t\t$builderForm.on( 'change click', '[data-changeme]', liveChanges );\n\t\t\t$builderForm.on( 'click', 'input.frm_req_field', markRequired );\n\t\t\t$builderForm.on( 'click', '.frm_mark_unique', markUnique );\n\n\t\t\t$builderForm.on( 'change', '.frm_repeat_format', toggleRepeatButtons );\n\t\t\t$builderForm.on( 'change', '.frm_repeat_limit', checkRepeatLimit );\n\t\t\t$builderForm.on( 'change', '.frm_js_checkbox_limit', checkCheckboxSelectionsLimit );\n\t\t\t$builderForm.on( 'input', 'input[name^=\"field_options[add_label_\"]', function() {\n\t\t\t\tupdateRepeatText( this, 'add' );\n\t\t\t} );\n\t\t\t$builderForm.on( 'input', 'input[name^=\"field_options[remove_label_\"]', function() {\n\t\t\t\tupdateRepeatText( this, 'remove' );\n\t\t\t} );\n\t\t\t$builderForm.on( 'change', 'select[name^=\"field_options[data_type_\"]', maybeClearWatchFields );\n\t\t\tjQuery( builderArea ).on( 'click', '.frm-collapse-page', maybeCollapsePage );\n\t\t\tjQuery( builderArea ).on( 'click', '.frm-collapse-section', maybeCollapseSection );\n\t\t\t$builderForm.on( 'click', '.frm-single-settings h3, .frm-single-settings h4.frm-collapsible', maybeCollapseSettings );\n\t\t\t$builderForm.on( 'keydown', '.frm-single-settings h3, .frm-single-settings h4.frm-collapsible', function( event ) {\n\t\t\t\t// If so, only proceed if the key pressed was 'Enter' or 'Space'\n\t\t\t\tif ( event.key === 'Enter' || event.key === ' ' ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tmaybeCollapseSettings.call( this, event );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tjQuery( builderArea ).on( 'show.bs.dropdown hide.bs.dropdown', changeSectionStyle );\n\n\t\t\t$builderForm.on( 'click', '.frm_toggle_sep_values', toggleSepValues );\n\t\t\t$builderForm.on( 'click', '.frm_toggle_image_options', toggleImageOptions );\n\t\t\t$builderForm.on( 'click', '.frm_remove_image_option', removeImageFromOption );\n\t\t\t$builderForm.on( 'click', '.frm_choose_image_box', addImageToOption );\n\t\t\t$builderForm.on( 'change', '.frm_hide_image_text', refreshOptionDisplay );\n\t\t\t$builderForm.on( 'change', '.frm_field_options_image_size', setImageSize );\n\t\t\t$builderForm.on( 'click', '.frm_multiselect_opt', toggleMultiselect );\n\t\t\t$newFields.on( 'mousedown', 'input, textarea, select', stopFieldFocus );\n\t\t\t$newFields.on( 'click', 'input[type=radio], input[type=checkbox]', stopFieldFocus );\n\t\t\t$newFields.on( 'click', '.frm_delete_field', clickDeleteField );\n\t\t\t$newFields.on( 'click', '.frm_select_field', clickSelectField );\n\t\t\tjQuery( document ).on( 'click', '.frm_delete_field_group', clickDeleteFieldGroup );\n\t\t\tjQuery( document ).on( 'click', '.frm_clone_field_group', duplicateFieldGroup );\n\t\t\tjQuery( document ).on( 'click', '#frm_field_group_controls > span:first-child', clickFieldGroupLayout );\n\t\t\tjQuery( document ).on( 'click', '.frm-row-layout-option', handleFieldGroupLayoutOptionClick );\n\t\t\tjQuery( document ).on( 'click', '.frm-merge-fields-into-row .frm-row-layout-option', handleFieldGroupLayoutOptionInsideMergeClick );\n\t\t\tjQuery( document ).on( 'click', '.frm-custom-field-group-layout', customFieldGroupLayoutClick );\n\t\t\tjQuery( document ).on( 'click', '.frm-merge-fields-into-row .frm-custom-field-group-layout', customFieldGroupLayoutInsideMergeClick );\n\t\t\tjQuery( document ).on( 'click', '.frm-break-field-group', breakFieldGroupClick );\n\t\t\t$newFields.on( 'click', '#frm_field_group_popup .frm_grid_container input', focusFieldGroupInputOnClick );\n\t\t\tjQuery( document ).on( 'click', '.frm-cancel-custom-field-group-layout', cancelCustomFieldGroupClick );\n\t\t\tjQuery( document ).on( 'click', '.frm-save-custom-field-group-layout', saveCustomFieldGroupClick );\n\t\t\t$newFields.on( 'click', 'ul.frm_sorting', fieldGroupClick );\n\t\t\tjQuery( document ).on( 'click', '.frm-merge-fields-into-row', mergeFieldsIntoRowClick );\n\t\t\tjQuery( document ).on( 'click', '.frm-delete-field-groups', deleteFieldGroupsClick );\n\t\t\t$newFields.on( 'click', '.frm-field-action-icons [data-toggle=\"dropdown\"]', function() {\n\t\t\t\tthis.closest( 'li.form-field' ).classList.add( 'frm-field-settings-open' );\n\t\t\t\tjQuery( document ).on( 'click', '#frm_builder_page', handleClickOutsideOfFieldSettings );\n\t\t\t} );\n\t\t\t$newFields.on( 'mousemove', 'ul.frm_sorting', checkForMultiselectKeysOnMouseMove );\n\t\t\t$newFields.on( 'show.bs.dropdown', '.frm-field-action-icons', onFieldActionDropdownShow );\n\t\t\tjQuery( document ).on( 'show.bs.dropdown', '#frm_field_group_controls', onFieldGroupActionDropdownShow );\n\t\t\t$builderForm.on( 'click', '.frm_single_option a[data-removeid]', deleteFieldOption );\n\t\t\t$builderForm.on( 'mousedown', '.frm_single_option input[type=radio]', maybeUncheckRadio );\n\t\t\t$builderForm.on( 'focusin', '.frm_single_option input[type=text]', maybeClearOptText );\n\t\t\t$builderForm.on( 'click', '.frm_add_opt', addFieldOption );\n\t\t\t$builderForm.on( 'change', '.frm_single_option input', resetOptOnChange );\n\t\t\t$builderForm.on( 'change', '.frm_image_id', resetOptOnChange );\n\t\t\t$builderForm.on( 'change', '.frm_toggle_mult_sel', toggleMultSel );\n\n\t\t\t$newFields.on( 'click', '.frm_primary_label', clickLabel );\n\t\t\t$newFields.on( 'click', '.frm_description', clickDescription );\n\t\t\t$newFields.on( 'click', 'li.ui-state-default:not(.frm_noallow)', clickVis );\n\t\t\t$newFields.on( 'dblclick', 'li.ui-state-default', openAdvanced );\n\t\t\t$builderForm.on( 'change', '.frm_tax_form_select', toggleFormTax );\n\t\t\t$builderForm.on( 'change', 'select.conf_field', addConf );\n\n\t\t\t$builderForm.on( 'change', '.frm_get_field_selection', getFieldSelection );\n\n\t\t\t$builderForm.on( 'click', '.frm-show-inline-modal', maybeShowInlineModal );\n\t\t\t$builderForm.on( 'keydown', '.frm-show-inline-modal', function( event ) {\n\t\t\t\tconst { key } = event;\n\t\t\t\tif ( key === 'Enter' || key === ' ' ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tmaybeShowInlineModal.call( this, event );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$builderForm.on( 'click', '.frm-inline-modal .dismiss', dismissInlineModal );\n\t\t\tjQuery( document ).on( 'change', '[data-frmchange]', changeInputtedValue );\n\n\t\t\tdocument.addEventListener( 'click', closeModalOnOutsideClick );\n\n\t\t\t$builderForm.on( 'change', '.frm_include_extras_field', rePopCalcFieldsForSummary );\n\t\t\t$builderForm.on( 'change', 'select[name^=\"field_options[form_select_\"]', maybeChangeEmbedFormMsg );\n\n\t\t\tjQuery( document ).on( 'submit', '#frm_js_build_form', buildSubmittedNoAjax );\n\t\t\tjQuery( document ).on( 'change', '#frm_builder_page input:not(.frm-search-input):not(.frm-custom-grid-size-input), #frm_builder_page select, #frm_builder_page textarea', fieldUpdated );\n\n\t\t\tpopAllProductFields();\n\n\t\t\tjQuery( document ).on( 'change', '.frmjs_prod_data_type_opt', toggleProductType );\n\n\t\t\tjQuery( document ).on( 'focus', '.frm-single-settings ul input[type=\"text\"][name^=\"field_options[options_\"]', onOptionTextFocus );\n\t\t\tjQuery( document ).on( 'blur', '.frm-single-settings ul input[type=\"text\"][name^=\"field_options[options_\"]', onOptionTextBlur );\n\n\t\t\tfrmDom.util.documentOn( 'click', '.frm-show-field-settings', clickVis );\n\t\t\tfrmDom.util.documentOn( 'change', 'select.frm_format_dropdown, select.frm_phone_type_dropdown', maybeUpdateFormatInput );\n\n\t\t\t// Navigate to the next input field on pressing Enter in a single option field\n\t\t\t$builderForm.on( 'keydown', '.frm_single_option input[name^=\"field_options[\"], .frm_single_option input[name^=\"rows_\"]', event => {\n\t\t\t\tif ( 'Enter' === event.key ) {\n\t\t\t\t\tfocusNextSingleOptionInput( event.currentTarget );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tinitBulkOptionsOverlay();\n\t\t\thideEmptyEle();\n\t\t\tdocument.addEventListener( 'frm_added_field', hideEmptyEle );\n\t\t\tmaybeHideQuantityProductFieldOption();\n\t\t\thandleNameFieldOnFormBuilder();\n\t\t\ttoggleSectionHolder();\n\t\t\thandleShowPasswordLiveUpdate();\n\t\t\tdocument.addEventListener( 'scroll', updateShortcodesPopupPosition, true );\n\t\t\tdocument.addEventListener( 'change', handleBuilderChangeEvent );\n\t\t\tdocument.querySelector( '.frm_form_builder' ).addEventListener( 'mousedown', event => {\n\t\t\t\tif ( event.shiftKey ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t} );\n\t\t\twp.hooks.addAction( 'frmShowedFieldSettings', 'formidableAdmin', ( showBtn, fieldSettingsEl ) => {\n\t\t\t\tfieldSettingsEl.querySelectorAll( '.frm-collapse-me' ).forEach( addSlideAnimationCssVars );\n\t\t\t}, 9999 );\n\t\t},\n\n\t\tsettingsInit: function() {\n\t\t\tconst $formActions = jQuery( document.getElementById( 'frm_notification_settings' ) );\n\n\t\t\tlet formSettings, $loggedIn, $cookieExp, $editable;\n\n\t\t\t// BCC, CC, and Reply To button functionality\n\t\t\t$formActions.on( 'click', '.frm_email_buttons', showEmailRow );\n\t\t\t$formActions.on( 'click', '.frm_remove_field', hideEmailRow );\n\t\t\t$formActions.on( 'change', '.frm_to_row, .frm_from_row', showEmailWarning );\n\t\t\t$formActions.on( 'change', '.frm_tax_selector', changePosttaxRow );\n\t\t\t$formActions.on( 'change', 'select.frm_single_post_field', checkDupPost );\n\t\t\t$formActions.on( 'change', 'select.frm_toggle_post_content', togglePostContent );\n\t\t\t$formActions.on( 'change', 'select.frm_dyncontent_opt', fillDyncontent );\n\t\t\t$formActions.on( 'change', '.frm_post_type', switchPostType );\n\t\t\t$formActions.on( 'click', '.frm_add_postmeta_row', addPostmetaRow );\n\t\t\t$formActions.on( 'click', '.frm_add_posttax_row', addPosttaxRow );\n\t\t\t$formActions.on( 'click', '.frm_toggle_cf_opts', toggleCfOpts );\n\t\t\t$formActions.on( 'click', '.frm_duplicate_form_action', copyFormAction );\n\t\t\tjQuery( '.frm_actions_list' ).on( 'click', '.frm_active_action', addFormAction );\n\t\t\tjQuery( '#frm-show-groups, #frm-hide-groups' ).on( 'click', toggleActionGroups );\n\t\t\tinitiateMultiselect();\n\n\t\t\t//set actions icons to inactive\n\t\t\tjQuery( 'ul.frm_actions_list li' ).each( function() {\n\t\t\t\tcheckActiveAction( jQuery( this ).children( 'a' ).data( 'actiontype' ) );\n\n\t\t\t\t// If the icon is a background image, don't add BG color.\n\t\t\t\tconst icon = jQuery( this ).find( 'i' );\n\t\t\t\tif ( icon.css( 'background-image' ) !== 'none' ) {\n\t\t\t\t\ticon.addClass( 'frm-inverse' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tjQuery( '.frm_submit_settings_btn' ).on( 'click', submitSettings );\n\n\t\t\taddFormNameModalEvents();\n\n\t\t\tformSettings = jQuery( '.frm_form_settings' );\n\t\t\tformSettings.on( 'click', '.frm_add_form_logic', addFormLogicRow );\n\t\t\tformSettings.on( 'click', '.frm_already_used', actionLimitMessage );\n\n\t\t\tdocument.addEventListener(\n\t\t\t\t'click',\n\t\t\t\tfunction handleImageUploadClickEvents( event ) {\n\t\t\t\t\tconst { target } = event;\n\n\t\t\t\t\tif ( ! target.closest( '.frm_image_preview_wrapper' ) ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( target.closest( '.frm_choose_image_box' ) ) {\n\t\t\t\t\t\taddImageToOption.bind( target )( event );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( target.closest( '.frm_remove_image_option' ) ) {\n\t\t\t\t\t\tremoveImageFromOption.bind( target )( event );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t// Close shortcode modal on click.\n\t\t\tformSettings.on( 'mouseup', '*:not(.frm-show-box)', maybeHideShortcodes );\n\n\t\t\t//Warning when user selects \"Do not store entries ...\"\n\t\t\tjQuery( document.getElementById( 'no_save' ) ).on( 'change', function() {\n\t\t\t\tif ( this.checked ) {\n\t\t\t\t\tif ( confirm( frmAdminJs.no_save_warning ) !== true ) {\n\t\t\t\t\t\t// Uncheck box if user hits \"Cancel\"\n\t\t\t\t\t\tjQuery( this ).attr( 'checked', false );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tjQuery( 'select[name=\"options[edit_action]\"]' ).on( 'change', showSuccessOpt );\n\n\t\t\t$loggedIn = document.getElementById( 'logged_in' );\n\t\t\tjQuery( $loggedIn ).on( 'change', function() {\n\t\t\t\tif ( this.checked ) {\n\t\t\t\t\tvisible( '.hide_logged_in' );\n\t\t\t\t} else {\n\t\t\t\t\tinvisible( '.hide_logged_in' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t$cookieExp = jQuery( document.getElementById( 'frm_cookie_expiration' ) );\n\t\t\tjQuery( document.getElementById( 'frm_single_entry_type' ) ).on( 'change', function() {\n\t\t\t\tif ( this.value === 'cookie' ) {\n\t\t\t\t\t$cookieExp.fadeIn( 'slow' );\n\t\t\t\t} else {\n\t\t\t\t\t$cookieExp.fadeOut( 'slow' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tconst $singleEntry = document.getElementById( 'single_entry' );\n\t\t\tjQuery( $singleEntry ).on( 'change', function() {\n\t\t\t\tif ( this.checked ) {\n\t\t\t\t\tvisible( '.hide_single_entry' );\n\t\t\t\t} else {\n\t\t\t\t\tinvisible( '.hide_single_entry' );\n\t\t\t\t}\n\n\t\t\t\tif ( this.checked && jQuery( document.getElementById( 'frm_single_entry_type' ) ).val() === 'cookie' ) {\n\t\t\t\t\t$cookieExp.fadeIn( 'slow' );\n\t\t\t\t} else {\n\t\t\t\t\t$cookieExp.fadeOut( 'slow' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tjQuery( '.hide_save_draft' ).hide();\n\n\t\t\tconst $saveDraft = jQuery( document.getElementById( 'save_draft' ) );\n\t\t\t$saveDraft.on( 'change', function() {\n\t\t\t\tif ( this.checked ) {\n\t\t\t\t\tjQuery( '.hide_save_draft' ).fadeIn( 'slow' );\n\t\t\t\t} else {\n\t\t\t\t\tjQuery( '.hide_save_draft' ).fadeOut( 'slow' );\n\t\t\t\t}\n\t\t\t} );\n\t\t\ttriggerChange( $saveDraft );\n\n\t\t\t//If Allow editing is checked/unchecked\n\t\t\t$editable = document.getElementById( 'editable' );\n\t\t\tjQuery( $editable ).on( 'change', function() {\n\t\t\t\tif ( this.checked ) {\n\t\t\t\t\tjQuery( '.hide_editable' ).fadeIn( 'slow' );\n\t\t\t\t\ttriggerChange( document.getElementById( 'edit_action' ) );\n\t\t\t\t} else {\n\t\t\t\t\tjQuery( '.hide_editable' ).fadeOut( 'slow' );\n\t\t\t\t\tjQuery( '.edit_action_message_box' ).fadeOut( 'slow' );//Hide On Update message box\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t//If File Protection is checked/unchecked\n\t\t\tjQuery( document ).on( 'change', '#protect_files', function() {\n\t\t\t\tif ( this.checked ) {\n\t\t\t\t\tjQuery( '.hide_protect_files' ).fadeIn( 'slow' );\n\t\t\t\t} else {\n\t\t\t\t\tjQuery( '.hide_protect_files' ).fadeOut( 'slow' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tjQuery( document ).on( 'frm-multiselect-changed', '#protect_files_role', adjustVisibilityValuesForEveryoneValues );\n\n\t\t\tjQuery( document ).on( 'submit', '.frm_form_settings', settingsSubmitted );\n\t\t\tjQuery( document ).on( 'change', '#form_settings_page input:not(.frm-search-input), #form_settings_page select, #form_settings_page textarea', fieldUpdated );\n\n\t\t\t// Page Selection Autocomplete\n\t\t\tinitAutocomplete();\n\n\t\t\tjQuery( document ).on( 'frm-action-loaded', onActionLoaded );\n\n\t\t\tinitOnSubmitAction();\n\t\t},\n\n\t\tpanelInit: function() {\n\t\t\tlet customPanel, settingsPage, viewPage, insertFieldsTab;\n\n\t\t\tjQuery( '.frm_wrap, #postbox-container-1' ).on( 'click', '.frm_insert_code', insertCode );\n\t\t\tjQuery( document ).on( 'change', '.frm_insert_val', function() {\n\t\t\t\tinsertFieldCode( jQuery( this ).data( 'target' ), jQuery( this ).val() );\n\t\t\t\tjQuery( this ).val( '' );\n\t\t\t} );\n\n\t\t\tjQuery( document ).on( 'click change', '[name=\"frm-id-key-condition\"]', resetLogicBuilder );\n\t\t\tjQuery( document ).on( 'keyup change', '.frm-build-logic', setLogicExample );\n\n\t\t\tshowInputIcon();\n\t\t\tjQuery( document ).on( 'frmElementAdded', function( event, parentEle ) {\n\t\t\t\t/* This is here for add-ons to trigger */\n\t\t\t\tshowInputIcon( parentEle );\n\t\t\t} );\n\t\t\tjQuery( document ).on( 'mousedown', '.frm-show-box', showShortcodes );\n\n\t\t\tsettingsPage = document.getElementById( 'form_settings_page' );\n\t\t\tviewPage = document.body.classList.contains( 'post-type-frm_display' );\n\t\t\tinsertFieldsTab = document.getElementById( 'frm_insert_fields_tab' );\n\n\t\t\tif ( settingsPage !== null || viewPage || builderPage ) {\n\t\t\t\tjQuery( document ).on( 'focusin', 'form input, form textarea', function( e ) {\n\t\t\t\t\tlet htmlTab;\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tmaybeShowModal( this );\n\n\t\t\t\t\tif ( jQuery( this ).is( ':not(:submit, input[type=button], .frm-search-input, input[type=checkbox])' ) ) {\n\t\t\t\t\t\tif ( jQuery( e.target ).closest( '#frm_adv_info' ).length ) {\n\t\t\t\t\t\t// Don't trigger for fields inside of the modal.\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( settingsPage !== null || builderPage ) {\n\t\t\t\t\t\t/* form settings page */\n\t\t\t\t\t\t\thtmlTab = jQuery( '#frm_html_tab' );\n\t\t\t\t\t\t\tif ( jQuery( this ).closest( '#html_settings' ).length > 0 ) {\n\t\t\t\t\t\t\t\thtmlTab.show();\n\t\t\t\t\t\t\t\thtmlTab.siblings().hide();\n\t\t\t\t\t\t\t\tjQuery( '#frm_html_tab a' ).trigger( 'click' );\n\t\t\t\t\t\t\t\ttoggleAllowedHTML( this );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tshowElement( jQuery( '.frm-category-tabs li' ) );\n\t\t\t\t\t\t\t\tinsertFieldsTab.click();\n\t\t\t\t\t\t\t\thtmlTab.hide();\n\t\t\t\t\t\t\t\thtmlTab.siblings().show();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if ( viewPage ) {\n\t\t\t\t\t\t\tconst event = new CustomEvent( 'frm_legacy_views_handle_field_focus' );\n\t\t\t\t\t\t\tevent.frmData = { idAttrValue: this.id };\n\t\t\t\t\t\t\tdocument.dispatchEvent( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tjQuery( '.frm_wrap, #postbox-container-1' ).on( 'mousedown', '#frm_adv_info a, .frm_field_list a', function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t} );\n\n\t\t\tcustomPanel = jQuery( '#frm_adv_info' );\n\t\t\tcustomPanel.on( 'click', '.subsubsub a.frmids', function( e ) {\n\t\t\t\ttoggleKeyID( 'frmids', e );\n\t\t\t} );\n\t\t\tcustomPanel.on( 'click', '.subsubsub a.frmkeys', function( e ) {\n\t\t\t\ttoggleKeyID( 'frmkeys', e );\n\t\t\t} );\n\t\t},\n\n\t\tinboxInit: function() {\n\t\t\tjQuery( '.frm_inbox_dismiss' ).on( 'click', function( e ) {\n\t\t\t\tconst message = this.parentNode.parentNode;\n\t\t\t\tconst key = message.getAttribute( 'data-message' );\n\t\t\t\tconst href = this.getAttribute( 'href' );\n\t\t\t\tconst dismissedMessage = message.cloneNode( true );\n\t\t\t\tconst dismissedMessagesWrapper = document.querySelector( '.frm-dismissed-inbox-messages' );\n\n\t\t\t\tif ( 'free_templates' === key && ! this.classList.contains( 'frm_inbox_dismiss' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\tdata = {\n\t\t\t\t\taction: 'frm_inbox_dismiss',\n\t\t\t\t\tkey,\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t};\n\n\t\t\t\tconst isInboxSlideIn = 'frm_inbox_slide_in' === message.id;\n\t\t\t\tif ( isInboxSlideIn ) {\n\t\t\t\t\tmessage.classList.remove( 's11-fadein' );\n\t\t\t\t\tmessage.classList.add( 's11-fadeout' );\n\t\t\t\t\tmessage.addEventListener( 'animationend', () => message.remove(), { once: true } );\n\t\t\t\t}\n\n\t\t\t\tpostAjax(\n\t\t\t\t\tdata,\n\t\t\t\t\t() => {\n\t\t\t\t\t\tif ( isInboxSlideIn ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( href !== '#' ) {\n\t\t\t\t\t\t\twindow.location = href;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfadeOut(\n\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tif ( null !== dismissedMessagesWrapper ) {\n\t\t\t\t\t\t\t\t\tdismissedMessage.classList.remove( 'frm-fade' );\n\t\t\t\t\t\t\t\t\tdismissedMessage.querySelector( '.frm-inbox-message-heading' )?.removeChild( dismissedMessage.querySelector( '.frm-inbox-message-heading .frm_inbox_dismiss' ) );\n\t\t\t\t\t\t\t\t\tdismissedMessagesWrapper.append( dismissedMessage );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( 1 === message.parentNode.querySelectorAll( '.frm-inbox-message-container' ).length ) {\n\t\t\t\t\t\t\t\t\tdocument.getElementById( 'frm_empty_inbox' ).classList.remove( 'frm_hidden' );\n\t\t\t\t\t\t\t\t\tmessage.parentNode.closest( '.frm-active' ).classList.add( 'frm-empty-inbox' );\n\t\t\t\t\t\t\t\t\tshowActiveCampaignForm();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmessage.parentNode.removeChild( message );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} );\n\n\t\t\tif ( false === document.getElementById( 'frm_empty_inbox' )?.classList.contains( 'frm_hidden' ) ) {\n\t\t\t\tshowActiveCampaignForm();\n\t\t\t}\n\t\t},\n\n\t\tsolutionInit: function() {\n\t\t\tjQuery( document ).on( 'submit', '#frm-new-template', installTemplate );\n\t\t},\n\n\t\tstyleInit: function() {\n\t\t\tconst $previewWrapper = jQuery( '.frm_image_preview_wrapper' );\n\t\t\t$previewWrapper.on( 'click', '.frm_choose_image_box', addImageToOption );\n\t\t\t$previewWrapper.on( 'click', '.frm_remove_image_option', removeImageFromOption );\n\n\t\t\twp.hooks.doAction( 'frm_style_editor_init' );\n\t\t},\n\n\t\tcustomCSSInit: function() {\n\t\t\tconsole.warn( 'Calling frmAdminBuild.customCSSInit is deprecated.' );\n\t\t},\n\n\t\tglobalSettingsInit: function() {\n\t\t\tlet licenseTab;\n\n\t\t\tjQuery( document ).on( 'click', '[data-frmuninstall]', uninstallNow );\n\n\t\t\tinitiateMultiselect();\n\n\t\t\t// activate addon licenses\n\t\t\tlicenseTab = document.getElementById( 'licenses_settings' );\n\t\t\tif ( licenseTab !== null ) {\n\t\t\t\tjQuery( licenseTab ).on( 'click', '.edd_frm_save_license', saveAddonLicense );\n\t\t\t}\n\n\t\t\t// Solution install page\n\t\t\tjQuery( document ).on( 'click', '#frm-new-template button', installTemplateFieldset );\n\n\t\t\tjQuery( '#frm-dismissable-cta .dismiss' ).on( 'click', function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tjQuery.post(\n\t\t\t\t\tajaxurl,\n\t\t\t\t\t{\n\t\t\t\t\t\taction: 'frm_lite_settings_upgrade',\n\t\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tjQuery( '.settings-lite-cta' ).remove();\n\t\t\t} );\n\n\t\t\tconst captchaType = document.getElementById( 'frm_re_type' );\n\t\t\tif ( captchaType ) {\n\t\t\t\tcaptchaType.addEventListener( 'change', handleCaptchaTypeChange );\n\t\t\t}\n\n\t\t\tdocument.querySelector( '.frm_captchas' ).addEventListener( 'change', function( event ) {\n\t\t\t\tconst captchaValueOnLoad = document.querySelector( '.frm_captchas input[checked=\"checked\"]' )?.value;\n\t\t\t\tconst showNote = event.target.value !== captchaValueOnLoad;\n\t\t\t\tdocument.querySelector( '.captcha_settings .frm_note_style' ).classList.toggle( 'frm_hidden', ! showNote );\n\t\t\t} );\n\n\t\t\t// Set fieldsUpdated to 0 to avoid the unsaved changes pop up.\n\t\t\tfrmDom.util.documentOn( 'submit', '.frm_settings_form', () => fieldsUpdated = 0 );\n\n\t\t\tconst manageStyleSettings = document.getElementById( 'manage_styles_settings' );\n\t\t\tif ( manageStyleSettings ) {\n\t\t\t\tmanageStyleSettings.addEventListener(\n\t\t\t\t\t'change',\n\t\t\t\t\tevent => {\n\t\t\t\t\t\tconst target = event.target;\n\t\t\t\t\t\tif ( 'SELECT' !== target.nodeName || ! target.dataset.name || target.getAttribute( 'name' ) ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget.setAttribute( 'name', target.dataset.name );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst paymentsSettings = document.getElementById( 'payments_settings' );\n\t\t\tconst paymentSettingsTabs = paymentsSettings?.querySelectorAll( '[name=\"frm_payment_section\"]' );\n\t\t\tif ( paymentSettingsTabs ) {\n\t\t\t\tpaymentSettingsTabs.forEach(\n\t\t\t\t\telement => {\n\t\t\t\t\t\telement.addEventListener( 'change', () => {\n\t\t\t\t\t\t\tif ( ! element.checked ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst label = paymentsSettings.querySelector( `label[for=\"${ element.id }\"]` );\n\t\t\t\t\t\t\tif ( label ) {\n\t\t\t\t\t\t\t\tlabel.setAttribute( 'aria-selected', 'true' );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tpaymentSettingsTabs.forEach(\n\t\t\t\t\t\t\t\ttab => {\n\t\t\t\t\t\t\t\t\tif ( tab === element ) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tconst label = paymentsSettings.querySelector( `label[for=\"${ tab.id }\"]` );\n\t\t\t\t\t\t\t\t\tif ( label ) {\n\t\t\t\t\t\t\t\t\t\tlabel.setAttribute( 'aria-selected', 'false' );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\texportInit: function() {\n\t\t\tjQuery( '.frm_form_importer' ).on( 'submit', startFormMigration );\n\t\t\tjQuery( document.getElementById( 'frm_export_xml' ) ).on( 'submit', validateExport );\n\t\t\tjQuery( '#frm_export_xml input, #frm_export_xml select' ).on( 'change', removeExportError );\n\t\t\tjQuery( 'input[name=\"frm_import_file\"]' ).on( 'change', checkCSVExtension );\n\t\t\tdocument.querySelector( 'select[name=\"format\"]' ).addEventListener( 'change', exportTypeChanged );\n\n\t\t\tjQuery( 'input[name=\"frm_export_forms[]\"]' ).on( 'click', preventMultipleExport );\n\t\t\tinitiateMultiselect();\n\n\t\t\tjQuery( '.frm-feature-banner .dismiss' ).on( 'click', function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tjQuery.post( ajaxurl, {\n\t\t\t\t\taction: 'frm_dismiss_migrator',\n\t\t\t\t\tplugin: this.id,\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t} );\n\t\t\t\tthis.parentElement.remove();\n\t\t\t} );\n\n\t\t\tshowOrHideRepeaters( getExportOption() );\n\n\t\t\tdocument.querySelector( '#frm-export-select-all' ).addEventListener( 'change', event => {\n\t\t\t\tdocument.querySelectorAll( '[name=\"frm_export_forms[]\"]' ).forEach( cb => cb.checked = event.target.checked );\n\t\t\t} );\n\t\t},\n\n\t\tinboxBannerInit: function() {\n\t\t\tconst banner = document.getElementById( 'frm_banner' );\n\t\t\tif ( ! banner ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst dismissButton = banner.querySelector( '.frm-banner-dismiss' );\n\t\t\tdocument.addEventListener(\n\t\t\t\t'click',\n\t\t\t\tfunction( event ) {\n\t\t\t\t\tif ( event.target !== dismissButton ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\taction: 'frm_inbox_dismiss',\n\t\t\t\t\t\tkey: banner.dataset.key,\n\t\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t\t};\n\t\t\t\t\tpostAjax(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\tjQuery( banner ).fadeOut(\n\t\t\t\t\t\t\t\t400,\n\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\tbanner.remove();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\tupdateOpts: function( fieldId, opts, modal ) {\n\t\t\tconst separate = usingSeparateValues( fieldId ),\n\t\t\t\taction = isProductField( fieldId ) ? 'frm_bulk_products' : 'frm_import_options';\n\t\t\tjQuery.ajax( {\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: ajaxurl,\n\t\t\t\tdata: {\n\t\t\t\t\taction: action,\n\t\t\t\t\tfield_id: fieldId,\n\t\t\t\t\topts: opts,\n\t\t\t\t\tseparate: separate,\n\t\t\t\t\tnonce: frmGlobal.nonce\n\t\t\t\t},\n\t\t\t\tsuccess: function( html ) {\n\t\t\t\t\tdocument.getElementById( 'frm_field_' + fieldId + '_opts' ).innerHTML = html;\n\t\t\t\t\twp.hooks.doAction( 'frm_after_bulk_edit_opts', fieldId );\n\t\t\t\t\tresetDisplayedOpts( fieldId );\n\n\t\t\t\t\tif ( typeof modal !== 'undefined' ) {\n\t\t\t\t\t\tmodal.dialog( 'close' );\n\t\t\t\t\t\tdocument.getElementById( 'frm-update-bulk-opts' ).classList.remove( 'frm_loading_button' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\n\t\t/* remove conditional logic if the field doesn't exist */\n\t\ttriggerRemoveLogic: function( fieldID, metaName ) {\n\t\t\tjQuery( '#frm_logic_' + fieldID + '_' + metaName + ' .frm_remove_tag' ).trigger( 'click' );\n\t\t},\n\n\t\tdownloadXML: function( controller, ids, isTemplate ) {\n\t\t\tlet url = ajaxurl + '?action=frm_' + controller + '_xml&ids=' + ids;\n\t\t\tif ( isTemplate !== null ) {\n\t\t\t\turl = url + '&is_template=' + isTemplate;\n\t\t\t}\n\t\t\tlocation.href = url;\n\t\t},\n\n\t\t/**\n\t\t * @since 5.0.04\n\t\t */\n\t\thooks: {\n\t\t\tapplyFilters: function( hookName, ...args ) {\n\t\t\t\treturn wp.hooks.applyFilters( hookName, ...args );\n\t\t\t},\n\t\t\taddFilter: function( hookName, callback, priority ) {\n\t\t\t\treturn wp.hooks.addFilter( hookName, 'formidable', callback, priority );\n\t\t\t},\n\t\t\tdoAction: function( hookName, ...args ) {\n\t\t\t\treturn wp.hooks.doAction( hookName, ...args );\n\t\t\t},\n\t\t\taddAction: function( hookName, callback, priority ) {\n\t\t\t\treturn wp.hooks.addAction( hookName, 'formidable', callback, priority );\n\t\t\t}\n\t\t},\n\n\t\tapplyZebraStriping,\n\t\tinitModal,\n\t\tinfoModal,\n\t\toffsetModalY,\n\t\tadjustConditionalLogicOptionOrders,\n\t\taddRadioCheckboxOpt,\n\t\tinstallNewForm,\n\t\ttoggleAddonState,\n\t\tpurifyHtml,\n\t\tloadApiEmailForm,\n\t\taddMyEmailAddress,\n\t\tfillDropdownOpts,\n\t\tshowSaveAndReloadModal,\n\t\tclearSettingsBox,\n\t\tdeleteField,\n\t\tinsertFormField,\n\t\tconfirmLinkClick,\n\t\thandleInsertFieldByDraggingResponse,\n\t\thandleAddFieldClickResponse,\n\t\tsyncLayoutClasses,\n\t\tmoveFieldSettings,\n\t};\n};\n\nwindow.frmAdminBuild = frmAdminBuildJS();\n\njQuery( document ).ready(\n\t() => {\n\t\tfrmAdminBuild.init();\n\n\t\tfrmDom.bootstrap.setupBootstrapDropdowns( convertOldBootstrapDropdownsToBootstrap4 );\n\t\tdocument.querySelector( '.preview.dropdown .frm-dropdown-toggle' )?.setAttribute( 'data-toggle', 'dropdown' );\n\n\t\tfunction convertOldBootstrapDropdownsToBootstrap4( frmDropdownMenu ) {\n\t\t\tconst toggle = frmDropdownMenu.querySelector( '.frm-dropdown-toggle' );\n\t\t\tif ( toggle ) {\n\t\t\t\tif ( ! toggle.hasAttribute( 'role' ) ) {\n\t\t\t\t\ttoggle.setAttribute( 'role', 'button' );\n\t\t\t\t}\n\t\t\t\tif ( ! toggle.hasAttribute( 'tabindex' ) ) {\n\t\t\t\t\ttoggle.setAttribute( 'tabindex', 0 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Convert <li> and <ul> tags.\n\t\t\tif ( 'UL' === frmDropdownMenu.tagName ) {\n\t\t\t\tconvertBootstrapUl( frmDropdownMenu );\n\t\t\t}\n\t\t}\n\n\t\tfunction convertBootstrapUl( ul ) {\n\t\t\tlet html = ul.outerHTML;\n\t\t\thtml = html.replace( '<ul ', '<div ' );\n\t\t\thtml = html.replace( '</ul>', '</div>' );\n\t\t\thtml = html.replaceAll( '<li>', '<div class=\"dropdown-item\">' );\n\t\t\thtml = html.replaceAll( '<li class=\"', '<div class=\"dropdown-item ' );\n\t\t\thtml = html.replaceAll( '</li>', '</div>' );\n\t\t\tul.outerHTML = html;\n\t\t}\n\t}\n);\n\nwindow.frm_show_div = ( div, value, showIf, classId ) => { // eslint-disable-line camelcase\n\tif ( value == showIf ) {\n\t\tjQuery( classId + div ).fadeIn( 'slow' ).css( 'visibility', 'visible' );\n\t} else {\n\t\tjQuery( classId + div ).fadeOut( 'slow' );\n\t}\n};\n\nwindow.frmCheckAll = ( checked, n ) => {\n\tjQuery( 'input[name^=\"' + n + '\"]' ).prop( 'checked', ! ! checked );\n};\n\nwindow.frmCheckAllLevel = ( checked, n, level ) => {\n\tconst $kids = jQuery( '.frm_catlevel_' + level ).children( '.frm_checkbox' ).children( 'label' );\n\t$kids.children( 'input[name^=\"' + n + '\"]' ).prop( 'checked', ! ! checked );\n};\n\nwindow.frmGetFieldValues = ( fieldId, cur, rowNumber, fieldType, htmlName, callback ) => {\n\tif ( ! fieldId ) {\n\t\treturn;\n\t}\n\n\tjQuery.ajax( {\n\t\ttype: 'POST', url: ajaxurl,\n\t\tdata: 'action=frm_get_field_values&current_field=' + cur + '&field_id=' + fieldId + '&name=' + htmlName + '&t=' + fieldType + '&form_action=' + jQuery( 'input[name=\"frm_action\"]' ).val() + '&nonce=' + frmGlobal.nonce,\n\t\tsuccess: function( msg ) {\n\t\t\tdocument.getElementById( 'frm_show_selected_values_' + cur + '_' + rowNumber ).innerHTML = msg;\n\n\t\t\tif ( 'function' === typeof callback ) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t} );\n};\n\nwindow.frmImportCsv = formID => {\n\tlet urlVars = '';\n\tif ( typeof __FRMURLVARS !== 'undefined' ) {\n\t\turlVars = __FRMURLVARS;\n\t}\n\n\tjQuery.ajax( {\n\t\ttype: 'POST', url: ajaxurl,\n\t\tdata: 'action=frm_import_csv&nonce=' + frmGlobal.nonce + '&frm_skip_cookie=1' + urlVars,\n\t\tsuccess: function( count ) {\n\t\t\tconst max = jQuery( '.frm_admin_progress_bar' ).attr( 'aria-valuemax' );\n\t\t\tconst imported = max - count;\n\t\t\tconst percent = ( imported / max ) * 100;\n\t\t\tjQuery( '.frm_admin_progress_bar' ).css( 'width', percent + '%' ).attr( 'aria-valuenow', imported );\n\n\t\t\tif ( parseInt( count, 10 ) > 0 ) {\n\t\t\t\tjQuery( '.frm_csv_remaining' ).html( count );\n\t\t\t\tfrmImportCsv( formID );\n\t\t\t} else {\n\t\t\t\tjQuery( document.getElementById( 'frm_import_message' ) ).html( frm_admin_js.import_complete ); // eslint-disable-line camelcase\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tlocation.href = '?page=formidable-entries&frm_action=list&form=' + formID + '&import-message=1';\n\t\t\t\t}, 2000 );\n\t\t\t}\n\t\t}\n\t} );\n};\n"],"names":["window","FrmFormsConnect","document","$","el","messageBox","reset","setElements","querySelector","getElementById","app","init","on","deauthorize","authorize","reauthorize","button","pluginSlug","getAttribute","input","license","value","wpmu","classList","add","checked","ajax","type","url","ajaxurl","dataType","data","action","plugin","nonce","frmGlobal","success","msg","afterAuthorize","remove","wp","hooks","doAction","showMessage","showProgress","innerHTML","message","showAuthorized","showInlineSuccess","setTimeout","refreshPage","location","reload","show","from","to","container","querySelectorAll","length","forEach","box","className","replace","successElement","element","frmAdminBuild","purifyHtml","textContent","confirm","link","replaceWith","jQuery","frmAdminBuildJS","frmAdminJs","frm_admin_js","_frmDom","frmDom","tag","div","span","a","svg","img","onClickPreventDefault","util","_frmDom$ajax","doJsonFetch","doJsonPost","contextualShortcodes","getContextualShortcodes","icons","save","href","drag","$newFields","builderForm","thisForm","copyHelper","fieldsUpdated","thisFormId","autoId","optionMap","lastNewActionIdReturned","_wp$i18n","i18n","__","sprintf","debouncedSyncAfterDragAndDrop","postBodyContent","$postBodyContent","dragState","dragging","currentURL","URL","urlParams","searchParams","builderPage","s","showElement","style","display","empty","$obj","firstChild","removeChild","addClass","confirmClick","e","stopPropagation","preventDefault","confirmLinkClick","loadedFrom","id","applyFilters","initModal","confirmModal","verify","$confirmMessage","i","dataAtts","btnClass","$info","continueButton","append","createTextNode","removeAtts","dataset","removeAttribute","setAttribute","dialog","infoModal","html","toggleItem","toggle","text","$items","hideShowItem","hide","uncheckList","uncheckListArray","split","isUncheckedCheckbox","toggleClass","removeClass","current","parentNode","uncheckItem","uncheckItemElement","nodeName","loadTooltips","wrapClass","confirmedBulkDelete","deleteFieldConfirmed","removeThisTag","trashTemplate","clickWidget","off","tooltip","event","isTop","suffix","bulkActionSelector","confirmBulkDelete","target","contains","click","deleteTooltips","removeMore","parseInt","deleteButton","attr","closest","find","indexOf","last","fadeEle","$fadeEle","fadeOut","_document$querySelect","fieldUpdated","fadeIn","afterActionRemoved","checkActiveAction","hookName","hookArgs","b","popCalcFields","cont","parentElement","inside","children","actionId","val","actionType","action_id","action_type","initiateMultiselect","showInputIcon","initAutocomplete","trigger","siblings","slideUp","is","slideDown","clickNewTab","t","c","$link","not","tabContent","clearSettingsBox","clickTab","auto","loadSettingsTab","hideShortcodes","setupSortable","sortableSelector","list","makeDroppable","Array","child","makeDraggable","$sectionTitle","setupFieldOptionSorting","droppable","accept","deactivate","handleFieldDrop","over","onDragOverDroppable","out","onDraggableLeavesDroppable","tolerance","ui","getDroppableForOnDragOver","draggable","allowDrop","parents","nextAll","get","handle","settings","helper","getDraggableHelper","revert","delay","start","handleDragStart","stop","handleDragStop","handleDrag","cursor","refreshPositions","cursorAt","top","left","delegateTarget","isFieldGroup","newTextFieldClone","cloneNode","setAttributeNS","copyTarget","isNewField","hasAttribute","fieldType","body","initialOffset","scrollTop","unselectFieldGroups","deleteEmptyDividerWrappers","maybeRemoveGroupHoverTarget","closeOpenFieldDropdowns","fade","maybeScrollBuilder","getDroppableTarget","placeholder","frmSortableHelper","transform","getDragOffset","handleDragOverYAxis","y","clientY","handleDragOverFieldGroup","x","clientX","_","v","moved","h","offsetHeight","relativePos","offsetTop","Math","abs","$helper","maybeOpenCollapsedPage","$previousFieldContainer","parent","previousSection","newSection","insertNewFieldByDragging","moveFieldThatAlreadyExists","maybeMakeFieldGroupDraggableAfterDragging","previousSectionId","newSectionId","$previousContainerFields","getFieldsInRow","maybeUpdatePreviousFieldContainerAfterDrop","maybeUpdateDraggableClassAfterDrop","updateFieldAfterMovingBetweenSections","placeholderParent","isDroppingIntoFieldGroup","fieldGroupLi","previousElementSibling","$pageBreakField","prevUntil","collapseButton","syncLayoutClasses","first","maybeDeleteAnEmptyFieldGroup","previousFieldContainer","closestFieldBox","_ref","$list","$children","prepend","insertAtIndex","determineIndexBasedOffOfMousePositionInList","$lastChild","offset","outerHeight","$endDivider","before","index","item","itemTop","returnIndex","_ref2","$row","determineIndexBasedOffOfMousePositionInRow","outerWidth","amountToOffsetLeftBy","syncAfterDragAndDrop","fixUnwrappedListItems","toggleSectionHolder","maybeFixEndDividers","maybeDeleteEmptyFieldGroups","updateFieldOrder","Event","bubbles","dispatchEvent","endDivider","appendChild","fieldGroup","lists","childNodes","wrapFieldLiInPlace","dividers","divider","slice","call","firstElementChild","toLowerCase","$fields","row","classes","$inputs","inputLeft","$item","size","layoutClasses","classToAddFunction","getLayoutClasses","each","getSyncLayoutClass","getEvenClassForSize","getClassForBlock","getLayoutClassForSize","updateFieldGroupControls","count","rowOffset","shouldShowControls","controls","setFieldControlsHtml","layoutOption","moveOption","createElement","layoutOptionLabel","addTooltip","makeTabbable","moveOptionLabel","getFieldControlsDropdown","title","addEventListener","dropdown","setAttributes","ul","classToAdd","itemIndex","currentClassToAdd","layoutClassIndex","currentClass","activeLayoutClass","fieldId","layoutClassesInput","fid","moveFieldSettings","concat","trim","sort","opts","items","axis","opacity","forcePlaceholderSize","li","clone","insertAfter","resetDisplayedOpts","sortable","getSectionForFieldPlacement","currentItem","section","hasClass","getFormIdForFieldPlacement","formId","sDivide","appendTo","getSectionIdForFieldPlacement","sectionId","previousFormId","form_id","field","section_id","previous_form_id","updateInSectionValue","getInsertNewFieldArgs","hasBreak","field_type","has_break","last_row_field_ids","getFieldIdsInSubmitRow","shouldStopInsertingField","loadingID","getAutoId","loading","$placeholder","insertBefore","prevAll","handleInsertFieldByDraggingResponse","checkMsgForFieldId","error","handleInsertFieldError","$siblings","wrapFieldLi","msgAsjQueryObject","afterAddField","result","match","submitField","lastRowFields","ids","push","jqXHR","errorThrown","maybeShowInsertFieldError","jqXHRAborted","status","readyState","isSubmitBtn","containSubmitBtn","draggableIndex","lastRowIndex","childElementCount","submitButtonIndex","isLastRow","nextElementSibling","$fieldsInRow","groupCanFitAnotherField","allowNewFieldDrop","allowMoveField","matches","newPageBreakField","newHiddenField","newSectionField","newEmbedField","newUserIdField","newFieldWillBeAddedToAGroup","groupIncludesBreakOrHiddenOrUserId","fieldTypeIsAlwaysAllowed","newFieldWillBeAddedToASection","allowMoveFieldGroup","isPageBreak","allowMoveFieldToSection","isHiddenField","isUserIdField","allowMoveFieldToGroup","draggableIncludeEmbedForm","draggableIncludesSection","group","draggableIncludesASection","draggableIsEmbedField","groupIsInASection","fieldsInRow","$field","filter","loadFields","thisField","$thisField","addHtmlToField","frmHiddenFdata","nextElement","nextField","getNextField","handleAjaxLoadFieldSuccess","_field$parentNode","key","$nextSet","JSON","parse","renumberPageBreaks","maybeHideQuantityProductFieldOption","loadedEvent","frmFields","map","f","addFieldClick","$thisObj","$button","handleAddFieldClickResponse","insertFormField","fieldOptions","arguments","undefined","Promise","resolve","Object","assign","field_options","canDuplicateField","maxFieldsInGroup","fieldsInGroup","duplicateField","newRowId","fieldOrder","startsWith","fieldsInSection","field_id","_$field$0$querySelect","newRow","lastElementChild","duplicatedFieldHtml","originalFieldId","setLayoutClassesForDuplicatedFieldInGroup","after","maybeDuplicateUnsavedSettings","toggleOneSectionHolder","newField","_document$getElementB","hoverTarget","fieldClasses","includes","classesInput","newFieldHtml","originalSettings","newFieldId","copySettings","fieldOptionKeys","originalDefault","copyDefault","originalSetting","tagType","copySetting","getKeyFromSettingInput","copyOption","remainingKeyDetails","copyKey","name","substr","nameWithoutPrefix","nameSplit","pop","join","openSettings","handleClickOutsideOfFieldSettings","originalEvent","checkForMultiselectKeysOnMouseMove","keyIsDown","ctrlKey","metaKey","shiftKey","checkForActiveHoverTarget","elementFromPoint","previousHoverTarget","destroyFieldGroupPopup","maybeRemoveHoverTargetOnMouseMove","onFieldActionDropdownShow","$ul","fillFieldActionDropdown","width","firstAnchor","focus","onFieldGroupActionDropdownShow","changeSectionStyle","collapsedSection","zIndex","classSuffix","options","getDeleteActionOption","getDuplicateActionOption","class","icon","label","option","anchor","wrapper","addFocus","regex","exec","$thisSection","checkHtmlForNewFields","toggled","maybeSetProductField","$parentSection","bounding","getBoundingClientRect","inView","right","innerWidth","documentElement","clientWidth","bottom","innerHeight","clientHeight","scroll","scrollHeight","behavior","deselectFields","addedEvent","frmField","frmSection","frmType","frmToggles","addFieldIdToDraftFieldsInput","draftInput","preventFieldGroups","scrollToField","newPos","animate","checkCalculationCreatedByUser","calculation","warningMessage","checkMatchingParens","checkShortcodes","formula","stack","formulaArray","opening","closing","unmatchedClosing","hasOwnProperty","unmatched_parens","inputElement","checkNonNumericShortcodes","checkNonFormShortcodes","isTextCalculation","nonNumericShortcodes","getNonNumericShortcodes","test","text_shortcodes","prop","nonFormShortcodes","getNonFormShortcodes","view_shortcodes","isCalcBoxType","listClass","extractExcludedOptions","exclude","isArray","splice","hasExcludedOption","excludedOpts","hasOption","inputs","getElementsByName","getFieldOptionInputName","opt","at","substring","force","fields","p","calc","isSummary","getExcludeArray","getFieldList","fieldName","calcBox","codeList","includedExtras","getIncludedExtras","checkboxes","getElementsByClassName","rePopCalcFieldsForSummary","allFields","checkType","getPossibleValue","fieldKey","popProductFields","getCurrentProductFields","fName","products","quantities","isSelect","tagName","toString","prodFieldOpt","idsArray","popAllProductFields","productFieldOpt","liveChanges","newValue","changes","att","addBlankSelectOption","changeFieldClass","isSliderField","updateSliderFieldPreview","proIncludesSliderJs","getSliderMidpoint","getSliderDefaultValueInput","previewInputId","sliderInput","max","parseFloat","min","previewInput","toggleInvalidMsg","typeDropdown","selectedIndex","toggleValidationBox","markRequired","thisid","$reqBox","hasValue","messageClass","$msg","$validationBox","css","markUnique","$unqDetail","default_unique","addConf","valMsg","default_conf","setConfirmationFieldDescriptions","fieldDescription","hiddenDescName","maybeSetNewDescription","confFieldDescription","hiddenConfName","newConfValue","descriptionDiv","hiddenName","desc","initBulkOptionsOverlay","insertBulkPreset","content","optList","separate","usingSeparateValues","product","isProductField","getElementsByTagName","optionType","updateOpts","addFieldOption","_this$closest","newOption","optType","optKey","oldKey","lastKey","getHighestOptKey","ftype","opt_key","opt_type","post","RegExp","addSaveAndDragIconsToOption","isNaN","toggleMultSel","toggleMultiSelect","setting","toggleSepValues","toggleImageOptions","hasImageOptions","imageSize","displayField","refreshOptionDisplayNow","imagesAsOptions","setAlignment","removeImageSizeClasses","getImageOptionSize","alignment","setImageSize","refreshOptionDisplay","object","fieldID","addImageToOption","imagePreview","media","model","fileFrame","frames","file_frame","multiple","library","attachment","state","toJSON","filename","$imagePreview","open","removeImageFromOption","$this","previewWrapper","toggleMultiselect","removeAttr","focusSearchBox","searchBox","dismissWarningMessage","warningEl","formData","FormData","stopFieldFocus","deleteFieldOption","parentLi","parentUl","visibleOptions","_Array$from$find$quer","otherInput","hasOther","maybeUncheckRadio","$self","uncheck","unbind","up","one","maybeClearOptText","new_option","confirmFieldsDeleteMessage","numberOfFields","clickDeleteField","confirmMsg","conf_delete","maybeDivider","fieldBoxes","fieldIdsToDelete","fieldBox","fieldsInsideFieldBox","conf_delete_sec","clickSelectField","clickDeleteFieldGroup","decoy","duplicateFieldGroup","placeholderUlChild","newRowUl","syncDetails","injectedCloneOptions","expectedLength","originalFieldIdByDuplicatedFieldId","duplicatedCount","args","$newRowUl","$duplicatedFields","cloneOption","getSizeOfLayoutClass","getLayoutClassName","clickFieldGroupLayout","sizeOfFieldGroup","popupWrapper","getSizeOfFieldGroupFromChildElement","destroyFieldGroupPopupOnOutsideClick","position","getFieldGroupPopup","firstLayoutOption","getSelectedFieldCount","childElement","popup","rowLayoutOptions","padding","getRowLayoutTitle","getRowLayoutOptions","maybeMarkRowLayoutAsActive","separator","getCustomLayoutOption","getBreakIntoDifferentRowsOption","activeRow","currentRow","rowLayoutsMatch","getIconClone","ariaLabel","iconId","rowLayoutTitle","getEmptyGridContainer","getRowLayoutOption","useClass","getRowForSizeAndType","row1","row2","getRowLayoutAsKey","sizes","block","height","background","borderRadius","getLargeClassForSize","getSmallClassForSize","handleFieldGroupLayoutOptionClick","handleFieldGroupLayoutOptionInsideMergeClick","mergeSelectedFieldGroups","$selectedFieldGroups","$firstGroupUl","previousParent","customFieldGroupLayoutClick","setupCustomLayoutOptions","layoutClass","inputRow","paddingElement","inputValueOverride","inputField","heading","buttonsWrapper","cancelButton","saveButton","floor","textAlign","getSecondaryButton","marginRight","getPrimaryButton","firstInput","customFieldGroupLayoutInsideMergeClick","getButton","textDecoration","breakFieldGroupClick","breakRow","stripLayoutFromFields","focusFieldGroupInputOnClick","select","cancelCustomFieldGroupClick","revertToFieldGroupPopupFirstPage","triggerElement","saveCustomFieldGroupClick","$controls","fieldGroupClick","maybeShowFieldGroupMessage","ctrlOrCmdKeyIsDown","shiftKeyIsDown","groupIsActive","getSelectedFieldGroups","numberOfSelectedGroups","selectedField","getSelectedField","syncAfterMultiSelect","$firstGroup","$range","nextUntil","$fieldGroup","maybeHideFieldGroupMessage","hideFieldGroupMessage","fieldGroupMessage","showFieldGroupMessage","rows","messageText","getFieldGroupMessageText","holdShiftMsg","selectedRowCount","$fieldGroups","selectedFieldGroup","selectedGroupHasMultipleFields","addFieldMultiselectPopup","maybeRemoveMultiselectPopup","getFieldMultiselectPopup","mergeOption","caret","verticalSeparator","deleteOption","selectedFieldsAreMergeable","marginLeft","selectedFieldGroups","totalFieldCount","mergeFieldsIntoRowClick","deleteFieldGroupsClick","deleteOnConfirm","multiselectPopup","getSelectedFieldIds","getDeleteSelectedFieldGroupsOnConfirmFunction","confirmedClick","deleteFieldIds","deleteAllSelectedFieldGroups","deleteFields","deleteField","hasOnlySubmitField","childUl","childLi","moveOpenModalsOutOfFieldOptions","openModals","modal","_document$querySelect2","$section","$adjacentFields","$liWrapper","formEditorContainer","addFieldLogicRow","logicRows","meta_name","getNewRowId","logicRow","insertAdjacentHTML","logicRowText","ruleText","defaultValue","addWatchLookupRow","lastRowId","lookupBlockRows","row_key","_document$getElementB2","watchRowBlock","resetOptionTextDetails","optionTextAlreadyExists","optionInputs","optionInput","onOptionTextFocus","getChoiceOldAndNewValues","_getChoiceOldValueAnd","getChoiceOldValueAndLabel","oldValue","oldLabel","_getChoiceNewValueAnd","getChoiceNewValueAndLabel","newLabel","choiceElement","singleOptionContainer","_choiceElement$closes","_choiceElement$closes2","onOptionTextBlur","originalValue","fieldIndex","logicId","rowLength","rowIndex","valueSelect","fieldIds","settingId","optionMatches","_getChoiceOldAndNewVa","singleSettingsContainer","_singleSettingsContai","searchSelectByText","selectElement","searchText","updateGetValueFieldSelection","fieldSelect","formID","maybeClearWatchFields","lookupBlock","containerClass","pages","maybeCollapsePage","toggleCollapsePage","toggleCollapseFakePage","toCollapse","getAllFieldsForPage","togglePage","topLevel","firstField","firstWrapper","$fieldsForPage","currentWrapper","fieldCount","slide","maybeCollapseSection","parentCont","maybeCollapseSettings","expanded","addSlideAnimationCssVars","setProperty","ceil","clickLabel","fieldTypeName","normalizeFieldName","clickDescription","autoExpandSettings","inSection","clickVis","originalList","clickAction","maybeUpdateFormatInput","formatElement","formatInput","selected","openAdvanced","toggleRepeatButtons","checkRepeatLimit","repeat_limit_min","checkCheckboxSelectionsLimit","checkbox_limit","updateRepeatText","obj","addRemove","toggleFormTax","$showFields","$showForms","getTaxOrFieldSelection","resetOptOnChange","thisOpt","getFieldKeyFromOpt","resetSingleOpt","allOpts","saved","defaultVal","labelForDisplay","optContainer","separateValues","single","baseName","getImageDisplayValue","nodeValue","firstInputIndex","node","buttonsAsOptions","replaceChild","image","imageUrl","showLabelWithImage","showingLabelWithImage","radioOrCheckbox","getImageLabel","fieldInfo","fillDropdownOpts","sourceID","getMultipleOpts","imageOptionClass","isProduct","addRadioCheckboxOpt","adjustConditionalLogicOptionOrders","getNewConditionalLogicOption","expectedOption","optionsContainer","expectedOptionInput","optionLength","optionIndex","optionMatch","getFieldOptions","_document$getElementB3","expectedOptionValue","_getNewConditionalLog","fieldChoices","expectedChoiceEl","valueOnFocus","hasMatch","prependValueSelectWithOptionMatch","listItems","optsContainer","other","isOther","inputType","getSingle","price","atts","showOther","removeDropdownOpts","hasPlaceholder","labelName","optObj","optVals","getImageUrlFromInput","getChecked","optVal","Element","Document","outerHTML","clean","parseHTML","reduce","total","currentNode","cleanNode","imageLabelClass","originalLabel","shape","labelImage","labelNode","imageLabel","src","alt","image_placeholder_icon","checkbox","isChecked","isShowing","checkUniqueOpt","targetInput","settingsContainer","areValuesSeparate","endsWith","conflicts","getFieldValues","isTaxonomy","parentIDs","valueField","valueFieldType","fill","optionName","optionID","showSelect","showText","comparison","creatingValuesDropdown","fillField","thisType","callback","CustomEvent","frmData","frmGetFieldValues","getFieldSelection","$selectedFields","self","initOnceInAllInstances","prototype","orderFieldsObject","fieldSettingsForm","getFieldOrderInputById","currentOrder","newOrder","moveFieldsClass","singleField","moveFields","noSectionFields","$rows","sectionHasFields","handleShowPasswordLiveUpdate","documentOn","fieldEl","$thisId","adjustVisibilityValuesForEveryoneValues","onEveryoneOptionSelected","unselectEveryoneOptionIfSelected","$select","next","selectedValues","hideEmptyEle","alignField","maybeShowInlineModal","showInlineModal","inputTrigger","getInputForIcon","dismissInlineModal","closeModalOnOutsideClick","_ref3","changeInputtedValue","changeHiddenSeparateValue","changeDefaultRadioValue","getOptionParent","getOptionFieldId","defaultRadio","savedVal","sep","liId","submitBuild","$thisEle","showNameYourFormModal","preFormSave","$form","stringify","serializeArray","frm_compact_fields","afterFormSave","$postStuff","$html","reloadIfAddonActivatedAjaxSubmitOnly","triggerSubmit","form","ownerDocument","triggerChange","submitNoAjax","shouldShowNameYourFormNameModal","modalWidget","offsetModalY","_document$querySelect3","formNameInput","noTitleText","addFormNameModalEvents","saveFormNameButton","newFormNameInput","onSaveFormNameButton","newFormName","then","delete","search","history","replaceState","form_key","removeWPUnload","adjustFormatInputBeforeSave","formatTypes","valueMap","none","international","currency","number","formatType","initUpgradeModal","handleUpgradeClick","showExpiredModal","selectedOption","upgrade","upgradeLabel","lockIcon","upgradeImageId","oldImage","level","getRequiredLicenseFromTrigger","addOneClick","showBasicModal","_event$target$dataset","modalTitle","_button$dataset","modalContent","maybeCreateModal","requires","populateUpgradeTab","tab","h2","borderBottom","upgradeModal","appendClonedModalElementToContainer","upgradeModalLink","upgradeButton","screenshot","getScreenshotWrapper","folderUrl","getToolbar","getColorIcons","color","circle","backgroundColor","context","oneclickMessage","upgradeMessage","showLink","addonStatus","oneclick","newMessage","showIt","showMsg","hideIt","rel","upsellImage","getShowLinkHrefValue","customLink","parentClass","maybeAddFieldSelection","wrap","missingClass","showSuccessOpt","copyFormAction","waitForActionToLoadBeforeCopy","targetSettings","wysiwygs","wysiwyg","tinymce","EditorManager","execCommand","$action","currentID","newID","newActionId","rename","reid","reclass","revalue","newAction","autocompleteInput","$trigger","$original","$inside","$top","exists","addFormAction","isAtLimitForActionType","getNewActionId","placeholderSetting","actionsList","list_id","handleAddFormActionSuccess","closeOpenActions","newActionContainer","widgetTop","toggleActionGroups","actions","triggerEvent","actionSettings","len","$thisobj","showFieldOptions","_document$querySelect4","allFieldSettings","scrollTo","editor","setupCallback","setupTinyMceEventHandlers","maybeAddShortcodesModalTriggerIcon","_singleField$querySel","shouldAddShortcodesModalTriggerIcon","fieldSettingsSelector","wrapTextareaWithIconContainer","textareas","textarea","wrapperSpan","createModalTriggerIcon","fieldsWithShortcodesBox","handleTinyMceChange","isTinyMceActive","tinyMCE","activeEditor","isHidden","targetElm","getContent","activeSettings","fragment","createDocumentFragment","endMarker","classname","showEmailRow","actionKey","rowType","hideEmailRow","actionBox","emailRowSelector","emailButtonSelector","showEmailWarning","fromVal","toVal","actionTriggers","addAlreadyUsedClass","getLimitForActionType","markActionTriggersInactive","markActionTriggersActive","triggers","atLimit","getNumberOfActionsForType","actionLimitMessage","only_one_action","limit","edit_action_text","addFormLogicRow","logicRowsContainer","newRowID","email_id","checkDupPost","postField","$t","borderColor","field_already_used","togglePostContent","fillDyncontent","$dyn","switchPostType","curSelect","newSelect","catRows","postParentField","postMenuOrderField","postType","post_type","getActionOption","response","optName","replaceAll","successHandler","method","_wpnonce","console","addPosttaxRow","addPostRow","addPostmetaRow","metaName","postTypeRows","isNumeric","tax_key","action_key","cfOpts","optIndex","isFinite","changePosttaxRow","taxKey","showExclude","show_exclude","$tax","toggleCfOpts","cancel","toggleFormOpts","changedOpt","submitSettings","insertCode","insertFieldCode","variable","rich","elementId","_typeof","active","activeElement","contentBox","doShortcode","wpActiveEditor","plain_text","innerText","send_to_editor","insertContent","maybeAddSanitizeUrlToShortcodeVariable","selection","createRange","selectionEnd","maybeFormatInsertedContent","selectionStart","maybeRemoveLayoutClasses","setSelectionRange","isALayoutClass","removeClasses","maybeRemoveClasses","beforeValue","currentClasses","textToInsert","startPattern","endPattern","resetLogicBuilder","setLogicExample","code","idKey","conditional_text","maybeShowModal","moreIcon","getIconForInput","getAttributeNS","showShortcodeBox","showShortcodes","handleBuilderChangeEvent","maybeShowSaveAndReloadModal","_document$querySelect5","idParts","showSaveAndReloadModal","getModalContent","footer","getModalFooter","footerButton","buttonType","saveAndReloadFormBuilder","updateShortcodesPopupPosition","useElements","openTrigger","use","moreIconPosition","shortCodesPopup","parentPos","shouldFocus","hasAttributeNS","newMoreIcon","createElementNS","showOrHideContextualShortcodes","checkContextualShortcode","isContextualShortcode","canShowContextualShortcode","shortcode","address","inputId","fills","addressSelector","bodySelector","toggleContextualShortcodes","selector","shouldShowShortcodes","_iterator","_createForOfIteratorHelper","_step","n","done","_document$querySelect6","shortcodeLi","err","_document$getElementB4","confirmExit","buildSubmittedNoAjax","settingsSubmitted","saveAndReloadSettings","page","submit","submitButton","returnValue","bindClickForDialogClose","$modal","closeModal","amount","my","of","_moreIcon$closest","_input$nextElementSib","u","closeIcons","closeSvg","toggleAllowedHTML","inArray","toggleKeyID","switchTo","onActionLoaded","initWysiwygOnActionLoaded","addFocusEvents","holder","holderContainer","uninstallNow","saveAddonLicense","buttonName","disabled","thisRow","eddWrapper","actionIsSuccess","actionIsActivate","startFormMigration","checkedBoxes","importForms","forms","targetForm","$processSettings","importQueue","imported","importForm","provider","res","statusUpdate","grep","validateExport","$exportForms","$exportType","removeExportError","$thisName","checkCSVExtension","re","getExportOption","exportFormatSelect","exportTypeChanged","showOrHideRepeaters","checkExportTypes","checkSelectedAllFormsCheckbox","exportType","selectAllCheckbox","$dropdown","$selected","exportField","exportOption","repeaters","searchContent","preventMultipleExport","bootstrap","multiselect","installMultipleAddons","toggleAddonState","activateAddon","installAddon","clicked","async","cache","_response$data","_response","saveAndReload","extractErrorFromAddOnResponse","addonError","afterAddonInstall","installAddonWithCreds","proceed","hostname","username","password","_response$data2","_response2","addonStatuses","oneClick","actionMap","frm_activate_addon","frm_deactivate_addon","installed","frm_uninstall_addon","not_installed","frm_install_addon","messageElement","buttonElement","inModal","getSaveAndReloadSettingsOptions","saveAndReloadSettingsButton","closePopupButton","showActiveCampaignForm","loadApiEmailForm","handleApiFormError","errorId","$error","handleEmailAddressError","formContainer","json","renderedHtml","autocomplete","initSelectionAutocomplete","nextInstallStep","thisStep","installTemplateFieldset","fieldset","elements","installNewForm","installTemplate","formToData","formName","template_name","formDesc","template_desc","xml","filterArgs","postAjax","redirect","showInstallFormErrorModal","handleCaptchaTypeChange","thresholdContainer","card","regEx","toSearch","selectedOptions","addons","itemCanBeShown","textMatchesPlural","updateCatHeadingVisibility","insertFieldsElement","headingElements","fieldsListElement","listItemElements","allHidden","every","iLen","evt","createEvent","initEvent","xmlHttp","XMLHttpRequest","params","keys","k","encodeURIComponent","onreadystatechange","responseText","setRequestHeader","send","invisible","visible","dialogArgs","dialogClass","autoOpen","closeOnEscape","resizable","close","cname","hidden","vis","onbeforeunload","w","addMultiselectLabelListener","clickListener","labelFor","buttonToggle","triggerMultiselectClick","maybeChangeEmbedFormMsg","fieldItem","embedMsg","toggleProductType","currentVal","subKey","names","Reflect","has","handleNameFieldOnFormBuilder","getSubFieldElFromCache","frmCachedSubFields","setSubFieldElToCache","getColClass","colCount","colClasses","num","allSubFieldNames","onChangeLayout","subFieldNames","newColClass","subFieldEl","_subFieldEl$classList","apply","_toConsumableArray","subFieldName","optionsEl","dropdownSelector","debounce","func","wait","liObject","useTag","useTagHref","hasDragIcon","hasSaveIcon","parser","DOMParser","parseFromString","liIcons","getElementsByTagNameNS","maybeAddSaveAndDragIcons","_key","maybeInitEntriesListPage","screenOptionsWrapper","maxSelectionsNote","margin","legend","maximumColumns","getSelectedCount","disableCheckboxesIfAtMax","addCheckboxListeners","initOnSubmitAction","onChangeType","actionEl","activeEls","activeEl","initAddMyEmailAddress","addMyEmailAddress","emptyInbox","leaveEmailInput","leaveEmailModal","email","$hiddenForm","$hiddenEmailField","emailWrapper","spinner","visibility","float","serialize","apiForm","showSuccessMessage","addAdminFooterLinks","_document$querySelect7","footerLinks","applyZebraStriping","tableSelector","emptyRowClass","isOdd","tables","table","maybeHideShortcodes","sidebar","isChild","initSelectDependencies","selects","toggleDependencyVisibility","dependencyElement","dependency","focusNextSingleOptionInput","currentInput","optionsList","inputsArray","currentIndex","nextInput","offsetParent","textLength","$openDrop","dismissIcon","inboxBannerInit","buildInit","settingsInit","styleInit","globalSettingsInit","exportInit","inboxInit","solutionInit","print","$advInfo","panelInit","$shortCodeDiv","showUpgradeTab","autoSearch","addFilter","_ref4","formKey","formKeyInput","previewDrop","_this$querySelector","smallScreenProceedButton","_document$getElementB5","saleBanner","saleDismiss","loadFieldId","$builderForm","builderArea","disableSelection","newStatus","currentTarget","addAction","showBtn","fieldSettingsEl","$formActions","formSettings","$loggedIn","$cookieExp","$editable","handleImageUploadClickEvents","bind","no_save_warning","$singleEntry","$saveDraft","customPanel","settingsPage","viewPage","insertFieldsTab","parentEle","htmlTab","idAttrValue","_document$getElementB6","dismissedMessage","dismissedMessagesWrapper","isInboxSlideIn","once","_dismissedMessage$que","$previewWrapper","customCSSInit","warn","licenseTab","captchaType","_document$querySelect8","captchaValueOnLoad","showNote","manageStyleSettings","paymentsSettings","paymentSettingsTabs","cb","banner","dismissButton","triggerRemoveLogic","downloadXML","controller","isTemplate","_wp$hooks","_len","_key2","priority","_wp$hooks2","_len2","_key3","ready","_document$querySelect9","setupBootstrapDropdowns","convertOldBootstrapDropdownsToBootstrap4","frmDropdownMenu","convertBootstrapUl","frm_show_div","showIf","classId","frmCheckAll","frmCheckAllLevel","$kids","cur","rowNumber","htmlName","frmImportCsv","urlVars","__FRMURLVARS","percent","import_complete"],"sourceRoot":""}