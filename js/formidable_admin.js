(()=>{function e(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}window.FrmFormsConnect=window.FrmFormsConnect||function(e,t,r){var n={messageBox:null,reset:null,setElements:function(){n.messageBox=e.querySelector(".frm_pro_license_msg"),n.reset=e.getElementById("frm_reconnect_link")}},i={init:function(){n.setElements(),r(e.getElementById("frm_deauthorize_link")).on("click",i.deauthorize),r(".frm_authorize_link").on("click",i.authorize),r(".frm-dashboard-license-options").on("click","#frm_deauthorize_link",i.deauthorize),r(".frm-dashboard-license-options").on("click","#frm_reconnect_link",i.reauthorize),null!==n.reset&&r(n.reset).on("click",i.reauthorize)},authorize:function(){var t=this,n=this.getAttribute("data-plugin"),o=e.getElementById("edd_"+n+"_license_key"),a=o.value,l=e.getElementById("proplug-wpmu");this.classList.add("frm_loading_button"),l=null===l?0:l.checked?1:0,r.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"frm_addon_activate",license:a,plugin:n,wpmu:l,nonce:frmGlobal.nonce},success:function(e){i.afterAuthorize(e,o),t.classList.remove("frm_loading_button")}})},afterAuthorize:function(e,t){!0===e.success&&(t.value="•••••••••••••••••••"),wp.hooks.doAction("frm_after_authorize",e),i.showMessage(e)},showProgress:function(e){null===n.messageBox&&n.setElements();var t=n.messageBox;null!==t&&(!0===e.success?(t.classList.remove("frm_error_style"),t.classList.add("frm_message","frm_updated_message")):(t.classList.add("frm_error_style"),t.classList.remove("frm_message","frm_updated_message")),t.classList.remove("frm_hidden"),t.innerHTML=e.message)},showMessage:function(r){null===n.messageBox&&n.setElements();var o=n.messageBox;!0===r.success&&(i.showAuthorized(!0),i.showInlineSuccess(),wp.hooks.doAction("frmAdmin.afterLicenseAuthorizeSuccess",{msg:r})),i.showProgress(r),""!==r.message&&(setTimeout((function(){o.innerHTML="",o.classList.add("frm_hidden"),o.classList.remove("frm_error_style","frm_message","frm_updated_message")}),1e4),e.querySelector(".frm-admin-page-dashboard")&&setTimeout((function(){t.location.reload()}),1e3))},showAuthorized:function(t){var r=t?"unauthorized":"authorized",n=t?"authorized":"unauthorized",i=e.querySelectorAll(".frm_"+r+"_box");i.length&&i.forEach((function(e){e.className=e.className.replace("frm_"+r+"_box","frm_"+n+"_box")}))},showInlineSuccess:function(){var t=e.querySelectorAll(".frm-confirm-msg [data-success]");t.length&&t.forEach((function(e){e.innerHTML=frmAdminBuild.purifyHtml(e.getAttribute("data-success"))}))},reauthorize:function(){return this.innerHTML='<span class="frm-wait frm_spinner" style="visibility:visible;float:none"></span>',r.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"frm_reset_cache",plugin:"formidable_pro",nonce:frmGlobal.nonce},success:function(e){n.reset.textContent=e.message,"1"===n.reset.getAttribute("data-refresh")&&t.location.reload()}}),!1},deauthorize:function(){if(!confirm(frmGlobal.deauthorize))return!1;var t=this.getAttribute("data-plugin"),n=e.getElementById("edd_"+t+"_license_key"),o=n.value,a=this;return this.innerHTML='<span class="frm-wait frm_spinner" style="visibility:visible;"></span>',r.ajax({type:"POST",url:ajaxurl,data:{action:"frm_addon_deactivate",license:o,plugin:t,nonce:frmGlobal.nonce},success:function(){i.showAuthorized(!1),n.value="",a.replaceWith("Disconnected"),wp.hooks.doAction("frmAdmin.afterLicenseDeauthorizeSuccess",{})}}),!1}};return i}(document,window,jQuery),window.frmAdminBuild=function(){var r,o,a=frm_admin_js,l=frmDom,s=l.tag,d=l.div,c=l.span,f=l.a,u=l.svg,m=l.img,_=frmDom.util.onClickPreventDefault,p=frmDom.ajax,g=(p.doJsonFetch,p.doJsonPost);a.contextualShortcodes=(o=null===(r=document.getElementById("frm_adv_info"))||void 0===r?void 0:r.dataset.contextualShortcodes)?((o=JSON.parse(o)).addressSelector="[id^=email_to], [id^=from_], [id^=cc], [id^=bcc]",o.bodySelector="[id^=email_message_]",o):[];var y,h,v,b={save:u({href:"#frm_save_icon"}),drag:u({href:"#frm_drag_icon",classList:["frm_drag_icon","frm-drag"]})},j=jQuery(document.getElementById("frm-show-fields")),w=document.getElementById("new_fields"),Q=document.getElementById("form_id"),x=!1,E=0,k=0,L=0,S={},A=0,I=wp.i18n,B=I.__,C=I.sprintf,q={dragging:!1};null!==Q&&(k=Q.value);var N,T=new URL(window.location.href),O=T.searchParams,D=document.getElementById("frm_builder_page");function M(e){e.stopPropagation(),e.preventDefault(),F(this)}function F(e){var t=e.getAttribute("data-frmverify"),r=e.getAttribute("data-loaded-from");return null===t||"frm-confirmed-click"===e.id||("entries-list"===r?wp.hooks.applyFilters("frm_on_multiple_entries_delete",{link:e,initModal:To}):function(e){var t,r,n,i,o,a=To("#frm_confirm_modal","400px"),l=document.getElementById("frm-confirmed-click");if(!1===a)return!1;for(n in o=(t=e.getAttribute("data-frmverify"))?e.getAttribute("data-frmverify-btn"):"",(r=jQuery(".frm-confirm-msg")).empty(),t&&(r.append(document.createTextNode(t)),o&&l.classList.add(o)),removeAtts=l.dataset,i)l.removeAttribute("data-"+n);for(n in i=e.dataset)"frmverify"!==n&&l.setAttribute("data-"+n,i[n]);return wp.hooks.doAction("frmAdmin.beforeOpenConfirmModal",{$info:a,link:e}),a.dialog("open"),l.setAttribute("href",e.getAttribute("href")||e.getAttribute("data-href")),!1}(e))}function H(e){var t=To("#frm_info_modal","400px");return!1===t||(jQuery(".frm-info-msg").html(e),t.dialog("open")),!1}function P(e){var t=this.getAttribute("data-frmtoggle"),r=this.getAttribute("data-toggletext"),n=jQuery(t);return e.preventDefault(),n.toggle(),null!==r&&""!==r&&(this.setAttribute("data-toggletext",this.innerHTML),this.textContent=r),!1}function z(e){var t=this.getAttribute("data-frmhide"),r=this.getAttribute("data-frmshow"),n=this.getAttribute("data-frmuncheck"),i=n?n.split(","):[];"INPUT"!==this.nodeName||"checkbox"!==this.type||this.checked||(null!==t?(r=t,t=null):null!==r&&(t=r,r=null)),e.preventDefault();var o=this.getAttribute("data-toggleclass")||"frm_hidden";null!==t&&jQuery(t).addClass(o),null!==r&&jQuery(r).removeClass(o);var a=this.parentNode.querySelectorAll("a.current");if(null!==a){for(var l=0;l<a.length;l++)a[l].classList.remove("current");this.classList.add("current")}return i.length&&i.forEach((function(e){var t=document.querySelector(e);t&&(t.checked=!1)})),!1}function R(){document.querySelectorAll(".tooltip").forEach((function(e){e.remove()}))}function G(){var e,t,r;if(!parseInt(this.getAttribute("data-skip-frm-js"))&&!1!==F(this)){var n=jQuery(this),i=n.attr("data-removeid");void 0===(e=n.attr("data-showlast"))&&(e=""),void 0===(t=n.attr("data-hidelast"))&&(t=""),r=n.attr("data-removemore"),""!==e?n.closest(".frm_add_remove").find(".frm_remove_tag:visible").length>1&&(e="",t=""):0===i.indexOf("frm_postmeta_")&&(jQuery("#frm_postmeta_rows .frm_postmeta_row").length<2&&(e=".frm_add_postmeta_row.button"),jQuery(".frm_toggle_cf_opts").length&&jQuery("#frm_postmeta_rows .frm_postmeta_row:not(#"+i+")").last().length&&(""!==e&&(e+=","),e+="#"+jQuery("#frm_postmeta_rows .frm_postmeta_row:not(#"+i+")").last().attr("id")+" .frm_toggle_cf_opts"));var o=document.getElementById(i),a=jQuery(o);return a.fadeOut(300,(function(){var r;a.remove(),Mi(),""!==t&&jQuery(t).hide(),""!==e&&jQuery(e+" a,"+e).removeClass("frm_hidden").fadeIn("slow"),this.closest(".frm_form_action_settings")&&function(e){si(e);var t={type:e};wp.hooks.doAction("frm_after_action_removed",t)}(this.closest(".frm_form_action_settings").querySelector(".frm_action_name").value),null===(r=document.querySelector(".tooltip"))||void 0===r||r.remove()})),void 0!==r&&(r=jQuery(r)).fadeOut(400,(function(){r.remove()})),""!==e&&jQuery(this).closest(".frm_logic_rows").fadeOut("slow"),wp.hooks.doAction("frm_admin_tag_removed",i,o),!1}}function $(e,t){void 0===t&&(t=this),Ze(t,!1);var r=jQuery(t).closest(".frm_form_action_settings"),n=e.target;if(r.length&&void 0!==n){var i=n.parentElement.className;if("string"==typeof i&&(i.indexOf("frm_email_icons")>-1||i.indexOf("frm_toggle")>-1))return void e.stopPropagation()}var o=r.children(".widget-inside");if(r.length&&o.find("p, div, table").length<1){var a=r.find('input[name$="[ID]"]').val(),l=r.find('input[name$="[post_excerpt]"]').val();l&&(o.html('<span class="frm-wait frm_spinner"></span>'),r.find(".spinner").fadeIn("slow"),jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_form_action_fill",action_id:a,action_type:l,nonce:frmGlobal.nonce},success:function(e){o.html(e),lo(),Yn("#"+r.attr("id")),jo(o),jQuery(t).trigger("frm-action-loaded"),wp.hooks.doAction("frm_filled_form_action",o)}}))}jQuery(t).closest(".frm_field_box").siblings().find(".widget-inside").slideUp("fast"),void 0!==t.className&&-1!==t.className.indexOf("widget-action")||jQuery(t).closest(".start_divider").length<1||((o=jQuery(t).closest("div.widget").children(".widget-inside")).is(":hidden")?o.slideDown("fast"):o.slideUp("fast"))}function W(){var e=this.getAttribute("href");if(void 0===e)return!1;var t=e.replace("#","."),r=jQuery(this);r.closest("li").addClass("frm-tabs active").siblings("li").removeClass("frm-tabs active starttab"),r.closest("div").children(".tabs-panel").not(e).not(t).hide();var n=document.getElementById(e.replace("#",""));return n&&(n.style.display="block"),"frm_insert_fields_tab"!==this.id||this.closest("#frm_adv_info")||Ke(),!1}function U(e,t){var r=(e=jQuery(e)).attr("href");if(void 0!==r){var n,i,o=r.replace("#",".");if(e.closest("li").addClass("frm-tabs active").siblings("li").removeClass("frm-tabs active starttab"),e.closest("div").find(".tabs-panel").length)e.closest("div").children(".tabs-panel").not(r).not(o).hide();else if(null!==document.getElementById("form_global_settings")){var a=e.data("frmajax");e.closest(".frm_wrap").find(".tabs-panel, .hide_with_tabs").hide(),void 0!==a&&"1"==a&&(n=r.replace("#",""),(i=jQuery(".frm_"+n+"_ajax")).length&&jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_settings_tab",tab:n.replace("_settings",""),nonce:frmGlobal.nonce},success:function(e){i.replaceWith(e)}}))}else jQuery("#frm-categorydiv .tabs-panel, .hide_with_tabs").hide();jQuery(r).show(),jQuery(o).show(),Wi(),"auto"!==t&&(jQuery(".frm_updated_message").hide(),jQuery(".frm_warning_style").hide()),jQuery(e).closest("#frm_adv_info").length||(jQuery(".frm_form_settings").length?jQuery(".frm_form_settings").attr("action","?page=formidable&frm_action=settings&id="+jQuery('.frm_form_settings input[name="id"]').val()+"&t="+r.replace("#","")):jQuery(".frm_settings_form").attr("action","?page=formidable-settings&t="+r.replace("#","")))}}function V(e){var t,r;document.querySelectorAll(e).forEach((function(e){K(e),Array.from(e.children).forEach((function(e){return X(e,".frm-move")}));var t=jQuery(e).children('[data-type="divider"]').children(".divider_section_only");t.length&&K(t)})),t=jQuery("#frm_builder_page"),r={items:".frm_sortable_field_opts li",axis:"y",opacity:.65,forcePlaceholderSize:!1,handle:".frm-drag",helper:function(e,t){return x=t.clone().insertAfter(t),t.clone()},stop:function(e,t){x&&x.remove(),rn(t.item.attr("id").replace("frm_delete_field_","").replace("-"+t.item.data("optkey")+"_container","")),Mi()}},jQuery(t).sortable(r)}function K(e){jQuery(e).droppable({accept:".frmbutton, li.frm_field_box",deactivate:ne,over:J,out:Y,tolerance:"pointer"})}function J(e,t){var r=function(e){return e.classList.contains("divider_section_only")&&(e=jQuery(e).nextAll(".start_divider.frm_sorting").get(0)),e}(e.target);if(!Qe(t.draggable[0],r,e))return r.classList.remove("frm-over-droppable"),void jQuery(r).parents("ul.frm_sorting").addClass("frm-over-droppable");document.querySelectorAll(".frm-over-droppable").forEach((function(e){return e.classList.remove("frm-over-droppable")})),r.classList.add("frm-over-droppable"),jQuery(r).parents("ul.frm_sorting").addClass("frm-over-droppable")}function Y(e){e.target.classList.remove("frm-over-droppable")}function X(e,t){var r={helper:Z,revert:"invalid",delay:10,start:ee,stop:te,drag:re,cursor:"grabbing",refreshPositions:!0,cursorAt:{top:0,left:90}};"string"==typeof t&&(r.handle=t),jQuery(e).draggable(r)}function Z(e){var t,r=e.delegateTarget;if(Ee(r)){var n=document.getElementById("frm-insert-fields").querySelector(".frm_ttext").cloneNode(!0);return n.querySelector("use").setAttributeNS("http://www.w3.org/1999/xlink","href","#frm_field_group_layout_icon"),n.querySelector("span").textContent=B("Field Group","formidable"),n.classList.add("frm_field_box"),n.classList.add("ui-sortable-helper"),n}if(r.classList.contains("frmbutton"))return(t=r.cloneNode(!0)).classList.add("ui-sortable-helper"),r.classList.add("frm-new-field"),t;if(r.hasAttribute("data-ftype")){var i=r.getAttribute("data-ftype");if((t=(t=document.getElementById("frm-insert-fields").querySelector(".frm_t"+i)).cloneNode(!0)).classList.add("form-field"),t.classList.add("ui-sortable-helper"),t)return t.cloneNode(!0)}return d({className:"frmbutton"})}function ee(e,t){q.dragging=!0;var r,n=h;n.classList.add("frm-dragging-field"),document.body.classList.add("frm-dragging"),t.helper.addClass("frm-sortable-helper"),t.helper.initialOffset=n.scrollTop,e.target.classList.add("frm-drag-fade"),gr(),(r=document.querySelectorAll("ul.start_divider")).length&&r.forEach((function(e){[].slice.call(e.children).forEach((function(e){(0===e.children.length||1===e.children.length&&"ul"===e.firstElementChild.nodeName.toLowerCase()&&0===e.firstElementChild.children.length)&&e.remove()}))})),Me(),Te(),R()}function te(){h.classList.remove("frm-dragging-field"),document.body.classList.remove("frm-dragging");var e=document.querySelector(".frm-drag-fade");e&&e.classList.remove("frm-drag-fade")}function re(e,t){!function(e){v.scrollTop((function(t,r){var n=e.clientY,i=h.offsetHeight,o=e.clientY-h.offsetTop,a=o-i/2;return o>i-50&&n>5?r+.1*a:o<70&&n<130?r-Math.abs(.1*a):r}))}(e);var r=e.target,n=function(){for(var e=document.getElementById("frm-show-fields");e.querySelector(".frm-over-droppable");)e=e.querySelector(".frm-over-droppable");return"frm-show-fields"!==e.id||e.classList.contains("frm-over-droppable")||(e=!1),e}(),i=document.getElementById("frm_drag_placeholder");if(Qe(r,n,e)){i||(i=s("li",{id:"frm_drag_placeholder",className:"sortable-placeholder"}));var o,a=t.helper.get(0);if((a.classList.contains("form-field")||a.classList.contains("frm_field_box"))&&(a.style.transform="translateY("+(o=t.helper,h.scrollTop-o.initialOffset+"px)")),"frm-show-fields"===n.id||n.classList.contains("start_divider"))return i.style.left=0,void function(e){var t,r=e.y,n=e.placeholder,i=jQuery(e.droppable);if($children=i.children().not(".edit_field_type_end_divider"),0===$children.length)i.prepend(n),t=0;else{var o=ie(i,r);if(o===$children.length){var a=jQuery($children.get(o-1));t=a.offset().top+a.outerHeight(),i.append(n);var l=i.children(".edit_field_type_end_divider");l.length&&i.append(l)}else t=jQuery($children.get(o)).offset().top,jQuery($children.get(o)).before(n)}t-=i.offset().top,n.style.top=t+"px"}({droppable:n,y:e.clientY,placeholder:i});i.style.top="",function(e){var t,r=e.x,n=e.placeholder,i=jQuery(e.droppable),o=ae(i);if(o.length){var a=function(e,t){var r,n,i,o,a=ae(e);for(o=0,r=a.length-1;r>=0;--r)if(n=a.get(r),t>(i=jQuery(n).offset().left)){o=r,t>i+jQuery(n).outerWidth()/2&&(o=r+1);break}return o}(i,r);if(a===o.length){var l=jQuery(o.get(a-1));t=l.offset().left+l.outerWidth(),i.append(n)}else t=jQuery(o.get(a)).offset().left,jQuery(o.get(a)).before(n),t-=0===a?4:8;t-=i.offset().left,n.style.left=t+"px"}}({droppable:n,x:e.clientX,placeholder:i})}else i&&i.remove()}function ne(e,t){if(q.dragging){q.dragging=!1;var r=t.draggable[0],n=document.getElementById("frm_drag_placeholder");if(!n)return t.helper.remove(),void y();!function(e){if(e.previousElementSibling&&e.previousElementSibling.classList.contains("frm-is-collapsed")){var t=jQuery(e).prevUntil('[data-type="break"]');if(t.length){var r=t.find(".frm-collapse-page").get(0);r&&r.click()}}}(n);var i=t.helper.parent(),o=t.helper.get(0).closest("ul.start_divider"),a=n.closest("ul.start_divider");r.classList.contains("frm-new-field")?function(e){if(ge(e))wp.hooks.doAction("frm_stopped_inserting_by_dragging",e);else{var t=document.getElementById("frm_drag_placeholder"),r=e.replace("|","-")+"_"+we(),n=s("li",{id:r,className:"frm-wait frmbutton_loadingnow"}),i=jQuery(n),o=fe(jQuery(t)),a=ue(o),l=me(o);t.parentNode.insertBefore(n,t),t.remove(),le(i);var d=0;"summary"===e&&(d=jQuery(".frmbutton_loadingnow#"+r).prevAll('li[data-type="break"]').length?1:0),jQuery.ajax({type:"POST",url:ajaxurl,data:pe(e,l,a,d),success:function(t){ye(t,i);var r=he(t);r&&wp.hooks.doAction("frm_after_field_added_in_form_builder",{field:t,fieldId:r,fieldType:e,form_id:a})},error:je})}}(r.id):(function(e,t){t.parentNode.insertBefore(e,t)}(r,n),function(e){if("UL"===e.nodeName&&!e.classList.contains("start_divider")&&"frm-show-fields"!==e.id){var t=e.closest("li");t&&!t.classList.contains("ui-draggable")&&X(t,".frm-move")}}(n.parentElement));var l=o?parseInt(o.closest(".edit_field_type_divider").getAttribute("data-fid")):0,d=a?parseInt(a.closest(".edit_field_type_divider").getAttribute("data-fid")):0;n.remove(),t.helper.remove();var c=i.length?ae(i):[];!function(e,t){var r;e.length&&(t.length?le(t.first()):(r=e.get(0).closest("li.frm_field_box"))&&!r.classList.contains("edit_field_type_divider")&&r.remove())}(i,c),function(e,t){0===t.length&&1===ae(jQuery(e.parentNode)).length||le(jQuery(e))}(r,c),l!==d&&_e(jQuery(r),o),y()}}function ie(e,t){var r,n,i,o,a=e.children().not(".edit_field_type_end_divider"),l=a.length;if(!document.querySelector(".frm-has-fields .frm_no_fields"))return 0;for(o=0,r=l-1;r>=0;--r)if(n=a.get(r),t>(i=jQuery(n).offset().top)){o=r,t>i+jQuery(n).outerHeight()/2&&(o=r+1);break}return o}function oe(){document.querySelectorAll("ul#frm-show-fields, ul.start_divider").forEach((function(e){e.childNodes.forEach((function(e){void 0!==e.classList&&(e.classList.contains("edit_field_type_end_divider")||void 0!==e.classList&&e.classList.contains("form-field")&&We(e))}))})),xn(),document.querySelectorAll(".edit_field_type_end_divider").forEach((function(e){return e.parentNode.appendChild(e)})),document.querySelectorAll("li.form_field_box:not(.form-field)").forEach((function(e){return!e.children.length&&e.remove()})),Qn();var e=new Event("frm_sync_after_drag_and_drop",{bubbles:!1});document.dispatchEvent(e)}function ae(e){var t=jQuery(),r=e.get(0);return r.children?(Array.from(r.children).forEach((function(e){if("none"!==e.style.display){var r=e.classList;!r.contains("form-field")||r.contains("edit_field_type_end_divider")||r.contains("frm-sortable-helper")||(t=t.add(e))}})),t):t}function le(e,t){var r,n,i,o;void 0===t&&(t="even"),r=e.parent().children("li.form-field, li.frmbutton_loadingnow").not(".edit_field_type_end_divider"),n=r.length,i=["frm_full","frm_half","frm_third","frm_fourth","frm_sixth","frm_two_thirds","frm_three_fourths","frm1","frm2","frm3","frm4","frm5","frm6","frm7","frm8","frm9","frm10","frm11","frm12"],"even"===t&&5!==n?r.each(ce(i,Ut(n))):"clear"===t?r.each(ce(i,"")):(o=-1!==["left","right","middle","even"].indexOf(t)?function(e){return Wt(n,t,e)}:function(e){return ar(t[e])},r.each(ce(i,o))),se(e.parent(),r.length)}function se(e,t){var r,n;if(void 0!==e.offset()){if(r=t>=2,null===(n=document.getElementById("frm_field_group_controls"))){if(!r)return;(n=d()).id="frm_field_group_controls",n.setAttribute("role","group"),n.setAttribute("tabindex",0),function(e){var t,r;(t=document.createElement("span")).innerHTML='<svg class="frmsvg"><use xlink:href="#frm_field_group_layout_icon"></use></svg>';var n=B("Set Row Layout","formidable");de(t,n),zt(t,n),(r=document.createElement("span")).innerHTML='<svg class="frmsvg"><use xlink:href="#frm_thick_move_icon"></use></svg>',r.classList.add("frm-move");var i=B("Move Field Group","formidable");de(r,i),zt(r,i),e.innerHTML="",e.appendChild(t),e.appendChild(r),e.appendChild(function(){var e=c({className:"dropdown"}),t=f({className:"frm_bstooltip frm-hover-icon frm-dropdown-toggle dropdown-toggle",children:[c({child:u({href:"#frm_thick_more_vert_icon"})}),c({className:"screen-reader-text",text:B("Toggle More Options Dropdown","formidable")})]});frmDom.setAttributes(t,{title:B("More Options","formidable"),"data-toggle":"dropdown","data-container":"body"}),zt(t,B("More Options","formidable")),e.appendChild(t);var r=d({className:"frm-dropdown-menu dropdown-menu dropdown-menu-right"});return r.setAttribute("role","menu"),e.appendChild(r),e}())}(n),D.appendChild(n)}e.append(n),n.style.display=r?"block":"none"}}function de(e,t){e.setAttribute("data-toggle","tooltip"),e.setAttribute("data-container","body"),e.setAttribute("title",t),e.addEventListener("mouseover",(function(){null===e.getAttribute("data-original-title")&&jQuery(e).tooltip()}))}function ce(e,t){return function(r){var n,i,o,a,l,s,d;for(n="function"==typeof t?t(r):t,i=e.length,l=!1,o=0;o<i;++o)if(a=e[o],this.classList.contains(a)){l=a;break}void 0!==(s=this.dataset.fid)?(ii(document.getElementById("frm-single-settings-"+s)),null!==(d=document.getElementById("frm_classes_"+s))&&(!1===l?""!==n&&(d.value=d.value.concat(" "+n)):(this.classList.remove(l),d.value=d.value.replace(l,n)),this.classList.contains("frm_first")&&(this.classList.remove("frm_first"),d.value=d.value.replace("frm_first","").trim()),0===r&&(this.classList.add("frm_first"),d.value=d.value.concat(" frm_first")),jQuery(d).trigger("change"))):this.classList.add(n)}}function fe(e){var t="";return void 0===e||e.hasClass("edit_field_type_divider")||(t=e.closest(".edit_field_type_divider")),t}function ue(e){var t="";if(void 0!==e[0]){var r=e.children(".start_divider");if(r.children(".edit_field_type_end_divider").appendTo(r),void 0!==e.attr("data-formid")){var n=e.attr("data-fid");t=jQuery('input[name="field_options[form_select_'+n+']"]').val()}}return void 0!==t&&""!==t||(t=k),t}function me(e){var t=0;return void 0!==e[0]&&(t=e.attr("id").replace("frm_field_id_","")),t}function _e(e,t){if(e.hasClass("form-field")){var r=e.attr("id").replace("frm_field_id_",""),n=fe(e),i=ue(n),o=me(n),a=t?ue(jQuery(t.parentNode)):0;jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_update_field_after_move",form_id:i,field:r,section_id:o,previous_form_id:a,nonce:frmGlobal.nonce},success:function(){xn(),function(e,t){document.getElementById("frm_in_section_"+e).value=t}(r,o)}})}else ae(jQuery(e.get(0).firstChild)).each((function(){_e(jQuery(this),t)}))}function pe(e,t,r,n){return{action:"frm_insert_field",form_id:r,field_type:e,section_id:t,nonce:frmGlobal.nonce,has_break:n,last_row_field_ids:ve()}}function ge(e){return wp.hooks.applyFilters("frm_should_stop_inserting_field",!1,e)}function ye(e,t){var r;document.getElementById("frm_form_editor_container").classList.add("frm-has-fields");var n=t.siblings("li.form-field").not(".edit_field_type_end_divider");n.length?(r=be(e),t.get(0).parentNode.parentNode.classList.contains("ui-draggable")||X(t.get(0).parentNode.parentNode,".frm-move")):r=$e(e),t.replaceWith(r),Qn(),Ue(e,!1),n.length&&le(n.first()),xn(),n.length?X(r.get(0),".frm-move"):(K(r.get(0).querySelector("ul.frm_sorting")),X(r.get(0).querySelector("li.form-field"),".frm-move"))}function he(e){var t=e.match(/data-fid="(\d+)"/);return t?parseInt(t[1]):0}function ve(){var e=document.querySelector(".edit_field_type_submit");if(!e)return[];for(var t=e.parentNode.children,r=[],n=0;n<t.length;n++)r.push(t[n].dataset.fid);return r}function be(e){var t=d();return t.innerHTML=e,jQuery(t.firstChild)}function je(e,t,r){!function(e,t){(function(e){return 0===e.status||0===e.readyState})(t)||H(e+". Please try again.")}(r,e)}function we(){return++L}function Qe(e,t,r){if(!1===t)return!1;if(t.closest(".frm-sortable-helper"))return!1;var n,i,o,a=e.classList.contains("edit_field_type_submit"),l=!e.classList.contains("form_field")&&!!e.querySelector(".edit_field_type_submit");if("frm-show-fields"===t.id){var s=ie(jQuery(t),r.clientY);return a||l?s>t.childElementCount-1:s<=jQuery(t.querySelector(".edit_field_type_submit").closest("#frm-show-fields > li")).index()}if(a)return!(t.classList.contains("start_divider")||!xe(t.parentElement)&&(!xe(t.parentElement.nextElementSibling)||e.parentElement.querySelector("li.frm_field_box:not(.edit_field_type_submit)")));if(t.classList.contains("start_divider")&&(e.classList.contains("edit_field_type_gdpr")||"gdpr"===e.id)&&t.closest(".repeat_section"))return!1;if(!t.classList.contains("start_divider")){if(n=ae(jQuery(t)),i=jQuery(e),!(n.length<6)&&(n.length>6||(o=i.attr("data-fid"),1!==jQuery(n).filter('[data-fid="'+o+'"]').length)))return!1;if("divider"===e.id&&t.closest(".start_divider"))return!1}return e.classList.contains("frm-new-field")?function(e,t){var r=e.classList,n=r.contains("frm_tbreak"),i=r.contains("frm_thidden"),o=r.contains("frm_tdivider"),a=r.contains("frm_tform"),l=r.contains("frm_tuser_id");return"frm-show-fields"===t.id||t.classList.contains("start_divider")?!(n||i||o||a)||(!(t.classList.contains("start_divider")||null!==t.closest(".start_divider"))||!a&&!o):!(ke(t)||i||n||l)}(e,t):function(e,t){if(Ee(e))return function(e,t){return!(!t.classList.contains("start_divider")||null!==e.querySelector(".start_divider"))}(e,t);if(e.classList.contains("edit_field_type_break"))return!1;if(t.classList.contains("start_divider"))return function(e){return!e.classList.contains("edit_field_type_form")&&!e.querySelector(".edit_field_type_form")&&!(e.classList.contains("edit_field_type_divider")||e.querySelector(".edit_field_type_divider"))}(e);var r=e.classList.contains("edit_field_type_hidden"),n=e.classList.contains("edit_field_type_user_id");return!r&&!n&&function(e,t){if(ke(t))return!1;if(jQuery(e).children("ul.frm_sorting").not(".start_divider").length>0)return!1;var r=e.classList.contains("edit_field_type_divider")||e.querySelector(".edit_field_type_divider"),n=e.classList.contains("edit_field_type_form");return null===t.closest(".start_divider")||!r&&!n}(e,t)}(e,t)}function xe(e){return e&&e.matches("#frm-show-fields > li:last-child")}function Ee(e){return e.classList.contains("frm_field_box")&&!e.classList.contains("form-field")}function ke(e){return null!==e.querySelector(".edit_field_type_break, .edit_field_type_hidden, .edit_field_type_user_id")}function Le(e){var t=document.getElementById(e),r=jQuery(t),n=[],i=function(e){var t=e.querySelector(".frm_hidden_fdata");e.classList.add("frm_load_now"),null!==t&&n.push(t.innerHTML)},o=t;i(o);for(var a=Se(o);a&&n.length<15;)i(a),o=a,a=Se(a);jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_load_field",field:n,form_id:k,nonce:frmGlobal.nonce},success:function(e){return function(e,t,r){var n,i;if(0===(e=e.replace(/^\s+|\s+$/g,"")).indexOf("{")){for(n in e=JSON.parse(e))jQuery("#frm_field_id_"+n).replaceWith(e[n]),V("#frm_field_id_"+n+".edit_field_type_divider ul.frm_sorting"),X(document.getElementById("frm_field_id_"+n));((i=t.nextAll(".frm_field_loading:not(.frm_load_now)")).length||(i=jQuery(document.getElementById("frm-show-fields")).find(".frm_field_loading:not(.frm_load_now)")).length)&&Le(i.attr("id")),lo(),Tr(),Be();var o=new Event("frm_ajax_loaded_field",{bubbles:!1});o.frmFields=r.map((function(e){return JSON.parse(e)})),document.dispatchEvent(o)}else jQuery(".frm_load_now").removeClass(".frm_load_now").html("Error")}(e,r,n)}})}function Se(e){var t;return e.nextElementSibling?e.nextElementSibling:null===(t=e.parentNode)||void 0===t||null===(t=t.closest(".frm_field_box"))||void 0===t||null===(t=t.nextElementSibling)||void 0===t?void 0:t.querySelector(".form-field")}function Ae(){var e=jQuery(this);if(e.hasClass("disabled"))return!1;var t=e.closest(".frmbutton").attr("id");if(!ge(t)){var r=0;"summary"===t&&(r=j.children('li[data-type="break"]').length>0?1:0);var n=k;return jQuery.ajax({type:"POST",url:ajaxurl,data:pe(t,0,n,r),success:function(e){Ie(e);var r=he(e);r&&wp.hooks.doAction("frm_after_field_added_in_form_builder",{field:e,fieldId:r,fieldType:t,form_id:n})},error:je}),!1}}function Ie(e){document.getElementById("frm_form_editor_container").classList.add("frm-has-fields");var t=$e(e),r=j[0].querySelector(".edit_field_type_submit");r?jQuery(r.closest(".frm_field_box:not(.form-field)")).before(t):j.append(t),Ue(e,!0),t.each((function(){K(this.querySelector("ul.frm_sorting")),X(this.querySelector(".form-field"),".frm-move")}))}function Be(){var e=!0,t=document.querySelectorAll(".frmjs_prod_field_opt_cont");j.find("li.edit_field_type_product").length>1&&(e=!1);for(var r=0;r<t.length;r++)e?t[r].classList.add("frm_hidden"):t[r].classList.remove("frm_hidden")}function Ce(){var e,t,r,n,i;if(e=jQuery(this).closest("li.form-field"),(n=this.getAttribute("frm-target-row-id"))&&n.startsWith("frm_field_group_")||function(e){if(e.classList.contains("frm-page-collapsed"))return!1;var t=e.closest("li.frm_field_box:not(.form-field)");return!t||ae(jQuery(t.querySelector("ul"))).length<6}(e.get(0)))return Te(),r=function(e){var t=[];return jQuery(document.getElementById("frm_field_id_"+e)).find("li.frm_field_box:not(.no_repeat_section .edit_field_type_end_divider)").each((function(){t.push(jQuery(this).data("fid"))})),t}(t=e.data("fid")),null!==n&&(i=this.getAttribute("frm-field-order")),jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_duplicate_field",field_id:t,form_id:k,children:r,nonce:frmGlobal.nonce},success:function(r){var o,a,l;if(null!==n&&null!==(a=document.getElementById(n)))return l=be(r),jQuery(a).append(l),X(l.get(0),".frm-move"),null!==i&&a.lastElementChild.setAttribute("frm-field-order",i),jQuery(a).trigger("frm_added_duplicated_field_to_row",{duplicatedFieldHtml:r,originalFieldId:t}),Ue(r,!1),void qe(e.get(0),l.get(0));e.siblings("li.form-field").length?(l=be(r),e.after(l),le(e),X(l.get(0),".frm-move")):(l=$e(r),e.parent().parent().after(l),K(l.get(0).querySelector("ul.frm_sorting")),X(l.get(0).querySelector("li.form-field"),".frm-move")),Qn(),Ue(r,!1),Ne(t,r),En(l.find(".start_divider")),null===(o=e[0].querySelector(".frm-dropdown-menu.dropdown-menu-right"))||void 0===o||o.classList.remove("show"),qe(e.get(0),l.get(0))}}),!1;H(C(B("You can only have a maximum of %1$d fields in a field group. Delete or move out a field from the group and try again.","formidable"),6))}function qe(e,t){var r,n=e.closest(".frm-field-group-hover-target");if(n&&Ee(n.parentElement)){var i=e.dataset.fid,o=null===(r=document.getElementById("frm_classes_"+i))||void 0===r?void 0:r.value;if(o&&(o=o.replace("frm_first",""),!t.className.includes(o))){t.className+=" "+o;var a=document.getElementById("frm_classes_"+t.dataset.fid);a&&(a.value=o)}}}function Ne(e,t){var r,n,i,o,a,l;null!==(r=document.getElementById("frm-single-settings-"+e))&&void 0!==(n=jQuery(t).attr("data-fid"))&&null!==(i=document.getElementById("frm-single-settings-"+n))&&(o=["name","required","unique","read_only","placeholder","description","size","max","format","prepend","append","separate_value"],r.querySelectorAll('input[name^="field_options["], textarea[name^="field_options["]').forEach((function(t){var r,a,l,s;(s=t.name.substr(14).split("_")).pop(),"options"!==(r=s.join("_"))?-1!==o.indexOf(r)&&(a=t.matches("input")?"input":"textarea",null!==(l=i.querySelector(a+'[name="field_options['+r+"_"+n+']"]'))&&("checkbox"===t.type?t.checked!==l.checked&&jQuery(l).trigger("click"):"text"!==t.type&&"textarea"!==a||t.value!==l.value&&(l.value=t.value,jQuery(l).trigger("change")))):function(e,t,r,n){var i,o;i="field_options[options_"+n+"]"+e.name.substr(23+(""+r).length),null!==(o=t.querySelector('input[name="'+i+'"]'))&&o.value!==e.value&&(o.value=e.value,jQuery(o).trigger("change"))}(t,i,e,n)})),null!==(a=r.querySelector('input[name="default_value_'+e+'"]'))&&null!==(l=i.querySelector('input[name="default_value_'+n+'"]'))&&a.value!==l.value&&(l.value=a.value,jQuery(l).trigger("change")))}function Te(){var e=document.querySelector(".frm-field-settings-open");null!==e&&(e.classList.remove("frm-field-settings-open"),jQuery(document).off("click","#frm_builder_page",Oe),jQuery(".frm-field-action-icons .dropdown.open").removeClass("open"))}function Oe(e){jQuery(e.originalEvent.target).closest(".frm-field-action-icons").length||Te()}function De(e){var t=!!(e.ctrlKey||e.metaKey||e.shiftKey);jQuery(D).toggleClass("frm-multiselect-key-is-down",t),function(e){var t,r,n;h.classList.contains("frm-dragging-field")||null===document.querySelector(".frm-field-group-hover-target .frm-field-settings-open")&&(null===(t=document.elementFromPoint(e.clientX,e.clientY))||t.classList.contains("edit_field_type_divider")||null===(r=t.closest("ul.frm_sorting"))||r.classList.contains("start_divider")||"frm-show-fields"===r.id||(!1===(n=Me())||jQuery(n).is(r)||cr(),se(jQuery(r),ae(jQuery(r)).length),r.classList.add("frm-field-group-hover-target"),jQuery("#wpbody-content").on("mousemove",Fe)))}(e)}function Me(){var e,t;return null!==(e=document.getElementById("frm_field_group_controls"))&&(e.style.display="none"),null!==(t=document.querySelector(".frm-field-group-hover-target"))&&(jQuery("#wpbody-content").off("mousemove",Fe),t.classList.remove("frm-field-group-hover-target"),t)}function Fe(e){var t=document.elementFromPoint(e.clientX,e.clientY);null!==t&&null!==t.closest("#frm-show-fields")||Me()}function He(e){gr(),setTimeout((function(){var t,r;if(null!==(t=document.querySelector(".dropdown.show .frm-dropdown-menu"))){null===t.getAttribute("aria-label")&&t.setAttribute("aria-label",B("More Options","formidable")),0===t.children.length&&function(e,t){var r,n;r=t?"_field_group":"_field",n=[Re(t),Ge(t)],t||n.push({class:"frm_select",icon:"frm_settings_icon",label:B("Field Settings","formidable")}),n.forEach((function(t){var n,i,o;(n=document.createElement("div")).classList.add("frm_more_options_li","dropdown-item"),(i=document.createElement("a")).classList.add(t.class+r),i.setAttribute("href","#"),zt(i),(o=document.createElement("span")).textContent=t.label,i.innerHTML='<svg class="frmsvg"><use xlink:href="#'+t.icon+'"></use></svg>',i.appendChild(document.createTextNode(" ")),i.appendChild(o),n.appendChild(i),e.appendChild(n)}))}(t,!0===e),(r=jQuery(t)).offset().left>jQuery(window).width()-r.outerWidth()&&(t.style.left=-r.outerWidth()+"px");var n=t.firstElementChild.querySelector("a");n&&n.focus()}}),0)}function Pe(){He(!0)}function ze(e){var t=e.target.closest(".frm-section-collapsed");t&&("show"===e.type?t.style.zIndex=3:t.style.zIndex=1)}function Re(e){var t={class:"frm_delete",icon:"frm_delete_icon"};return t.label=B(e?"Delete Group":"Delete","formidable"),t}function Ge(e){var t={class:"frm_clone",icon:"frm_clone_icon"};return t.label=B(e?"Duplicate Group":"Duplicate","formidable"),t}function $e(e){var t=d();"string"==typeof e?t.innerHTML=e:t.appendChild(e);var r=jQuery();return Array.from(t.children).forEach((function(e){r=r.add(jQuery("<li>").addClass("frm_field_box").html(jQuery("<ul>").addClass("frm_grid_container frm_sorting").append(e)))})),r}function We(e){var t=s("ul",{className:"frm_grid_container frm_sorting"}),r=s("li",{className:"frm_field_box",child:t});e.replaceWith(r),t.appendChild(e),K(t),X(r,".frm-move")}function Ue(e,t){var r,n,i=/id="(\S+)"/.exec(e),o=document.getElementById(i[1]),a="#"+i[1]+".edit_field_type_divider ul.frm_sorting.start_divider",l=jQuery(a),s=o.getAttribute("data-type");r=e,(n=d()).innerHTML=r,n.querySelectorAll(".form-field").forEach(Ve);var c,f,u=!1;if(Mi(),V(a),"quantity"===s&&function(e){var t=e.getAttribute("data-fid"),r=document.getElementById("field_options[product_field_"+t+"]");null!==r&&(rt(r),ii(document.getElementById("frm-single-settings-"+t)))}(o),"product"!==s&&"quantity"!==s||Be(),l.length)l.parent(".frm_field_box").children(".frm_no_section_fields").addClass("frm_block");else{var m=jQuery(o).closest("ul.frm_sorting.start_divider");m.length&&(En(m),u=!0)}if(-1!==e.indexOf("frm-collapse-page")&&Tr(),f="frm-newly-added",(c=o).classList?c.classList.add(f):c.className+=" "+f,setTimeout((function(){o.classList.remove("frm-newly-added")}),1e3),t){var _=o.getBoundingClientRect(),p=document.getElementById("post-body-content");_.top>=0&&_.left>=0&&_.right<=(window.innerWidth||document.documentElement.clientWidth)&&_.bottom<=(window.innerHeight||document.documentElement.clientHeight)||p.scroll({top:p.scrollHeight,left:0,behavior:"smooth"}),!1===u&&En(l)}Je(),lo(),document.getElementById("frm-show-fields").classList.remove("frm-over-droppable");var g=new Event("frm_added_field",{bubbles:!1});g.frmField=o,g.frmSection=a,g.frmType=s,g.frmToggles=u,document.dispatchEvent(g)}function Ve(e){if(e.dataset.fid){var t=document.getElementById("draft_fields");t&&(""===t.value?t.value=e.dataset.fid:t.value.split(",").includes(e.dataset.fid)||(t.value+=","+e.dataset.fid))}}function Ke(e){jQuery("#new_fields .frm-single-settings").addClass("frm_hidden"),jQuery("#frm-options-panel > .frm-single-settings").removeClass("frm_hidden"),Je(e)}function Je(e){jQuery("li.ui-state-default.selected").removeClass("selected"),jQuery(".frm-show-field-settings.selected").removeClass("selected"),e||gr()}function Ye(){var e=this.value,t=function(e){var t,r=[],n=e.split(""),i=n.length,o=["{","[","("],l={"}":"{",")":"(","]":"["},s=[];for(t=0;t<i;t++)o.includes(n[t])?r.push(n[t]):l.hasOwnProperty(n[t])&&r.pop()!==l[n[t]]&&s.push(n[t]);return r.length>0||s.length>0?a.unmatched_parens+"\n\n":""}(e);t+=function(e,t){var r=function(e,t){var r="";return function(e){return jQuery(e).siblings('label[for^="calc_type"]').children("input").prop("checked")}(t)||/\[(date|time|email|ip)\]/.test(e)&&(r=a.text_shortcodes+"\n\n"),r}(e,t);return r+=function(e){var t="";return/\[id\]|\[key\]|\[if\s\w+\]|\[foreach\s\w+\]|\[created-at(\s*)?/g.test(e)&&(t+=a.view_shortcodes+"\n\n"),t}(e)}(e,this),""!==t&&H(e+"\n\n"+t)}function Xe(e,t){for(var r,n,i,o=!1,a=0;a<t.length;a++){var l=document.getElementsByName((r=t[a],n=e.fieldId,void 0,i=r.indexOf("]"),"field_options"+r.substring(0,i)+"_"+n+r.substring(i)));if(l.length&&jQuery(l[0]).val()){o=!0;break}}return o}function Ze(e,t){var r,n,i,o,a=jQuery(e).closest(".frm-single-settings"),l=a.find(".frm-calc-field");if(t||l.length&&""!==l.val()&&!l.is(":hidden")){var s=function(e){var t=jQuery(e).find(".frm_code_list");return 1===t.length&&t.hasClass("frm_js_summary_list")}(e),d=a.find('input[name="frm_fields_submitted[]"]').val();r=function(e,t){var r=e.querySelector(".frm_code_list"),n=JSON.parse(r.getAttribute("data-exclude"));if(t){var i=function(){for(var e=[],t=document.getElementsByClassName("frm_include_extras_field"),r=0;r<t.length;r++)t[r].checked&&e.push(t[r].value);return e}();if(i.length)for(var o=0;o<n.length;o++)i.includes(n[o])&&(n.splice(o,1),o--)}return n}(t?e:document.getElementById("frm-calc-box-"+d),s);var f=function(e){var t=[];if(!Array.isArray(e))return t;for(var r=0;r<e.length;r++)e[r].startsWith("[")&&(t.push(e[r]),e.splice(r,1),r--);return t}(r);for(n=tt(),(o=document.getElementById("frm-calc-list-"+d)).innerHTML="",i=0;i<n.length;i++)if(!(r&&r.includes(n[i].fieldType)||f.length&&Xe(n[i],f))){var u=document.createElement("a");u.setAttribute("href","#"),u.setAttribute("data-code",n[i].fieldId),u.classList.add("frm_insert_code"),u.appendChild(c(n[i].fieldName)),u.appendChild(c({className:"frm-text-sm frm-text-grey-500",text:"["+n[i].fieldId+"]"}));var m=document.createElement("li");m.classList.add("frm-field-list-"+d),m.classList.add("frm-field-list-"+n[i].fieldType),m.appendChild(u),o.appendChild(m)}}}function et(){Ze(jQuery(".frm-inline-modal.postbox:has(.frm_js_summary_list)")[0],!0)}function tt(e){var t,r=[],n=document.querySelectorAll("li.frm_field_box"),i=void 0!==e;for(t=0;t<n.length;t++)if(!i||n[t].getAttribute("data-ftype")===e){var o=n[t].getAttribute("data-fid");void 0!==o&&o&&r.push({fieldId:o,fieldName:it("frm_name_"+o),fieldType:it("field_options_type_"+o),fieldKey:it("field_options_field_key_"+o)})}return wp.hooks.applyFilters("frm_admin_get_field_list",r,e,n)}function rt(e){var t,r,n,i=[],o=function(e){for(var t=e.querySelectorAll('[type="checkbox"]:checked'),r=[],n=0;n<t.length;n++)r.push(t[n].value);return r}(e),a=e.getAttribute("data-frmfname"),l=tt("product"),s=tt("quantity"),d="SELECT"===e.tagName,c=1===s.length&&1===l.length;for(d&&(o=e.getAttribute("data-frmcurrent")),t=0;t<l.length;t++)n=l[t].fieldId.toString(),r=c||-1!==o.indexOf(n),d?(r=r?" selected":"",i.push('<option value="'+n+'"'+r+">"+l[t].fieldName+"</option>")):(r=r?" checked":"",i.push('<label class="frm6">'),i.push('<input type="checkbox" name="'+a+'" value="'+n+'"'+r+"> "+l[t].fieldName),i.push("</label>"));e.innerHTML=i.join("")}function nt(){for(var e=document.querySelectorAll(".frmjs_prod_field_opt"),t=0;t<e.length;t++)rt(e[t])}function it(e){var t=document.getElementById(e);return null!==t?t.value:""}function ot(){var e,t,r=this.value,n=document.getElementById(this.getAttribute("data-changeme")),i=this.getAttribute("data-changeatt");null!==n&&(null!==i?"SELECT"===n.tagName&&"placeholder"===i?""===(e=n.options[0]).value?e.innerHTML=r:dn(n,r):"class"===i?function(e,t){var r,n,i,o=" "+t.value,a=e.getAttribute("data-fid");void 0!==a&&(t.classList.contains("field_options_align")?o+=" "+document.getElementById("frm_classes_"+a).value:t.classList.contains("frm_classes")&&null!==(i=document.getElementById("field_options_align_"+a))&&(o+=" "+i.value)),o=(o+=" ").replace(" block "," ").replace(" inline "," horizontal_radio "),""===(r=0===(r=e.className.split(" frmstart ")[1]).indexOf("frmend ")?"":r.split(" frmend ")[0]).trim()?(n=" frmstart  frmend ",-1===e.className.indexOf(n)&&(n=" frmstart frmend "),o=" frmstart "+o.trim()+" frmend "):(n=r.trim(),o=o.trim()),e.className=e.className.replace(n,o)}(n,this):"range"===(t=n).type&&t.parentNode.classList.contains("frm_range_container")?function(e,t,r){if(frmGlobal.proIncludesSliderJs){var n={field:e,att:t,newValue:r};wp.hooks.doAction("frm_update_slider_field_preview",n)}else{var i;if("value"===t?(""===r&&(r=at(e)),e.value=r):e.setAttribute(t,r),-1!==["value","min","max"].indexOf(t))"max"!==t&&"min"!==t||""!==(i=e.id,document.querySelector('input[data-changeme="'+i+'"][data-changeatt="value"]').value)||(e.value=at(e)),e.parentNode.querySelector(".frm_range_value").textContent=e.value}}(n,i,r):n.setAttribute(i,r):0===n.id.indexOf("setup-message")?""!==r&&(n.innerHTML='<input type="text" value="" disabled />'):(n.innerHTML=mn(r),"TEXTAREA"===n.nodeName&&n.classList.contains("wp-editor-area")&&jQuery(n).trigger("change"),n.classList.contains("frm_primary_label")&&"break"===n.nextElementSibling.getAttribute("data-ftype")&&(n.nextElementSibling.querySelector(".frm_button_submit").textContent=r)))}function at(e){var t=parseFloat(e.getAttribute("max")),r=parseFloat(e.getAttribute("min"));return(t-r)/2+r}function lt(){var e,t=this.getAttribute("data-fid"),r="";["field_options_max_","frm_format_"].forEach((function(e){var n=document.getElementById(e+t);n&&(r+=n.value)})),"text"===(e=document.getElementsByName("field_options[type_"+t+"]")[0]).options[e.selectedIndex].value&&dt(""!==r,".frm_invalid_msg"+t)}function st(){var e=this.id.replace("frm_","").replace("req_field_",""),t=this.checked,r=jQuery("#field_label_"+e+" .frm_required");if(dt(t,".frm_required_details"+e),t){var n=jQuery('input[name="field_options[required_indicator_'+e+']"]');""===n.val()&&n.val("*"),r.removeClass("frm_hidden")}else r.addClass("frm_hidden")}function dt(e,t){if($msg=jQuery(t),e)$msg.fadeIn("fast").closest(".frm_validation_msg").fadeIn("fast");else{var r=$msg.fadeOut("fast").closest(".frm_validation_box"),n=r.css("display","block").children(":not("+t+"):visible").length;r.css("display",""),0===n&&$msg.closest(".frm_validation_msg").fadeOut("fast")}}function ct(){var e=jQuery(this).closest(".frm-single-settings").data("fid"),t=jQuery(".frm_unique_details"+e);if(this.checked)t.fadeIn("fast").closest(".frm_validation_msg").fadeIn("fast"),$unqDetail=jQuery(".frm_unique_details"+e+" input"),""===$unqDetail.val()&&$unqDetail.val(a.default_unique);else{var r=t.fadeOut("fast").closest(".frm_validation_box"),n=r.css("display","block").children(":not(.frm_unique_details"+e+"):visible").length;r.css("display",""),0===n&&t.closest(".frm_validation_msg").fadeOut("fast")}}function ft(){var e=jQuery(this).closest(".frm-single-settings").data("fid"),t=jQuery(this).val(),r=jQuery(document.getElementById("frm_field_id_"+e));if(dt(""!==t,".frm_conf_details"+e),""!==t){var n=jQuery(".frm_validation_box .frm_conf_details"+e+" input");""===n.val()&&n.val(a.default_conf),function(e){var t=document.getElementsByName("field_options[type_"+e+"]")[0].value;ut(document.getElementById("field_description_"+e),"field_options[description_"+e+"]",a["enter_"+t]),ut(document.getElementById("conf_field_description_"+e),"field_options[conf_desc_"+e+"]",a["confirm_"+t])}(e),"inline"===t?r.removeClass("frm_conf_below").addClass("frm_conf_inline"):"below"===t&&r.removeClass("frm_conf_inline").addClass("frm_conf_below"),jQuery(".frm-conf-box-"+e).removeClass("frm_hidden")}else jQuery(".frm-conf-box-"+e).addClass("frm_hidden"),setTimeout((function(){r.removeClass("frm_conf_inline frm_conf_below")}),200)}function ut(e,t,r){e.innerHTML===a.desc&&(e.innerHTML=r,document.getElementsByName(t)[0].value=r)}function mt(e){var t=JSON.parse(this.getAttribute("data-opts"));return e.preventDefault(),document.getElementById("frm_bulk_options").value=t.join("\n"),!1}function _t(){var e,t=jQuery(this).closest(".frm-single-settings").data("fid"),r=jQuery("#frm_field_"+t+"_opts .frm_option_template").prop("outerHTML"),n=jQuery(this).data("opttype"),i=0,o=function(e){for(var t=0,r=0,n=jQuery("#frm_field_"+e+"_opts li"),i=0;t<n.length;t++){if(r=n[t].getAttribute("data-optkey"),1===n.length)return r;"000"!==r&&(r=r.replace("other_",""),r=parseInt(r,10)),!isNaN(i)&&(r>i||"000"===i)&&(i=r)}return i}(t);if("000"!==o&&(i=o+1),"other"===n){document.getElementById("other_input_"+t).value=1;var a=jQuery(this).data("ftype");"radio"!==a&&"select"!==a||jQuery(this).fadeOut("slow");var l={action:"frm_add_field_option",field_id:t,opt_key:i,opt_type:n,nonce:frmGlobal.nonce};jQuery.post(ajaxurl,l,(function(e){jQuery(document.getElementById("frm_field_"+t+"_opts")).append(e),rn(t)}))}else r=(r=(r=(r=(r=r.replace(new RegExp('optkey="000"',"g"),'optkey="'+i+'"')).replace(new RegExp("-000_","g"),"-"+i+"_")).replace(new RegExp('-000"',"g"),"-"+i+'"')).replace(new RegExp("\\[000\\]","g"),"["+i+"]")).replace("frm_hidden frm_option_template",""),zo(t,r={newOption:r}),this.closest(".frm_single_option").after(r.newOption),rn(t);null===(e=this.closest(".frm_sortable_field_opts"))||void 0===e||null===(e=e.querySelectorAll(".frm_remove_tag.frm_disabled"))||void 0===e||e.forEach((function(e){return e.classList.remove("frm_disabled")})),Mi()}function pt(){gt(jQuery(this).closest(".frm-single-settings").data("fid"),this.value)}function gt(e,t){var r=jQuery(".frm_multiple_cont_"+e);"select"===t?r.fadeIn("fast"):r.fadeOut("fast")}function yt(){var e=jQuery(this).closest(".frm-single-settings").data("fid");Oo(jQuery(".field_"+e+"_option_key")),jQuery(".field_"+e+"_option").toggleClass("frm_with_key")}function ht(){var e,t,r=jQuery(this).closest(".frm-single-settings"),n=r.data("fid"),i=document.getElementById("frm_field_id_"+n);wt(jQuery(this)),Oo(jQuery(".field_"+n+"_image_id")),Oo(jQuery(".frm_toggle_image_options_"+n)),Oo(jQuery(".frm_image_size_"+n)),Oo(jQuery(".frm_alignment_"+n)),Oo(jQuery(".frm-add-other#frm_add_field_"+n)),(e=gn(n))?(bt(n,"inline"),vt(i),t=tn(n),i.classList.add("frm_image_options"),i.classList.add("frm_image_size_"+t),r.find(".frm-bulk-edit-link").hide()):(i.classList.remove("frm_image_options"),vt(i),bt(n,"block"),r.find(".frm-bulk-edit-link").show()),wp.hooks.doAction("frm_image_options_toggled",r[0],e)}function vt(e){e.classList.remove("frm_image_size_","frm_image_size_small","frm_image_size_medium","frm_image_size_large","frm_image_size_xlarge")}function bt(e,t){jQuery("#field_options_align_"+e).val(t).trigger("change")}function jt(){var e=jQuery(this).closest(".frm-single-settings").data("fid"),t=document.getElementById("frm_field_id_"+e);Qt(),gn(e)&&(vt(t),t.classList.add("frm_image_options"),t.classList.add("frm_image_size_"+tn(e)))}function wt(e){var t=e.closest(".frm-single-settings").data("fid");jQuery(".field_"+t+"_option").trigger("change")}function Qt(){wt(jQuery(this))}function xt(e){var t=e.target.closest(".frm_image_preview_wrapper");e.preventDefault(),wp.media.model.settings.post.id=0;var r=wp.media.frames.file_frame=wp.media({multiple:!1,library:{type:["image"]}});r.on("select",(function(){var e=r.state().get("selection").first().toJSON(),n=t.querySelector("img");n.setAttribute("src",e.url),n.classList.remove("frm_hidden"),n.removeAttribute("srcset"),t.querySelector(".frm_image_preview_frame").style.display="block",t.querySelector(".frm_image_preview_title").textContent=e.filename,t.querySelector(".frm_choose_image_box").style.display="none";var i=jQuery(t);i.siblings('input[name*="[label]"]').data("frmimgurl",e.url),i.find("input.frm_image_id").val(e.id).trigger("change"),wp.media.model.settings.post.id=0})),r.open()}function Et(e){var t=jQuery(this).closest(".frm_image_preview_wrapper");e.preventDefault(),e.stopPropagation(),t.find("img").attr("src",""),t.find(".frm_image_preview_frame").hide(),t.find(".frm_choose_image_box").show(),t.find("input.frm_image_id").val(0).trigger("change")}function kt(){var e=jQuery(this).closest("li").find(".frm_form_fields select");this.checked?e.attr("multiple","multiple"):e.removeAttr("multiple")}function Lt(){var e=document.getElementById("dropform-search-input");null!==e&&setTimeout((function(){e.focus()}),100)}function St(e){var t=e.target,r=t.closest(".frm_warning_style");jQuery(r).fadeOut(400,(function(){return r.remove()}));var n=t.dataset.action,i=new FormData;g(n,i)}function At(e){e.preventDefault()}function It(){var e,t=this.parentNode,r=t.parentNode,n=r.querySelectorAll("li:not(.frm_hidden)");2===n.length&&(null===(e=Array.from(n).find((function(e){return e!==t})).querySelector(".frm_remove_tag"))||void 0===e||e.classList.add("frm_disabled"));var i,o=this.getAttribute("data-fid");jQuery(t).fadeOut("fast",(function(){wp.hooks.doAction("frm_before_delete_field_option",this),jQuery(t).remove(),jQuery(r).find(".frm_other_option").length<1&&(null!==(i=document.getElementById("other_input_"+o))&&(i.value=0),jQuery("#other_button_"+o).fadeIn("fast"))})),Mi()}function Bt(){var e,t,r,n;(e=jQuery(this)).is(":checked")&&(t=function(){setTimeout((function(){e.prop("checked",!1)}),0)},r=function(){e.off("mouseup",n)},n=function(){t(),r()},e.on("mouseup",n),e.one("mouseout",r))}function Ct(){this.value===a.new_option&&(this.setAttribute("data-value-on-focus",this.value),this.value="")}function qt(e){return C(B("Are you sure you want to delete these %1$s selected field(s)?","formidable"),e)}function Nt(){var e=a.conf_delete,t=this.parentNode.parentNode.parentNode.parentNode.parentNode,r=t.parentNode,n=jQuery(this).closest("li.form-field"),i=n.data("fid");if("divider"===n.data("ftype")){var o=document.querySelectorAll(".frm-field-group-hover-target .start_divider .frm_field_box"),l=0;o.forEach((function(e){var t=e.querySelectorAll("li.form-field");t&&(l+=t.length)})),l&&(e=qt(++l))}return r.classList.contains("frm-section-collapsed")||r.classList.contains("frm-page-collapsed")||("divider_section_only"===t.className&&(e=a.conf_delete_sec),this.setAttribute("data-frmverify",e),this.setAttribute("data-frmverify-btn","frm-button-red"),this.setAttribute("data-deletefield",i),Te(),F(this)),!1}function Tt(){this.closest("li.form-field").click()}function Ot(){var e,t;null!==(e=document.querySelector(".frm-field-group-hover-target"))&&(e.classList.add("frm-selected-field-group"),(t=document.createElement("div")).classList.add("frm-delete-field-groups","frm_hidden"),document.body.appendChild(t),t.click())}function Dt(){var e=document.querySelector(".frm-field-group-hover-target");if(null!==e){var t="frm_field_group_"+we(),r=document.createTextNode("");We(r);var n=jQuery(r).closest("li").get(0);n.classList.add("frm_hidden");var i=n.querySelector("ul");i.id=t,jQuery(e.closest("li.frm_field_box")).after(n);var o=ae(jQuery(e)),a=[],l=[],s=o.length,d={},c=0;jQuery(n).on("frm_added_duplicated_field_to_row",(function(e,t){if(d[jQuery(t.duplicatedFieldHtml).attr("data-fid")]=t.originalFieldId,!(s>++c)){var r=jQuery(i),o=ae(r);l.forEach((function(e){e.remove()}));for(var f=0;f<s;++f)r.append(r.children('li.form-field[frm-field-order="'+f+'"]'));le(o.first(),a),n.classList.remove("frm_hidden"),Qn(),ae(r).each((function(){Ne(d[this.getAttribute("data-fid")],jQuery(this).prop("outerHTML"))}))}})),o.each((function(e){var r;(r=document.createElement("li")).classList.add("frm_clone_field"),r.setAttribute("frm-target-row-id",t),r.setAttribute("frm-field-order",e),this.appendChild(r),r.click(),l.push(r),a.push(ir(or(this.classList)))}))}}function Mt(){var e,t,r;if(null!==(e=document.querySelector(".frm-field-group-hover-target"))){Je(),t=Ht(e.querySelector("li.form-field")),e.classList.add("frm-has-open-field-group-popup"),jQuery(document).on("click","#frm_builder_page",Ft),(r=d()).style.position="relative",r.appendChild(Pt(t,this)),this.parentNode.appendChild(r);var n=r.querySelector(".frm-row-layout-option");n&&n.focus()}}function Ft(e){e.target.classList.contains("frm-custom-field-group-layout")||e.target.classList.contains("frm-cancel-custom-field-group-layout")||jQuery(e.target).closest("#frm_field_group_controls").length||jQuery(e.target).closest("#frm_field_group_popup").length||cr()}function Ht(e){var t=jQuery(e).closest("ul");return t.length?ae(t).length:br()}function Pt(e,t){var r,n,i,o,a,l;return null===(r=document.getElementById("frm_field_group_popup"))?r=d():r.innerHTML="",r.id="frm_field_group_popup",(n=d()).style.padding="0 24px 12px",n.appendChild(((a=d()).classList.add("frm-row-layout-title"),a.textContent=B("Row Layout","formidable"),a)),i=function(e){var t,r;return t=Jt(),5!==e&&t.appendChild(Gt(e,"even")),e%2==1&&t.appendChild(Gt(e,"middle")),e<6?(t.appendChild(Gt(e,"left")),t.appendChild(Gt(e,"right"))):((r=d()).classList.add("frm_fourth"),t.prepend(r)),t}(e),null!==(o=t.closest("ul.frm_sorting"))&&function(e,t){var r,n,i,o,a;for(r=t.children.length,n=0;n<r;++n)if(o=i=t.children[n],a=e,$t(o)===$t(a))return void i.classList.add("frm-active-row-layout")}(o,i),n.appendChild(i),r.appendChild(n),r.appendChild(document.createElement("hr")),r.appendChild(((l=d()).textContent=B("Custom layout","formidable"),jQuery(l).prepend(Rt("frm_gear_svg")),l.classList.add("frm-custom-field-group-layout"),zt(l),l)),r.appendChild(function(){var e=d();return e.textContent=B("Break into rows","formidable"),jQuery(e).prepend(Rt("frm_break_field_group_svg")),e.classList.add("frm-break-field-group"),zt(e),e}()),r}function zt(e,t){e.setAttribute("tabindex",0),e.setAttribute("role","button"),void 0!==t&&e.setAttribute("aria-label",t)}function Rt(e){var t=document.getElementById(e).cloneNode(!0);return t.id="",t}function Gt(e,t){var r,n;switch((r=d()).classList.add("frm-row-layout-option"),zt(r,t),e){case 6:n="frm_half";break;case 5:n="frm_third";break;default:n=e%2==1?"frm_fourth":"frm_third"}return r.classList.add(n),r.setAttribute("layout-type",t),r.appendChild(function(e,t){var r,n,i;for(r=Jt(),n=0;n<e;++n)(i=d()).classList.add(Wt(e,t,n)),i.style.height="16px",i.style.background="#9EA9B8",i.style.borderRadius="1px",r.appendChild(i);return r}(e,t)),r}function $t(e){var t,r;return t=e.classList.contains("frm-row-layout-option")?jQuery(e).find(".frm_grid_container").children():ae(jQuery(e)),r=[],t.each((function(){r.push(ir(or(this.classList)))})),r.join("-")}function Wt(e,t,r){if("even"===t)return Ut(e,r);if("middle"===t){if(3===e)return 1===r?"frm6":"frm3";if(5===e)return 2===r?"frm4":"frm2"}else{if("left"===t)return 0===r?Kt(e):Vt(e);if("right"===t)return r===e-1?Kt(e):Vt(e)}return"frm12"}function Ut(e,t){return-1!==[2,3,4,6].indexOf(e)?ar(12/e):5===e&&void 0!==t?0===t?"frm4":"frm2":"frm12"}function Vt(e){switch(e){case 2:case 3:return"frm3";case 4:case 5:return"frm2";case 6:return"frm1"}return"frm12"}function Kt(e){switch(e){case 2:return"frm9";case 3:case 4:return"frm6";case 5:return"frm4";case 6:return"frm7"}return"frm12"}function Jt(){var e=d();return e.classList.add("frm_grid_container"),e}function Yt(){var e=document.querySelector(".frm-field-group-hover-target");if(e){var t=this.getAttribute("layout-type");le(ae(jQuery(e)).first(),t),cr()}}function Xt(){var e,t;e=Zt(),t=this.getAttribute("layout-type"),le(ae(e).first(),t),gr()}function Zt(){var e=jQuery(".frm-selected-field-group"),t=e.first();return e.not(t).each((function(){ae(jQuery(this)).each((function(){var e=this.parentNode;ae(t).last().after(this),jQuery(e).children("li.form-field").length||e.closest("li.frm_field_box").remove()}))})),Qn(),le(ae(t).first()),t}function er(){null===this.closest(".frm-merge-fields-into-row")&&tr(ae(jQuery(".frm-field-group-hover-target")))}function tr(e){var t,r,n,i,o,a,l,s,c,f,u,m,_,p,g;for(t=e.length,(r=document.getElementById("frm_field_group_popup")).innerHTML="",(n=d()).style.padding="0 24px",i=Ut(5===t?6:t),(o=d()).style.padding="20px 0",o.classList.add("frm_grid_container"),5===t&&((a=document.createElement("span")).classList.add("frm1"),o.appendChild(a)),!1!==(l=br()>0&&ir(Ut(t)))&&l>=12&&(l=Math.floor(12/t)),s=0;s<t;++s)(c=document.createElement("input")).type="text",c.classList.add(i),c.classList.add("frm-custom-grid-size-input"),c.value=!1!==l?l:ir(or(e.get(s).classList)),o.appendChild(c);(f=d()).classList.add("frm-builder-popup-heading"),f.textContent=B("Enter number of columns for each field","formidable"),(u=d()).classList.add("frm-builder-popup-subheading"),u.textContent=B("Layouts are based on a 12-column grid system","formidable"),n.appendChild(f),n.appendChild(u),n.appendChild(o),(m=d()).style.textAlign="right",(g=nr()).classList.add("button-secondary","frm-button-secondary"),(_=g).textContent=B("Cancel","formidable"),_.classList.add("frm-cancel-custom-field-group-layout"),_.style.marginRight="10px",p=function(){var e=nr();return e.classList.add("button-primary","frm-button-primary"),e}(),p.textContent=B("Save","formidable"),p.classList.add("frm-save-custom-field-group-layout"),m.appendChild(_),m.appendChild(p),n.appendChild(m),r.appendChild(n),setTimeout((function(){var e=r.querySelector("input.frm-custom-grid-size-input").focus();e&&e.focus()}),0)}function rr(){$fields=jQuery(".frm-selected-field-group li.form-field"),tr($fields)}function nr(){var e=document.createElement("a");return e.setAttribute("href","#"),e.classList.add("button"),e.style.textDecoration="none",e}function ir(e){switch(e){case"frm_half":return 6;case"frm_third":return 4;case"frm_two_thirds":return 8;case"frm_fourth":return 3;case"frm_three_fourths":return 9;case"frm_sixth":return 2}return 0===e.indexOf("frm")?parseInt(e.substr(3)):12}function or(e){var t,r,n;for(t=["frm_full","frm_half","frm_third","frm_fourth","frm_sixth","frm_two_thirds","frm_three_fourths","frm1","frm2","frm3","frm4","frm5","frm6","frm7","frm8","frm9","frm10","frm11","frm12"],r=0;r<t.length;++r)if(n=t[r],e.contains(n))return n;return""}function ar(e){return"frm"+e}function lr(){var e,t;e=document.querySelector(".frm-field-group-hover-target"),ae(t=jQuery(e)).each((function(e){0!==e&&t.parent().after($e(this)),function(e){le(e,"clear")}(jQuery(this))})),cr()}function sr(){this.select()}function dr(){jQuery(document.getElementById("frm_field_group_popup")).replaceWith(Pt(Ht(this),this))}function cr(){var e,t;null!==(e=document.getElementById("frm_field_group_popup"))&&(null!==(t=document.querySelector(".frm-has-open-field-group-popup"))&&(t.classList.remove("frm-has-open-field-group-popup"),e.parentNode.remove()),jQuery(document).off("click","#frm_builder_page",Ft))}function fr(){var e,t;e=[],jQuery(document.getElementById("frm_field_group_popup").querySelectorAll(".frm_grid_container input")).each((function(){e.push(parseInt(this.value))})),(t=jQuery(document.getElementById("frm_field_group_controls"))).length&&"none"!==t.get(0).style.display?le(ae(jQuery(document.querySelector(".frm-field-group-hover-target"))).first(),e):(le(ae(Zt()).first(),e),gr()),cr()}function ur(e){if(function(){var e=document.getElementById("frm-field-group-message");if(document.querySelectorAll(".edit_form_item:not(.edit_field_type_end_divider)").length<2)mr(e);else if(e)!function(e){e&&(e.classList.remove("frm_hidden"),e.classList.add("frm-fadein-up-back"))}(e);else{e=d({id:"frm-field-group-message",className:"frm-flex-center frm-fadein-up-back",children:[c({id:"frm-field-group-message-dismiss",className:"frm-flex-center",child:u({href:"#frm_close_icon"})})]}),document.getElementById("post-body-content").appendChild(e);var t,r=((t=document.createElement("span")).classList.add("frm-field-group-message-text","frm-flex-center"),t.innerHTML=C(frm_admin_js.holdShiftMsg,'<span class="frm-meta-tag frm-flex-center"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shift" viewBox="0 0 16 16"><path d="M7.3 2a1 1 0 0 1 1.4 0l6.4 6.8a1 1 0 0 1-.8 1.7h-2.8v3a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-3H1.7a1 1 0 0 1-.8-1.7L7.3 2zm7 7.5L8 2.7 1.7 9.5h2.8a1 1 0 0 1 1 1v3h5v-3a1 1 0 0 1 1-1h2.8z"/></svg>',"</span>"),t);e.prepend(r),document.getElementById("frm-field-group-message-dismiss").addEventListener("click",(function(){mr(document.getElementById("frm-field-group-message"))}))}}(),"ul"===e.originalEvent.target.nodeName.toLowerCase()){var t=document.querySelector(".frm-field-group-hover-target");if(t){var r=e.ctrlKey||e.metaKey,n=e.shiftKey,i=t.classList.contains("frm-selected-field-group"),o=function(){var e=jQuery(".frm-selected-field-group");if(e.length)return e;var t=_r();if(t){var r=t.closest("ul");if(r&&1===ae(jQuery(r)).length)return r.classList.add("frm-selected-field-group"),jQuery(r)}return jQuery()}(),a=o.length;if(r||n){var l=_r();if(null===l||jQuery(l).siblings("li.form-field").length||(l.parentNode.classList.add("frm-selected-field-group"),++a),r){if(i)return--a,t.classList.remove("frm-selected-field-group"),void pr(a);++a}else if(n&&!i){++a;var s=o.first();(s.parent().index()<jQuery(t.parentNode).index()?s.parent().nextUntil(t.parentNode):s.parent().prevUntil(t.parentNode)).each((function(){var e=jQuery(this).closest("li").find("ul.frm_sorting");e.hasClass("frm-selected-field-group")||(++a,e.addClass("frm-selected-field-group"))}))}}else gr(),a=1;t.classList.add("frm-selected-field-group"),pr(a),document.querySelectorAll(".frm-selected-field-group").length<2||mr(document.getElementById("frm-field-group-message")),jQuery(document).off("click",gr),jQuery(document).on("click",gr)}}}function mr(e){e&&(e.classList.add("frm_hidden"),e.classList.remove("frm-fadein-up-back"))}function _r(){return document.getElementById("frm-show-fields").querySelector("li.form-field.selected")}function pr(e){Ke(!0),e>=2||1===e&&ae(jQuery(document.querySelector(".frm-selected-field-group"))).length>1?function(){var e,t,r,n,i;if(null!==(e=document.getElementById("frm_field_multiselect_popup")))return e.classList.toggle("frm-unmergable",!hr()),e;(e=d()).id="frm_field_multiselect_popup",hr()||e.classList.add("frm-unmergable"),(t=d()).classList.add("frm-merge-fields-into-row"),t.textContent=B("Merge into row","formidable"),(r=document.createElement("a")).style.marginLeft="5px",r.classList.add("frm_icon_font","frm_arrowdown6_icon"),r.setAttribute("href","#"),t.appendChild(r),e.appendChild(t),(n=d()).classList.add("frm-multiselect-popup-separator"),e.appendChild(n),(i=d()).classList.add("frm-delete-field-groups"),i.appendChild(Rt("frm_trash_svg")),e.appendChild(i),document.getElementById("post-body-content").appendChild(e),jQuery(e).hide().fadeIn()}():yr(),Me()}function gr(e){if(void 0!==e){if(null!==e.originalEvent.target.closest("#frm-show-fields"))return;if(e.originalEvent.target.classList.contains("frm-merge-fields-into-row"))return;if(null!==e.originalEvent.target.closest(".frm-merge-fields-into-row"))return;if(e.originalEvent.target.classList.contains("frm-custom-field-group-layout"))return;if(e.originalEvent.target.classList.contains("frm-cancel-custom-field-group-layout"))return}jQuery(".frm-selected-field-group").removeClass("frm-selected-field-group"),jQuery(document).off("click",gr),yr()}function yr(){var e=document.getElementById("frm_field_multiselect_popup");null!==e&&e.remove()}function hr(){var e,t,r,n,i;if(1===(r=(e=document.querySelectorAll(".frm-selected-field-group")).length))return!1;for(t=0,n=0;n<r;++n){if(null!==(i=e[n]).querySelector(".edit_field_type_break, .edit_field_type_hidden"))return!1;if((t+=ae(jQuery(i)).length)>6)return!1}return!0}function vr(e){var t;null===e.originalEvent.target.closest("#frm_field_group_popup")&&(e.originalEvent.target.classList.contains("frm-custom-field-group-layout")||(t=Pt(br(),document.querySelector(".frm-selected-field-group").firstChild),this.appendChild(t)))}function br(){var e=0;return jQuery(document.querySelectorAll(".frm-selected-field-group")).each((function(){e+=ae(jQuery(this)).length})),e}function jr(){var e,t,r,n;n=[],jQuery(".frm-selected-field-group > li.form-field").each((function(){n.push(this.dataset.fid)})),t=function(e){return function(t){t.preventDefault(),function(e){e.forEach((function(e){Qr(e)}))}(e)}}(e=n),null!==(r=document.getElementById("frm_field_multiselect_popup"))&&r.remove(),this.setAttribute("data-frmverify",qt(e.length)),F(this);var i=document.getElementById("frm-confirmed-click");null==i||i.removeAttribute("data-deletefield"),jQuery(i).on("click",t),jQuery("#frm_confirm_modal").one("dialogclose",(function(){jQuery(i).off("click",t)}))}function wr(){Qr(this.getAttribute("data-deletefield"))}function Qr(e){var t=jQuery("#frm_field_id_"+e);xr(e),t.hasClass("edit_field_type_divider")&&t.find("li.frm_field_box[data-fid]").each((function(){xr(this.getAttribute("data-fid"))})),xn()}function xr(e){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_delete_field",field_id:e,nonce:frmGlobal.nonce},success:function(){var t,r=jQuery(document.getElementById("frm_field_id_"+e)),n=jQuery("#frm-single-settings-"+e);n.is(":visible")&&(null===(t=document.querySelector(".frm-settings-panel .frm-tabs-navs ul > li:first-child"))||void 0===t||t.click(),document.querySelector("#frm-options-panel .frm-single-settings").classList.remove("frm_hidden")),function(e){var t=e[0].querySelectorAll(".frm-inline-modal[data-fills]");t.length&&t.forEach((function(e){e.classList.add("frm_hidden"),e.removeAttribute("data-fills"),e.closest("form").appendChild(e)}))}(n),n.remove(),r.fadeOut("slow",(function(){var e,t=r.closest(".start_divider"),n=r.data("type"),i=r.siblings("li.form-field");if(i.length||(r.is(".edit_field_type_end_divider")?i.length=r.closest("li.form-field").siblings():e=r.closest("ul.frm_sorting").parent()),r.remove(),"break"===n?Tr():"product"===n&&(Be(),nt()),i.length?le(i.first()):e.remove(),0===jQuery("#frm-show-fields li").length||function(){if(j.get(0).childElementCount>1)return!1;var e=j.get(0).firstElementChild.firstElementChild.querySelectorAll("li.frm_field_box");return!(e.length>1)&&e[0].classList.contains("edit_field_type_submit")}()){var o=document.getElementById("frm_form_editor_container");o.classList.remove("frm-has-fields"),o.classList.add("frm-empty-fields")}else t.length&&En(t);R()})),r.length&&wp.hooks.doAction("frm_after_delete_field",r[0])}})}function Er(){var e=jQuery(this).closest(".frm-single-settings").data("fid"),t=k,r=document.getElementById("frm_logic_row_"+e).querySelectorAll(".frm_logic_row");return jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_add_logic_row",form_id:t,field_id:e,nonce:frmGlobal.nonce,meta_name:kr(r,"frm_logic_"+e+"_"),fields:tt()},success:function(t){jQuery(document.getElementById("logic_"+e)).fadeOut("fast",(function(){var r=document.getElementById("frm_logic_row_"+e);r.insertAdjacentHTML("beforeend",t);var n=r.querySelector(".frm_logic_row:last-child .frm-logic-rule-text");n&&(n.textContent=r.dataset.ruleText);var i=r.closest(".frm_logic_rows");i.style.height="auto",jQuery(i).fadeIn("fast")}))}}),!1}function kr(e,t,r){return e.length?parseInt(e[e.length-1].id.replace(t,""),10)+1:void 0!==r?r:0}function Lr(){var e=jQuery(this).closest(".frm-single-settings").data("fid"),t=k,r=document.getElementById("frm_watch_lookup_block_"+e).children;return jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_add_watch_lookup_row",form_id:t,field_id:e,row_key:kr(r,"frm_watch_lookup_"+e+"_"),nonce:frmGlobal.nonce},success:function(t){var r,n=jQuery(document.getElementById("frm_watch_lookup_block_"+e));n.append(t),n.fadeIn("slow"),null===(r=document.getElementById("frm_watch_lookup_label_".concat(e)))||void 0===r||r.classList.remove("frm-force-hidden")}}),!1}function Sr(e){var t,r,n=jQuery(e).closest(".frm-single-settings").attr("data-fid"),i=jQuery(e).closest("ul").get(0).querySelectorAll(".field_"+n+"_option");for(t in i)if((r=i[t]).id!==e.id&&r.value===e.value&&"true"!==r.getAttribute("data-duplicate"))return!0;return!1}function Ar(){var e,t;null===this.getAttribute("data-value-on-load")&&(this.setAttribute("data-value-on-load",this.value),t=jQuery(this).closest(".frm-single-settings").attr("data-fid"),(e=document.createElement("input")).value=this.value,e.setAttribute("type","hidden"),e.setAttribute("name","optionmap["+t+"]["+this.value+"]"),this.parentNode.appendChild(e),void 0===S[t]&&(S[t]={}),S[t][this.value]=e),"true"===this.getAttribute("data-duplicate")&&(this.removeAttribute("data-duplicate"),Sr(this))?this.setAttribute("data-value-on-focus",this.getAttribute("data-value-on-load")):""===this.value&&a.new_option===this.getAttribute("data-value-on-focus")||this.setAttribute("data-value-on-focus",this.value)}function Ir(e){var t,r=e.closest(".frm_single_option");return e.parentElement.classList.contains("frm_single_option")?{newValue:r.querySelector('.frm_option_key input[type="text"]').value,newLabel:t=e.value}:(t=r.querySelector('input[type="text"]').value,{newValue:e.value,newLabel:t})}function Br(){var e,t,r,n,i,o,a,l,s,d,c,f,u=function(e){var t=function(e){var t,r,n=null!==(t=null===(r=e.closest(".frm-single-settings").querySelector(".frm_toggle_sep_values"))||void 0===r?void 0:r.checked)&&void 0!==t&&t,i=e.closest(".frm_single_option");return n&&e.parentElement.classList.contains("frm_single_option")?{oldValue:i.querySelector('.frm_option_key input[type="text"]').getAttribute("data-value-on-focus"),oldLabel:e.getAttribute("data-value-on-focus")}:{oldValue:e.getAttribute("data-value-on-focus"),oldLabel:i.querySelector('input[type="text"]').getAttribute("data-value-on-focus")}}(e),r=t.oldValue,n=t.oldLabel,i=Ir(e);return{oldValue:r,oldLabel:n,newValue:i.newValue,newLabel:i.newLabel}}(this),m=u.oldValue,_=u.oldLabel,p=u.newValue,g=u.newLabel;if(m!==p||_!==g){var y=this.closest(".frm-single-settings");if(t=y.getAttribute("data-fid"),e=this.getAttribute("data-value-on-load"),Sr(this))return this.setAttribute("data-duplicate","true"),void(void 0!==S[t]&&void 0!==S[t][e]&&(S[t][e].value=e));for(void 0!==S[t]&&void 0!==S[t][e]&&(S[t][e].value=p),s=[],rows=D.querySelectorAll(".frm_logic_row"),o=rows.length,a=0;a<o;a++)if((i=rows[a]).querySelector(".frm_logic_field_opts").value===t){var h;n=i.id.split("_")[2],l=i.querySelector('select[name="field_options[hide_opt_'+n+'][]"]'),(c=""===m?[]:l.querySelectorAll('option[value="'+m+'"]')).length||(c=l.querySelectorAll('option[value="'+p+'"]')).length||(null!==(h=y.querySelector(".frm_toggle_sep_values"))&&void 0!==h&&h.checked||(f=Cr(l,m)),f||(f=document.createElement("option"),l.appendChild(f))),c.length&&(f=c[c.length-1]),f.setAttribute("value",p),f.textContent=g,-1===s.indexOf(n)&&s.push(n)}for(r in s)d=s[r],ii(document.getElementById("frm-single-settings-"+d))}}function Cr(e,t){for(var r=e.options,n=0;n<r.length;n++){var i=r[n];if(t===i.textContent)return i}return null}function qr(){var e=this.id.replace("get_values_form_",""),t=document.getElementById("get_values_field_"+e),r=this.getAttribute("data-fieldtype");if(""===this.value)t.options.length=1;else{var n=this.value;jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_get_options_for_get_values_field",form_id:n,field_type:r,nonce:frmGlobal.nonce},success:function(e){t.innerHTML=e}})}}function Nr(){var e,t,r=this.name.replace("field_options[data_type_","").replace("]","");(e=document.getElementById("frm_add_watch_lookup_link_"+r))&&(e=e.parentNode,"text"===this.value?null!==(t=document.getElementById("frm_watch_lookup_block_"+r))&&(t.innerHTML="",e.classList.add("frm_hidden"),e.previousElementSibling.style.display="none",e.previousElementSibling.previousElementSibling.style.display="none",e.previousElementSibling.previousElementSibling.previousElementSibling.style.display="none"):e.classList.remove("frm_hidden"),gt(r,this.value))}function Tr(){var e,t,r=document.getElementsByClassName("frm-page-num");if(r.length>1)for(document.getElementById("frm-fake-page").style.display="block",e=0;e<r.length;e++)t=r[e].parentNode.parentNode.parentNode.classList,1===e?t.add("frm-first-page"):t.remove("frm-first-page"),r[e].textContent=e+1;else document.getElementById("frm-fake-page").style.display="none";wp.hooks.doAction("frm_renumber_page_breaks",r)}function Or(){var e,t,r,n=jQuery(this).closest(".frm_field_box[data-ftype=break]");n.length?function(e){var t=Dr(e.get(0).parentNode.closest("li.frm_field_box").nextElementSibling);Mr(e,t)}(n):(e=document.getElementById("frm-fake-page"),t=document.getElementById("frm-show-fields").firstElementChild,r=Dr(t),"break"!==t.getAttribute("data-ftype")&&Mr(jQuery(e),r))}function Dr(e){var t,r;if(t=jQuery(),null===e)return t;r=e;do{if(null!==r.querySelector(".edit_field_type_break"))break;t=t.add(jQuery(r)),r=r.nextElementSibling}while(null!==r);return t}function Mr(e,t){var r,n=t.length,i=Math.min(n,3);if(e.hasClass("frm-page-collapsed"))for(e.removeClass("frm-page-collapsed"),t.removeClass("frm-is-collapsed"),r=0;r<i;r++)r===i-1?jQuery(t[r]).slideDown(150,(function(){t.show()})):jQuery(t[r]).slideDown(150);else for(e.addClass("frm-page-collapsed"),t.addClass("frm-is-collapsed"),r=0;r<i;r++)r===i-1?jQuery(t[r]).slideUp(150,(function(){t.css("cssText","display:none !important;")})):jQuery(t[r]).slideUp(150)}function Fr(){this.parentNode.parentNode.parentNode.parentNode.classList.toggle("frm-section-collapsed")}function Hr(){this.classList.toggle("frm-collapsed");var e="true"===this.getAttribute("aria-expanded")||!1;this.setAttribute("aria-expanded",!e),Pr(this.nextElementSibling)}function Pr(e){if(e){var t=e.scrollHeight;t<=0||(t+=250,e.style.setProperty("--slide-height","".concat(t,"px")),e.style.setProperty("--slide-time","".concat(Math.ceil(.8*t),"ms")))}}function zr(){if(this.id){var e=document.querySelectorAll('[data-changeme="'+this.id+'"]')[0],t=this.id.replace("field_label_",""),r=document.getElementById("field_options_type_"+t),n=r.value;void 0!==e&&(n=function(e){return"divider"===e?e="section":"range"===e?e="slider":"data"===e?e="dynamic":"form"===e&&(e="embed form"),e}(n="SELECT"===r.tagName?r.options[r.selectedIndex].text.toLowerCase():n.replace("_"," ")),setTimeout((function(){e.value.toLowerCase()===n?e.select():e.focus()}),50))}}function Rr(){var e=document.querySelectorAll('[data-changeme="'+this.id+'"]')[0];void 0!==e&&setTimeout((function(){e.focus(),Gr(e)}),50)}function Gr(e){var t=e.closest(".frm-collapse-me");null!==t&&t.previousElementSibling.classList.remove("frm-collapsed")}function $r(e){var t,r;(t=e.target.classList).contains("frm-collapse-page")||t.contains("frm-sub-label")||null!==e.target.closest(".dropdown")||(null!==this.closest(".start_divider")&&e.stopPropagation(),this.classList.contains("edit_field_type_divider")&&null!==(r=e.originalEvent.target.closest("ul.frm_sorting"))&&(r.classList.contains("edit_field_type_divider")||r.parentNode.parentNode.classList.contains("start_divider"))||function(e){var t=jQuery(e);-1===e.className.indexOf("selected")&&(-1!==e.className.indexOf("edit_field_type_end_divider")&&t.closest(".edit_field_type_divider").hasClass("no_repeat_section")||(Je(),t.addClass("selected"),function(e){var t,r,n,i=e.getAttribute("data-fid"),o=e.getAttribute("data-type"),a=document.querySelectorAll(".frm-single-settings:not(.frm_hidden)");for(r=0;r<a.length;r++)a[r].classList.add("frm_hidden");ii(n=document.getElementById("frm-single-settings-"+i)),o&&"quantity"===o&&rt(jQuery(n).find(".frmjs_prod_field_opt")[0]),null===(t=document.querySelector(".frm-settings-panel.frm-scrollbar-wrapper"))||void 0===t||t.scrollTo({top:0,behavior:"instant"}),n.classList.remove("frm_hidden"),document.getElementById("frm-options-panel-tab").click();var l=n.querySelector(".wp-editor-area");l&&frmDom.wysiwyg.init(l,{setupCallback:ni}),wp.hooks.doAction("frmShowedFieldSettings",e,n),function(e,t,r){var n;if(function(e){return wp.hooks.applyFilters("frm_fields_with_shortcode_popup",["html"]).includes(e)}(e)){var i="#frm-single-settings-"+t;if(!document.querySelector(i+" .frm-show-box")){null===(n=r.querySelector(".wp-editor-container"))||void 0===n||n.classList.add("frm_has_shortcodes");var o=function(){return frmDom.svg({href:"#frm_more_horiz_solid_icon",classList:["frm-show-box"]})};document.querySelectorAll(i+" .frm_has_shortcodes textarea").forEach((function(e){var t=c({className:"frm-with-right-icon"});e.parentNode.insertBefore(t,e),t.appendChild(o()),t.appendChild(e)}))}}}(o,i,n)}(e)))}(this))}function Wr(e){var t=e.target;if("custom"===t.value){var r=t.dataset.fieldId,n=document.getElementById("frm-field-format-custom-".concat(r)).querySelector(".frm_format_opt");"international"!==n.value&&"currency"!==n.value&&"number"!==n.value||n.setAttribute("value","")}setTimeout((function(){t.querySelectorAll("option").forEach((function(e){e.selected&&e.classList.contains("frm_show_upgrade")&&(t.value="none")}))}),0)}function Ur(){var e=this.getAttribute("data-fid");Gr(document.getElementById("field_options_field_key_"+e))}function Vr(){var e=jQuery(this).closest(".frm_field_box");e.find(".repeat_icon_links").removeClass("repeat_format repeat_formatboth repeat_formattext").addClass("repeat_format"+this.value),"text"===this.value||"both"===this.value?(e.find(".frm_repeat_text").show(),e.find(".repeat_icon_links a").addClass("frm_button")):(e.find(".frm_repeat_text").hide(),e.find(".repeat_icon_links a").removeClass("frm_button"))}function Kr(){var e=this.value;""!==e&&(e<2||e>200)&&(H(a.repeat_limit_min),this.value="")}function Jr(){var e=this.value;""!==e&&(e<1||e>200)&&(H(a.checkbox_limit),this.value="")}function Yr(e,t){jQuery(e).closest(".frm_field_box").find(".frm_"+t+"_form_row .frm_repeat_label").text(e.value)}function Xr(){var e=jQuery(this).closest(".frm-single-settings").data("fid"),t=this.value,r=document.getElementById("frm_show_selected_fields_"+e),n=document.getElementById("frm_show_selected_forms_"+e);jQuery(n).find("select").val(""),"form"===t?(n.style.display="inline",function(e){if(null!==e)for(;e.firstChild;)e.removeChild(e.firstChild)}(r)):(r.style.display="none",n.style.display="none",wn(t,e))}function Zr(){var e,t;(e=en(this))&&(t=jQuery(this).closest(".frm_single_option"),function(e,t,r){var n,i,o,a,l,s,c=r.data("optkey"),f=pn(e),u=jQuery('label[for="field_'+t+"-"+c+'"]'),m="field_options[options_"+e+"]["+c+"]",_=jQuery('input[name="'+m+'[label]"]');if(u.length<1)return rn(e),void((o=r.find('input[name^="default_value_"]')).is(":checked")&&_.length>0&&jQuery('select[name^="item_meta['+e+']"]').val(_.val()));if(a=u.children("input"),n=_.length<1?(_=jQuery('input[name="'+m+'"]')).val():f?jQuery('input[name="'+m+'[value]"]').val():_.val(),!(_.length<1)){if(i=u[0].childNodes,gn(e))l=function(e,t,r){var n,i,o;return(n=e.find("img"))&&(i=n.attr("src")),o=yn(t),fn(t),_n(r.val(),o,i)}(r,e,_),(s=u.find(".frm_image_option_container")).length>0?s.replaceWith(l):(i[i.length-1].nodeValue="",u.append(l));else{var p=!1;i.forEach((function(t,r){if(!1===p)"INPUT"===t.tagName&&(p=r);else if(r===p+1){var n="";!function(e){var t=document.getElementsByName("field_options[image_options_"+e+"]"),r=Array.from(t).find((function(e){return e.checked&&"buttons"===e.value}));return void 0!==r}(e)?t.nodeValue=" "+_.val():(n=d({className:"frm_label_button_container",text:" "+_.val()}),u[0].replaceChild(n,t))}else u[0].removeChild(t)}))}a.val(n),o=r.find('input[name^="default_value_"]'),a.prop("checked",!!o.is(":checked"))}}(e.fieldId,e.fieldKey,t))}function en(e){var t;return!!(t=jQuery(e).closest(".frm_sortable_field_opts")).length&&{fieldId:t.attr("id").replace("frm_field_","").replace("_opts",""),fieldKey:t.data("key")}}function tn(e){var t,r=document.getElementById("field_options_image_size_"+e),n="";return null!==r&&""!==(t=r.value)&&(n=t),n}function rn(e){var t,r,n,i,o,a=jQuery('[name^="item_meta['+e+']"]');if(!(a.length<1)){if(a.is("select"))null!==(i=document.getElementById("frm_placeholder_"+e))&&""===i.value?sn(a[0],{sourceID:e}):sn(a[0],{sourceID:e,placeholder:i.value});else{r=cn(e),jQuery("#field_"+e+"_inner_container > .frm_form_fields").html(""),o=en(jQuery("#frm_delete_field_"+e+"-000_container"));var l=jQuery("#field_"+e+"_inner_container > .frm_form_fields"),s=gn(e),d=s?tn(e):"",c=s?"frm_image_option frm_image_"+d+" ":"",f=Ho(e);for(n="hidden"===a.attr("type")?a.data("field-type"):a.attr("type"),t=0;t<r.length;t++)l.append(ln(n,r[t],e,o.fieldKey,f,c))}on(e)}}function nn(e,t){var r=document.getElementById("frm_field_"+e+"_opts").querySelector('input[value="'+t+'"]');return r?Ir(r):{newValue:t,newLabel:t}}function on(e,t){var r,n,i,o,a,l,s,d,c=D.querySelectorAll(".frm_logic_row"),f=c.length;for(o=(d=wp.hooks.applyFilters("frm_conditional_logic_field_options",function(e){var t,r,n,i,o,a,l=[];if(!(o=document.getElementById("frm_field_"+e+"_opts")))return l;for(a=(i=o.querySelectorAll(".frm_single_option")).length,t=0;t<a;t++)(n=i[t]).classList.contains("frm_hidden")||(r=n.querySelector(".field_"+e+"_option"),l.push(r.value));return l}(e),{type:t,fieldId:e})).length,rowIndex=0;rowIndex<f;rowIndex++)if((r=c[rowIndex]).querySelector(".frm_logic_field_opts").value==e){for(n=r.id.split("_")[2],i=r.querySelector('select[name="field_options[hide_opt_'+n+'][]"]'),a=o-1;a>=0;a--){var u;l=d[a];var m=null===(u=document.getElementById("frm_field_"+e+"_opts").querySelector('.frm_option_key input[type="text"]'))||void 0===u?void 0:u.value;m||(m=l),s=i.querySelector('option[value="'+m+'"]');var _=nn(e,l),p=_.newValue,g=_.newLabel,y=document.querySelectorAll("#frm_field_"+e+"_opts input[data-value-on-focus]"),h=Array.from(y).find((function(e){return e.value===l}));if(h){var v=h.dataset.valueOnFocus;if(v&&i.querySelector('option[value="'+v+'"]'))continue}an(i,s,p,g)}null!==(s=i.querySelector('option[value=""]'))&&i.prepend(s)}}function an(e,t,r,n){null!==t||e.querySelector('option[value="'+r+'"]')||((t=frmDom.tag("option",{text:n})).value=r),e.prepend(t)}function ln(e,t,r,n,i,o){var a,l="",s=-1!==t.key.indexOf("other"),d="field_"+n+"-"+t.key,c="scale"===e?"radio":e;return a='<input type="text" id="field_'+n+"-"+t.key+'-otext" class="frm_other_input frm_pos_none" name="item_meta[other]['+r+"]["+t.key+']" value="" />',this.getSingle=function(){return""!==(l=wp.hooks.applyFilters("frm_admin.build_single_option_template",l,{opt:t,type:e,fieldId:r,classes:o,id:d}))?l:'<div class="frm_'+e+" "+e+" "+o+'" id="frm_'+e+"_"+r+"-"+t.key+'"><label for="'+d+'"><input type="'+c+'" name="item_meta['+r+"]"+("checkbox"===e?"[]":"")+'" value="'+mn(t.saved)+'" id="'+d+'"'+(i?' data-price="'+t.price+'"':"")+(t.checked?' checked="checked"':"")+"> "+mn(t.label)+"</label>"+(s?a:"")+"</div>"},this.getSingle()}function sn(e,t){if(null!==e){var r=t.sourceID,n=t.placeholder,i=Ho(r),o=t.other;!function(e){var t;if(void 0!==e.options)for(t=e.options.length-1;t>=0;t--)e.remove(t)}(e);for(var a=cn(r),l=void 0!==n,s=0;s<a.length;s++){var d=a[s].label,c=-1!==a[s].key.indexOf("other");if(l&&""!==d?dn(e,n):l&&(d=n),l=!1,!c||o){var f=document.createElement("option");f.value=a[s].saved,f.innerHTML=mn(d),i&&f.setAttribute("data-price",a[s].price),e.appendChild(f)}}}}function dn(e,t){var r=document.createElement("option"),n=e.firstChild;r.value="",r.innerHTML=t,null!==n?(e.insertBefore(r,n),e.selectedIndex=0):e.appendChild(r)}function cn(e){var t,r,n,i,o,a,l,s=[],d=jQuery('input[name^="field_options[options_'+e+']"]'),c=Ho(e),f=yn(e),u=gn(e),m=pn(e);for(t=0;t<d.length;t++)d[t].name.indexOf("[000]")>0||d[t].name.indexOf("[value]")>0||d[t].name.indexOf("[image]")>0||d[t].name.indexOf("[price]")>0||(i=r=d[t].value,o=d[t].name.replace("field_options[options_"+e+"][","").replace("[label]","").replace("]",""),m&&(n=d[t].name.replace("[label]","[value]"),r=jQuery('input[name="'+n+'"]').val()),u&&(i=_n(i,f,un(d[t]),fn(e))),a={saved:r,label:i=frmAdminBuild.hooks.applyFilters("frm_choice_field_label",i,e,d[t],u),checked:(l=d[t].id,field=jQuery("#"+l),0!==field.length&&(checkbox=field.siblings("input[type=checkbox]"),checkbox.length&&checkbox.prop("checked"))),key:o},c&&(n=d[t].name.replace("[label]","[price]"),a.price=jQuery('input[name="'+n+'"]').val()),s.push(a));return s}function fn(e){var t=document.getElementById("frm-single-settings-"+e);return null===t?"radio":t.classList.contains("frm-type-checkbox")?"checkbox":"radio"}function un(e){var t,r=jQuery(e).siblings(".frm_image_preview_wrapper");return r.length&&(t=r.find("img")).length?t.attr("src"):""}function mn(e){(e instanceof Element||e instanceof Document)&&(e=e.outerHTML);var t=jQuery.parseHTML(e).reduce((function(e,t){var r=frmDom.cleanNode(t);return"#text"===r.nodeName?e+r.textContent:e+r.outerHTML}),"");return t!==e?mn(t):t}function _n(e,t,r,n){var i,o,l,c=e;return c=mn(c),r?o=m({src:r,alt:c}):(o=d({className:"frm_empty_url"})).innerHTML=a.image_placeholder_icon,i=t?" frm_label_with_image":"",(l=s("span",{className:"frm_text_label_for_image_inner"})).innerHTML=c,s("span",{className:"frm_image_option_container"+i,children:[o,s("span",{className:"frm_text_label_for_image",child:l})]})}function pn(e){return hn("separate_value_"+e)}function gn(e){for(var t=!1,r=document.getElementsByName("field_options[image_options_"+e+"]"),n=0;n<r.length;n++)r[n].checked&&(t="0"!==r[n].value);return frmAdminBuild.hooks.applyFilters("frm_choice_field_images_as_options",t,e)}function yn(e){var t=!hn("hide_image_text_"+e);return frmAdminBuild.hooks.applyFilters("frm_choice_field_showing_label_with_image",t,e)}function hn(e){var t=document.getElementById(e);return null!==t&&t.checked}function vn(e){var t=e.closest(".frm-single-settings"),r=t.getAttribute("data-fid"),n=t.querySelector('[name="field_options[separate_value_'+r+']"]').checked;if(!n||e.name.endsWith("[value]")){var i=document.getElementById("frm_field_"+r+"_opts");Array.from(i.querySelectorAll('input[type="text"]')).filter((function(t){return t.id!==e.id&&n===t.name.endsWith("[value]")&&t.value===e.value})).length&&H(C(B('Duplicate option value "%s" detected',"formidable"),mn(e.value)))}}function bn(){var e,t,r,n,i,o=this.value;if(o){var a=this.parentNode.id.replace("frm_logic_","").split("_"),l=a[0],s=a[1],d=document.getElementById("frm_field_id_"+o).getAttribute("data-ftype"),c=document.getElementById("frm_show_selected_values_"+l+"_"+s),f="field_options[hide_opt_"+l+"][]",u="frm_field_logic_opt_"+l,m=!1,_="select"===d||"checkbox"===d||"radio"===d,p="text"===d||"email"===d||"phone"===d||"url"===d||"number"===d;if(_&&null!==document.getElementById("frm_has_hidden_options_"+o)&&(_=!1),_||p){var g=document.querySelector("#frm_logic_".concat(l,"_").concat(s,' [name="field_options[hide_field_cond_').concat(l,'][]"]')).value;c.innerHTML="";var y=_&&!["LIKE","not LIKE","LIKE%","%LIKE"].includes(g);y?m=document.createElement("select"):(m=document.createElement("input")).type="text",m.name=f,m.id=u+"_"+s,c.appendChild(m),y&&sn(document.getElementById(m.id),{sourceID:o,placeholder:"",other:!0})}else{var h=this.getAttribute("data-type");t=l,r=s,n=h,i=function(){var e=new CustomEvent("frm_logic_options_loaded");e.frmData={valueFieldType:d,fieldID:l,metaKey:s},document.dispatchEvent(e)},(e=o)&&jQuery.ajax({type:"POST",url:ajaxurl,data:"action=frm_get_field_values&current_field="+t+"&field_id="+e+"&name="+void 0+"&t="+n+"&form_action="+jQuery('input[name="frm_action"]').val()+"&nonce="+frmGlobal.nonce,success:function(e){document.getElementById("frm_show_selected_values_"+t+"_"+r).innerHTML=e,i()}})}}}function jn(){var e=this.value;e&&wn(e,jQuery(this).closest(".frm-single-settings").data("fid"))}function wn(e,t){e&&jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_get_field_selection",field_id:t,form_id:e,nonce:frmGlobal.nonce},success:function(e){var r=jQuery("#frm_show_selected_fields_"+t);r.toggleClass("frm6",!e.includes("frm-inline-message")),r.html(e).show()}})}function Qn(){var e=this;return this.initOnceInAllInstances=function(){void 0===Qn.prototype.orderFieldsObject&&(Qn.prototype.orderFieldsObject={},Qn.prototype.fieldSettingsForm=document.getElementById("frm-end-form-marker").closest("form"))},this.getFieldOrderInputById=function(e,t){var r,n=Qn.prototype.orderFieldsObject,i=Qn.prototype.fieldSettingsForm;return void 0===n[e]?(null===(r=i.querySelector('input[name="field_options[field_order_'+e+']"]'))&&(r=t.querySelector('input[name="field_options[field_order_'+e+']"]')),n[e]=r,r):n[e]},this.initOnceInAllInstances(),Tr(),function(){var t,r,n,o,a=new ii,l=jQuery("li.frm_field_box",jQuery("#frm-show-fields"));for(i=0;i<l.length;i++)t=l[i].getAttribute("data-fid"),(n=null!==(r=e.getFieldOrderInputById(t,l[i]))?Object.assign({},r.value)[0]:null)!=(o=i+1)&&null!==n&&(r.value=o,singleField=l[i].querySelector("#frm-single-settings-"+t),a.append(singleField),Mi());a.moveFields()}()}function xn(){document.querySelectorAll(".start_divider").forEach((function(e){En(jQuery(e))}))}function En(e){var t,r,n,i;if(e.length){for(i=!1,r=(t=e.find("ul.frm_sorting")).length,n=0;n<r;++n)if(0!==ae(jQuery(t.get(n))).length){i=!0;break}e.parent().children(".frm_no_section_fields").get(0).classList.toggle("frm_block",!i)}}function kn(){var e=jQuery(this).data("slidedown"),t=jQuery(document.getElementById(e));return t.is(":hidden")&&(t.slideDown("fast"),this.style.display="none"),!1}function Ln(){var e=jQuery(this).data("slideup"),t=jQuery(document.getElementById(e));return t.slideUp("fast"),t.siblings("a").show(),!1}function Sn(e,t){""===t.getAttribute("value")?An(jQuery(this)):function(e){var t,r=e.val();if(null===r)return e.next(".btn-group").find('.multiselect-container input[value=""]').prop("checked",!0),void An(e);(t=r.indexOf(""))>=0&&(r.splice(t,1),e.val(r),e.next(".btn-group").find('.multiselect-container input[value=""]').prop("checked",!1))}(jQuery(this))}function An(e){e.val(""),e.next(".btn-group").find('.multiselect-container input[value!=""]').prop("checked",!1)}function In(){jQuery(".frm-hide-empty").each((function(){0===jQuery(this).text().trim().length&&jQuery(this).remove()}))}function Bn(e){e.preventDefault(),Cn(this)}function Cn(e,t){var r=document.getElementById(e.getAttribute("data-open")),n=jQuery(e).closest("p,ul"),i=void 0!==t;n.hasClass("frm-open")?(n.removeClass("frm-open"),r.classList.add("frm_hidden")):(i||(t=Gi(e)),null!==t&&(i||t.focus(),n.after(r),r.setAttribute("data-fills",t.id.replace("-proxy-input","")),0===r.id.indexOf("frm-calc-box")&&Ze(r,!0)),n.addClass("frm-open"),r.classList.remove("frm_hidden"),wp.hooks.doAction("frm_show_inline_modal",r,e))}function qn(e){e.preventDefault(),this.parentNode.classList.add("frm_hidden"),jQuery('.frm-open [data-open="'+this.parentNode.id+'"]').closest(".frm-open").removeClass("frm-open")}function Nn(e){var t=e.target;t.closest(".frm-inline-modal.frm-modal-no-dismiss")||t.closest(".frm-show-inline-modal")||t.closest("#frm_adv_info")||t.closest(".frm-token-proxy-input")||document.querySelectorAll(".frm-inline-modal.frm-modal-no-dismiss:not(.frm_hidden)").forEach((function(e){e.classList.add("frm_hidden"),e.previousElementSibling.classList.remove("frm-open")}))}function Tn(){var e,t,r,n,i,o,a,l=this.getAttribute("data-frmchange").split(",");for(e=0;e<l.length;e++)"updateOption"===l[e]?(r=void 0,n=void 0,i=void 0,o=void 0,a=void 0,n=Dn(t=this),i=n.getAttribute("data-optkey"),o=Mn(n,i),null!==(a=document.getElementById("separate_value_"+o))&&!1===a.checked&&((r=document.getElementById("field_key_"+o+"-"+i)).value=t.value,On(r))):"updateDefault"===l[e]?On(this):"checkUniqueOpt"===l[e]?vn(this):this.value=this.value[l[e]]()}function On(e){var t=Dn(e),r=t.getAttribute("data-optkey"),n=Mn(t,r),i=t.querySelector('input[name="default_value_'+n+'"]');null!==i&&(i.value=e.value)}function Dn(e){var t=e.parentNode;return"LI"!==t.tagName&&(t=t.parentNode),t}function Mn(e,t){return e.id.replace("frm_delete_field_","").replace("-"+t+"_container","")}function Fn(){var e=this;if(!Rn()){Wn(this);var t=jQuery(w),r=JSON.stringify(t.serializeArray());jQuery(document.getElementById("frm_compact_fields")).val(r),jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_save_form",frm_compact_fields:r,nonce:frmGlobal.nonce},success:function(t){var r;(r=e).classList.remove("frm_loading_form"),r.classList.remove("frm_loading_button"),jQuery('.frm-single-settings ul input[type="text"][name^="field_options[options_"]').filter("[data-value-on-load]").removeAttr("data-value-on-load"),jQuery('input[type="hidden"][name^=optionmap]').remove(),E=0,r.setAttribute("aria-busy","false"),setTimeout((function(){jQuery(".frm_updated_message").fadeOut("slow",(function(){this.parentNode.removeChild(this)}))}),5e3);var n,i=document.getElementById("post-body-content"),o=document.createElement("div");o.setAttribute("class","frm_updated_message"),o.innerHTML=t,i.insertBefore(o,i.firstChild),(n=document.getElementById("frm_submit_side_top")).hasAttribute("data-new-addon-installed")&&"true"===n.getAttribute("data-new-addon-installed")&&(n.removeAttribute("data-new-addon-installed"),window.location.reload())},error:function(){Hn(document.getElementById("frm_js_build_form"))}})}}function Hn(e){var t=e.ownerDocument.createElement("input");t.style.display="none",t.type="submit",e.appendChild(t).click(),e.removeChild(t)}function Pn(e){jQuery(e).trigger("change")}function zn(){var e;Rn()||(Wn(this),e=jQuery(w),jQuery(document.getElementById("frm_compact_fields")).val(JSON.stringify(e.serializeArray())),Hn(document.getElementById("frm_js_build_form")))}function Rn(){if((t=document.getElementById("frm_form_name"))&&""!==t.value.trim()||"true"!==O.get("new_template")||(null===(e=document.querySelector("#frm_top_bar #frm_bs_dropdown .frm_bstooltip"))||void 0===e?void 0:e.textContent.trim())!==frm_admin_js.noTitleText)return!1;var e,t,r=To("#frm-form-templates-modal","440px");return!!r&&(Ri(r,"72px"),r.dialog("open"),!0)}function Gn(){var e=document.getElementById("frm-save-form-name-button"),t=document.getElementById("frm_new_form_name_input");_(e,$n),t.addEventListener("keydown",(function(e){"Enter"===e.key&&$n.call(this,e)}))}var $n=function(e){var t=document.getElementById("frm_new_form_name_input").value.trim(),r=new FormData;r.append("form_id",O.get("id")),r.append("form_name",t),g("rename_form",r).then((function(e){O.delete("new_template"),T.search=O.toString(),history.replaceState({},"",T.toString()),null!==document.getElementById("frm_notification_settings")&&(document.getElementById("frm_form_name").value=t,document.getElementById("frm_form_key").value=e.form_key),jQuery("#frm-publishing").find(".frm_button_submit").trigger("click")}))};function Wn(e){var t,r;Do(),jQuery("form.inplace_form").length&&jQuery(".inplace_save, .postbox").trigger("click"),e.classList.contains("frm_button_submit")?e.classList.add("frm_loading_form"):e.classList.add("frm_loading_button"),e.setAttribute("aria-busy","true"),t=document.querySelectorAll(".frm_format_dropdown, .frm_phone_type_dropdown"),r={none:"",international:"international",currency:"currency",number:"number"},t.forEach((function(e){var t=e.value;t in r&&(document.getElementById("frm_format_".concat(e.dataset.fieldId)).value=r[t])}))}function Un(e){var t,r=null!==(t=e.target.dataset)&&void 0!==t&&t.modalTitle?e.target:e.target.closest("[data-modal-title]");if(r){var n=r.dataset,i=n.modalTitle,o=n.modalContent;i&&o&&(e.preventDefault(),frmDom.modal.maybeCreateModal("frmBasicModal",{title:i,content:d({className:"inside",child:c(o)})}))}}function Vn(e){return e.dataset.requires?e.dataset.requires:"Pro"}function Kn(e){var t,r,n,i=e.dataset.upgrade,o=e.getAttribute("href").replace("#",""),a=document.querySelector(".frm_"+o)||document.querySelector("."+o);if(a&&!a.querySelector(".frm-upgrade-message")){var l=a.querySelector("h2");l.style.borderBottom="none",l.textContent=C(B("%s are not installed","formidable"),i),a.classList.add("frmcenter");var s=document.getElementById("frm_upgrade_modal");p("frm-oneclick"),p("frm-addon-status");var c=s.querySelector(".frm-upgrade-link");if(c){var f=c.cloneNode(!0),u=f.querySelector(".license-level");u&&(u.textContent=Vn(e)),a.appendChild(f),c.nextElementSibling&&c.nextElementSibling.querySelector(".frm-link-secondary")&&a.appendChild(c.nextElementSibling.cloneNode(!0)),p("frm-oneclick-button")}p("frm-upgrade-message");var _=e.dataset.message;void 0===_&&(_=e.dataset.upgrade),Jn(e,"tab",_),e.dataset.screenshot&&a.appendChild((t=e.dataset.screenshot,n=frmGlobal.url+"/images/screenshots/",d({className:"frm-settings-screenshot-wrapper",children:[(r=["#ED8181","#EDE06A","#80BE30"].map((function(e){var t=d({className:"frm-minmax-icon"});return t.style.backgroundColor=e,t})),r.push(m({src:frmGlobal.url+"/images/tab.svg"})),d({className:"frm-settings-screenshot-toolbar",children:r})),d({child:m({src:n+t})})]})))}function p(e){a.appendChild(s.querySelector("."+e).cloneNode(!0))}}function Jn(e,t,r){var n;if("modal"===t)n=document.getElementById("frm_upgrade_modal");else{if("tab"!==t)return;n=document.getElementById(e.getAttribute("href").substr(1))}var i=n.querySelector(".frm-oneclick"),o=n.querySelector(".frm-upgrade-message"),a=n.querySelector(".frm-upgrade-link"),l=n.querySelector(".frm-oneclick-button"),s=n.querySelector(".frm-addon-status"),d=e.getAttribute("data-oneclick"),c=e.getAttribute("data-message"),f="block",u="block",_="none";null!==i&&void 0!==d&&d&&(null===c&&(u="none"),f="none",_="block",d=JSON.parse(d),l.className=l.className.replace(" frm-install-addon","").replace(" frm-activate-addon",""),l.className=l.className+" "+d.class,l.rel=d.url,"frm-activate-addon"===d.class?(i.textContent=B("This plugin is not activated. Would you like to activate it now?","formidable"),l.textContent=B("Activate","formidable")):(i.textContent=B("That add-on is not installed. Would you like to install it now?","formidable"),l.textContent=B("Install","formidable"))),c||(c=o.getAttribute("data-default")),void 0!==r&&(c=c.replace('<span class="frm_feature_label"></span>',r)),o.innerHTML=c,e.dataset.upsellImage&&o.appendChild(m({src:e.dataset.upsellImage,alt:e.dataset.upgrade})),a.href=function(e,t){var r=e.getAttribute("data-link");return null!=r&&""!==r||(r=t.getAttribute("data-default")),r}(e,a),s.style.display="none",i.style.display=_,l.style.display="block"===_?"inline-block":_,o.style.display=u,a.style.display="block"===f?"inline-block":f}function Yn(e){void 0===e&&(e=""),function(e){var t,r=jQuery(e+" :not(.frm_has_shortcodes) .frm_not_email_message, "+e+" :not(.frm_has_shortcodes) .frm_not_email_to, "+e+" :not(.frm_has_shortcodes) .frm_not_email_subject");for(t=0;t<r.length;t++)r[t].parentNode.classList.add("frm_has_shortcodes")}(e),jQuery(e+" .frm_has_shortcodes:not(.frm-with-right-icon) input,"+e+" .frm_has_shortcodes:not(.frm-with-right-icon) textarea").wrap('<span class="frm-with-right-icon"></span>').before('<svg class="frmsvg frm-show-box"><use xlink:href="#frm_more_horiz_solid_icon"/></svg>')}function Xn(){var e="success";"options[edit_action]"===this.name&&(e="edit");var t=jQuery(this).val();jQuery("."+e+"_action_box").hide(),"redirect"===t?jQuery("."+e+"_action_redirect_box."+e+"_action_box").fadeIn("slow"):"page"===t?jQuery("."+e+"_action_page_box."+e+"_action_box").fadeIn("slow"):jQuery("."+e+"_action_message_box."+e+"_action_box").fadeIn("slow")}function Zn(e){if(m=e.target,p=jQuery(m),g=p.closest(".frm_form_action_settings"),(y=g.find(".widget-inside")).find("p, div, table").length||((_=g.find(".widget-top")).on("frm-action-loaded",(function(){p.trigger("click"),g.removeClass("open"),y.hide()})),_.trigger("click"),0)){var t=e.target.closest(".frm_form_action_settings"),r=t.querySelectorAll(".wp-editor-area");r.length&&r.forEach((function(e){tinymce.EditorManager.execCommand("mceRemoveEditor",!0,e.id)}));var n=jQuery(t).clone(),i=n.attr("id").replace("frm_form_action_",""),o=ei(i);n.find(".frm_action_id, .frm-btn-group").remove(),n.find('input[name$="['+i+'][ID]"]').val(""),n.find(".widget-inside").hide(),n.find("input[type=text], textarea, input[type=number]").prop("defaultValue",(function(){return this.value})),n.find("input[type=checkbox], input[type=radio]").prop("defaultChecked",(function(){return this.checked}));var a=new RegExp("\\["+i+"\\]","g"),l=new RegExp("_"+i+'"',"g"),s=new RegExp("-"+i+'"',"g"),c=new RegExp('"'+i+'"',"g"),f=n.html().replace(a,"["+o+"]").replace(l,"_"+o+'"');f=f.replace(s,"-"+o+'"').replace(c,'"'+o+'"');var u=d({id:"frm_form_action_"+o,className:n.get(0).className});u.setAttribute("data-actionkey",o),u.innerHTML=f,u.querySelectorAll(".wp-editor-wrap, .wp-editor-wrap *").forEach((function(e){"string"==typeof e.className&&(e.className=e.className.replace(i,o)),e.id=e.id.replace(i,o)})),u.classList.remove("open"),document.getElementById("frm_notification_settings").appendChild(u),r.length&&(r.forEach((function(e){frmDom.wysiwyg.init(e)})),u.querySelectorAll(".wp-editor-area").forEach((function(e){frmDom.wysiwyg.init(e)}))),u.classList.contains("frm_single_on_submit_settings")&&u.querySelector("input.frm-page-search")&&jo(u),lo(),wp.hooks.doAction("frm_after_duplicate_action",u)}var m,_,p,g,y}function ei(e){var t=parseInt(e,10)+11;return null!==document.getElementById("frm_form_action_"+t)&&(t=ei(++t)),t}function ti(){var e,t=jQuery(this).data("actiontype");if(!di(t)){var r=(e=kr(document.querySelectorAll(".frm_form_action_settings"),"frm_form_action_"),void 0!==document.getElementById("frm_form_action_"+e)&&(e+=100),A>=e&&(e=A+1),A=e,e),n=k,i=document.createElement("div");i.classList.add("frm_single_"+t+"_settings");var o=document.getElementById("frm_notification_settings");o.appendChild(i),jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_add_form_action",type:t,list_id:r,form_id:n,nonce:frmGlobal.nonce},success:function(e){Mi(),i.remove(),document.querySelectorAll(".frm_form_action_settings.open").forEach((function(e){return e.classList.remove("open")}));var n=d();n.innerHTML=e;var a=n.querySelector(".widget-top");Array.from(n.children).forEach((function(e){return o.appendChild(e)})),jQuery(".frm_form_action_settings").fadeIn("slow");var l=document.getElementById("frm_form_action_"+r);l.classList.add("open"),document.getElementById("post-body-content").scroll({top:l.offsetTop+10,left:0,behavior:"smooth"}),si(t),Yn("#frm_form_action_"+r),lo(),jo(l),a&&jQuery(a).trigger("frm-action-loaded"),frmAdminBuild.hooks.doAction("frm_added_form_action",l)}})}}function ri(){var e=document.getElementById("frm_email_addon_menu").classList,t=document.getElementById("actions-search-input");e.contains("frm-all-actions")?(e.remove("frm-all-actions"),e.add("frm-limited-actions")):(e.add("frm-all-actions"),e.remove("frm-limited-actions")),t.value="",Io(t,"input")}function ni(e){e.on("Change",(function(){!function(e){var t,r;(t=document.querySelector(".frm-single-settings:not(.frm_hidden)"))&&null!==(r=t.querySelector(".wp-editor-wrap"))&&r.classList.contains("tmce-active")&&!tinyMCE.activeEditor.isHidden()&&(e.targetElm.value=e.getContent(),jQuery(e.targetElm).trigger("change"))}(e)}))}function ii(e){var t=this;if(null!==e)return this.fragment=document.createDocumentFragment(),this.initOnceInAllInstances=function(){void 0===ii.prototype.endMarker&&(ii.prototype.endMarker=document.getElementById("frm-end-form-marker"))},this.append=function(e){var r=null!==e?e.parentElement.classList:"";null!==e&&(r.contains("frm_field_box")||r.contains("divider_section_only"))&&t.fragment.appendChild(e)},this.moveFields=function(){w.insertBefore(t.fragment,ii.prototype.endMarker)},this.initOnceInAllInstances(),void 0!==e?(this.append(e),void this.moveFields()):{append:this.append,moveFields:this.moveFields}}function oi(){var e=jQuery(this).closest(".frm_form_action_settings").data("actionkey"),t=this.getAttribute("data-emailrow");jQuery("#frm_form_action_"+e+" .frm_"+t+"_row").fadeIn("slow"),jQuery(this).fadeOut("slow")}function ai(){var e=jQuery(this).closest(".frm_form_action_settings"),t=this.getAttribute("data-emailrow"),r=".frm_"+t+"_row",n=".frm_"+t+"_button";jQuery(e).find(n).fadeIn("slow"),jQuery(e).find(r).fadeOut("slow",(function(){jQuery(e).find(r+" input").val("")}))}function li(){var e=jQuery(this).closest(".frm_form_action_settings"),t=".frm_from_to_match_row";e.find('input[name$="[post_content][from]"]').val()===e.find('input[name$="[post_content][email_to]"]').val()?jQuery(e).find(t).fadeIn("slow"):jQuery(e).find(t).fadeOut("slow")}function si(e){var t,r,n=document.querySelectorAll(".frm_"+e+"_action");di(e)?(t=n,r=ci(e)>0,t.forEach((function(e){e.classList.remove("frm_active_action"),e.classList.add("frm_inactive_action"),r&&e.classList.add("frm_already_used")}))):n.forEach((function(e){e.querySelector(".frm_show_upgrade")||(e.classList.remove("frm_inactive_action","frm_already_used"),e.classList.add("frm_active_action"))}))}function di(e){var t=function(e){return jQuery(".frm_single_"+e+"_settings").length}(e)>=ci(e),r={type:e};return wp.hooks.applyFilters("frm_action_at_limit",t,r)}function ci(e){return parseInt(jQuery(".frm_"+e+"_action").data("limit"),10)}function fi(){var e=a.only_one_action,t=this.dataset.limit;void 0!==t&&((t=parseInt(t))>1?e=e.replace(1,t).trim():e+=" "+a.edit_action_text),H(e)}function ui(){var e=jQuery(this).data("emailkey"),t=jQuery(this).closest(".frm_form_action_settings").find(".frm_action_name").val(),r=document.getElementById("form_id").value,n=document.getElementById("frm_logic_row_"+e),i=kr(n.querySelectorAll(".frm_logic_row"),"frm_logic_"+e+"_"),o=d({id:"frm_logic_"+e+"_"+i,className:"frm_logic_row frm_hidden"});return n.appendChild(o),jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_add_form_logic_row",email_id:e,form_id:r,meta_name:i,type:t,nonce:frmGlobal.nonce},success:function(t){jQuery(document.getElementById("logic_link_"+e)).fadeOut("slow",(function(){o.insertAdjacentHTML("beforebegin",t),o.remove(),jQuery(n).parent(".frm_logic_rows").fadeIn("slow")}))}}),!1}function mi(){var e=jQuery("select.frm_single_post_field");e.css("border-color","");var t=this,r=jQuery(t).val();if(""===r||"checkbox"===r)return!1;e.each((function(){if(jQuery(this).val()===r&&this.name!==t.name)return this.style.borderColor="red",jQuery(t).val(""),H(a.field_already_used),!1}))}function _i(){var e=jQuery(this).val();""===e?(jQuery(".frm_post_content_opt, select.frm_dyncontent_opt").hide().val(""),jQuery(".frm_dyncontent_opt").hide()):"post_content"===e?(jQuery(".frm_post_content_opt").show(),jQuery(".frm_dyncontent_opt").hide(),jQuery("select.frm_dyncontent_opt").val("")):(jQuery(".frm_post_content_opt").hide().val(""),jQuery("select.frm_dyncontent_opt, .frm_form_field.frm_dyncontent_opt").show())}function pi(){var e=jQuery(this).val(),t=jQuery(document.getElementById("frm_dyncontent"));""===e||"new"===e?(t.val(""),jQuery(".frm_dyncontent_opt").show()):jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_display_get_content",id:e,nonce:frmGlobal.nonce},success:function(e){t.val(e),jQuery(".frm_dyncontent_opt").show()}})}function gi(){var e,t,r=document.getElementById("frm_posttax_rows").childNodes,n=document.querySelector(".frm_post_parent_field"),o=document.querySelector(".frm_post_menu_order_field"),a=this.value;jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_replace_posttax_options",post_type:a,nonce:frmGlobal.nonce},success:function(n){for(i=0;i<r.length;i++)"DIV"===r[i].tagName&&(e=r[i].getElementsByTagName("select")[0],(t=document.createElement("select")).innerHTML=n,t.className=e.className,t.name=e.name,r[i].replaceChild(t,e))}}),n&&yi(n,a,"frm_get_post_parent_option",(function(e,t){n.querySelector(".frm_post_parent_opt_wrapper").innerHTML=e.replaceAll("REPLACETHISNAME",t),jo(n)})),o&&yi(o,a,"frm_should_use_post_menu_order_option")}function yi(e,t,r,n){var i=(e.querySelector(".frm_autocomplete_value_input")||e.querySelector("select")).getAttribute("name");jQuery.ajax({url:ajaxurl,method:"POST",data:{action:r,post_type:t,_wpnonce:frmGlobal.nonce},success:function(t){if("string"==typeof t){if("0"===t)return e.classList.add("frm_hidden"),void(e.value="");e.classList.remove("frm_hidden"),"function"==typeof n&&n(t,i)}else console.error(t)},error:function(e){return console.error(e)}})}function hi(){bi("tax",this)}function vi(){bi("meta",this)}function bi(e,t){var r,n,i=jQuery('input[name="id"]').val(),o=jQuery(t).closest(".frm_form_action_settings"),a=o.data("actionkey"),l=o.find(".frm_post_type").val(),s=0,d=document.querySelectorAll(".frm_post"+e+"_row");d.length&&(n=r=d[d.length-1].id.replace("frm_post"+e+"_",""),s=!isNaN(parseFloat(n))&&isFinite(n)?1+parseInt(r,10):1),jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_add_post"+e+"_row",form_id:i,meta_name:s,tax_key:s,post_type:l,action_key:a,nonce:frmGlobal.nonce},success:function(t){var r,n;if(jQuery(document.getElementById("frm_post"+e+"_rows")).append(t),jQuery(".frm_add_post"+e+"_row.button").hide(),"meta"===e)for(jQuery(".frm_name_value").show(),r=document.querySelectorAll(".frm_toggle_cf_opts"),n=0;n<r.length-1;++n)r[n].style.display="none";else"tax"===e&&jQuery(".frm_posttax_labels").show()}})}function ji(){if(jQuery(this).closest(".frm_posttax_row").find(".frm_posttax_opt_list").length){jQuery(this).closest(".frm_posttax_row").find(".frm_posttax_opt_list").html('<div class="spinner frm_spinner" style="display:block"></div>');var e=jQuery(this).closest(".frm_form_action_settings").find('select[name$="[post_content][post_type]"]').val(),t=jQuery(this).closest(".frm_form_action_settings").data("actionkey"),r=jQuery(this).closest(".frm_posttax_row").attr("id").replace("frm_posttax_",""),n=jQuery(this).val(),i=jQuery(document.getElementById(r+"_show_exclude")).is(":checked")?1:0,o=jQuery('select[name$="[post_category]['+r+'][field_id]"]').val(),a=jQuery('input[name="id"]').val();jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_add_posttax_row",form_id:a,post_type:e,tax_key:r,action_key:t,meta_name:n,field_id:o,show_exclude:i,nonce:frmGlobal.nonce},success:function(e){jQuery(document.getElementById("frm_posttax_"+r)).replaceWith(e)}})}}function wi(){var e=jQuery(this).closest(".frm_postmeta_row"),t=e.find(".frm_cancelnew"),r=e.find(".frm_enternew");return e.find("select.frm_cancelnew").is(":visible")?(t.hide(),r.show()):(t.show(),r.hide()),e.find("input.frm_enternew, select.frm_cancelnew").val(""),!1}function Qi(){var e=jQuery(this),t=e.val();"checkbox"===e.attr("type")&&!1===this.checked&&(t="");var r=e.data("toggleclass");""===t?jQuery("."+r).hide():(jQuery("."+r).show(),jQuery(".hide_"+r+"_"+t).hide())}function xi(){Rn()||(Wn(this),Hn(document.querySelector(".frm_form_settings")))}function Ei(e){return e.preventDefault(),ki(jQuery(this),this.getAttribute("data-code")),!1}function ki(e,t){var r=!1,i=e;if("object"===n(e)){if(e.hasClass("frm_noallow"))return;void 0===(i=jQuery(e).closest("[data-fills]").attr("data-fills"))&&void 0!==(i=e.closest("div").attr("class"))&&(i=i.split(" ")[1])}if(void 0===i){var o=document.activeElement;"search"===o.type?null===(i=o.id.replace("-search-input","")).match(/\d/gi)&&(i=(o=jQuery(".frm-single-settings:visible ."+i)).attr("id")):i=o.id}i&&(r=jQuery("#wp-"+i+"-wrap.wp-editor-wrap").length>0);var a=jQuery(document.getElementById(i));if(void 0===e.attr("data-shortcode")&&(!a.length||void 0===a.attr("data-shortcode"))){var l=e.parents("ul.frm_code_list").attr("data-shortcode");"undefined"!==l&&"no"===l||(t="["+t+"]")}if(r&&(wpActiveEditor=i),!a.length)return!1;if("[default-html]"===t||"[default-plain]"===t){var s=0;"[default-plain]"===t&&(s=1),jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"frm_get_default_html",form_id:jQuery('input[name="id"]').val(),plain_text:s,nonce:frmGlobal.nonce},elementId:i,success:function(e){if(r){var t=document.createElement("p");t.innerText=e,send_to_editor(t.innerHTML)}else Li(a,e)}})}else t=function(e,t,r){return"object"===n(t)&&t instanceof jQuery&&0===r[0].id.indexOf("success_url_")&&(t=t[0]).closest("#frm-insert-fields-box")?(t.parentNode.classList.contains("frm_insert_url")||(e=e.replace("]"," sanitize_url=1]")),e):e}(t,e,a),r?send_to_editor(t):Li(a,t);return!1}function Li(e,t){if(document.selection)e[0].focus(),document.selection.createRange().text=t;else{obj=e[0];var r=obj.selectionEnd;t=function(e,t,r,n){var i=e.data("sep");if(void 0===i)return t;var o=e.val();if(!o.trim().length)return t;var a=new RegExp(i+"\\s*$"),l=new RegExp("^\\s*"+i);return o.substr(0,r).trim().length&&!1===a.test(o.substr(0,r))&&(t=i+t),o.substr(n,o.length).trim().length&&!1===l.test(o.substr(n,o.length))&&(t+=i),t}(e,t,obj.selectionStart,r),obj.value=obj.value.substr(0,obj.selectionStart)+t+obj.value.substr(obj.selectionEnd,obj.value.length);var n=r+t.length;!function(e,t){if(e.classList.contains("frm_classes")&&Si(t)){var r=e.value.split(" ").filter(Si);r.length&&(e.value=function(e,t,r){var n=e.split(" ").filter((function(e){return(e=e.trim()).length&&!t.includes(e)}));return n.includes(r)||n.push(r),n.join(" ")}(e.value,r,t.trim()))}}(obj,t),obj.focus(),obj.setSelectionRange(n,n)}Pn(e)}function Si(e){return["frm_half","frm_third","frm_two_thirds","frm_fourth","frm_three_fourths","frm_fifth","frm_sixth","frm2","frm3","frm4","frm6","frm8","frm9","frm10","frm12"].includes(e.trim())}function Ai(){var e=document.getElementById("frm-id-condition"),t=document.getElementById("frm-key-condition");"id"===this.value?(e.classList.remove("frm_hidden"),t.classList.add("frm_hidden"),Io(t,"change")):(e.classList.add("frm_hidden"),t.classList.remove("frm_hidden"),Io(e,"change"))}function Ii(){var e,t,r=document.getElementById("frm-id-key-condition-id").checked?"frm-id-condition":"frm-key-condition",n=document.getElementById("frm-is-condition").value,i=document.getElementById("frm-text-condition").value,o=document.getElementById("frm-insert-condition");t="if "+(e=(r=document.getElementById(r)).options[r.selectedIndex].value)+" "+n+'="'+i+'"]',o.setAttribute("data-code",t+a.conditional_text+"[/if "+e),o.innerHTML="["+t+"[/if "+e+"]"}function Bi(){Cn($i(this),this)}function Ci(e){e.preventDefault(),e.stopPropagation(),Oi(this)}function qi(e){!function(e){var t;if(e.id.startsWith("field_options_type_")){var r=e.id.split("_"),n=r.length&&r[r.length-1];null!==(t=document.querySelector("#frm-single-settings-".concat(n)))&&void 0!==t&&t.classList.contains("frm-type-".concat(e.value))||Ni()}}(e.target)}function Ni(e){var t;void 0===e&&(e=B("You are changing the field type. Not all field settings will appear as expected until you reload the page. Would you like to reload the page now?","formidable")),frmDom.modal.maybeCreateModal("frmSaveAndReloadModal",{title:B("Save and Reload?","formidable"),content:(t=d(e),t.style.padding="var(--gap-md)",t),footer:function(){var e=frmDom.modal.footerButton({text:B("Save and Reload","formidable"),buttonType:"primary"});_(e,(function(){Pi()}));var t=frmDom.modal.footerButton({text:B("Cancel","formidable"),buttonType:"cancel"});return t.classList.add("dismiss"),frmDom.div({children:[t,e]})}()})}function Ti(e){var t;if(e instanceof Event){var r=document.querySelectorAll(".frm-single-settings .frm-show-box.frmsvg use"),n=Array.from(r).find((function(e){return"#frm_close_icon"===e.getAttribute("href")}));if(void 0===n)return;t=n.parentElement}else t=e;var i=t.getBoundingClientRect(),o=document.getElementById("frm_adv_info"),a=o.parentElement.getBoundingClientRect();o.style.top=i.top-a.top+32+"px",o.style.left=i.left-a.left-280+"px"}function Oi(e,r){var n=Gi(e),i=document.getElementById("frm_adv_info"),o=e.className;if("svg"===e.tagName&&(e=e.firstElementChild),"use"===e.tagName&&null===(o=e.getAttributeNS("http://www.w3.org/1999/xlink","href"))&&(o=e.getAttribute("href")),-1!==o.indexOf("frm_close_icon"))Wi(i);else{if(Ti(e),jQuery(".frm_code_list a").removeClass("frm_noallow"),n.classList.contains("frm_not_email_to")?jQuery("#frm-insert-fields-box .frm_code_list li:not(.show_frm_not_email_to) a").addClass("frm_noallow"):n.classList.contains("frm_not_email_subject")&&jQuery(".frm_code_list li.hide_frm_not_email_subject a").addClass("frm_noallow"),i.setAttribute("data-fills",n.id),i.style.display="block","use"===e.tagName)if(e.hasAttributeNS("http://www.w3.org/1999/xlink","href"))e.setAttributeNS("http://www.w3.org/1999/xlink","href","#frm_close_icon");else{var l=document.createElementNS("http://www.w3.org/2000/svg","use");l.setAttributeNS("http://www.w3.org/1999/xlink","href","#frm_close_icon"),e.parentNode.replaceChild(l,e)}else e.className=o.replace("frm_more_horiz_solid_icon","frm_close_icon");"nofocus"!==r&&("none"!==n.style.display?n.focus():jQuery(tinymce.get(n.id)).trigger("focus")),function(e){["address","body"].forEach((function(r){!function(e,r){var n,i;n=a.contextualShortcodes[r+"Selector"],i=a.contextualShortcodes[r];var o,l=e.matches(n),s=function(e){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=t(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw o}}}}(i);try{for(s.s();!(o=s.n()).done;){var d,c=o.value,f=null===(d=document.querySelector('#frm-adv-info-tab .frm_code_list [data-code="'+c+'"]'))||void 0===d?void 0:d.closest("li");null==f||f.classList.toggle("frm_hidden",!l)}}catch(e){s.e(e)}finally{s.f()}}(e,r)}))}(n)}}function Di(e){return 0===a.contextualShortcodes.length||!function(e){var t=e.querySelector("a");if(!t)return!1;var r=t.dataset.code;return a.contextualShortcodes.address.includes(r)||a.contextualShortcodes.body.includes(r)}(e)||function(e){var t=e.querySelector("a").dataset.code,r=document.getElementById("frm_adv_info").dataset.fills,n=document.getElementById(r),i=a.contextualShortcodes;return i.address.includes(t)?n.matches(i.addressSelector):n.matches(i.bodySelector)}(e)}function Mi(){E||(E=1,window.addEventListener("beforeunload",zi))}function Fi(){E=0}function Hi(){E=0}function Pi(){var e=document.getElementById("frm_submit_side_top");e.classList.contains("frm_submit_ajax")&&e.setAttribute("data-new-addon-installed",!0),e.click()}function zi(e){E&&(e.preventDefault(),e.returnValue="")}function Ri(e,t){var r={my:"top",at:"top+"+t,of:window};e.dialog("option","position",r)}function Gi(e){for(var t,r=e.nextElementSibling;null!==r&&("INPUT"!==r.tagName&&"TEXTAREA"!==r.tagName||r.classList.contains("frm-token-input-field"));)r=Gi(r);return r||(r=null===(t=e.closest(".frm-field-formula"))||void 0===t?void 0:t.querySelector(".frm-calc-field")),r}function $i(e){for(var t=e.previousElementSibling;null!==t&&"I"!==t.tagName&&"svg"!==t.tagName;)t=$i(t);return t}function Wi(e){var t,r,n,i;if((void 0!==e||null!==(e=document.getElementById("frm_adv_info")))&&null===document.getElementById("frm_dyncontent")){for(e.style.display="none",n=document.querySelectorAll(".frm-show-box.frm_close_icon"),t=0;t<n.length;t++)n[t].classList.remove("frm_close_icon"),n[t].classList.add("frm_more_horiz_solid_icon");for(i=document.querySelectorAll(".frm_has_shortcodes use"),r=0;r<i.length;r++)if("#frm_close_icon"===i[r].getAttributeNS("http://www.w3.org/1999/xlink","href")){if(i[r].closest(".frm_remove_field"))continue;i[r].setAttributeNS("http://www.w3.org/1999/xlink","href","#frm_more_horiz_solid_icon")}}}function Ui(e,t){t.stopPropagation(),jQuery(".frm_code_list .frmids, .frm_code_list .frmkeys").addClass("frm_hidden"),jQuery(".frm_code_list ."+e).removeClass("frm_hidden"),jQuery(".frmids, .frmkeys").removeClass("current"),jQuery("."+e).addClass("current")}function Vi(e){var t=e.target.closest(".frm_form_action_settings");t&&(t.classList.contains("frm_single_email_settings")||t.classList.contains("frm_single_on_submit_settings"))&&function(e){e.querySelectorAll(".wp-editor-area").forEach((function(e){frmDom.wysiwyg.init(e,{height:160,addFocusEvents:!0})}))}(t)}function Ki(){return!0===F(this)&&(jQuery(".frm_uninstall .frm-wait").css("visibility","visible"),jQuery.ajax({type:"POST",url:ajaxurl,data:"action=frm_uninstall&nonce="+frmGlobal.nonce,success:function(e){jQuery(".frm_uninstall").fadeOut("slow"),window.location=e}})),!1}function Ji(){var e=jQuery(this),t=this.name,r=this.getAttribute("data-plugin"),n=t.replace("edd_"+r+"_license_",""),i=document.getElementById("edd_"+r+"_license_key").value;e.get(0).disabled=!0,jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"frm_addon_"+n,license:i,plugin:r,nonce:frmGlobal.nonce},success:function(t){e.get(0).disabled=!1;var o=e.closest(".edd_frm_license_row");"deactivate"===n&&(i="",document.getElementById("edd_"+r+"_license_key").value=""),o.find(".edd_frm_license").html(i);var a=e.get(0).closest(".frm_form_field"),l=!0===t.success;a.querySelector(".frm_icon_font.frm_action_success").classList.toggle("frm_hidden",!l||"deactivate"===n),a.querySelector(".frm_icon_font.frm_action_error").classList.toggle("frm_hidden",l);var s=o.find(".frm_license_msg");s.html(t.message),""!==t.message&&setTimeout((function(){if(s.html(""),o.find(".frm_icon_font").addClass("frm_hidden"),l){var e="activate"===n;o.get(0).querySelector(".edd_frm_unauthorized").classList.toggle("frm_hidden",e),o.get(0).querySelector(".edd_frm_authorized").classList.toggle("frm_hidden",!e)}}),2e3)}})}function Yi(e){e.preventDefault();var t=jQuery(e.target).find("input:checked");if(t.length){var r,n,i,o,a=[];t.each((function(e){a[e]=this.value})),r=a,n=e.target,(o=(i=jQuery(n)).next(".frm-importer-process")).find(".form-total").text(r.length),o.find(".form-current").text("1"),i.hide(),o.find(".process-completed").hide(),o.show(),N.importQueue=r,N.imported=0,Xi(o)}}function Xi(e){var t=N.importQueue[0],r={action:"frm_import_"+jQuery("#welcome-panel").find('input[name="slug"]').val(),form_id:t,nonce:frmGlobal.nonce};jQuery.post(ajaxurl,r,(function(r){var n;r.success&&(n=r.data.error?"<p>"+r.data.name+": "+r.data.msg+"</p>":'<p>Imported <a href="'+r.data.link+'" target="_blank">'+r.data.name+"</a></p>",e.find(".status").prepend(n),e.find(".status").show(),N.importQueue=jQuery.grep(N.importQueue,(function(e){return e!=t})),N.imported++,0===N.importQueue.length?(e.find(".process-count").hide(),e.find(".forms-completed").text(N.imported),e.find(".process-completed").show()):(e.find(".form-current").text(N.imported+1),Xi(e)))}))}function Zi(e){e.preventDefault();var t=!1,r=jQuery('input[name="frm_export_forms[]"]');jQuery('input[name="frm_export_forms[]"]:checked').val()||(r.closest(".frm-table-box").addClass("frm_blank_field"),t="stop");var n=jQuery('input[name="type[]"]');if(jQuery('input[name="type[]"]:checked').val()||"checkbox"!==n.attr("type")||(n.closest("p").addClass("frm_blank_field"),t="stop"),"stop"===t)return!1;e.stopPropagation(),this.submit()}function eo(){var e=jQuery(this).closest(".frm_blank_field");if(void 0!==e){var t=this.name;("type[]"===t&&jQuery('input[name="type[]"]:checked').val()||"frm_export_forms[]"===t&&jQuery(this).val())&&e.removeClass("frm_blank_field")}}function to(){null!==jQuery(this).val().match(/\.csv$/i)?jQuery(".show_csv").fadeIn():jQuery(".show_csv").fadeOut()}function ro(){var e=document.querySelector('select[name="format"]');return e?e.value:""}function no(e){var t,r,n=e.target.value;oo(n),io.call(e.target),t=n,r=document.getElementById("frm-export-select-all"),"csv"===t?(r.checked=!1,r.disabled=!0):r.disabled=!1}function io(){var e=jQuery(this),t=e.find(":selected"),r=t.data("support"),n=r.indexOf("|");jQuery('input[name="type[]"]').each((function(){this.checked=!1,r.indexOf(this.value)>=0?(this.disabled=!1,-1===n&&(this.checked=!0)):this.disabled=!0})),"csv"===e.val()?(jQuery(".csv_opts").show(),jQuery(".xml_opts").hide()):(jQuery(".csv_opts").hide(),jQuery(".xml_opts").show());var i=t.data("count"),o=jQuery('input[name="frm_export_forms[]"]');"single"===i?(o.prop("multiple",!1),o.prop("checked",!1)):(o.prop("multiple",!0),o.prop("disabled",!1)),e.trigger("change")}function oo(e){if(""!==e){var t=document.querySelectorAll(".frm-is-repeater");t.length&&("csv"===e?t.forEach((function(e){e.classList.remove("frm_hidden")})):t.forEach((function(e){e.classList.add("frm_hidden")})),Lo.call(document.querySelector(".frm-auto-search")))}}function ao(){var e=jQuery("select[name=format]").find(":selected").data("count"),t=jQuery('input[name="frm_export_forms[]"]');"single"===e&&this.checked?(t.prop("disabled",!0),this.removeAttribute("disabled")):t.prop("disabled",!1)}function lo(){jQuery(".frm_multiselect").hide().each(frmDom.bootstrap.multiselect.init)}function so(e){e.preventDefault(),uo(this,"frm_multiple_addons")}function co(e){e.preventDefault(),uo(this,"frm_activate_addon")}function fo(e){e.preventDefault(),uo(this,"frm_install_addon")}function uo(e,t){var r,n,i,o;jQuery(".frm-addon-error").remove(),n=(r=jQuery(e)).attr("rel"),i=r.parent(),o=i.parent().find(".addon-status-label"),r.addClass("frm_loading_button"),jQuery.ajax({url:ajaxurl,type:"POST",async:!0,cache:!1,dataType:"json",data:{action:t,nonce:frmGlobal.nonce,plugin:n},success:function(e){var n,a,l;"string"!=typeof(e=null!==(n=null===(a=e)||void 0===a?void 0:a.data)&&void 0!==n?n:e)&&"string"==typeof e.message&&(void 0!==e.saveAndReload&&(l=e.saveAndReload),e=e.message);var s=go(e);s?yo(s,i,r):(_o(e,r,o,i,l,t),wp.hooks.doAction("frm_update_addon_state",e))},error:function(){r.removeClass("frm_loading_button")}})}function mo(e){e.preventDefault();var t=jQuery(this),r=t.parent().parent(),n=t.attr("rel");t.addClass("frm_loading_button"),jQuery.ajax({url:ajaxurl,type:"POST",async:!0,cache:!1,dataType:"json",data:{action:"frm_install_addon",nonce:a.nonce,plugin:n,hostname:r.find("#hostname").val(),username:r.find("#username").val(),password:r.find("#password").val()},success:function(e){var n,i,o=go(e=null!==(n=null===(i=e)||void 0===i?void 0:i.data)&&void 0!==n?n:e);o?yo(o,r,t):_o(e,t,message,r)},error:function(){t.removeClass("frm_loading_button")}})}function _o(e,t,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"frm_activate_addon",l=document.querySelectorAll(".frm-addon-status");l.forEach((function(t){t.textContent=e,t.style.display="block"})),t.css({opacity:"0"}),document.querySelectorAll(".frm-oneclick").forEach((function(e){e.style.display="none"})),jQuery("#frm_upgrade_modal h2").hide(),jQuery("#frm_upgrade_modal .frm_lock_icon").addClass("frm_lock_open_icon"),jQuery("#frm_upgrade_modal .frm_lock_icon use").attr("xlink:href","#frm_lock_open_icon");var s={frm_activate_addon:{class:"frm-addon-active",message:a.active},frm_deactivate_addon:{class:"frm-addon-installed",message:a.installed},frm_uninstall_addon:{class:"frm-addon-not-installed",message:a.not_installed}};s.frm_install_addon=s.frm_activate_addon;var c=r[0];c&&(c.textContent=s[o].message);var f=n[0].parentElement;f.classList.remove("frm-addon-not-installed","frm-addon-installed","frm-addon-active"),f.classList.add(s[o].class),t[0].classList.remove("frm_loading_button"),document.querySelectorAll(".frm-admin-page-import, #frm-admin-smtp, #frm-welcome").length>0?window.location.reload():["settings","form_builder"].includes(i)&&l.forEach((function(e){var t=null!==e.closest("#frm_upgrade_modal");e.appendChild(function(e,t){var r=[po(e)];return t&&r.push(function(){var e=document.createElement("a");return e.setAttribute("href","#"),e.classList.add("button","button-secondary","frm-button-secondary","dismiss"),e.textContent=B("Close","formidable"),e}()),d({className:"frm-save-and-reload-options",children:r})}(i,t))}))}function po(e){var t=document.createElement("button");return t.classList.add("frm-save-and-reload","button","button-primary","frm-button-primary"),t.textContent=B("Save and Reload","formidable"),t.addEventListener("click",(function(){var t,r;"form_builder"===e?Pi():"settings"===e&&null!==(t=document.getElementById("form_settings_page"))&&null!==(r=t.querySelector("form.frm_form_settings"))&&(E=0,r.submit())})),t}function go(e){return"string"!=typeof e&&(void 0===e.success||!e.success)&&(e.form&&jQuery(e.form).is("#message")?{message:jQuery(e.form).find("p").html()}:e)}function yo(e,t,r){e.form?(jQuery(".frm-inline-error").remove(),r.closest(".frm-card").html(e.form).css({padding:5}).find("#upgrade").attr("rel",r.attr("rel")).on("click",mo)):(t.append('<div class="frm-addon-error frm_error_style"><p><strong>'+e.message+"</strong></p></div>"),r.removeClass("frm_loading_button"),jQuery(".frm-addon-error").delay(4e3).fadeOut())}function ho(){bo()}function vo(e){!function(e,t,r){var n=jQuery("#frm_leave_email_error");n.removeClass("frm_hidden").attr("frm-error",r),jQuery("#frm_leave_email").one("keyup",(function(){n.addClass("frm_hidden")}))}(0,0,e)}function bo(){var e=document.getElementById("frmapi-email-form");jQuery.ajax({dataType:"json",url:e.getAttribute("data-url"),success:function(t){var r=t.renderedHtml;r=r.replace(/<link\b[^>]*(formidableforms.css|action=frmpro_css)[^>]*>/gi,""),e.innerHTML=r}})}function jo(e){frmDom.autocomplete.initSelectionAutocomplete(e)}function wo(e){var t=this.parentNode.parentNode,r=t.elements.type.value;e.preventDefault(),this.classList.add("frm_loading_button"),xo(t,r,this)}function Qo(e){var t=this.elements.type.value,r=this.querySelector("button");e.preventDefault(),r.classList.add("frm_loading_button"),xo(this,t,r)}function xo(e,t,r){var n=function(e){var t,r,n={},i=e.elements;for(r=0;r<i.length;r++){var o=i[r],a=o.name,l=o.value,s=a.match(/(.*)\[(.*)\]/);("radio"!==o.type&&"checkbox"!==o.type||o.checked)&&(null===s?Reflect.has(n,a)?(Array.isArray(n[a])||(n[a]=[n[a]]),n[a].push(l)):n[a]=l:(a=s[1],t=s[2],Reflect.has(n,a)||(n[a]={}),n[a][t]=l))}return n}(e),i=n.template_name,o=n.template_desc,a=e.elements.link.value,l={action:t,xml:a,name:i,desc:o,form:JSON.stringify(n),nonce:frmGlobal.nonce},s={formData:n};Bo(l=wp.hooks.applyFilters("frm_before_install_new_form",l,s),(function(t){if(void 0!==t.redirect){var n=t.redirect;if(void 0===e.elements.redirect)window.location=n;else{var i=document.getElementById("frm-redirect-link");void 0!==a&&null!==i&&(i.setAttribute("href",n),i.classList.remove("frm_grey","disabled"),(o=e.parentNode.parentNode).classList.add("frm_grey"),o.nextElementSibling.classList.remove("frm_grey"),r.classList.add("frm_grey","disabled"))}}else jQuery(".spinner").css("visibility","hidden"),"string"==typeof t.message&&function(e){var t=d(e);t.style.padding="20px 40px",frmDom.modal.maybeCreateModal("frmInstallFormErrorModal",{title:B("Unable to install template","formidable"),content:t}).classList.add("frm_common_modal")}(t.message);var o;r.classList.remove("frm_loading_button")}))}function Eo(e){var t=document.getElementById("frm_captcha_threshold_container");t&&t.classList.toggle("frm_hidden","v3"!==e.target.value)}function ko(e){var t=this.getAttribute("data-id");e.preventDefault(),data={action:"frm_forms_trash",id:t,nonce:frmGlobal.nonce},Bo(data,(function(){var e=document.getElementById("frm-template-custom-"+t);Co(e,(function(){e.parentNode.removeChild(e)}))}))}function Lo(){var e,t,r=!1,n=this.value.toLowerCase(),i=this.getAttribute("data-tosearch"),o=document.getElementsByClassName(i);if("SELECT"===this.tagName&&(n=(n=function(e){for(var t,r=[],n=e&&e.options,i=0,o=n.length;i<o;i++)(t=n[i]).selected&&r.push(t.value);return r}(this)).join("|").toLowerCase(),r=!0),"frm-action"===i&&""!==n){var a=document.getElementById("frm_email_addon_menu").classList;a.remove("frm-all-actions"),a.add("frm-limited-actions")}for(e=0;e<o.length;e++){var l=o[e].innerText.toLowerCase(),s=!("xml"===ro()&&o[e].classList.contains("frm-is-repeater"));""===n?(s&&Di(o[e])&&o[e].classList.remove("frm_hidden"),o[e].classList.remove("frm-search-result")):r&&new RegExp(n).test(l)||l.indexOf(n)>=0||So(l,n)?(s&&Di(o[e])&&o[e].classList.remove("frm_hidden"),o[e].classList.add("frm-search-result")):(o[e].classList.add("frm_hidden"),o[e].classList.remove("frm-search-result"))}(t=document.querySelector("#frm-insert-fields"))&&t.querySelectorAll(":scope > .frm-with-line").forEach((function(e){var t=e.nextElementSibling;if(t){var r=t.querySelectorAll(":scope > li.frmbutton"),n=Array.from(r).every((function(e){return e.classList.contains("frm_hidden")}));e.classList.toggle("frm_hidden",n)}})),jQuery(this).trigger("frmAfterSearch")}function So(e,t){return"s"!==t&&"s"!==e[e.length-1]&&(e+"s").indexOf(t)>=0}function Ao(e){e.stopPropagation()}function Io(e,t){var r=document.createEvent("HTMLEvents");r.initEvent(t,!1,!0),e.dispatchEvent(r)}function Bo(e,t){var r,n=new XMLHttpRequest,i="string"==typeof e?e:Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&");return n.open("post",ajaxurl,!0),n.onreadystatechange=function(){if(n.readyState>3&&200==n.status){r=n.responseText;try{r=JSON.parse(r)}catch(e){}t(r)}},n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(i),n}function Co(e,t){e.classList.add("frm-fade"),setTimeout(t,1e3)}function qo(e){jQuery(e).css("visibility","hidden")}function No(e){jQuery(e).css("visibility","visible")}function To(e,t){var r=jQuery(e);if(!r.length)return!1;void 0===t&&(t="550px");var n={dialogClass:"frm-dialog",modal:!0,autoOpen:!1,closeOnEscape:!0,width:t,resizable:!1,draggable:!1,open:function(){var e,t;jQuery(".ui-dialog-titlebar").addClass("frm_hidden").removeClass("ui-helper-clearfix"),jQuery("#wpwrap").addClass("frm_overlay"),jQuery(".frm-dialog").removeClass("ui-widget ui-widget-content ui-corner-all"),r.removeClass("ui-dialog-content ui-widget-content"),e=r,t=function(){e.dialog("close")},jQuery(".ui-widget-overlay").on("click",t),e.on("click","a.dismiss",t)},close:function(){jQuery("#wpwrap").removeClass("frm_overlay"),jQuery(".spinner").css("visibility","hidden"),this.removeAttribute("data-option-type");var e=document.getElementById("bulk-option-type");e&&(e.value="")}};return r.dialog(n),r}function Oo(e,t){if("#"===t){var r=document.getElementById(e),n=r.style.display;r.style.display="none"===n?"block":"none"}else e.is(":visible")?e.hide():e.show()}function Do(){window.onbeforeunload=null;var e=jQuery(window);e.off("beforeunload.widgets"),e.off("beforeunload.edit-post")}function Mo(){var e=jQuery(this).closest(".frm-single-settings").data("fid"),t=document.getElementById("frm_field_id_"+e);if(null!==t&&"form"===t.dataset.type)if(t=jQuery(t),this.options[this.selectedIndex].value){t.find(".frm-not-set")[0].classList.add("frm_hidden");var r=t.find(".frm-embed-message");r.html(r.data("embedmsg")+this.options[this.selectedIndex].text),t.find(".frm-embed-field-placeholder")[0].classList.remove("frm_hidden")}else t.find(".frm-not-set")[0].classList.remove("frm_hidden"),t.find(".frm-embed-field-placeholder")[0].classList.add("frm_hidden")}function Fo(){var e=jQuery(this).closest(".frm-single-settings"),t=e.find(".frmjs_product_choices"),r=e.find(".frm_prod_options_heading"),n=this.options[this.selectedIndex].value;t.removeClass("frm_prod_type_single frm_prod_type_user_def"),r.removeClass("frm_prod_user_def"),"single"===n?t.addClass("frm_prod_type_single"):"user_def"===n&&(t.addClass("frm_prod_type_user_def"),r.addClass("frm_prod_user_def"))}function Ho(e){var t=document.getElementById("frm_field_id_"+e);return null!==t&&"product"===t.getAttribute("data-type")}function Po(){var t=function(e,t){return window.frmCachedSubFields=window.frmCachedSubFields||{},window.frmCachedSubFields[e]=window.frmCachedSubFields[e]||{},window.frmCachedSubFields[e][t]},r=function(e,t,r){window.frmCachedSubFields=window.frmCachedSubFields||{},window.frmCachedSubFields[e]=window.frmCachedSubFields[e]||{},window.frmCachedSubFields[e][t]=r},n=[1,2,3,4,5,6,7,8,9,10,11,12].map((function(e){return"frm"+e})),i=["first","middle","last"];document.addEventListener("change",(function(o){o.target.matches(".frm_name_layout_dropdown")&&function(o){var a,l=o.target.value.split("_"),s=o.target.dataset.fieldId,d=document.querySelector("#field_"+s+"_inner_container .frm_combo_inputs_container"),c=(a=l.length,"frm"+parseInt(12/a));i.forEach((function(t){var i,o=d.querySelector('[data-sub-field-name="'+t+'"]');o&&(o.classList.add("frm_hidden"),(i=o.classList).remove.apply(i,e(n)),r(s,t,o))})),l.forEach((function(e){var r=t(s,e);r&&(r.classList.remove("frm_hidden"),r.classList.add(c),d.append(r))})),i.forEach((function(e){var t=document.querySelector(".frm_sub_field_options-"+e+'[data-field-id="'+s+'"]');t&&(t.classList.add("frm_hidden"),r(s,e+"_options",t))})),l.forEach((function(e){var r=t(s,e+"_options");r&&r.classList.remove("frm_hidden")}))}(o)}),!1)}function zo(e,t){var r,n,i,o=!1,a=!1;(r=t.newOption?(new DOMParser).parseFromString(t.newOption,"text/html").body.childNodes[0]:t).querySelectorAll("svg").forEach((function(e,t){(n=e.getElementsByTagNameNS("http://www.w3.org/2000/svg","use")[0])&&("#frm_drag_icon"===(i=n.getAttributeNS("http://www.w3.org/1999/xlink","href")||n.getAttribute("href"))&&(o=!0),"#frm_save_icon"===i&&(a=!0))})),o||r.prepend(b.drag.cloneNode(!0)),r.querySelector("[id^=field_key_".concat(e,"-]"))&&!a&&r.querySelector("[id^=field_key_".concat(e,"-]")).after(b.save.cloneNode(!0)),t.newOption&&(t.newOption=r)}function Ro(){var e=document.getElementById("frm_leave_email").value.trim();if(""!==e)if(!1!==/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i.test(e)){var t=jQuery("#frmapi-email-form").find("form"),r=t.find('[type="email"]').not(".frm_verify");if(r.length){if(document.getElementById("frm_empty_inbox")){document.getElementById("frm-add-my-email-address").remove();var n=document.getElementById("frm_leave_email_wrapper");if(n){n.classList.add("frm_hidden");var i=c({className:"frm-wait frm_spinner"});i.style.visibility="visible",i.style.float="none",i.style.width="unset",n.parentElement.insertBefore(i,n.nextElementSibling)}}r.val(e),jQuery.ajax({type:"POST",url:t.attr("action"),data:t.serialize()+"&action=frm_forms_preview"}).done((function(e){if(-1!==jQuery(e).find(".frm_message").text().trim().indexOf("Thanks!")){var t=document.getElementById("frmapi-email-form").parentElement.querySelector(".frm_spinner");t&&t.remove(),wp.hooks.applyFilters("frm_thank_you_on_signup",!0)&&document.getElementById("frm_leave_email_wrapper").replaceWith(c(B("Thank you for signing up!","formidable")))}else vo("invalid")}))}}else vo("invalid");else vo("empty")}function Go(e){if(D||e.stopPropagation(),!(e.target.classList.contains("frm-show-box")||e.target.parentElement&&e.target.parentElement.classList.contains("frm-show-box"))){var t=document.getElementById("frm_adv_info");t&&(t.dataset.fills===e.target.id&&void 0!==e.target.id||e.target.closest("#frm_adv_info")||"none"===t.style.display||Wi(t))}}return{init:function(){var t,r,n,i,o,a,l;!function(){jQuery(document).on("click","#frm-add-my-email-address",(function(e){e.preventDefault(),Ro()}));var e=document.getElementById("frm_empty_inbox"),t=document.getElementById("frm_leave_email");if(e&&t){var r=document.getElementById("frm-leave-email-modal");r.classList.remove("frm_hidden"),r.querySelector(".frm_modal_footer").classList.add("frm_hidden"),t.addEventListener("keyup",(function(e){if("Enter"===e.key){var t=document.getElementById("frm-add-my-email-address");t&&t.click()}}))}}(),r=document.querySelector(".frm-admin-footer-links"),n=null!==(t=document.querySelector(".frm_page_container"))&&void 0!==t?t:document.getElementById("wpbody-content"),r&&n&&(n.appendChild(r),r.classList.remove("frm_hidden")),N={},jQuery(".wp-admin").on("click",(function(e){var t=jQuery(e.target),r=jQuery(".dropdown.open");!r.length||t.hasClass("dropdown")||t.closest(".dropdown").length||r.removeClass("open")})),jQuery("#frm_bs_dropdown:not(.open) a").on("click",Lt),void 0===k&&(k=jQuery(document.getElementById("form_id")).val()),document.querySelectorAll(".frm-warning-dismiss").forEach((function(e){_(e,St)})),frmAdminBuild.inboxBannerInit(),j.length>0?frmAdminBuild.buildInit():null!==document.getElementById("frm_notification_settings")?frmAdminBuild.settingsInit():null!==document.getElementById("frm_styling_form")?frmAdminBuild.styleInit():null!==document.getElementById("form_global_settings")?frmAdminBuild.globalSettingsInit():null!==document.getElementById("frm_export_xml")?frmAdminBuild.exportInit():null!==document.querySelector(".frm-inbox-wrapper")?frmAdminBuild.inboxInit():null!==document.getElementById("frm-welcome")?frmAdminBuild.solutionInit():(function(){if(document.body.classList.contains("frm-admin-page-entries")){var e=document.getElementById("screen-options-wrap");if(e){var t=d({className:"frm_warning_style",text:B("Only 10 columns can be selected at a time.","formidable")});t.style.margin=0;var r=e.querySelector("legend");r.parentNode.insertBefore(t,r.nextElementSibling);var n=Array.from(e.querySelectorAll('input[type="checkbox"]')),i=function(){n.reduce((function(e,t){return t.checked?e+1:e}),0)>=10?(t.classList.remove("frm_hidden"),n.forEach((function(e){e.checked||(e.parentNode.classList.add("frm_noallow"),e.disabled=!0)}))):t.classList.add("frm_hidden")};i(),n.forEach((function(e){e.addEventListener("change",(function(e){e.target.checked?i():(t.classList.add("frm_hidden"),n.forEach((function(e){e.parentNode.classList.remove("frm_noallow"),e.disabled=!1})))}))}))}}}(),jo(),jQuery("[data-frmprint]").on("click",(function(){return window.print(),!1}))),jQuery(document).on("change","select[data-toggleclass], input[data-toggleclass]",Qi),function(){function e(e){var t=e.options[e.selectedIndex];e.querySelectorAll("option[data-dependency]:not([data-dependency-skip])").forEach((function(e){var r=document.querySelector(e.dataset.dependency);null==r||r.classList.toggle("frm_hidden",t!==e)}))}document.querySelectorAll("select.frm_select_with_dependency").forEach(e),frmDom.util.documentOn("change","select.frm_select_with_dependency",(function(t){return e(t.target)}))}(),(jQuery(document.getElementById("frm_adv_info")).length>0||jQuery(".frm_field_list").length>0)&&frmAdminBuild.panelInit(),i=jQuery(".wrap, .frm_wrap"),o=document.getElementById("frm_confirm_modal"),a=!1,l=!1,jQuery(o).on("click","[data-deletefield]",wr),jQuery(o).on("click","[data-removeid]",G),jQuery(o).on("click","[data-trashtemplate]",ko),i.on("click",".frm_remove_tag, .frm_remove_form_action",G),i.on("click","a[data-frmverify]",M),i.on("click","a[data-frmtoggle]",P),i.on("click","a[data-frmhide], a[data-frmshow]",z),i.on("change","input[data-frmhide], input[data-frmshow]",z),i.on("click",".widget-top,a.widget-action",$),i.on("mouseenter.frm",".frm_bstooltip, .frm_help",(function(){jQuery(this).off("mouseenter.frm"),jQuery(".frm_bstooltip, .frm_help").tooltip(),jQuery(this).tooltip("show")})),jQuery(".frm_bstooltip, .frm_help").tooltip(),jQuery(document).on("click","#doaction, #doaction2",(function(e){var t="doaction"===this.id?"top":"bottom",r=document.getElementById("bulk-action-selector-"+t),n=document.getElementById("confirm-bulk-delete-"+t);if(null!==r&&null!==n){if(a=this,!l&&"bulk_delete"===r.value)return e.preventDefault(),F(n),!1}else a=!1})),jQuery(document).on("click","#frm-confirmed-click",(function(e){if(!1!==a&&!e.target.classList.contains("frm-btn-inactive"))return"confirm-bulk-delete"===this.getAttribute("href")?(e.preventDefault(),l=!0,a.click(),!1):void 0})),function(){var e=To("#frm_upgrade_modal");function t(t){var r,n,i;if((r=t.target).classList){var o=r.classList.contains("frm_show_expired_modal")||null!==r.querySelector(".frm_show_expired_modal")||r.closest(".frm_show_expired_modal");if("change"===t.type&&r.classList.contains("frm_select_with_upgrade")){var a=r.options[r.selectedIndex];a&&a.dataset.upgrade&&(r=a)}if(!r.dataset.upgrade){var l=r.closest("[data-upgrade]");if(!l){if(!(l=r.closest(".frm_field_box")))return;r.dataset.upgrade=""}r=l}if(o)wp.hooks.doAction("frm_show_expired_modal",r);else{var s=r.dataset.upgrade;if(s&&!r.classList.contains("frm_show_upgrade_tab")){t.preventDefault();var d=e.get(0),c=d.querySelector(".frm_lock_icon");c&&(c.style.display="block",c.classList.remove("frm_lock_open_icon"),c.querySelector("use").setAttribute("href","#frm_lock_icon"));var f="frm_upgrade_modal_image",u=document.getElementById(f);u&&u.remove(),r.dataset.image&&(c&&(c.style.display="none"),c.parentNode.insertBefore(m({id:f,src:frmGlobal.url+"/images/"+r.dataset.image}),c));var _=d.querySelector(".license-level");_&&(_.textContent=Vn(r)),Jn(r,"modal",s),d.querySelector(".frm_are_not_installed").style.display=r.dataset.image?"none":"inline-block",d.querySelector(".frm_feature_label").textContent=s,d.querySelector("h2").style.display="block",e.dialog("open");var p=d.querySelector(".button-primary:not(.frm-oneclick-button)");n=p.getAttribute("href").replace(/(medium=)[a-z_-]+/gi,"$1"+r.getAttribute("data-medium")),null===(i=r.getAttribute("data-content"))&&(i=""),n=n.replace(/(content=)[a-z_-]+/gi,"$1"+i),p.setAttribute("href",n)}}}}!1!==e&&(document.addEventListener("click",t),frmDom.util.documentOn("change","select.frm_select_with_upgrade",t))}(),frmDom.util.documentOn("click","[data-modal-title]",Un);var s=jQuery(document.getElementById("frm_shortcodediv"));s.length>0&&(jQuery("a.edit-frm_shortcode").on("click",(function(){return s.is(":hidden")&&(s.slideDown("fast"),this.style.display="none"),!1})),jQuery(".cancel-frm_shortcode","#frm_shortcodediv").on("click",(function(){return s.slideUp("fast"),s.siblings("a.edit-frm_shortcode").show(),!1}))),jQuery(document).on("click","#frm-nav-tabs a",W),jQuery(".post-type-frm_display .frm-nav-tabs a, .frm-category-tabs a").on("click",(function(){var e=this.classList.contains("frm_show_upgrade_tab");if(!this.classList.contains("frm_noallow")||e)return e&&Kn(this),U(this),!1})),U(jQuery(".starttab a"),"auto"),jQuery(document).on("click","#frm-fid-search-menu a",(function(){var e=this.id.replace("fid-","");return jQuery('select[name="fid"]').val(e),Hn(document.getElementById("posts-filter")),!1})),jQuery(".frm_select_box").on("click focus",(function(){this.select()})),jQuery(document).on("input search change",".frm-auto-search:not(#frm-form-templates-page #template-search-input)",Lo),jQuery(document).on("focusin click",".frm-auto-search",Ao);var c=jQuery(".frm-auto-search");""!==c.val()&&c.trigger("keyup"),FrmFormsConnect.init(),jQuery(document).on("click",".frm-install-addon",fo),jQuery(document).on("click",".frm-activate-addon",co),jQuery(document).on("click",".frm-solution-multiple",so),jQuery("button, input[type=submit]").on("click",Do),document.addEventListener("click",(function(e){if("LABEL"===e.target.nodeName){var t=e.target.getAttribute("for");if(t){var r=document.getElementById(t);if(r&&r.nextElementSibling){var n=r.nextElementSibling.querySelector("button.dropdown-toggle.multiselect");n&&setTimeout((function(){return n.click()}),0)}}}})),frmAdminBuild.hooks.addFilter("frm_before_embed_modal",(function(e,t){var r,n,i=t.element;if("form"!==t.type)return e;var o=i.closest("tr");if(o)r=parseInt(o.querySelector(".column-id").textContent),n=o.querySelector(".column-form_key").textContent;else{r=document.getElementById("form_id").value;var a=document.getElementById("frm_form_key");if(a)n=a.value;else{var l=document.getElementById("frm-previewDrop");l&&(n=l.nextElementSibling.querySelector(".dropdown-item a").getAttribute("href").split("form=")[1])}}return[r,n]})),document.querySelectorAll("#frm-show-fields > li, .frm_grid_container li").forEach((function(t,r){t.addEventListener("click",(function(){var t,r,n;r=(null===(t=this.querySelector("li"))||void 0===t?void 0:t.dataset.fid)||this.dataset.fid,(n=document.querySelectorAll("[id^=frm_delete_field_".concat(r,"-]"))).length<2||e(n).slice(1).forEach((function(e,t){e.classList.contains("frm_other_option")||zo(r,e)}))}))}));var f=document.getElementById("frm_small_screen_proceed_button");f&&_(f,(function(){var e;null===(e=document.getElementById("frm_small_device_message_container"))||void 0===e||e.remove(),g("small_screen_proceed",new FormData)}));var u=document.getElementById("frm_sale_banner"),p=null==u?void 0:u.querySelector(".dismiss");u&&(_(u,(function(e){e.target.closest(".dismiss")||(window.location.href=u.getAttribute("data-url"))})),p&&_(p,(function(){u.remove();var e=new FormData;g("sale_banner_dismiss",e)})))},buildInit:function(){var e,t,r;jQuery("#frm_builder_page").on("mouseup","*:not(.frm-show-box)",Go),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return frmDom.util.debounce(e,t)}(oe,10),h=document.getElementById("post-body-content"),v=jQuery(h),jQuery(".frm_field_loading").length&&Le(jQuery(".frm_field_loading").first().attr("id")),V("ul.frm_sorting"),document.querySelectorAll(".field_type_list > li:not(.frm_show_upgrade)").forEach(X),jQuery("ul.field_type_list, .field_type_list li, ul.frm_code_list, .frm_code_list li, .frm_code_list li a, #frm_adv_info #category-tabs li, #frm_adv_info #category-tabs li a").disableSelection(),jQuery(".frm_submit_ajax").on("click",Fn),jQuery(".frm_submit_no_ajax").on("click",zn),Gn(),jQuery("a.edit-form-status").on("click",kn),jQuery(".cancel-form-status").on("click",Ln),jQuery(".save-form-status").on("click",(function(){var e=jQuery(document.getElementById("form_change_status")).val();return jQuery('input[name="new_status"]').val(e),jQuery(document.getElementById("form-status-display")).html(e),jQuery(".cancel-form-status").trigger("click"),!1})),jQuery(".frm_form_builder form").first().on("submit",(function(){jQuery(".inplace_field").trigger("blur")})),lo(),Tr(),e=jQuery(w),t=document.getElementById("frm_form_editor_container"),e.on("click",".frm_add_logic_row",Er),e.on("click",".frm_add_watch_lookup_row",Lr),e.on("change",".frm_get_values_form",qr),e.on("change",".frm_logic_field_opts",bn),e.on("frm-multiselect-changed",'select[name^="field_options[admin_only_"]',Sn),jQuery(document.getElementById("frm-insert-fields")).on("click",".frm_add_field",Ae),j.on("click",".frm_clone_field",Ce),e.on("blur",'input[id^="frm_calc"]',Ye),e.on("change","input.frm_format_opt, input.frm_max_length_opt",lt),e.on("change click","[data-changeme]",ot),e.on("click","input.frm_req_field",st),e.on("click",".frm_mark_unique",ct),e.on("change",".frm_repeat_format",Vr),e.on("change",".frm_repeat_limit",Kr),e.on("change",".frm_js_checkbox_limit",Jr),e.on("input",'input[name^="field_options[add_label_"]',(function(){Yr(this,"add")})),e.on("input",'input[name^="field_options[remove_label_"]',(function(){Yr(this,"remove")})),e.on("change",'select[name^="field_options[data_type_"]',Nr),jQuery(t).on("click",".frm-collapse-page",Or),jQuery(t).on("click",".frm-collapse-section",Fr),e.on("click",".frm-single-settings h3, .frm-single-settings h4.frm-collapsible",Hr),e.on("keydown",".frm-single-settings h3, .frm-single-settings h4.frm-collapsible",(function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),Hr.call(this,e))})),jQuery(t).on("show.bs.dropdown hide.bs.dropdown",ze),e.on("click",".frm_toggle_sep_values",yt),e.on("click",".frm_toggle_image_options",ht),e.on("click",".frm_remove_image_option",Et),e.on("click",".frm_choose_image_box",xt),e.on("change",".frm_hide_image_text",Qt),e.on("change",".frm_field_options_image_size",jt),e.on("click",".frm_multiselect_opt",kt),j.on("mousedown","input, textarea, select",At),j.on("click","input[type=radio], input[type=checkbox]",At),j.on("click",".frm_delete_field",Nt),j.on("click",".frm_select_field",Tt),jQuery(document).on("click",".frm_delete_field_group",Ot),jQuery(document).on("click",".frm_clone_field_group",Dt),jQuery(document).on("click","#frm_field_group_controls > span:first-child",Mt),jQuery(document).on("click",".frm-row-layout-option",Yt),jQuery(document).on("click",".frm-merge-fields-into-row .frm-row-layout-option",Xt),jQuery(document).on("click",".frm-custom-field-group-layout",er),jQuery(document).on("click",".frm-merge-fields-into-row .frm-custom-field-group-layout",rr),jQuery(document).on("click",".frm-break-field-group",lr),j.on("click","#frm_field_group_popup .frm_grid_container input",sr),jQuery(document).on("click",".frm-cancel-custom-field-group-layout",dr),jQuery(document).on("click",".frm-save-custom-field-group-layout",fr),j.on("click","ul.frm_sorting",ur),jQuery(document).on("click",".frm-merge-fields-into-row",vr),jQuery(document).on("click",".frm-delete-field-groups",jr),j.on("click",'.frm-field-action-icons [data-toggle="dropdown"]',(function(){this.closest("li.form-field").classList.add("frm-field-settings-open"),jQuery(document).on("click","#frm_builder_page",Oe)})),j.on("mousemove","ul.frm_sorting",De),j.on("show.bs.dropdown",".frm-field-action-icons",He),jQuery(document).on("show.bs.dropdown","#frm_field_group_controls",Pe),e.on("click",".frm_single_option a[data-removeid]",It),e.on("mousedown",".frm_single_option input[type=radio]",Bt),e.on("focusin",".frm_single_option input[type=text]",Ct),e.on("click",".frm_add_opt",_t),e.on("change",".frm_single_option input",Zr),e.on("change",".frm_image_id",Zr),e.on("change",".frm_toggle_mult_sel",pt),e.on("focusin",".frm_classes + .frm-token-proxy-input",Bi),j.on("click",".frm_primary_label",zr),j.on("click",".frm_description",Rr),j.on("click","li.ui-state-default:not(.frm_noallow)",$r),j.on("dblclick","li.ui-state-default",Ur),e.on("change",".frm_tax_form_select",Xr),e.on("change","select.conf_field",ft),e.on("change",".frm_get_field_selection",jn),e.on("click",".frm-show-inline-modal",Bn),e.on("click",".frm-inline-modal .dismiss",qn),jQuery(document).on("change","[data-frmchange]",Tn),document.addEventListener("click",Nn),e.on("change",".frm_include_extras_field",et),e.on("change",'select[name^="field_options[form_select_"]',Mo),jQuery(document).on("submit","#frm_js_build_form",Fi),jQuery(document).on("change","#frm_builder_page input:not(.frm-search-input):not(.frm-custom-grid-size-input), #frm_builder_page select, #frm_builder_page textarea",Mi),nt(),jQuery(document).on("change",".frmjs_prod_data_type_opt",Fo),jQuery(document).on("focus",'.frm-single-settings ul input[type="text"][name^="field_options[options_"]',Ar),jQuery(document).on("blur",'.frm-single-settings ul input[type="text"][name^="field_options[options_"]',Br),frmDom.util.documentOn("click",".frm-show-field-settings",$r),frmDom.util.documentOn("change","select.frm_format_dropdown, select.frm_phone_type_dropdown",Wr),e.on("keydown",'.frm_single_option input[name^="field_options["], .frm_single_option input[name^="rows_"]',(function(e){"Enter"===e.key&&function(e){var t=e.closest(".frm_single_option").parentElement.querySelectorAll('.frm_single_option input[name^="field_options[" ], .frm_single_option input[name^="rows_"]'),r=Array.from(t),n=r.indexOf(e);if(!(n<0)){var i=r.slice(n+1).find((function(e){return null!==e.offsetParent}));if(i){i.focus();var o=i.value.length;i.setSelectionRange(o,o)}}}(e.currentTarget)})),!1!==(r=To("#frm-bulk-modal","700px"))&&(jQuery(".frm-insert-preset").on("click",mt),jQuery(w).on("click","a.frm-bulk-edit-link",(function(e){e.preventDefault();var t,n,i,o,a,l="",s=jQuery(this).closest("[data-fid]").data("fid"),d=pn(s),c=Ho(s);if(o=document.getElementById("frm_field_"+s+"_opts")){for(a=o.getElementsByTagName("li"),document.getElementById("bulk-field-id").value=s,t=0;t<a.length;t++)"000"!==(n=a[t].getAttribute("data-optkey"))&&void 0!==(i=document.getElementsByName("field_options[options_"+s+"]["+n+"][label]")[0])&&(l+=i.value,d&&(l+="|"+document.getElementsByName("field_options[options_"+s+"]["+n+"][value]")[0].value),c&&(l+="|"+document.getElementsByName("field_options[options_"+s+"]["+n+"][price]")[0].value),l+="\r\n"),t>=a.length-1&&(document.getElementById("frm_bulk_options").value=l);return r.dialog("open"),!1}})),jQuery("#frm-update-bulk-opts").on("click",(function(){var e=document.getElementById("bulk-field-id").value;document.getElementById("bulk-option-type").value||(this.classList.add("frm_loading_button"),frmAdminBuild.updateOpts(e,document.getElementById("frm_bulk_options").value,r),Mi())}))),In(),document.addEventListener("frm_added_field",In),Be(),Po(),xn(),frmDom.util.documentOn("change",".frm_show_password_setting_input",(function(e){var t=e.target.getAttribute("data-fid"),r=document.getElementById("frm_field_id_"+t);r&&r.classList.toggle("frm_disabled_show_password",!e.target.checked)})),document.addEventListener("scroll",Ti,!0),document.addEventListener("change",qi),document.querySelector(".frm_form_builder").addEventListener("mousedown",(function(e){e.shiftKey&&e.preventDefault()})),wp.hooks.addAction("frmShowedFieldSettings","formidableAdmin",(function(e,t){t.querySelectorAll(".frm-collapse-me").forEach(Pr)}),9999)},settingsInit:function(){var e,t,r,n,i=jQuery(document.getElementById("frm_notification_settings"));i.on("click",".frm_email_buttons",oi),i.on("click",".frm_remove_field",ai),i.on("change",".frm_to_row, .frm_from_row",li),i.on("change",".frm_tax_selector",ji),i.on("change","select.frm_single_post_field",mi),i.on("change","select.frm_toggle_post_content",_i),i.on("change","select.frm_dyncontent_opt",pi),i.on("change",".frm_post_type",gi),i.on("click",".frm_add_postmeta_row",vi),i.on("click",".frm_add_posttax_row",hi),i.on("click",".frm_toggle_cf_opts",wi),i.on("click",".frm_duplicate_form_action",Zn),jQuery(".frm_actions_list").on("click",".frm_active_action",ti),jQuery("#frm-show-groups, #frm-hide-groups").on("click",ri),lo(),jQuery("ul.frm_actions_list li").each((function(){si(jQuery(this).children("a").data("actiontype"));var e=jQuery(this).find("i");"none"!==e.css("background-image")&&e.addClass("frm-inverse")})),jQuery(".frm_submit_settings_btn").on("click",xi),Gn(),(e=jQuery(".frm_form_settings")).on("click",".frm_add_form_logic",ui),e.on("click",".frm_already_used",fi),document.addEventListener("click",(function(e){var t=e.target;t.closest(".frm_image_preview_wrapper")&&(t.closest(".frm_choose_image_box")?xt.bind(t)(e):t.closest(".frm_remove_image_option")&&Et.bind(t)(e))})),e.on("mouseup","*:not(.frm-show-box)",Go),jQuery(document.getElementById("no_save")).on("change",(function(){this.checked&&!0!==confirm(a.no_save_warning)&&jQuery(this).attr("checked",!1)})),jQuery('select[name="options[edit_action]"]').on("change",Xn),t=document.getElementById("logged_in"),jQuery(t).on("change",(function(){this.checked?No(".hide_logged_in"):qo(".hide_logged_in")})),r=jQuery(document.getElementById("frm_cookie_expiration")),jQuery(document.getElementById("frm_single_entry_type")).on("change",(function(){"cookie"===this.value?r.fadeIn("slow"):r.fadeOut("slow")}));var o=document.getElementById("single_entry");jQuery(o).on("change",(function(){this.checked?No(".hide_single_entry"):qo(".hide_single_entry"),this.checked&&"cookie"===jQuery(document.getElementById("frm_single_entry_type")).val()?r.fadeIn("slow"):r.fadeOut("slow")})),jQuery(".hide_save_draft").hide();var l=jQuery(document.getElementById("save_draft"));l.on("change",(function(){this.checked?jQuery(".hide_save_draft").fadeIn("slow"):jQuery(".hide_save_draft").fadeOut("slow")})),Pn(l),n=document.getElementById("editable"),jQuery(n).on("change",(function(){this.checked?(jQuery(".hide_editable").fadeIn("slow"),Pn(document.getElementById("edit_action"))):(jQuery(".hide_editable").fadeOut("slow"),jQuery(".edit_action_message_box").fadeOut("slow"))})),jQuery(document).on("change","#protect_files",(function(){this.checked?jQuery(".hide_protect_files").fadeIn("slow"):jQuery(".hide_protect_files").fadeOut("slow")})),jQuery(document).on("frm-multiselect-changed","#protect_files_role",Sn),jQuery(document).on("submit",".frm_form_settings",Hi),jQuery(document).on("change","#form_settings_page input:not(.frm-search-input), #form_settings_page select, #form_settings_page textarea",Mi),jo(),jQuery(document).on("frm-action-loaded",Vi),frmDom.util.documentOn("change",'.frm_on_submit_type input[type="radio"]',(function(e){if(e.target.checked){var t=e.target.closest(".frm_form_action_settings");t.querySelectorAll(".frm_on_submit_dependent_setting:not(.frm_hidden)").forEach((function(e){e.classList.add("frm_hidden")})),t.querySelectorAll(".frm_on_submit_dependent_setting[data-show-if-"+e.target.value+"]").forEach((function(e){e.classList.remove("frm_hidden")})),t.setAttribute("data-on-submit-type",e.target.value)}}))},panelInit:function(){var e,t,r,n;jQuery(".frm_wrap, #postbox-container-1").on("click",".frm_insert_code",Ei),jQuery(document).on("change",".frm_insert_val",(function(){ki(jQuery(this).data("target"),jQuery(this).val()),jQuery(this).val("")})),jQuery(document).on("click change",'[name="frm-id-key-condition"]',Ai),jQuery(document).on("keyup change",".frm-build-logic",Ii),Yn(),jQuery(document).on("frmElementAdded",(function(e,t){Yn(t)})),jQuery(document).on("mousedown",".frm-show-box",Ci),t=document.getElementById("form_settings_page"),r=document.body.classList.contains("post-type-frm_display"),n=document.getElementById("frm_insert_fields_tab"),(null!==t||r||D)&&jQuery(document).on("focusin","form input, form textarea",(function(e){var i,o,a,l;if(e.stopPropagation(),(o=this).parentNode.parentNode.classList.contains("frm_has_shortcodes")&&(Wi(),"use"===(a=$i(o)).tagName?-1===(a=a.firstElementChild).getAttributeNS("http://www.w3.org/1999/xlink","href").indexOf("frm_close_icon")&&Oi(a,"nofocus"):a.classList.contains("frm_close_icon")||Oi(a,"nofocus")),jQuery(this).is(":not(:submit, input[type=button], .frm-search-input, input[type=checkbox])")){if(jQuery(e.target).closest("#frm_adv_info").length)return;if(null!==t||D)i=jQuery("#frm_html_tab"),jQuery(this).closest("#html_settings").length>0?(i.show(),i.siblings().hide(),jQuery("#frm_html_tab a").trigger("click"),function(e){var t,r=e.id;void 0!==r&&-1===r.indexOf("-search-input")&&(jQuery("#frm-adv-info-tab").attr("data-fills",r.trim()),e.classList.contains("field_custom_html")&&(r="field_custom_html"),t=["after_html","before_html","submit_html","field_custom_html"],jQuery.inArray(r,t)>=0&&(jQuery(".frm_code_list li:not(.show_"+r+")").addClass("frm_hidden"),jQuery(".frm_code_list li.show_"+r).removeClass("frm_hidden")))}(this)):((l=jQuery(".frm-category-tabs li"))[0]&&(l[0].style.display=""),n.click(),i.hide(),i.siblings().show());else if(r){var s=new CustomEvent("frm_legacy_views_handle_field_focus");s.frmData={idAttrValue:this.id},document.dispatchEvent(s)}}})),jQuery(".frm_wrap, #postbox-container-1").on("mousedown","#frm_adv_info a, .frm_field_list a",(function(e){e.preventDefault()})),(e=jQuery("#frm_adv_info")).on("click",".subsubsub a.frmids",(function(e){Ui("frmids",e)})),e.on("click",".subsubsub a.frmkeys",(function(e){Ui("frmkeys",e)}))},inboxInit:function(){var e;jQuery(".frm_inbox_dismiss").on("click",(function(e){var t=this.parentNode.parentNode,r=t.getAttribute("data-message"),n=this.getAttribute("href"),i=t.cloneNode(!0),o=document.querySelector(".frm-dismissed-inbox-messages");if("free_templates"!==r||this.classList.contains("frm_inbox_dismiss")){e.preventDefault(),data={action:"frm_inbox_dismiss",key:r,nonce:frmGlobal.nonce};var a="frm_inbox_slide_in"===t.id;a&&(t.classList.remove("s11-fadein"),t.classList.add("s11-fadeout"),t.addEventListener("animationend",(function(){return t.remove()}),{once:!0})),Bo(data,(function(){if(!a)return"#"!==n?(window.location=n,!0):void Co(t,(function(){var e;null!==o&&(i.classList.remove("frm-fade"),null===(e=i.querySelector(".frm-inbox-message-heading"))||void 0===e||e.removeChild(i.querySelector(".frm-inbox-message-heading .frm_inbox_dismiss")),o.append(i)),1===t.parentNode.querySelectorAll(".frm-inbox-message-container").length&&(document.getElementById("frm_empty_inbox").classList.remove("frm_hidden"),t.parentNode.closest(".frm-active").classList.add("frm-empty-inbox"),ho()),t.parentNode.removeChild(t)}))}))}})),!1===(null===(e=document.getElementById("frm_empty_inbox"))||void 0===e?void 0:e.classList.contains("frm_hidden"))&&ho()},solutionInit:function(){jQuery(document).on("submit","#frm-new-template",Qo)},styleInit:function(){var e=jQuery(".frm_image_preview_wrapper");e.on("click",".frm_choose_image_box",xt),e.on("click",".frm_remove_image_option",Et),wp.hooks.doAction("frm_style_editor_init")},customCSSInit:function(){console.warn("Calling frmAdminBuild.customCSSInit is deprecated.")},globalSettingsInit:function(){var e;jQuery(document).on("click","[data-frmuninstall]",Ki),lo(),null!==(e=document.getElementById("licenses_settings"))&&jQuery(e).on("click",".edd_frm_save_license",Ji),jQuery(document).on("click","#frm-new-template button",wo),jQuery("#frm-dismissable-cta .dismiss").on("click",(function(e){e.preventDefault(),jQuery.post(ajaxurl,{action:"frm_lite_settings_upgrade",nonce:frmGlobal.nonce}),jQuery(".settings-lite-cta").remove()}));var t=document.getElementById("frm_re_type");t&&t.addEventListener("change",Eo),document.querySelector(".frm_captchas").addEventListener("change",(function(e){var t,r=null===(t=document.querySelector('.frm_captchas input[checked="checked"]'))||void 0===t?void 0:t.value,n=e.target.value!==r;document.querySelector(".captcha_settings .frm_note_style").classList.toggle("frm_hidden",!n)})),frmDom.util.documentOn("submit",".frm_settings_form",(function(){return E=0}));var r=document.getElementById("manage_styles_settings");r&&r.addEventListener("change",(function(e){var t=e.target;"SELECT"===t.nodeName&&t.dataset.name&&!t.getAttribute("name")&&t.setAttribute("name",t.dataset.name)}));var n=document.getElementById("payments_settings"),i=null==n?void 0:n.querySelectorAll('[name="frm_payment_section"]');i&&i.forEach((function(e){e.addEventListener("change",(function(){if(e.checked){var t=n.querySelector('label[for="'.concat(e.id,'"]'));t&&t.setAttribute("aria-selected","true"),i.forEach((function(t){if(t!==e){var r=n.querySelector('label[for="'.concat(t.id,'"]'));r&&r.setAttribute("aria-selected","false")}}))}}))}))},exportInit:function(){jQuery(".frm_form_importer").on("submit",Yi),jQuery(document.getElementById("frm_export_xml")).on("submit",Zi),jQuery("#frm_export_xml input, #frm_export_xml select").on("change",eo),jQuery('input[name="frm_import_file"]').on("change",to),document.querySelector('select[name="format"]').addEventListener("change",no),jQuery('input[name="frm_export_forms[]"]').on("click",ao),lo(),jQuery(".frm-feature-banner .dismiss").on("click",(function(e){e.preventDefault(),jQuery.post(ajaxurl,{action:"frm_dismiss_migrator",plugin:this.id,nonce:frmGlobal.nonce}),this.parentElement.remove()})),oo(ro()),document.querySelector("#frm-export-select-all").addEventListener("change",(function(e){document.querySelectorAll('[name="frm_export_forms[]"]').forEach((function(t){return t.checked=e.target.checked}))}))},inboxBannerInit:function(){var e=document.getElementById("frm_banner");if(e){var t=e.querySelector(".frm-banner-dismiss");document.addEventListener("click",(function(r){r.target===t&&Bo({action:"frm_inbox_dismiss",key:e.dataset.key,nonce:frmGlobal.nonce},(function(){jQuery(e).fadeOut(400,(function(){e.remove()}))}))}))}},updateOpts:function(e,t,r){var n=pn(e),i=Ho(e)?"frm_bulk_products":"frm_import_options";jQuery.ajax({type:"POST",url:ajaxurl,data:{action:i,field_id:e,opts:t,separate:n,nonce:frmGlobal.nonce},success:function(t){document.getElementById("frm_field_"+e+"_opts").innerHTML=t,wp.hooks.doAction("frm_after_bulk_edit_opts",e),rn(e),void 0!==r&&(r.dialog("close"),document.getElementById("frm-update-bulk-opts").classList.remove("frm_loading_button"))}})},triggerRemoveLogic:function(e,t){jQuery("#frm_logic_"+e+"_"+t+" .frm_remove_tag").trigger("click")},downloadXML:function(e,t,r){var n=ajaxurl+"?action=frm_"+e+"_xml&ids="+t;null!==r&&(n=n+"&is_template="+r),location.href=n},hooks:{applyFilters:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return(t=wp.hooks).applyFilters.apply(t,[e].concat(n))},addFilter:function(e,t,r){return wp.hooks.addFilter(e,"formidable",t,r)},doAction:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return(t=wp.hooks).doAction.apply(t,[e].concat(n))},addAction:function(e,t,r){return wp.hooks.addAction(e,"formidable",t,r)}},applyZebraStriping:function(e,t){var r=document.querySelectorAll("".concat(e," tr").concat(t?":not(.".concat(t,")"):""));if(!(r.length<1)){var n=!0;r.forEach((function(e){e.classList.remove("frm-odd","frm-even"),e.classList.add(n?"frm-odd":"frm-even"),n=!n})),document.querySelectorAll(e).forEach((function(e){return e.classList.add("frm-zebra-striping")}))}},initModal:To,infoModal:H,offsetModalY:Ri,adjustConditionalLogicOptionOrders:on,addRadioCheckboxOpt:ln,installNewForm:xo,toggleAddonState:uo,purifyHtml:mn,loadApiEmailForm:bo,addMyEmailAddress:Ro,fillDropdownOpts:sn,showSaveAndReloadModal:Ni,clearSettingsBox:Ke,deleteField:xr,insertFormField:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r){var n=k,i=0;"summary"===e&&(i=j.children('li[data-type="break"]').length>0?1:0),jQuery.ajax({type:"POST",url:ajaxurl,data:Object.assign(pe(e,0,n,i),{field_options:t}),success:function(t){r(t),setTimeout((function(){Qn(),Ue(t,!0);var r=he(t);r&&wp.hooks.doAction("frm_after_field_added_in_form_builder",{field:t,fieldId:r,fieldType:e,form_id:n})}),10)},error:je})}))},confirmLinkClick:F,handleInsertFieldByDraggingResponse:ye,handleAddFieldClickResponse:Ie,syncLayoutClasses:le}}(),jQuery(document).ready((function(){var e;frmAdminBuild.init(),frmDom.bootstrap.setupBootstrapDropdowns((function(e){var t,r,n=e.querySelector(".frm-dropdown-toggle");n&&(n.hasAttribute("role")||n.setAttribute("role","button"),n.hasAttribute("tabindex")||n.setAttribute("tabindex",0)),"UL"===e.tagName&&(r=(r=(r=(r=(r=(r=(t=e).outerHTML).replace("<ul ","<div ")).replace("</ul>","</div>")).replaceAll("<li>",'<div class="dropdown-item">')).replaceAll('<li class="','<div class="dropdown-item ')).replaceAll("</li>","</div>"),t.outerHTML=r)})),null===(e=document.querySelector(".preview.dropdown .frm-dropdown-toggle"))||void 0===e||e.setAttribute("data-toggle","dropdown")}))})();