(()=>{"use strict";var e=window.frmGlobal,t=(e.url,e.nonce,"frm_hidden"),n="frm_disabled",r=(Promise.resolve(),frmDom),i=(r.div,r.span,r.tag,r.a,r.img,r.svg,frmDom.modal),o=(i.maybeCreateModal,i.footerButton,frmDom.util),a=(o.onClickPreventDefault,o.documentOn);frmDom.ajax.doJsonPost;var l=(new URL(window.location.href).searchParams,function(e){return null==e?void 0:e.classList.remove(t)});function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var d=function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.radioElements=document.querySelectorAll(".frm-style-component.frm-radio-component"),this.observers=new Map,0<this.radioElements.length&&this.init(),document.addEventListener("frm_added_field",function(e){var n=e.frmField;return t.discoverAndInitFieldRadios(n.dataset.fid)}),document.addEventListener("frm_ajax_loaded_field",function(e){return e.frmFields.forEach(function(e){return t.discoverAndInitFieldRadios(e.id)})}),window.addEventListener("beforeunload",function(){return t.cleanupObservers()})},(n=[{key:"init",value:function(){this.initRadio(),this.initTrackerOnAccordionClick()}},{key:"discoverAndInitFieldRadios",value:function(e){var t=document.getElementById("frm-single-settings-".concat(e));if(!t)throw new Error("Field container not found for field ID: ".concat(e));this.radioElements=t.querySelectorAll(".frm-style-component.frm-radio-component"),this.initRadio()}},{key:"initRadio",value:function(){var e=this;this.radioElements.forEach(function(t){e.initOnRadioChange(t),e.initVisibilityObserver(t)})}},{key:"initTrackerOnAccordionClick",value:function(){var e=this;document.querySelectorAll("#frm_style_sidebar .accordion-section h3").forEach(function(t){t.addEventListener("click",function(t){t.target.closest(".accordion-section").querySelectorAll('.frm-style-component.frm-radio-component input[type="radio"]:checked').forEach(function(t){setTimeout(function(){return e.onRadioChange(t)},200)})})})}},{key:"initOnRadioChange",value:function(e){var t=this;e.querySelectorAll('input[type="radio"]').forEach(function(e){e.checked&&t.onRadioChange(e),e.addEventListener("change",function(e){t.onRadioChange(e.target)})})}},{key:"onRadioChange",value:function(e){var t=e.closest(".frm-style-component.frm-radio-component"),n=t.querySelector('input[type="radio"]:checked + label');null!==n&&(this.moveTracker(n,t),this.hideExtraElements(e),this.maybeShowExtraElements(e))}},{key:"maybeShowExtraElements",value:function(e){var t=e.getAttribute("data-frm-show-element");if(null!==t){var n=document.querySelectorAll('div[data-frm-element="'.concat(t,'"]'));0!==n.length&&n.forEach(function(e){l(e),e.classList.add("frm-element-is-visible")})}}},{key:"initVisibilityObserver",value:function(e){var t=this;this.observers.has(e)&&this.observers.get(e).disconnect();var n=new MutationObserver(function(){if(function(e){return"none"!==window.getComputedStyle(e).getPropertyValue("display")}(e)){var n=e.querySelector('input[type="radio"]:checked');n&&t.onRadioChange(n)}});this.observers.set(e,n),n.observe(e,{attributes:!0,attributeFilter:["class","style"]});for(var r=e.parentElement,i=0;i<7&&r;i++)n.observe(r,{attributes:!0,attributeFilter:["class","style"]}),r=r.parentElement}},{key:"cleanupObservers",value:function(){this.observers.forEach(function(e){e.disconnect()}),this.observers.clear()}},{key:"hideExtraElements",value:function(){var e=document.querySelectorAll(".frm-element-is-visible");0!==e.length&&e.forEach(function(e){e.classList.remove("frm-element-is-visible"),e.classList.add(t),function(e){null==e||e.classList.add(t)}(e)})}},{key:"moveTracker",value:function(e,t){var n=e.offsetLeft,r=e.offsetWidth,i=t.querySelector(".frm-radio-active-tracker");i.style.left=0,i.style.width="".concat(r,"px"),i.style.transform="translateX(".concat(n,"px)")}}])&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var h=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.component=t;try{var n=JSON.parse(this.component.dataset.willChange);this.data={propagateInputs:this.initPropagationList(n),changeEvent:new Event("change",{bubbles:!0})}}catch(e){console.error('Error parsing JSON data from "will-change" attribute.',e)}},(t=[{key:"initPropagationList",value:function(e){var t=[];return e.forEach(function(e){var n=document.querySelector('input[name="'.concat(e,'"]'));null!==n&&t.push(n)}),t}},{key:"updateAllDependentElements",value:function(e){this.data.propagateInputs.forEach(function(t){t.value=e}),this.data.propagateInputs[0].dispatchEvent(this.data.changeEvent)}}])&&v(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var b=function(){return e=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loadedByWebComponent=n.length>0,this.sliderElements=n.length>0?n:document.querySelectorAll(".frm-slider-component"),this.settings=r,0!==this.sliderElements.length){this.sliderBulletWidth=16,this.sliderMarginRight=5,this.eventsChange=[];var i=frmDom.util.debounce;this.valueChangeDebouncer=i(function(e){return t.triggerValueChange(e)},25),this.initOptions(),this.init()}},n=[{key:"initOptions",value:function(){var e=this;this.options=[],this.sliderElements.forEach(function(t,n){var r=t.classList.contains("frm-has-multiple-values")?t.closest(".frm-style-component"):t,i=e.settings.steps||(t.dataset.steps?JSON.parse(t.dataset.steps):null);e.options.push({dragging:!1,startX:0,translateX:0,maxValue:parseInt(t.dataset.maxValue,10),element:t,index:n,value:0,steps:i,dependentUpdater:r.classList.contains("frm-style-dependent-updater-component")?new h(r):null})})}},{key:"init",value:function(){this.initDraggable(),this.loadedByWebComponent?this.initSlidersPositionInsideWebComponent():this.initSlidersPosition()}},{key:"initDraggable",value:function(){var e=this;this.sliderElements.forEach(function(t,n){e.eventsChange[n]=new Event("change",{bubbles:!0,cancelable:!0});var r=t.querySelector(".frm-slider-bullet"),i=t.querySelector('.frm-slider-value input[type="text"]');i.addEventListener("change",function(r){var o=t.querySelector("select").value;e.getMaxValue(o,n)<parseInt(r.target.value,10)||(e.initSliderWidth(t),e.options[n].fullValue=e.updateValue(t,i.value+o),e.triggerValueChange(n))}),e.expandSliderGroup(t),e.updateOnUnitChange(t,i,n),e.changeSliderPositionOnClick(t,i,n),e.maybeDisableUnitDropdown(t),r.addEventListener("mousedown",function(r){if(r.preventDefault(),r.stopPropagation(),!t.classList.contains("frm-disabled")){e.enableDragging(r,n);var i=function(t){return e.moveTracker(t,n)},o=function(){e.disableDragging(n),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",o)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",o)}})})}},{key:"expandSliderGroup",value:function(e){var n=e.querySelector(".frmsvg");if(void 0!==e.dataset.displaySliders&&null!==n){var r=this.getSliderGroupItems(e);n.addEventListener("click",function(){r.forEach(function(e){e.classList.toggle(t)})})}}},{key:"updateOnUnitChange",value:function(e,t,n){var r=this;e.querySelector("select").addEventListener("change",function(i){var o=i.target.value.toLowerCase();if(""!==o){if("auto"===o)return e.classList.add("frm-disabled"),r.updateValue(e,"auto"),void r.triggerValueChange(n);e.classList.remove("frm-disabled","frm-empty"),r.options[n].fullValue=t.value+o,r.updateValue(e,r.options[n].fullValue),r.triggerValueChange(n)}else e.classList.add("frm-disabled","frm-empty")})}},{key:"changeSliderPositionOnClick",value:function(e,t,n){var r=this,i=e.querySelector(".frm-slider"),o=new Event("change",{bubbles:!0,cancelable:!0});i.addEventListener("click",function(a){if(!e.classList.contains("frm-disabled")&&(a.preventDefault(),a.stopPropagation(),a.target.classList.contains("frm-slider")||a.target.classList.contains("frm-slider-active-track"))){var l=i.offsetWidth-r.sliderBulletWidth,s=i.getBoundingClientRect(),c=a.clientX-s.left-r.sliderBulletWidth,u=e.querySelector("select").value,d=r.calculateValue(l,c,r.getMaxValue(u,n),r.options[n].steps);d<0||(r.options[n].fullValue=r.updateValue(e,d+u),r.initChildSlidersWidth(e,c,n,d+u),t.value=d,t.dispatchEvent(o))}})}},{key:"maybeDisableUnitDropdown",value:function(e){var t=e.querySelector("select");t&&1>=Array.from(t.options).filter(function(e){return""!==e.value}).length&&(t.classList.add("frm-single-unit"),t.addEventListener("mousedown",function(e){return e.preventDefault()}))}},{key:"getSliderGroupItems",value:function(e){if(void 0===e.dataset.displaySliders)return[];var t=e.dataset.displaySliders.split(",").map(function(e){return'.frm-slider-component[data-type="'.concat(e,'"]')}).join(", ");return e.closest(".frm-style-component").querySelectorAll(t)}},{key:"initSlidersPositionInsideWebComponent",value:function(){var e=this;this.sliderElements.forEach(function(t,n){e.initSliderWidth(t,n)})}},{key:"initSlidersPosition",value:function(){var e=this,t=document.querySelectorAll("#frm_style_sidebar .accordion-section h3"),n=document.querySelector(".frm-quick-settings"),r=document.querySelector(".accordion-section.open");wp.hooks.addAction("frm_pro_on_bg_image_upload","formidable",function(t){var n=t.closest(".accordion-section-content").querySelector("#frm-bg-image-opacity-slider");e.initSlidersWidth(n)}),null!==n&&this.initSlidersWidth(n),null!==r&&this.initSlidersWidth(r),t.forEach(function(t){t.addEventListener("click",function(t){e.initSlidersWidth(t.target.closest(".accordion-section"))})}),this.initSliderPositionOnFieldShapeChange()}},{key:"initSliderPositionOnFieldShapeChange",value:function(){var e=this,t=document.querySelector(".frm-style-component.frm-field-shape");null!==t&&t.querySelectorAll('input[type="radio"]').forEach(function(t){t.addEventListener("change",function(t){if(t.target.checked&&"rounded-corner"===t.target.value){var n=document.querySelector('div[data-frm-element="field-shape-corner-radius"] .frm-slider-component');e.initSliderWidth(n)}})})}},{key:"initSlidersWidth",value:function(e){var t=this;e.querySelectorAll(".frm-slider-component").forEach(function(e){setTimeout(function(){t.initSliderWidth(e)},100)})}},{key:"initSliderWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e.classList.contains("frm-disabled")){var n,r=null!==t?t:this.getSliderIndex(e),i=e.querySelector(".frm-slider").offsetWidth-this.sliderBulletWidth,o=parseInt(e.querySelector('.frm-slider-value input[type="text"]').value,10),a=e.querySelector("select").value,l=this.options[r].steps;n="%"===a?Math.round(i*o/100):l&&l.length>0?this.calculateDeltaXFromSteps(o,l,i):Math.ceil(o/this.options[r].maxValue*i),e.querySelector(".frm-slider-active-track").style.width="".concat(n,"px"),this.options[r].translateX=n,this.options[r].value=o+a}}},{key:"calculateDeltaXFromSteps",value:function(e,t,n){var r=t.indexOf(e);if(-1===r){var i=this.snapToStep(e,t),o=t.indexOf(i);return Math.round(o/(t.length-1)*n)}return Math.round(r/(t.length-1)*n)}},{key:"initChildSlidersWidth",value:function(e,t,n,r){var i=this;(e.classList.contains("frm-has-independent-fields")||e.classList.contains("frm-has-multiple-values"))&&(e.classList.contains("frm-has-independent-fields")?e.querySelectorAll(".frm-independent-slider-field"):this.getSliderGroupItems(e)).forEach(function(e,o){e.querySelector(".frm-slider-active-track").style.width="".concat(t,"px"),i.options[n+o+1].translateX=t,i.options[n+o+1].value=r})}},{key:"getSliderIndex",value:function(e){return this.options.filter(function(t){return t.element===e})[0].index}},{key:"moveTracker",value:function(e,t){if(this.options[t].dragging){var n=e.clientX-this.options[t].startX,r=this.sliderElements[t],i=r.querySelector(".frm-slider").offsetWidth;if(!((n=Math.max(n,0))+this.sliderBulletWidth/2+this.sliderMarginRight>=i)){var o=r.querySelector("select").value,a=this.calculateValue(i,n,this.getMaxValue(o,t),this.options[t].steps);r.querySelector('.frm-slider-value input[type="text"]').value=a,r.querySelector(".frm-slider-bullet .frm-slider-value-label").innerText=a,r.querySelector(".frm-slider-active-track").style.width="".concat(n,"px"),this.initChildSlidersWidth(r,n,t,a+o),this.options[t].translateX=n,this.options[t].value=a+o,this.options[t].fullValue=this.updateValue(r,this.options[t].value),this.valueChangeDebouncer(t)}}}},{key:"getMaxValue",value:function(e,t){return"%"===e?100:this.options[t].maxValue}},{key:"enableDragging",value:function(e,t){e.target.classList.add("frm-dragging"),this.options[t].dragging=!0,this.options[t].startX=e.clientX-this.options[t].translateX}},{key:"disableDragging",value:function(e){!1!==this.options[e].dragging&&(this.sliderElements[e].querySelector(".frm-slider-bullet").classList.remove("frm-dragging"),this.options[e].dragging=!1,this.triggerValueChange(e))}},{key:"triggerValueChange",value:function(e){var t=this;if(null===this.options[e].dependentUpdater){var n=this.sliderElements[e].classList.contains("frm-has-multiple-values")?this.sliderElements[e].closest(".frm-style-component").querySelector('input[type="hidden"]'):this.sliderElements[e].querySelectorAll('.frm-slider-value input[type="hidden"]');n instanceof NodeList?n.forEach(function(n){n.dispatchEvent(t.eventsChange[e])}):n.dispatchEvent(this.eventsChange[e])}else this.options[e].dependentUpdater.updateAllDependentElements(this.options[e].fullValue)}},{key:"calculateValue",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(r&&r.length>0){var i=t/e,o=Math.round(i*(r.length-1));return r[Math.max(0,Math.min(o,r.length-1))]}var a=Math.round(t/e*n);return Math.min(a,n)}},{key:"snapToStep",value:function(e,t){for(var n=t[0],r=Math.abs(e-n),i=1;i<t.length;i++){var o=Math.abs(e-t[i]);o<r&&(r=o,n=t[i])}return n}},{key:"updateValue",value:function(e,t){var n=this;if(e.classList.contains("frm-base-font-size")){var r=document.querySelector('input[name="frm_style_setting[post_content][use_base_font_size]"]');null!==r&&(r.value="true")}if(e.classList.contains("frm-has-multiple-values")){var i=e.closest(".frm-style-component").querySelector('input[type="hidden"]'),o=i.value.split(" "),a=e.dataset.type;switch(o[2]||(o[2]="0px"),o[3]||(o[3]="0px"),a){case"vertical":o[0]=t,o[2]=t;break;case"horizontal":o[1]=t,o[3]=t;break;case"top":o[0]=t;break;case"bottom":o[2]=t;break;case"left":o[3]=t;break;case"right":o[1]=t}var l=o.join(" ");return i.value=l,this.getSliderGroupItems(e).forEach(function(e){var r=n.getUnitMeasureFromValue(t);e.querySelector('.frm-slider-value input[type="text"]').value=parseInt(t,10),e.querySelector("select").value=r}),l}if(e.classList.contains("frm-has-independent-fields")){var s=e.querySelectorAll('.frm-slider-value input[type="hidden"]'),c=e.querySelectorAll('.frm-slider-value input[type="text"]');return s.forEach(function(e,n){e.value=t,c[n+1].value=parseInt(t,10)}),t}return e.querySelector('.frm-slider-value input[type="hidden"]').value=t,t}},{key:"getUnitMeasureFromValue",value:function(e){return["%","px","em"].find(function(t){return e.includes(t)})||""}}],n&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function E(e){var t=function(e){if("object"!=S(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}var w=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0!==t&&(this.wrapper=t instanceof Element?t:document.querySelector(t),null!==this.wrapper&&(this.flexboxSlidesGap="16px",this.navs=this.wrapper.querySelectorAll(".frm-tabs-navs ul > li"),this.slideTrackLine=this.wrapper.querySelector(".frm-tabs-active-underline"),this.slideTrack=this.wrapper.querySelector(".frm-tabs-slide-track"),this.slides=this.wrapper.querySelectorAll(".frm-tabs-slide-track > div"),this.isRTL="rtl"===document.documentElement.dir||"rtl"===document.body.dir,this.resizeObserver=null,this.init()))},(t=[{key:"init",value:function(){var e=this;null!==this.wrapper&&this.navs.length&&null!==this.slideTrackLine&&null!==this.slideTrack&&this.slides.length&&(this.initDefaultSlideTrackerWidth(),this.navs.forEach(function(t,n){t.addEventListener("click",function(t){return e.onNavClick(t,n)})}),this.setupScrollbarObserver(),window.addEventListener("beforeunload",this.cleanupObservers))}},{key:"onNavClick",value:function(e,t){var n=e.currentTarget;e.preventDefault(),this.removeActiveClassnameFromNavs(),n.classList.add("frm-active"),this.initSlideTrackUnderline(n,t),this.changeSlide(t);var r,i,o=n.querySelector("a");o&&"frm_insert_fields_tab"===o.id&&!o.closest("#frm_adv_info")&&(null===(r=window.frmAdminBuild)||void 0===r||null===(i=r.clearSettingsBox)||void 0===i||i.call(r))}},{key:"initDefaultSlideTrackerWidth",value:function(){this.slideTrackLine.dataset.initialWidth&&(this.slideTrackLine.style.width="".concat(this.slideTrackLine.dataset.initialWidth,"px"))}},{key:"initSlideTrackUnderline",value:function(e,t){this.slideTrackLine.classList.remove("frm-first","frm-last");var n=void 0!==e?e:this.navs.filter(function(e){return e.classList.contains("frm-active")});this.positionUnderlineIndicator(n)}},{key:"setupScrollbarObserver",value:function(){var e=this,t=this.wrapper.closest(".frm-scrollbar-wrapper");t&&"ResizeObserver"in window&&(this.resizeObserver=new ResizeObserver(function(){var t=e.wrapper.querySelector(".frm-tabs-navs ul > li.frm-active");t&&e.positionUnderlineIndicator(t)}),this.resizeObserver.observe(t))}},{key:"cleanupObservers",value:function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}},{key:"positionUnderlineIndicator",value:function(e){var t=this;requestAnimationFrame(function(){var n=t.isRTL?-(e.parentElement.offsetWidth-e.offsetLeft-e.offsetWidth):e.offsetLeft;t.slideTrackLine.style.transform="translateX(".concat(n,"px)"),t.slideTrackLine.style.width=e.clientWidth+"px"})}},{key:"changeSlide",value:function(e){this.removeActiveClassnameFromSlides();var t=0==e?"0px":"calc( ( ".concat(100*e,"% + ").concat(parseInt(this.flexboxSlidesGap,10)*e,"px ) * ").concat(this.isRTL?1:-1," )");"0px"!==t?this.slideTrack.style.transform="translateX(".concat(t,")"):this.slideTrack.style.removeProperty("transform"),e in this.slides&&this.slides[e].classList.add("frm-active")}},{key:"removeActiveClassnameFromSlides",value:function(){this.slides.forEach(function(e){return e.classList.remove("frm-active")})}},{key:"removeActiveClassnameFromNavs",value:function(){this.navs.forEach(function(e){return e.classList.remove("frm-active")})}}])&&k(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}function x(e){var t=function(e){if("object"!=L(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==L(t)?t:t+""}var C=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements=document.querySelectorAll(".frm-style-tabs-wrapper"),0<this.elements.length&&this.init()},(t=[{key:"init",value:function(){this.elements.forEach(function(e){new w(e)})}},{key:"initOnTabClick",value:function(e){var t=this;this.initActiveBackgroundWidth(e),e.querySelectorAll(".frm-tab-item").forEach(function(e){e.addEventListener("click",function(e){t.onTabClick(e.target.closest(".frm-tabs-wrapper"))})})}}])&&q(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),A="frm-token-container",O="frm-tokens",T="frm-token",P="frm-token-value",_="frm-token-remove",W="frm-token-proxy-input",D=window.frmDom,V=D.span,I=D.svg,j=D.tag;function M(){document.querySelectorAll(".".concat(A)).forEach(function(e){return R(e.querySelector(".".concat(W)),e.querySelector(".".concat(O)))})}function R(e,t){if(e&&t){var n=t.querySelectorAll(".".concat(T));if(!(n.length>0))return e.style.paddingLeft="",e.style.paddingTop="",void(e.style.height="");var r=t.offsetHeight;if(Math.max(1,Math.ceil(r/36))>1){var i=function(e){if(!e.length)return 0;var t=0;return e.forEach(function(e){t+=e.offsetWidth}),(t+=4*(e.length-1))+4}(function(e){if(!e.length)return[];var t=Array.from(e),n=-1;t.forEach(function(e){var t=e.getBoundingClientRect().bottom;t>n&&(n=t)});return t.filter(function(e){var t=e.getBoundingClientRect();return Math.abs(t.bottom-n)<=2})}(n));e.style.height="".concat(r,"px"),e.style.paddingTop="".concat(r-36+4,"px"),e.style.paddingLeft=i?"".concat(i+8,"px"):""}else e.style.height="",e.style.paddingTop="",e.style.paddingLeft="".concat(t.offsetWidth-4,"px")}}function F(e,t,n){e&&n&&t&&(n.innerHTML="",U(e).forEach(function(e){return function(e,t){var n=V({className:T,children:[V({text:e,className:P}),V({className:_,child:I({href:"#frm_close_icon"})})]});t.append(n)}(e,n)}),R(t,n),t.focus())}function B(e,t,n){if(!e||!t||!n)return!1;var r=U(t.value);return r.includes(e)?(z(n),!1):(r.push(e),N(t,r),z(n),!0)}function X(e,t,n){if(e&&t&&n){var r=e.querySelector(".".concat(P)).textContent;N(t,U(t.value).filter(function(e){return e!==r})),e.remove(),n.focus()}}function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(e=e.trim())?e.split(/\s+/).filter(Boolean):[]}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e&&(e.value=t.join(" "),jQuery(e).trigger("change"))}function z(e){e&&(e.value="",e.focus())}function G(e){var n=(e?document.getElementById("frm-single-settings-".concat(e)):document.body).querySelectorAll(".".concat("frm-token-input-field"));if(n.length){var r=new Set;n.forEach(function(e){r.has(e.id)||(function(e){var n=function(e){var n=e.closest(".".concat("frm-with-right-icon"));if(n.querySelector(".".concat(O)))return null;n.classList.add(A);var r=V({className:O});n.insertBefore(r,n.firstChild);var i=j("input",{className:W,id:"".concat(e.id,"-proxy-input")});return i.type="text",e.parentNode.insertBefore(i,e.nextSibling),e.classList.add(t),n}(e);if(n){var r=n.querySelector(".".concat(W)),i=n.querySelector(".".concat(O));F(e.value,r,i),function(e,t,n){jQuery(e).on("change",function(){return F(e.value,t,n)}),t.addEventListener("keydown",function(r){return function(e,t,n,r){var i=e.key,o=n.value.trim();switch(i){case"Backspace":o||(e.preventDefault(),X(r.querySelector(".".concat(T,":last-child")),t,n));break;case" ":case",":case"Enter":e.preventDefault(),B(o,t,n)}R(n,r)}(r,e,t,n)}),t.addEventListener("blur",function(){return B(t.value.trim(),e,t)}),n.addEventListener("click",function(n){return function(e,t,n){var r=e.target.closest(".".concat(_));if(r){var i=r.closest(".".concat(T));if(i){var o=i.parentElement;X(i,t,n),R(n,o)}}}(n,e,t)})}(e,r,i)}}(e),r.add(e.id))})}}var J,H="frm-toggle-group",Q="frm_toggle_block",K="data-group-name";function Y(e){var t=e.target,n=t.closest(".".concat(H));n&&Z(t,n)}function Z(e,r){var i,o=(null===(i=r.closest(".".concat("frm-single-settings")))||void 0===i?void 0:i.dataset.fid)||r.dataset.fid,a=e.checked,l=e.getAttribute("data-show");l&&document.querySelectorAll($(l,o)).forEach(function(e){return e.classList.toggle(t,!a)});var s=e.getAttribute("data-disable");s&&document.querySelectorAll($(s,o)).forEach(function(e){e.classList.toggle(n,a),e.querySelectorAll("input, select, textarea").forEach(function(e){return e.disabled=a}),e.querySelectorAll(".frm-show-inline-modal[tabindex]").forEach(function(e){return e.tabIndex=a?-1:0})});var c=e.getAttribute("data-enable");c&&document.querySelectorAll($(c,o)).forEach(function(e){return e.classList.toggle(n,!a)});var u=e.closest(".".concat(Q));Array.from(r.querySelectorAll(".".concat(Q))).filter(function(e){return e!==u}).forEach(function(e){e.classList.toggle(n,a);var t=e.querySelector(".frm_toggle");t.tabIndex=a?-1:0,t.setAttribute("aria-disabled",a)})}function $(e,t){return e.replace(/{id}/g,t)}function ee(e){var t=e.target.closest(".frm-unit-input"),n=t.querySelector(".frm-unit-input-control"),r=t.querySelector("select").value;e.target.matches("select")&&(n.type=""===r?"text":"number");var i=n.value.trim();t.querySelector('input[type="hidden"]').value=""!==i?i+r:""}J=function(){var e,t;new d,new b,new C,null===(t=document.getElementById("frm-form-add-field"))||void 0===t||t.addEventListener("click",function(e){var t;e.preventDefault(),null===(t=document.querySelector(".frm-settings-panel .frm-tabs-navs ul > li:first-child"))||void 0===t||t.click()}),G(),document.addEventListener("frm_added_field",function(e){return G(e.frmField.dataset.fid)}),document.addEventListener("frm_ajax_loaded_field",function(e){return e.frmFields.forEach(function(e){return G(e.id)})}),wp.hooks.addAction("frmShowedFieldSettings","formidable-token-input",M),(e=document.querySelectorAll(".".concat(H))).length&&e.forEach(function(e){var t=e.querySelector("[".concat(K,"]:checked"));t&&Z(t,e)}),a("change",".".concat(H," [").concat(K,"]"),Y),a("change",".frm-unit-input .frm-unit-input-control",ee),a("change",".frm-unit-input select",ee)},"undefined"!=typeof document&&("complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",J):J())})();